<html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><title>Crank.js</title><link rel="shortcut icon" href="/static/favicon-eefec412b1f6cade.ico"><style>.css-yop4go{position:relative;width:60px;height:32px;border-radius:16px;border:1px solid var(--text-color);background:transparent;cursor:pointer;padding:0 4px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;font-size:16px;}.css-yop4go:focus{outline:none;border-color:var(--highlight-color);}.css-zj66tk{position:absolute;width:26px;height:26px;border-radius:50%;border:1px solid var(--text-color);background:var(--bg-color);-webkit-transition:left 0.2s;transition:left 0.2s;display:none;}.css-1l1hcps{position:fixed;top:0;left:0;right:0;height:50px;z-index:999;gap:1em;}.css-1n0j5y9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:1em;}.css-1xmwt0h{border-bottom:1px solid var(--text-color);overflow-x:auto;background-color:inherit;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;gap:1em;}.css-1xmwt0h a{-webkit-text-decoration:none;text-decoration:none;font-weight:bold;}@media screen and (min-width: 800px){.css-1xmwt0h{padding:0 2em;}}</style><link rel="stylesheet" type="text/css" href="/static/client-3f2e47bea41770a9.css"><meta name="description" content=""><meta property="og:title" content="Crank.js"><meta property="og:url" content="https:/crank.js.org/playground"><meta property="og:description" content=""><meta property="og:type" content="website"><meta property="og:site_name" content="Crank.js"><meta property="og:image" content="/static/logo-9c727b9c5ba929af.svg"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Crank.js"><meta name="twitter:description" content=""><meta name="twitter:image" content="/static/logo-9c727b9c5ba929af.svg"></head><body><script>(() => { const s = sessionStorage.getItem("color-scheme");
		const scheme = s === "dark" || s === "light" ? s :
			(window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light");
		const isDark = scheme === "dark";
		document.documentElement.dataset.theme = scheme;
		document.documentElement.style.setProperty("--bg-color", isDark ? "#0a0e1f" : "#e7f4f5");
		document.documentElement.style.setProperty("--text-color", isDark ? "#f5f9ff" : "#0a0e1f");
		if (!isDark) document.documentElement.classList.add("color-scheme-light"); })()</script><div id="navbar-root"><nav class="
				blur-background
				css-1l1hcps
				css-1xmwt0h
			"><div class="css-1n0j5y9"><div><a class="css-1n0j5y9" style="gap: 0.3em" href="/"><svg style="flex: none;" fill="none" viewBox="-200 -200 400 400" width="1.9em" height="1.9em" xmlns="http://www.w3.org/2000/svg"><defs><mask id="wedge-mask"><rect x="-200" y="-200" width="400" height="400" fill="white"></rect><path stroke="none" fill="black" d="
							M 0 0
							L 245.74561328669753 172.07293090531383
							L 245.74561328669753 -172.07293090531383
							z
						"></path></mask></defs><g stroke="none" fill="var(--highlight-color)"><path transform="rotate(0)" d="M 149.39 -16.97 M 149.62 -16.98 M 150.29 -17 M 151.42 -16.97 M 153 -16.85 M 155.02 -16.57 M 157.46 -16.1 M 160.32 -15.39 M 163.56 -14.39 M 167.17 -13.06 M 171.11 -11.35 M 175.36 -9.23 M 179.88 -6.66 M 179.88 6.66 M 175.36 9.23 M 171.11 11.35 M 167.17 13.06 M 163.56 14.39 M 160.32 15.39 M 157.46 16.1 M 155.02 16.57 M 153 16.85 M 151.42 16.97 M 150.29 17 M 149.62 16.98 M 149.39 16.97 A 8 8 0 0 0 144.51 41.5 L 144.73 41.57 L 145.36 41.81 L 146.39 42.27 L 147.8 42.99 L 149.56 44.01 L 151.64 45.38 L 154 47.13 L 156.62 49.29 L 159.44 51.9 L 162.43 54.99 L 165.54 58.58 L 168.73 62.69 L 163.64 74.98 L 158.48 75.64 L 153.74 75.97 L 149.44 76.04 L 145.6 75.89 L 142.22 75.57 L 139.31 75.14 L 136.88 74.63 L 134.91 74.11 L 133.4 73.63 L 132.35 73.22 L 131.73 72.95 L 131.53 72.84 A 8 8 0 0 0 117.63 93.64 L 117.8 93.79 L 118.3 94.25 L 119.07 95.07 L 120.1 96.28 L 121.33 97.9 L 122.73 99.96 L 124.24 102.48 L 125.83 105.48 L 127.44 108.97 L 129.02 112.96 L 130.52 117.47 L 131.9 122.49 L 122.49 131.9 L 117.47 130.52 L 112.96 129.02 L 108.97 127.44 L 105.48 125.83 L 102.48 124.24 L 99.96 122.73 L 97.9 121.33 L 96.28 120.1 L 95.07 119.07 L 94.25 118.3 L 93.79 117.8 L 93.64 117.63 A 8 8 0 0 0 72.84 131.53 L 72.95 131.73 L 73.22 132.35 L 73.63 133.4 L 74.11 134.91 L 74.63 136.88 L 75.14 139.31 L 75.57 142.22 L 75.89 145.6 L 76.04 149.44 L 75.97 153.74 L 75.64 158.48 L 74.98 163.64 L 62.69 168.73 L 58.58 165.54 L 54.99 162.43 L 51.9 159.44 L 49.29 156.62 L 47.13 154 L 45.38 151.64 L 44.01 149.56 L 42.99 147.8 L 42.27 146.39 L 41.81 145.36 L 41.57 144.73 L 41.5 144.51 A 8 8 0 0 0 16.97 149.39 L 16.98 149.62 L 17 150.29 L 16.97 151.42 L 16.85 153 L 16.57 155.02 L 16.1 157.46 L 15.39 160.32 L 14.39 163.56 L 13.06 167.17 L 11.35 171.11 L 9.23 175.36 L 6.66 179.88 L -6.66 179.88 L -9.23 175.36 L -11.35 171.11 L -13.06 167.17 L -14.39 163.56 L -15.39 160.32 L -16.1 157.46 L -16.57 155.02 L -16.85 153 L -16.97 151.42 L -17 150.29 L -16.98 149.62 L -16.97 149.39 A 8 8 0 0 0 -41.5 144.51 L -41.57 144.73 L -41.81 145.36 L -42.27 146.39 L -42.99 147.8 L -44.01 149.56 L -45.38 151.64 L -47.13 154 L -49.29 156.62 L -51.9 159.44 L -54.99 162.43 L -58.58 165.54 L -62.69 168.73 L -74.98 163.64 L -75.64 158.48 L -75.97 153.74 L -76.04 149.44 L -75.89 145.6 L -75.57 142.22 L -75.14 139.31 L -74.63 136.88 L -74.11 134.91 L -73.63 133.4 L -73.22 132.35 L -72.95 131.73 L -72.84 131.53 A 8 8 0 0 0 -93.64 117.63 L -93.79 117.8 L -94.25 118.3 L -95.07 119.07 L -96.28 120.1 L -97.9 121.33 L -99.96 122.73 L -102.48 124.24 L -105.48 125.83 L -108.97 127.44 L -112.96 129.02 L -117.47 130.52 L -122.49 131.9 L -131.9 122.49 L -130.52 117.47 L -129.02 112.96 L -127.44 108.97 L -125.83 105.48 L -124.24 102.48 L -122.73 99.96 L -121.33 97.9 L -120.1 96.28 L -119.07 95.07 L -118.3 94.25 L -117.8 93.79 L -117.63 93.64 A 8 8 0 0 0 -131.53 72.84 L -131.73 72.95 L -132.35 73.22 L -133.4 73.63 L -134.91 74.11 L -136.88 74.63 L -139.31 75.14 L -142.22 75.57 L -145.6 75.89 L -149.44 76.04 L -153.74 75.97 L -158.48 75.64 L -163.64 74.98 L -168.73 62.69 L -165.54 58.58 L -162.43 54.99 L -159.44 51.9 L -156.62 49.29 L -154 47.13 L -151.64 45.38 L -149.56 44.01 L -147.8 42.99 L -146.39 42.27 L -145.36 41.81 L -144.73 41.57 L -144.51 41.5 A 8 8 0 0 0 -149.39 16.97 L -149.62 16.98 L -150.29 17 L -151.42 16.97 L -153 16.85 L -155.02 16.57 L -157.46 16.1 L -160.32 15.39 L -163.56 14.39 L -167.17 13.06 L -171.11 11.35 L -175.36 9.23 L -179.88 6.66 L -179.88 -6.66 L -175.36 -9.23 L -171.11 -11.35 L -167.17 -13.06 L -163.56 -14.39 L -160.32 -15.39 L -157.46 -16.1 L -155.02 -16.57 L -153 -16.85 L -151.42 -16.97 L -150.29 -17 L -149.62 -16.98 L -149.39 -16.97 A 8 8 0 0 0 -144.51 -41.5 L -144.73 -41.57 L -145.36 -41.81 L -146.39 -42.27 L -147.8 -42.99 L -149.56 -44.01 L -151.64 -45.38 L -154 -47.13 L -156.62 -49.29 L -159.44 -51.9 L -162.43 -54.99 L -165.54 -58.58 L -168.73 -62.69 L -163.64 -74.98 L -158.48 -75.64 L -153.74 -75.97 L -149.44 -76.04 L -145.6 -75.89 L -142.22 -75.57 L -139.31 -75.14 L -136.88 -74.63 L -134.91 -74.11 L -133.4 -73.63 L -132.35 -73.22 L -131.73 -72.95 L -131.53 -72.84 A 8 8 0 0 0 -117.63 -93.64 L -117.8 -93.79 L -118.3 -94.25 L -119.07 -95.07 L -120.1 -96.28 L -121.33 -97.9 L -122.73 -99.96 L -124.24 -102.48 L -125.83 -105.48 L -127.44 -108.97 L -129.02 -112.96 L -130.52 -117.47 L -131.9 -122.49 L -122.49 -131.9 L -117.47 -130.52 L -112.96 -129.02 L -108.97 -127.44 L -105.48 -125.83 L -102.48 -124.24 L -99.96 -122.73 L -97.9 -121.33 L -96.28 -120.1 L -95.07 -119.07 L -94.25 -118.3 L -93.79 -117.8 L -93.64 -117.63 A 8 8 0 0 0 -72.84 -131.53 L -72.95 -131.73 L -73.22 -132.35 L -73.63 -133.4 L -74.11 -134.91 L -74.63 -136.88 L -75.14 -139.31 L -75.57 -142.22 L -75.89 -145.6 L -76.04 -149.44 L -75.97 -153.74 L -75.64 -158.48 L -74.98 -163.64 L -62.69 -168.73 L -58.58 -165.54 L -54.99 -162.43 L -51.9 -159.44 L -49.29 -156.62 L -47.13 -154 L -45.38 -151.64 L -44.01 -149.56 L -42.99 -147.8 L -42.27 -146.39 L -41.81 -145.36 L -41.57 -144.73 L -41.5 -144.51 A 8 8 0 0 0 -16.97 -149.39 L -16.98 -149.62 L -17 -150.29 L -16.97 -151.42 L -16.85 -153 L -16.57 -155.02 L -16.1 -157.46 L -15.39 -160.32 L -14.39 -163.56 L -13.06 -167.17 L -11.35 -171.11 L -9.23 -175.36 L -6.66 -179.88 L 6.66 -179.88 L 9.23 -175.36 L 11.35 -171.11 L 13.06 -167.17 L 14.39 -163.56 L 15.39 -160.32 L 16.1 -157.46 L 16.57 -155.02 L 16.85 -153 L 16.97 -151.42 L 17 -150.29 L 16.98 -149.62 L 16.97 -149.39 A 8 8 0 0 0 41.5 -144.51 L 41.57 -144.73 L 41.81 -145.36 L 42.27 -146.39 L 42.99 -147.8 L 44.01 -149.56 L 45.38 -151.64 L 47.13 -154 L 49.29 -156.62 L 51.9 -159.44 L 54.99 -162.43 L 58.58 -165.54 L 62.69 -168.73 L 74.98 -163.64 L 75.64 -158.48 L 75.97 -153.74 L 76.04 -149.44 L 75.89 -145.6 L 75.57 -142.22 L 75.14 -139.31 L 74.63 -136.88 L 74.11 -134.91 L 73.63 -133.4 L 73.22 -132.35 L 72.95 -131.73 L 72.84 -131.53 A 8 8 0 0 0 93.64 -117.63 L 93.79 -117.8 L 94.25 -118.3 L 95.07 -119.07 L 96.28 -120.1 L 97.9 -121.33 L 99.96 -122.73 L 102.48 -124.24 L 105.48 -125.83 L 108.97 -127.44 L 112.96 -129.02 L 117.47 -130.52 L 122.49 -131.9 L 131.9 -122.49 L 130.52 -117.47 L 129.02 -112.96 L 127.44 -108.97 L 125.83 -105.48 L 124.24 -102.48 L 122.73 -99.96 L 121.33 -97.9 L 120.1 -96.28 L 119.07 -95.07 L 118.3 -94.25 L 117.8 -93.79 L 117.63 -93.64 A 8 8 0 0 0 131.53 -72.84 L 131.73 -72.95 L 132.35 -73.22 L 133.4 -73.63 L 134.91 -74.11 L 136.88 -74.63 L 139.31 -75.14 L 142.22 -75.57 L 145.6 -75.89 L 149.44 -76.04 L 153.74 -75.97 L 158.48 -75.64 L 163.64 -74.98 L 168.73 -62.69 L 165.54 -58.58 L 162.43 -54.99 L 159.44 -51.9 L 156.62 -49.29 L 154 -47.13 L 151.64 -45.38 L 149.56 -44.01 L 147.8 -42.99 L 146.39 -42.27 L 145.36 -41.81 L 144.73 -41.57 L 144.51 -41.5 A 8 8 0 0 0 149.39 -16.97 L 149.62 -16.98 L 150.29 -17 L 151.42 -16.97 L 153 -16.85 L 155.02 -16.57 L 157.46 -16.1 L 160.32 -15.39 L 163.56 -14.39 L 167.17 -13.06 L 171.11 -11.35 L 175.36 -9.23 L 179.88 -6.66 L 179.88 6.66 L 175.36 9.23 L 171.11 11.35 L 167.17 13.06 L 163.56 14.39 L 160.32 15.39 L 157.46 16.1 L 155.02 16.57 L 153 16.85 L 151.42 16.97 L 150.29 17 L 149.62 16.98 L 149.39 16.97
			  M -110 0
				a 110 110 0 1 0 220 0
				a 110 110 0 1 0 -220 0
			" mask="url(#wedge-mask)" stroke="none" stroke-width="4"></path><circle cx="0" cy="0" r="60" stroke="none"></circle><path d="
						M 0 -28
						L 160 -14
						L 160 14
						L 0 28
						Z
					"></path></g></svg>Crank.js</a></div><div><a href="/guides/getting-started">Guides</a></div><div><a href="/api">API</a></div><div><a href="/blog/">Blog</a></div><div><a href="/playground/" aria-current="page">Playground</a></div></div><div class="css-1n0j5y9"><div><a href="https://github.com/bikeshaving/crank">GitHub</a></div><div><a href="http://npm.im/@b9g/crank">NPM</a></div><button role="switch" aria-label="toggle color scheme" aria-checked="true" class="css-yop4go"><span>ðŸŒ™</span><span>ðŸ’¡</span><span class="css-zj66tk"></span></button></div></nav></div><div id="playground"></div><script data-name="embedded-json-10" id="examples">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['embedded-json-10'] = [{"name":"timer","label":"Timer","code":"import {renderer} from \"@b9g\u002Fcrank\u002Fdom\";\n\nfunction *Timer() {\n  let seconds = 0;\n  const interval = setInterval(() =\u003E this.refresh(() =\u003E seconds++), 1000);\n  for ({} of this) {\n    yield \u003Cdiv\u003E{seconds}\u003C\u002Fdiv\u003E;\n  }\n\n  clearInterval(interval);\n}\n\nrenderer.render(\u003CTimer \u002F\u003E, document.body);"},{"name":"tetris","label":"Tetris","code":"import {jsx} from \"@b9g\u002Fcrank\u002Fstandalone\";\nimport {renderer} from \"@b9g\u002Fcrank\u002Fdom\";\n\n\u002F\u002F tetronimo shapes represented as 2d arrays\ntype Tet = number[][];\nconst tets: Record\u003Cstring, Tet\u003E = {\n  I: [\n    [0, 0, 0, 0],\n    [1, 1, 1, 1],\n    [0, 0, 0, 0],\n    [0, 0, 0, 0],\n  ],\n  O: [\n    [1, 1],\n    [1, 1],\n  ],\n  T: [\n    [0, 1, 0],\n    [1, 1, 1],\n    [0, 0, 0],\n  ],\n  J: [\n    [0, 0, 1],\n    [1, 1, 1],\n    [0, 0, 0],\n  ],\n  L: [\n    [1, 0, 0],\n    [1, 1, 1],\n    [0, 0, 0],\n  ],\n  S: [\n    [0, 1, 1],\n    [1, 1, 0],\n    [0, 0, 0],\n  ],\n  Z: [\n    [1, 1, 0],\n    [0, 1, 1],\n    [0, 0, 0],\n  ],\n};\n\nfunction randomTet() {\n  const tetValues = Array.from(Object.values(tets));\n  return tetValues[Math.floor(Math.random() * tetValues.length)];\n}\n\nfunction transpose(tet: Tet): Tet {\n  return tet.map((row, r) =\u003E row.map((cell, c) =\u003E tet[c][r]));\n}\n\nfunction reflectY(tet: Tet): Tet {\n  return tet.map((row, r) =\u003E row.map((cell, c) =\u003E tet[tet.length - r - 1][c]));\n}\n\n\u002F\u002F TODO: combine rotate90 and rotate270\nfunction rotate90(tet: Tet): Tet {\n  return reflectY(transpose(tet));\n}\n\nfunction rotate270(tet: Tet): Tet {\n  return transpose(reflectY(tet));\n}\n\ninterface Piece {\n  tet: Tet;\n  x: number;\n  y: number;\n}\n\n\u002F\u002F SVG coordinates, so top row is 0 and bottom row is field.length - 1;\ntype Field = number[][];\n\nfunction canFit(piece: Piece, field: Field): boolean {\n  for (const [c, r] of squaresOf(piece)) {\n    if (r \u003C 0) {\n      \u002F\u002F square is above the board\n      return false;\n    } else if (r \u003E= field.length) {\n      \u002F\u002F square is below the board\n      return false;\n    } else if (c \u003C 0) {\n      \u002F\u002F square is left of board\n      return false;\n    } else if (c \u003E= field[0].length) {\n      \u002F\u002F square is right of board\n      return false;\n    } else if (field[r][c]) {\n      \u002F\u002F square is occupied\n      return false;\n    }\n  }\n\n  return true;\n}\n\nfunction squaresOf(piece: Piece): [x: number, y: number][] {\n  const squares = [];\n  for (let r = 0; r \u003C piece.tet.length; r++) {\n    const row = piece.tet[r];\n    for (let c = 0; c \u003C row.length; c++) {\n      const data = row[c];\n      if (data) {\n        squares.push([c + piece.x, r + piece.y]);\n      }\n    }\n  }\n\n  return squares;\n}\n\nfunction createPiece(): Piece {\n  \u002F\u002F TODO: piece sequences\n  return {\n    tet: randomTet(),\n    x: 3,\n    y: 0,\n  };\n}\n\nfunction placePiece(piece: Piece, field: Field) {\n  for (const [c, r] of squaresOf(piece)) {\n    field[r][c] = true;\n  }\n\n  clearFilledRows(field);\n}\n\nfunction clearFilledRows(field: Field) {\n  for (let r = 0; r \u003C field.length; r++) {\n    const row = field[r];\n    if (row.every((d) =\u003E d)) {\n      \u002F\u002F copy previous rows into next rows\n      for (let r1 = r; r1 \u003E 0; r1--) {\n        field[r1] = field[r1 - 1];\n      }\n\n      \u002F\u002F clear the top row\n      field[0] = field[0].map(() =\u003E false);\n    }\n  }\n}\n\nconst UNIT = 20;\nconst WIDTH = 10;\nconst HEIGHT = 24;\n\nfunction Piece({piece}) {\n  \u002F\u002F TODO: colored pieces\n  return jsx`\n    \u003Cg fill=\"red\"\u003E\n      ${squaresOf(piece).map(\n        ([c, r]) =\u003E jsx`\n        \u003Crect\n          width=${UNIT}\n          height=${UNIT}\n          transform=\"translate(${c * UNIT}, ${r * UNIT})\"\n        \u002F\u003E\n      `,\n      )}\n    \u003C\u002Fg\u003E\n  `;\n}\n\nfunction Board({field}) {\n  return field.map((row, r) =\u003E\n    row.map(\n      (data, c) =\u003E jsx`\n      \u003Crect\n        width=${UNIT}\n        height=${UNIT}\n        fill=${data && \"blue\"}\n        x=${c * UNIT}\n        y=${r * UNIT}\n      \u002F\u003E\n    `,\n    ),\n  );\n}\n\nfunction* App() {\n  let currentPiece = createPiece();\n  const field = Array.from(Array(HEIGHT), () =\u003E\n    Array.from(Array(WIDTH), () =\u003E false),\n  );\n\n  const interval = setInterval(() =\u003E {\n    this.refresh(() =\u003E {\n      currentPiece.y++;\n      if (!canFit(currentPiece, field)) {\n        currentPiece.y--;\n        placePiece(currentPiece, field);\n        \u002F\u002F TODO: game over check\n        currentPiece = createPiece();\n      }\n    });\n  }, 1000);\n  this.cleanup(() =\u003E clearInterval(interval));\n\n  const keydown = (ev) =\u003E {\n    this.refresh(() =\u003E {\n      if (ev.key === \"w\") {\n        \u002F\u002F rotate left\n        \u002F\u002F TODO: wall kicks to allow rotations at the edge\n        currentPiece.tet = rotate90(currentPiece.tet);\n        if (!canFit(currentPiece, field)) {\n          currentPiece.tet = rotate270(currentPiece.tet);\n        }\n      } else if (ev.key === \"e\") {\n        \u002F\u002F rotate right\n        \u002F\u002F TODO: wall kicks to allow rotations at the edge\n        currentPiece.tet = rotate270(currentPiece.tet);\n        if (!canFit(currentPiece, field)) {\n          currentPiece.tet = rotate90(currentPiece.tet);\n        }\n      } else if (ev.key === \"a\") {\n        \u002F\u002F move left\n        currentPiece.x--;\n        if (!canFit(currentPiece, field)) {\n          currentPiece.x++;\n        }\n      } else if (ev.key === \"s\") {\n        \u002F\u002F move down\n        currentPiece.y++;\n        if (!canFit(currentPiece, field)) {\n          currentPiece.y--;\n          placePiece(currentPiece, field);\n          currentPiece = createPiece();\n        }\n      } else if (ev.key === \"d\") {\n        \u002F\u002F move right\n        currentPiece.x++;\n        if (!canFit(currentPiece, field)) {\n          currentPiece.x--;\n        }\n      }\n      \u002F\u002F TODO: hard drop\n    });\n  };\n\n  window.addEventListener(\"keydown\", keydown);\n  this.cleanup(() =\u003E window.removeEventListener(\"keydown\", keydown));\n\n  for ({} of this) {\n    \u002F\u002F TODO: game start\u002Fgame over\n    \u002F\u002F TODO: piece placement preview\n    \u002F\u002F TODO: next piece\n    yield jsx`\n      \u003Csvg\n        width=${WIDTH * UNIT}\n        height=${HEIGHT * UNIT}\n        style=\"border: 1px solid currentcolor\"\n        fill=\"transparent\"\n      \u003E\n        \u003C${Board} field=${field} \u002F\u003E\n        \u003C${Piece} piece=${currentPiece} \u002F\u003E\n      \u003C\u002Fsvg\u003E\n    `;\n  }\n}\n\nrenderer.render(jsx`\u003C${App} \u002F\u003E`, document.body);\n"},{"name":"todomvc","label":"Todo MVC","code":"import {renderer} from \"@b9g\u002Fcrank\u002Fdom\";\n\n\u002F\u002F Custom TodoMVC event that bubbles by default\nclass TodoEvent extends CustomEvent {\n  constructor(type, detail = {}) {\n    super(type, {\n      bubbles: true,\n      detail,\n    });\n  }\n}\n\nfunction* Header() {\n  let title = \"\";\n\n  const oninput = (ev) =\u003E {\n    title = ev.target.value;\n  };\n\n  const onkeydown = (ev) =\u003E {\n    if (ev.key === \"Enter\" && title.trim()) {\n      ev.preventDefault();\n      this.dispatchEvent(new TodoEvent(\"todocreate\", {title: title.trim()}));\n      this.refresh(() =\u003E (title = \"\"));\n    }\n  };\n\n  for ({} of this) {\n    yield (\n      \u003Cheader class=\"header\"\u003E\n        \u003Ch1\u003Etodos\u003C\u002Fh1\u003E\n        \u003Cinput\n          class=\"new-todo\"\n          placeholder=\"What needs to be done?\"\n          value={title}\n          oninput={oninput}\n          onkeydown={onkeydown}\n          autofocus\n        \u002F\u003E\n      \u003C\u002Fheader\u003E\n    );\n  }\n}\n\nfunction* TodoItem({todo}) {\n  let editing = false;\n  let editTitle = todo.title;\n\n  const ontoggle = () =\u003E {\n    this.dispatchEvent(\n      new TodoEvent(\"todotoggle\", {\n        id: todo.id,\n        completed: !todo.completed,\n      }),\n    );\n  };\n\n  const ondelete = () =\u003E {\n    this.dispatchEvent(new TodoEvent(\"tododelete\", {id: todo.id}));\n  };\n\n  const onedit = () =\u003E {\n    this.refresh(() =\u003E {\n      editing = true;\n      editTitle = todo.title;\n    });\n  };\n\n  const onsave = () =\u003E {\n    if (editTitle.trim()) {\n      this.dispatchEvent(\n        new TodoEvent(\"todoedit\", {\n          id: todo.id,\n          title: editTitle.trim(),\n        }),\n      );\n    }\n    this.refresh(() =\u003E (editing = false));\n  };\n\n  const oncancel = () =\u003E {\n    this.refresh(() =\u003E {\n      editing = false;\n      editTitle = todo.title;\n    });\n  };\n\n  const onkeydown = (ev) =\u003E {\n    if (ev.key === \"Enter\") {\n      onsave();\n    } else if (ev.key === \"Escape\") {\n      oncancel();\n    }\n  };\n\n  for ({todo} of this) {\n    yield (\n      \u003Cli class={{completed: todo.completed, editing}}\u003E\n        \u003Cdiv class=\"view\"\u003E\n          \u003Cinput\n            class=\"toggle\"\n            type=\"checkbox\"\n            checked={todo.completed}\n            onchange={ontoggle}\n          \u002F\u003E\n          \u003Clabel ondblclick={onedit}\u003E{todo.title}\u003C\u002Flabel\u003E\n          \u003Cbutton class=\"destroy\" onclick={ondelete}\u003E\u003C\u002Fbutton\u003E\n        \u003C\u002Fdiv\u003E\n        {editing && (\n          \u003Cinput\n            class=\"edit\"\n            type=\"text\"\n            value={editTitle}\n            oninput={(ev) =\u003E (editTitle = ev.target.value)}\n            onkeydown={onkeydown}\n            onblur={onsave}\n            autofocus\n          \u002F\u003E\n        )}\n      \u003C\u002Fli\u003E\n    );\n  }\n}\n\nfunction* TodoList({todos, filter}) {\n  for ({todos, filter} of this) {\n    const filteredTodos = todos.filter((todo) =\u003E {\n      if (filter === \"active\") return !todo.completed;\n      if (filter === \"completed\") return todo.completed;\n      return true;\n    });\n\n    yield (\n      \u003Cul class=\"todo-list\"\u003E\n        {filteredTodos.map((todo) =\u003E (\n          \u003CTodoItem key={todo.id} todo={todo} \u002F\u003E\n        ))}\n      \u003C\u002Ful\u003E\n    );\n  }\n}\n\nfunction* Footer({todos, filter}) {\n  const setFilter = (newFilter) =\u003E {\n    this.dispatchEvent(new TodoEvent(\"filterchange\", {filter: newFilter}));\n  };\n\n  const clearCompleted = () =\u003E {\n    this.dispatchEvent(new TodoEvent(\"todoclearcompleted\"));\n  };\n\n  for ({todos, filter} of this) {\n    const activeCount = todos.filter((t) =\u003E !t.completed).length;\n    const completedCount = todos.filter((t) =\u003E t.completed).length;\n\n    yield (\n      \u003Cfooter class=\"footer\"\u003E\n        \u003Cspan class=\"todo-count\"\u003E\n          \u003Cstrong\u003E{activeCount}\u003C\u002Fstrong\u003E item{activeCount !== 1 ? \"s\" : \"\"} left\n        \u003C\u002Fspan\u003E\n        \u003Cul class=\"filters\"\u003E\n          {[\"all\", \"active\", \"completed\"].map((f) =\u003E (\n            \u003Cli key={f}\u003E\n              \u003Ca\n                href=\"javascript:void(0)\"\n                onclick={() =\u003E setFilter(f === \"all\" ? \"\" : f)}\n                class={{selected: filter === (f === \"all\" ? \"\" : f)}}\n              \u003E\n                {f === \"all\" ? \"All\" : f.charAt(0).toUpperCase() + f.slice(1)}\n              \u003C\u002Fa\u003E\n            \u003C\u002Fli\u003E\n          ))}\n        \u003C\u002Ful\u003E\n        {completedCount \u003E 0 && (\n          \u003Cbutton class=\"clear-completed\" onclick={clearCompleted}\u003E\n            Clear completed\n          \u003C\u002Fbutton\u003E\n        )}\n      \u003C\u002Ffooter\u003E\n    );\n  }\n}\n\nfunction* App() {\n  let todos = [];\n  let nextId = 1;\n  let filter = \"\";\n\n  this.addEventListener(\"todocreate\", (ev) =\u003E {\n    this.refresh(() =\u003E {\n      todos.push({\n        id: nextId++,\n        title: ev.detail.title,\n        completed: false,\n      });\n    });\n  });\n\n  this.addEventListener(\"todotoggle\", (ev) =\u003E {\n    this.refresh(() =\u003E {\n      const todo = todos.find((t) =\u003E t.id === ev.detail.id);\n      if (todo) todo.completed = ev.detail.completed;\n    });\n  });\n\n  this.addEventListener(\"todoedit\", (ev) =\u003E {\n    this.refresh(() =\u003E {\n      const todo = todos.find((t) =\u003E t.id === ev.detail.id);\n      if (todo) todo.title = ev.detail.title;\n    });\n  });\n\n  this.addEventListener(\"tododelete\", (ev) =\u003E {\n    this.refresh(() =\u003E {\n      todos = todos.filter((t) =\u003E t.id !== ev.detail.id);\n    });\n  });\n\n  this.addEventListener(\"todoclearcompleted\", () =\u003E {\n    this.refresh(() =\u003E {\n      todos = todos.filter((t) =\u003E !t.completed);\n    });\n  });\n\n  this.addEventListener(\"filterchange\", (ev) =\u003E {\n    this.refresh(() =\u003E {\n      filter = ev.detail.filter;\n    });\n  });\n\n  for ({} of this) {\n    yield (\n      \u003Csection class=\"todoapp\"\u003E\n        \u003CHeader \u002F\u003E\n        {todos.length \u003E 0 && (\n          \u003Csection class=\"main\"\u003E\n            \u003Cinput\n              id=\"toggle-all\"\n              class=\"toggle-all\"\n              type=\"checkbox\"\n              checked={todos.every((t) =\u003E t.completed)}\n              onchange={(e) =\u003E {\n                const completed = e.target.checked;\n                this.refresh(() =\u003E {\n                  todos.forEach((t) =\u003E (t.completed = completed));\n                });\n              }}\n            \u002F\u003E\n            \u003Clabel for=\"toggle-all\"\u003EMark all as complete\u003C\u002Flabel\u003E\n            \u003CTodoList todos={todos} filter={filter} \u002F\u003E\n            \u003CFooter todos={todos} filter={filter} \u002F\u003E\n          \u003C\u002Fsection\u003E\n        )}\n      \u003C\u002Fsection\u003E\n    );\n  }\n}\n\n\u002F\u002F Add TodoMVC CSS\nconst link = document.createElement(\"link\");\nlink.rel = \"stylesheet\";\nlink.href = \"https:\u002F\u002Funpkg.com\u002Ftodomvc-app-css@2.4.2\u002Findex.css\";\n\u002F\u002F remove default stylesheet for playground\ndocument.head.querySelector(\"link\").remove();\ndocument.head.appendChild(link);\nawait new Promise((resolve) =\u003E\n  link.addEventListener(\"load\", () =\u003E resolve(), {once: true}),\n);\n\nrenderer.render(\u003CApp \u002F\u003E, document.body);\n"},{"name":"mathml","label":"MathML","code":"import {renderer} from \"@b9g\u002Fcrank\u002Fdom\";\n\nfunction QuadraticFormula() {\n  return (\n    \u003Cdiv class=\"math-example\"\u003E\n      \u003Ch3\u003EQuadratic Formula\u003C\u002Fh3\u003E\n      \u003Cp\u003EThe solution to axÂ² + bx + c = 0 is:\u003C\u002Fp\u003E\n      \u003Cmath xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1998\u002FMath\u002FMathML\"\u003E\n        \u003Cmrow\u003E\n          \u003Cmi\u003Ex\u003C\u002Fmi\u003E\n          \u003Cmo\u003E=\u003C\u002Fmo\u003E\n          \u003Cmfrac\u003E\n            \u003Cmrow\u003E\n              \u003Cmo\u003Eâˆ’\u003C\u002Fmo\u003E\n              \u003Cmi\u003Eb\u003C\u002Fmi\u003E\n              \u003Cmo\u003EÂ±\u003C\u002Fmo\u003E\n              \u003Cmsqrt\u003E\n                \u003Cmrow\u003E\n                  \u003Cmsup\u003E\n                    \u003Cmi\u003Eb\u003C\u002Fmi\u003E\n                    \u003Cmn\u003E2\u003C\u002Fmn\u003E\n                  \u003C\u002Fmsup\u003E\n                  \u003Cmo\u003Eâˆ’\u003C\u002Fmo\u003E\n                  \u003Cmn\u003E4\u003C\u002Fmn\u003E\n                  \u003Cmi\u003Ea\u003C\u002Fmi\u003E\n                  \u003Cmi\u003Ec\u003C\u002Fmi\u003E\n                \u003C\u002Fmrow\u003E\n              \u003C\u002Fmsqrt\u003E\n            \u003C\u002Fmrow\u003E\n            \u003Cmrow\u003E\n              \u003Cmn\u003E2\u003C\u002Fmn\u003E\n              \u003Cmi\u003Ea\u003C\u002Fmi\u003E\n            \u003C\u002Fmrow\u003E\n          \u003C\u002Fmfrac\u003E\n        \u003C\u002Fmrow\u003E\n      \u003C\u002Fmath\u003E\n    \u003C\u002Fdiv\u003E\n  );\n}\n\nfunction IntegralExample() {\n  return (\n    \u003Cdiv class=\"math-example\"\u003E\n      \u003Ch3\u003EDefinite Integral\u003C\u002Fh3\u003E\n      \u003Cp\u003EThe definite integral of f(x) from a to b:\u003C\u002Fp\u003E\n      \u003Cmath xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1998\u002FMath\u002FMathML\"\u003E\n        \u003Cmrow\u003E\n          \u003Cmsubsup\u003E\n            \u003Cmo\u003Eâˆ«\u003C\u002Fmo\u003E\n            \u003Cmi\u003Ea\u003C\u002Fmi\u003E\n            \u003Cmi\u003Eb\u003C\u002Fmi\u003E\n          \u003C\u002Fmsubsup\u003E\n          \u003Cmi\u003Ef\u003C\u002Fmi\u003E\n          \u003Cmo\u003E(\u003C\u002Fmo\u003E\n          \u003Cmi\u003Ex\u003C\u002Fmi\u003E\n          \u003Cmo\u003E)\u003C\u002Fmo\u003E\n          \u003Cmo\u003Ed\u003C\u002Fmo\u003E\n          \u003Cmi\u003Ex\u003C\u002Fmi\u003E\n          \u003Cmo\u003E=\u003C\u002Fmo\u003E\n          \u003Cmi\u003EF\u003C\u002Fmi\u003E\n          \u003Cmo\u003E(\u003C\u002Fmo\u003E\n          \u003Cmi\u003Eb\u003C\u002Fmi\u003E\n          \u003Cmo\u003E)\u003C\u002Fmo\u003E\n          \u003Cmo\u003Eâˆ’\u003C\u002Fmo\u003E\n          \u003Cmi\u003EF\u003C\u002Fmi\u003E\n          \u003Cmo\u003E(\u003C\u002Fmo\u003E\n          \u003Cmi\u003Ea\u003C\u002Fmi\u003E\n          \u003Cmo\u003E)\u003C\u002Fmo\u003E\n        \u003C\u002Fmrow\u003E\n      \u003C\u002Fmath\u003E\n    \u003C\u002Fdiv\u003E\n  );\n}\n\nfunction MatrixExample() {\n  return (\n    \u003Cdiv class=\"math-example\"\u003E\n      \u003Ch3\u003EMatrix\u003C\u002Fh3\u003E\n      \u003Cp\u003EA 2Ã—2 matrix:\u003C\u002Fp\u003E\n      \u003Cmath xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1998\u002FMath\u002FMathML\"\u003E\n        \u003Cmrow\u003E\n          \u003Cmi\u003EA\u003C\u002Fmi\u003E\n          \u003Cmo\u003E=\u003C\u002Fmo\u003E\n          \u003Cmfenced open=\"[\" close=\"]\"\u003E\n            \u003Cmtable\u003E\n              \u003Cmtr\u003E\n                \u003Cmtd\u003E\n                  \u003Cmi\u003Ea\u003C\u002Fmi\u003E\n                \u003C\u002Fmtd\u003E\n                \u003Cmtd\u003E\n                  \u003Cmi\u003Eb\u003C\u002Fmi\u003E\n                \u003C\u002Fmtd\u003E\n              \u003C\u002Fmtr\u003E\n              \u003Cmtr\u003E\n                \u003Cmtd\u003E\n                  \u003Cmi\u003Ec\u003C\u002Fmi\u003E\n                \u003C\u002Fmtd\u003E\n                \u003Cmtd\u003E\n                  \u003Cmi\u003Ed\u003C\u002Fmi\u003E\n                \u003C\u002Fmtd\u003E\n              \u003C\u002Fmtr\u003E\n            \u003C\u002Fmtable\u003E\n          \u003C\u002Fmfenced\u003E\n        \u003C\u002Fmrow\u003E\n      \u003C\u002Fmath\u003E\n    \u003C\u002Fdiv\u003E\n  );\n}\n\nfunction SummationExample() {\n  return (\n    \u003Cdiv class=\"math-example\"\u003E\n      \u003Ch3\u003ESummation\u003C\u002Fh3\u003E\n      \u003Cp\u003ESum of squares from 1 to n:\u003C\u002Fp\u003E\n      \u003Cmath xmlns=\"http:\u002F\u002Fwww.w3.org\u002F1998\u002FMath\u002FMathML\"\u003E\n        \u003Cmrow\u003E\n          \u003Cmunderover\u003E\n            \u003Cmo\u003Eâˆ‘\u003C\u002Fmo\u003E\n            \u003Cmrow\u003E\n              \u003Cmi\u003Ei\u003C\u002Fmi\u003E\n              \u003Cmo\u003E=\u003C\u002Fmo\u003E\n              \u003Cmn\u003E1\u003C\u002Fmn\u003E\n            \u003C\u002Fmrow\u003E\n            \u003Cmi\u003En\u003C\u002Fmi\u003E\n          \u003C\u002Fmunderover\u003E\n          \u003Cmsup\u003E\n            \u003Cmi\u003Ei\u003C\u002Fmi\u003E\n            \u003Cmn\u003E2\u003C\u002Fmn\u003E\n          \u003C\u002Fmsup\u003E\n          \u003Cmo\u003E=\u003C\u002Fmo\u003E\n          \u003Cmfrac\u003E\n            \u003Cmrow\u003E\n              \u003Cmi\u003En\u003C\u002Fmi\u003E\n              \u003Cmo\u003E(\u003C\u002Fmo\u003E\n              \u003Cmi\u003En\u003C\u002Fmi\u003E\n              \u003Cmo\u003E+\u003C\u002Fmo\u003E\n              \u003Cmn\u003E1\u003C\u002Fmn\u003E\n              \u003Cmo\u003E)\u003C\u002Fmo\u003E\n              \u003Cmo\u003E(\u003C\u002Fmo\u003E\n              \u003Cmn\u003E2\u003C\u002Fmn\u003E\n              \u003Cmi\u003En\u003C\u002Fmi\u003E\n              \u003Cmo\u003E+\u003C\u002Fmo\u003E\n              \u003Cmn\u003E1\u003C\u002Fmn\u003E\n              \u003Cmo\u003E)\u003C\u002Fmo\u003E\n            \u003C\u002Fmrow\u003E\n            \u003Cmn\u003E6\u003C\u002Fmn\u003E\n          \u003C\u002Fmfrac\u003E\n        \u003C\u002Fmrow\u003E\n      \u003C\u002Fmath\u003E\n    \u003C\u002Fdiv\u003E\n  );\n}\n\nconst style = `\n\tbody {\n\t\tfont-family: Arial, sans-serif;\n\t\tmax-width: 800px;\n\t\tmargin: 0 auto;\n\t\tpadding: 20px;\n\t\tline-height: 1.6;\n\t}\n\t.math-example {\n\t\tborder: 1px solid var(--text-color, #ddd);\n\t\tpadding: 20px;\n\t\tmargin: 20px 0;\n\t\tbackground: rgba(128, 128, 128, 0.1);\n\t\tborder-radius: 8px;\n\t}\n\t.math-example h3 {\n\t\tmargin-top: 0;\n\t}\n\tmath {\n\t\tfont-size: 1.2em;\n\t}\n`;\n\nconst app = (\n  \u003Cdiv\u003E\n    \u003Cstyle\u003E{style}\u003C\u002Fstyle\u003E\n    \u003Ch1\u003ECrank MathML Examples\u003C\u002Fh1\u003E\n    \u003Cp\u003E\n      This demonstrates MathML support in Crank.js using native MathML elements\n      with proper namespace support.\n    \u003C\u002Fp\u003E\n    \u003CQuadraticFormula \u002F\u003E\n    \u003CIntegralExample \u002F\u003E\n    \u003CMatrixExample \u002F\u003E\n    \u003CSummationExample \u002F\u003E\n    \u003Cdiv class=\"math-example\"\u003E\n      \u003Ch3\u003EBrowser Support\u003C\u002Fh3\u003E\n      \u003Cp\u003E\n        MathML is natively supported in Firefox, Safari, and Chrome 109+. Older\n        browsers may require polyfills like MathJax.\n      \u003C\u002Fp\u003E\n    \u003C\u002Fdiv\u003E\n  \u003C\u002Fdiv\u003E\n);\n\nrenderer.render(app, document.body);\n"},{"name":"greeting","label":"Hello World","code":"import {renderer} from \"@b9g\u002Fcrank\u002Fdom\";\n\nfunction Greeting({name = \"World\"}) {\n  return \u003Cdiv\u003EHello {name}\u003C\u002Fdiv\u003E;\n}\n\nrenderer.render(\u003CGreeting name=\"Crank\" \u002F\u003E, document.body);\n"},{"name":"hexagonal-minesweeper","label":"Hexagonal Minesweeper","code":"import {jsx} from \"@b9g\u002Fcrank\u002Fstandalone\";\nimport {renderer} from \"@b9g\u002Fcrank\u002Fdom\";\n\nfunction Hexagon({cx = 0, cy = 0, r, ...props}) {\n  if (!r) {\n    return null;\n  }\n\n  const points = [];\n  for (let i = 0, a = 0; i \u003C 6; i++, a += Math.PI \u002F 3) {\n    points.push([cx + Math.cos(a) * r, cy + Math.sin(a) * r]);\n  }\n\n  return jsx`\n    \u003Cpath\n      ...${props}\n      d=\"M ${points.map(([x, y], i) =\u003E `${i \u003E 0 ? \"L\" : \"\"} ${x} ${y}`)} Z\"\n    \u002F\u003E\n  `;\n}\n\nfunction centerCoordsFor(cell, size, rows, cols) {\n  const colSpacing = (size * 3) \u002F 2;\n  const rowSpacing = Math.sqrt(3) * size;\n\n  \u002F\u002F Calculate grid bounds\n  const gridWidth = (cols - 1) * colSpacing;\n  const gridHeight = rows * rowSpacing;\n\n  \u002F\u002F Center offset\n  const offsetX = -gridWidth \u002F 2;\n  const offsetY = -gridHeight \u002F 2;\n\n  return {\n    cx: cell.col * colSpacing + offsetX,\n    cy:\n      cell.row * rowSpacing +\n      (cell.col % 2 === 0 ? 0 : rowSpacing \u002F 2) +\n      offsetY,\n  };\n}\n\nfunction axialCoordsFor(cell) {\n  return {q: cell.col, r: cell.row - Math.floor(cell.col \u002F 2)};\n}\n\nfunction HexagonalGrid({\n  radius = 20,\n  cells,\n  onCellClick,\n  onCellRightClick,\n  rows,\n  cols,\n}) {\n  return cells.map((cell, i) =\u003E {\n    const onclick = (event) =\u003E {\n      event.preventDefault();\n      onCellClick(cell);\n    };\n    const oncontextmenu = (event) =\u003E {\n      event.preventDefault();\n      onCellRightClick(cell);\n    };\n    const {cx, cy} = centerCoordsFor(cell, radius, rows, cols);\n\n    let fill = \"lightgray\";\n    let stroke = \"gray\";\n    if (cell.revealed) {\n      fill = cell.bomb ? \"red\" : \"white\";\n      stroke = cell.bomb ? \"darkred\" : \"dodgerblue\";\n    } else if (cell.flagged) {\n      fill = \"yellow\";\n      stroke = \"orange\";\n    }\n\n    return jsx`\n      \u003C${Hexagon}\n        key=${i}\n        r=${radius}\n        cx=${cx} cy=${cy}\n        fill=${fill} stroke=${stroke}\n        onclick=${onclick}\n        oncontextmenu=${oncontextmenu}\n        style=\"cursor: pointer\"\n      \u002F\u003E\n      \u003Ctext\n        x=${cx} y=${cy}\n        text-anchor=\"middle\" dominant-baseline=\"middle\"\n        fill=\"dodgerblue\"\n        font-size=\"10\"\n        style=\"pointer-events: none\"\n      \u003E${cell.revealed && cell.bombCount && !cell.bomb ? cell.bombCount : \"\"}\u003C\u002Ftext\u003E\n      \u003Ctext\n        x=${cx} y=${cy}\n        text-anchor=\"middle\" dominant-baseline=\"middle\"\n        fill=\"red\"\n        font-size=\"12\"\n        style=\"pointer-events: none\"\n      \u003E${cell.revealed && cell.bomb ? \"ðŸ’£\" : \"\"}\u003C\u002Ftext\u003E\n      \u003Ctext\n        x=${cx} y=${cy}\n        text-anchor=\"middle\" dominant-baseline=\"middle\"\n        fill=\"red\"\n        font-size=\"12\"\n        style=\"pointer-events: none\"\n      \u003E${!cell.revealed && cell.flagged ? \"ðŸš©\" : \"\"}\u003C\u002Ftext\u003E\n    `;\n  });\n}\n\nfunction shuffle(arr) {\n  for (let i = arr.length - 1; i \u003E 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [arr[i], arr[j]] = [arr[j], arr[i]];\n  }\n\n  return arr;\n}\n\nfunction neighborsOf(cell, cells) {\n  const {q, r} = axialCoordsFor(cell);\n  const vectors = [\n    [1, 0],\n    [0, 1],\n    [-1, 1],\n    [-1, 0],\n    [0, -1],\n    [1, -1],\n  ];\n  const axialSet = new Set(vectors.map(([q1, r1]) =\u003E `${q + q1},${r + r1}`));\n  return cells.filter((cell1) =\u003E {\n    const {q, r} = axialCoordsFor(cell1);\n    return axialSet.has(`${q},${r}`);\n  });\n}\n\nfunction* Minesweeper() {\n  const rows = 10;\n  const cols = 15;\n  const bombCount = 25;\n\n  let gameState = \"playing\"; \u002F\u002F \"playing\", \"won\", \"lost\"\n  let firstClick = true;\n  let mouseDown = false;\n\n  const initializeCells = () =\u003E {\n    const cells = [];\n    for (let row = 0; row \u003C rows; row++) {\n      for (let col = 0; col \u003C cols; col++) {\n        cells.push({\n          row,\n          col,\n          bomb: false,\n          bombCount: 0,\n          revealed: false,\n          flagged: false,\n        });\n      }\n    }\n    return cells;\n  };\n\n  let cells = initializeCells();\n\n  const placeBombs = (firstClickCell) =\u003E {\n    \u002F\u002F Don't place bombs on first click or its neighbors\n    const forbidden = new Set([\n      firstClickCell,\n      ...neighborsOf(firstClickCell, cells),\n    ]);\n    const availableCells = cells.filter((cell) =\u003E !forbidden.has(cell));\n\n    for (const cell of shuffle(availableCells.slice()).slice(0, bombCount)) {\n      cell.bomb = true;\n    }\n\n    \u002F\u002F Calculate bomb counts\n    for (const cell of cells) {\n      if (!cell.bomb) {\n        cell.bombCount = neighborsOf(cell, cells).reduce(\n          (count, neighbor) =\u003E count + (neighbor.bomb ? 1 : 0),\n          0,\n        );\n      }\n    }\n  };\n\n  const revealCell = (cell) =\u003E {\n    if (cell.revealed || cell.flagged || gameState !== \"playing\") {\n      return;\n    }\n\n    if (firstClick) {\n      placeBombs(cell);\n      firstClick = false;\n    }\n\n    cell.revealed = true;\n\n    if (cell.bomb) {\n      gameState = \"lost\";\n      \u002F\u002F Reveal all bombs\n      cells.filter((c) =\u003E c.bomb).forEach((c) =\u003E (c.revealed = true));\n      return;\n    }\n\n    \u002F\u002F Auto-reveal empty neighbors\n    if (cell.bombCount === 0) {\n      neighborsOf(cell, cells).forEach((neighbor) =\u003E {\n        if (!neighbor.revealed && !neighbor.flagged) {\n          revealCell(neighbor);\n        }\n      });\n    }\n\n    \u002F\u002F Check win condition\n    const unrevealedNonBombs = cells.filter(\n      (c) =\u003E !c.bomb && !c.revealed,\n    ).length;\n    if (unrevealedNonBombs === 0) {\n      gameState = \"won\";\n    }\n  };\n\n  const toggleFlag = (cell) =\u003E {\n    if (cell.revealed || gameState !== \"playing\") {\n      return;\n    }\n    cell.flagged = !cell.flagged;\n  };\n\n  const resetGame = () =\u003E {\n    cells = initializeCells();\n    gameState = \"playing\";\n    firstClick = true;\n  };\n\n  const handleCellClick = (cell) =\u003E {\n    this.refresh(() =\u003E {\n      revealCell(cell);\n    });\n  };\n\n  const handleCellRightClick = (cell) =\u003E {\n    this.refresh(() =\u003E {\n      toggleFlag(cell);\n    });\n  };\n\n  const handleMouseDown = () =\u003E {\n    if (gameState === \"playing\") {\n      this.refresh(() =\u003E (mouseDown = true));\n    }\n  };\n\n  const handleMouseUp = () =\u003E {\n    this.refresh(() =\u003E (mouseDown = false));\n  };\n\n  const flagCount = () =\u003E cells.filter((c) =\u003E c.flagged).length;\n  const remainingBombs = bombCount - flagCount();\n\n  for ({} of this) {\n    const statusEmoji =\n      gameState === \"won\"\n        ? \"ðŸ˜Ž\"\n        : gameState === \"lost\"\n          ? \"ðŸ˜µ\"\n          : mouseDown\n            ? \"ðŸ˜³\"\n            : \"ðŸ™‚\";\n\n    const statusText =\n      gameState === \"won\"\n        ? \"You Won!\"\n        : gameState === \"lost\"\n          ? \"Game Over!\"\n          : `${remainingBombs} mines`;\n\n    \u002F\u002F Calculate grid bounds for centering\n    const radius = 18;\n    const colSpacing = (radius * 3) \u002F 2;\n    const rowSpacing = Math.sqrt(3) * radius;\n\n    const gridWidth = (cols - 1) * colSpacing + radius * 2;\n    const gridHeight = rows * rowSpacing + radius * 2;\n\n    const padding = 30;\n    const viewBoxWidth = gridWidth + padding * 2;\n    const viewBoxHeight = gridHeight + padding * 2;\n    const viewBoxX = -viewBoxWidth \u002F 2;\n    const viewBoxY = -viewBoxHeight \u002F 2;\n\n    yield jsx`\n      \u003Cdiv style=\"text-align: center; font-family: Arial, sans-serif; height: 100vh; display: flex; flex-direction: column; justify-content: center; align-items: center; background: #f0f0f0; margin: 0; padding: 20px; box-sizing: border-box\"\u003E\n        \u003Cdiv style=\"margin-bottom: 20px; font-size: 24px; font-weight: bold; color: #333\"\u003E\n          Hexagonal Minesweeper\n        \u003C\u002Fdiv\u003E\n        \u003Cdiv style=\"margin-bottom: 10px; font-size: 32px\"\u003E\n          ${statusEmoji}\n        \u003C\u002Fdiv\u003E\n        \u003Cdiv style=\"margin-bottom: 15px; font-size: 16px; color: #666\"\u003E\n          ${statusText}\n        \u003C\u002Fdiv\u003E\n        \u003Cbutton\n          onclick=${() =\u003E this.refresh(() =\u003E resetGame())}\n          style=\"margin-bottom: 20px; padding: 10px 20px; font-size: 16px; cursor: pointer; border: 2px solid #333; background: white; border-radius: 4px\"\n          onmousedown=${handleMouseDown}\n          onmouseup=${handleMouseUp}\n          onmouseleave=${handleMouseUp}\n        \u003E\n          New Game\n        \u003C\u002Fbutton\u003E\n        \u003Cdiv style=\"display: flex; align-items: center; justify-content: center; max-width: 100%\"\u003E\n          \u003Csvg\n            width=\"100%\"\n            height=\"100%\"\n            viewBox=\"${viewBoxX} ${viewBoxY} ${viewBoxWidth} ${viewBoxHeight}\"\n            xmlns=\"http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg\"\n            style=\"border: 3px solid #333; background: white; border-radius: 8px; max-width: 600px; height: 400px\"\n            onmousedown=${handleMouseDown}\n            onmouseup=${handleMouseUp}\n            onmouseleave=${handleMouseUp}\n          \u003E\n            \u003C${HexagonalGrid}\n              cells=${cells}\n              radius=${radius}\n              rows=${rows}\n              cols=${cols}\n              onCellClick=${handleCellClick}\n              onCellRightClick=${handleCellRightClick}\n            \u002F\u003E\n          \u003C\u002Fsvg\u003E\n        \u003C\u002Fdiv\u003E\n        \u003Cdiv style=\"margin-top: 15px; font-size: 14px; color: #888\"\u003E\n          Left click to reveal â€¢ Right click to flag\n        \u003C\u002Fdiv\u003E\n      \u003C\u002Fdiv\u003E\n    `;\n  }\n}\n\nrenderer.render(jsx`\u003C${Minesweeper} \u002F\u003E`, document.body);\n"},{"name":"hackernews","label":"Hacker News","code":"import {Fragment, Raw} from \"@b9g\u002Fcrank\";\nimport {renderer} from \"@b9g\u002Fcrank\u002Fdom\";\n\nfunction* Comment() {\n  let expanded = true;\n  this.addEventListener(\"click\", (ev) =\u003E {\n    if (ev.target.className === \"expand\") {\n      this.refresh(() =\u003E (expanded = !expanded));\n      ev.stopPropagation();\n    }\n  });\n\n  for (const {comment} of this) {\n    yield (\n      \u003Cdiv style=\"margin-left: 20px; border-left: 2px solid #ccc; padding-left: 10px; margin-bottom: 10px;\"\u003E\n        \u003Cp\u003E\n          \u003Cbutton\n            class=\"expand\"\n            style=\"background: none; border: none; cursor: pointer; color: #666;\"\n          \u003E\n            {expanded ? \"[-]\" : \"[+]\"}\n          \u003C\u002Fbutton\u003E{\" \"}\n          \u003Cstrong\u003E{comment.user}\u003C\u002Fstrong\u003E {comment.time_ago}\n        \u003C\u002Fp\u003E\n        \u003Cdiv style={{display: expanded ? \"block\" : \"none\"}}\u003E\n          \u003Cdiv style=\"margin: 10px 0;\"\u003E\n            \u003CRaw value={comment.content} \u002F\u003E\n          \u003C\u002Fdiv\u003E\n          \u003Cdiv\u003E\n            {comment.comments.map((reply) =\u003E (\n              \u003CComment key={reply.id} comment={reply} \u002F\u003E\n            ))}\n          \u003C\u002Fdiv\u003E\n        \u003C\u002Fdiv\u003E\n      \u003C\u002Fdiv\u003E\n    );\n  }\n}\n\nasync function Item({id}) {\n  const result = await fetch(`https:\u002F\u002Fapi.hnpwa.com\u002Fv0\u002Fitem\u002F${id}.json`);\n  const item = await result.json();\n  return (\n    \u003Cdiv style=\"max-width: 800px; margin: 0 auto; padding: 20px;\"\u003E\n      \u003Ca href={item.url} style=\"text-decoration: none; color: #000;\"\u003E\n        \u003Ch1 style=\"margin-bottom: 5px;\"\u003E{item.title}\u003C\u002Fh1\u003E\n      \u003C\u002Fa\u003E\n      \u003Cp style=\"color: #666; margin-bottom: 5px;\"\u003E{item.domain}\u003C\u002Fp\u003E\n      \u003Cp style=\"color: #666; margin-bottom: 20px;\"\u003E\n        submitted by \u003Cstrong\u003E{item.user}\u003C\u002Fstrong\u003E {item.time_ago}\n      \u003C\u002Fp\u003E\n      {item.comments.map((comment) =\u003E (\n        \u003CComment comment={comment} key={comment.id} \u002F\u003E\n      ))}\n    \u003C\u002Fdiv\u003E\n  );\n}\n\nfunction Story({story}) {\n  return (\n    \u003Cli style=\"margin-bottom: 15px; list-style: none;\"\u003E\n      \u003Ca\n        href={story.url}\n        style=\"text-decoration: none; color: #000; font-weight: bold;\"\n      \u003E\n        {story.title}\n      \u003C\u002Fa\u003E{\" \"}\n      \u003Cspan style=\"color: #666;\"\u003E({story.domain})\u003C\u002Fspan\u003E\n      \u003Cp style=\"color: #666; margin: 5px 0 0 0; font-size: 14px;\"\u003E\n        {story.points} points by \u003Cstrong\u003E{story.user}\u003C\u002Fstrong\u003E |{\" \"}\n        {story.time_ago} |\n        \u003Ca\n          href={`#\u002Fitem\u002F${story.id}`}\n          style=\"color: #666; text-decoration: none;\"\n        \u003E\n          {\" \"}\n          {story.comments_count} comments\n        \u003C\u002Fa\u003E\n      \u003C\u002Fp\u003E\n    \u003C\u002Fli\u003E\n  );\n}\n\nfunction Pager({page}) {\n  const prevDisabled = page \u003C= 1;\n  const nextDisabled = page \u003E= 5;\n\n  return (\n    \u003Cdiv style=\"text-align: center; margin: 20px 0; padding: 10px;\"\u003E\n      \u003Ca\n        href={prevDisabled ? \"#\" : `#\u002Ftop\u002F${page - 1}`}\n        style={{\n          color: prevDisabled ? \"#ccc\" : \"#666\",\n          \"text-decoration\": \"none\",\n          \"margin-right\": \"10px\",\n          cursor: prevDisabled ? \"default\" : \"pointer\",\n        }}\n      \u003E\n        Previous\n      \u003C\u002Fa\u003E\n      \u003Cspan\u003E{page}\u002F5\u003C\u002Fspan\u003E\n      \u003Ca\n        href={nextDisabled ? \"#\" : `#\u002Ftop\u002F${page + 1}`}\n        style={{\n          color: nextDisabled ? \"#ccc\" : \"#666\",\n          \"text-decoration\": \"none\",\n          \"margin-left\": \"10px\",\n          cursor: nextDisabled ? \"default\" : \"pointer\",\n        }}\n      \u003E\n        Next\n      \u003C\u002Fa\u003E\n    \u003C\u002Fdiv\u003E\n  );\n}\n\nasync function List({page, start = (page - 1) * 30 + 1}) {\n  const result = await fetch(`https:\u002F\u002Fapi.hnpwa.com\u002Fv0\u002Fnews\u002F${page}.json`);\n  const stories = await result.json();\n  const items = stories.map((story) =\u003E \u003CStory story={story} key={story.id} \u002F\u003E);\n  return (\n    \u003CFragment\u003E\n      \u003CPager page={page} \u002F\u003E\n      \u003Col\n        start={start}\n        style=\"max-width: 800px; margin: 0 auto; padding: 0 20px;\"\n      \u003E\n        {items}\n      \u003C\u002Fol\u003E\n      \u003CPager page={page} \u002F\u003E\n    \u003C\u002FFragment\u003E\n  );\n}\n\nfunction parseHash(hash) {\n  if (hash.startsWith(\"#\u002Fitem\u002F\")) {\n    const id = hash.slice(7);\n    if (id) {\n      return {route: \"item\", id};\n    }\n  } else if (hash.startsWith(\"#\u002Ftop\u002F\")) {\n    const page = parseInt(hash.slice(6)) || 1;\n    if (!Number.isNaN(page)) {\n      return {route: \"top\", page};\n    }\n  }\n}\n\nasync function Loading({wait = 1000}) {\n  await new Promise((resolve) =\u003E setTimeout(resolve, wait));\n  return (\n    \u003Cdiv style=\"text-align: center; padding: 40px; color: #666;\"\u003E\n      Loading...\n    \u003C\u002Fdiv\u003E\n  );\n}\n\nasync function* App() {\n  let data;\n  const route = (ev) =\u003E {\n    const update = () =\u003E {\n      const hash = window.location.hash;\n      data = parseHash(hash);\n      if (data == null) {\n        data = {route: \"top\", page: 1};\n        window.location.hash = \"#\u002Ftop\u002F1\";\n      }\n    };\n\n    if (ev) {\n      this.refresh(update);\n    } else {\n      update();\n    }\n  };\n\n  window.addEventListener(\"hashchange\", route);\n  route();\n\n  for await (const _ of this) {\n    yield \u003CLoading \u002F\u003E;\n    switch (data.route) {\n      case \"item\": {\n        await (yield \u003CItem {...data} \u002F\u003E);\n        break;\n      }\n      case \"top\": {\n        await (yield \u003CList {...data} \u002F\u003E);\n        break;\n      }\n    }\n\n    window.scrollTo(0, 0);\n  }\n\n  window.removeEventListener(\"hashchange\", route);\n}\n\nfunction Navbar() {\n  return (\n    \u003Cnav style=\"background: #ff6600; padding: 10px; margin-bottom: 20px;\"\u003E\n      \u003Cdiv style=\"max-width: 800px; margin: 0 auto; color: white; font-weight: bold;\"\u003E\n        \u003Cspan style=\"color: #ffcc99; margin-right: 10px;\"\u003ECrank News\u003C\u002Fspan\u003E\n        \u003Ca href=\"#\u002Ftop\u002F1\" style=\"color: white; text-decoration: none;\"\u003E\n          Top\n        \u003C\u002Fa\u003E\n      \u003C\u002Fdiv\u003E\n    \u003C\u002Fnav\u003E\n  );\n}\n\nfunction Root() {\n  return (\n    \u003Cdiv style=\"font-family: Arial, sans-serif; line-height: 1.4; background: #f6f6f0; min-height: 100vh;\"\u003E\n      \u003CNavbar \u002F\u003E\n      \u003CApp \u002F\u003E\n    \u003C\u002Fdiv\u003E\n  );\n}\n\nrenderer.render(\u003CRoot \u002F\u003E, document.body);\n"},{"name":"animated-letters","label":"Animated Letters","code":"import {renderer} from \"@b9g\u002Fcrank\u002Fdom\";\n\nfunction shuffle(arr) {\n  for (let i = arr.length - 1; i \u003E 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [arr[i], arr[j]] = [arr[j], arr[i]];\n  }\n  return arr;\n}\n\nfunction getRandomLetters() {\n  const alphabet = [...\"abcdefghijklmnopqrstuvwxyz\"];\n  return shuffle(alphabet)\n    .slice(0, Math.floor(Math.random() * alphabet.length))\n    .sort();\n}\n\nconst style = {\n  position: \"absolute\",\n  top: \"20px\",\n  transition: \"transform 750ms, opacity 750ms\",\n};\n\nfunction deferTransitionStyles(callback) {\n  requestAnimationFrame(() =\u003E {\n    requestAnimationFrame(callback);\n  });\n}\n\nfunction* Letter({letter, index}) {\n  this.after((node) =\u003E {\n    node.style.transform = `translate(${index * 1.1}em, -20px)`;\n    node.style.opacity = 0;\n    deferTransitionStyles(() =\u003E {\n      node.style.transform = `translate(${index * 1.1}em, 0)`;\n      node.style.opacity = 1;\n    });\n  });\n\n  this.cleanup((node) =\u003E {\n    deferTransitionStyles(() =\u003E {\n      node.style.color = \"red\";\n      node.style.transform = `translate(${index * 1.1}em, 20px)`;\n      node.style.opacity = 0;\n    });\n    return new Promise((resolve) =\u003E setTimeout(resolve, 750));\n  });\n\n  yield (\n    \u003Cspan\n      style={{\n        ...style,\n        color: \"green\",\n      }}\n    \u003E\n      {letter}\n    \u003C\u002Fspan\u003E\n  );\n\n  for ({letter, index} of this) {\n    this.after((node) =\u003E {\n      deferTransitionStyles(() =\u003E {\n        node.style.transform = `translate(${index * 1.1}em, 0)`;\n      });\n    });\n\n    yield \u003Cspan style={style}\u003E{letter}\u003C\u002Fspan\u003E;\n  }\n}\n\nfunction* Letters() {\n  const interval = setInterval(() =\u003E this.refresh(), 1500);\n\n  for ({} of this) {\n    yield (\n      \u003Cdiv style=\"height: 40px\"\u003E\n        {getRandomLetters().map((l, i) =\u003E (\n          \u003CLetter key={l} letter={l} index={i} \u002F\u003E\n        ))}\n      \u003C\u002Fdiv\u003E\n    );\n  }\n\n  clearInterval(interval);\n}\n\nrenderer.render(\u003CLetters \u002F\u003E, document.body);\n"},{"name":"xstate-calculator","label":"XState Calculator","code":"\u002F\u002F Based on xstate-vue-calculator:\n\u002F\u002F https:\u002F\u002Fgithub.com\u002FGlutnix\u002Fxstate-vue-calculator\n\u002F\u002F Can't import from \"xstate\":\n\u002F\u002F https:\u002F\u002Fgithub.com\u002Fstatelyai\u002Fxstate\u002Fpull\u002F2318#issuecomment-864795216\nimport {Machine, assign} from \"xstate@4\u002Fdist\u002Fxstate.web.js\";\nimport {Context, createElement} from \"@b9g\u002Fcrank\";\nimport {renderer} from \"@b9g\u002Fcrank\u002Fdom\";\n\nconst not =\n  (fn) =\u003E\n  (...args) =\u003E\n    !fn.apply(null, args);\nconst isZero = (context, event) =\u003E event.key === 0;\nconst isNotZero = not(isZero);\nconst isMinus = (context, event) =\u003E event.operator === \"-\";\nconst isNotMinus = not(isMinus);\nconst divideByZero = (context) =\u003E\n  context.operand2 === \"0.\" && context.operator === \"\u002F\";\nconst notDivideByZero = not(divideByZero);\n\nfunction doMath(operand1, operand2, operator) {\n  switch (operator) {\n    case \"+\":\n      return +operand1 + +operand2;\n    case \"-\":\n      return +operand1 - +operand2;\n    case \"\u002F\":\n      return +operand1 \u002F +operand2;\n    case \"x\":\n      return +operand1 * +operand2;\n    default:\n      return Infinity;\n  }\n}\n\nexport const calcMachine = Machine(\n  {\n    id: \"calcMachine\",\n    context: {\n      display: \"0.\",\n      operand1: null,\n      operand2: null,\n      operator: null,\n    },\n    \u002F\u002F strict: true,\n    on: {\n      CLEAR_EVERYTHING: {\n        target: \".start\",\n        actions: [\"reset\"],\n      },\n    },\n    initial: \"start\",\n    states: {\n      start: {\n        on: {\n          NUMBER: [\n            {\n              cond: \"isZero\",\n              target: \"operand1.zero\",\n              actions: [\"defaultReadout\"],\n            },\n            {\n              cond: \"isNotZero\",\n              target: \"operand1.before_decimal_point\",\n              actions: [\"setReadoutNum\"],\n            },\n          ],\n          OPERATOR: {\n            cond: \"isMinus\",\n            target: \"negative_number\",\n            actions: [\"startNegativeNumber\"],\n          },\n          DECIMAL_POINT: {\n            target: \"operand1.after_decimal_point\",\n            actions: [\"defaultReadout\"],\n          },\n        },\n      },\n      operand1: {\n        on: {\n          OPERATOR: {\n            target: \"operator_entered\",\n            actions: [\"recordOperator\"],\n          },\n          PERCENTAGE: {\n            target: \"result\",\n            actions: [\"storeResultAsOperand2\", \"computePercentage\"],\n          },\n          CLEAR_ENTRY: {\n            target: \"operand1\",\n            actions: [\"defaultReadout\"],\n          },\n        },\n        initial: \"zero\",\n        states: {\n          zero: {\n            on: {\n              NUMBER: {\n                target: \"before_decimal_point\",\n                actions: [\"setReadoutNum\"],\n              },\n              DECIMAL_POINT: \"after_decimal_point\",\n            },\n          },\n          before_decimal_point: {\n            on: {\n              NUMBER: {\n                target: \"before_decimal_point\",\n                actions: [\"appendNumBeforeDecimal\"],\n              },\n              DECIMAL_POINT: \"after_decimal_point\",\n            },\n          },\n          after_decimal_point: {\n            on: {\n              NUMBER: {\n                target: \"after_decimal_point\",\n                actions: [\"appendNumAfterDecimal\"],\n              },\n            },\n          },\n        },\n      },\n      negative_number: {\n        on: {\n          NUMBER: [\n            {\n              cond: \"isZero\",\n              target: \"operand1.zero\",\n              actions: [\"defaultNegativeReadout\"],\n            },\n            {\n              cond: \"isNotZero\",\n              target: \"operand1.before_decimal_point\",\n              actions: [\"setNegativeReadoutNum\"],\n            },\n          ],\n          DECIMAL_POINT: {\n            target: \"operand1.after_decimal_point\",\n            actions: [\"defaultNegativeReadout\"],\n          },\n          CLEAR_ENTRY: {\n            target: \"start\",\n            actions: [\"defaultReadout\"],\n          },\n        },\n      },\n      operator_entered: {\n        on: {\n          OPERATOR: [\n            {\n              cond: \"isNotMinus\",\n              target: \"operator_entered\",\n              actions: [\"setOperator\"],\n            },\n            {\n              cond: \"isMinus\",\n              target: \"negative_number_2\",\n              actions: [\"startNegativeNumber\"],\n            },\n          ],\n          NUMBER: [\n            {\n              cond: \"isZero\",\n              target: \"operand2.zero\",\n              actions: [\"defaultReadout\"],\n            },\n            {\n              cond: \"isNotZero\",\n              target: \"operand2.before_decimal_point\",\n              actions: [\"setReadoutNum\"],\n            },\n          ],\n          DECIMAL_POINT: {\n            target: \"operand2.after_decimal_point\",\n            actions: [\"defaultReadout\"],\n          },\n        },\n      },\n      operand2: {\n        on: {\n          OPERATOR: {\n            target: \"operator_entered\",\n            actions: [\n              \"storeResultAsOperand2\",\n              \"compute\",\n              \"storeResultAsOperand1\",\n              \"setOperator\",\n            ],\n          },\n          EQUALS: [\n            {\n              cond: \"notDivideByZero\",\n              target: \"result\",\n              actions: [\"storeResultAsOperand2\", \"compute\"],\n            },\n            {target: \"alert\", actions: [\"divideByZeroAlert\"]},\n          ],\n          CLEAR_ENTRY: {\n            target: \"operand2\",\n            actions: [\"defaultReadout\"],\n          },\n        },\n        initial: \"hist\",\n        states: {\n          hist: {\n            type: \"history\",\n            target: \"zero\",\n          },\n          zero: {\n            on: {\n              NUMBER: {\n                target: \"before_decimal_point\",\n                actions: [\"setReadoutNum\"],\n              },\n              DECIMAL_POINT: \"after_decimal_point\",\n            },\n          },\n          before_decimal_point: {\n            on: {\n              NUMBER: {\n                target: \"before_decimal_point\",\n                actions: [\"appendNumBeforeDecimal\"],\n              },\n              DECIMAL_POINT: \"after_decimal_point\",\n            },\n          },\n          after_decimal_point: {\n            on: {\n              NUMBER: {\n                target: \"after_decimal_point\",\n                actions: [\"appendNumAfterDecimal\"],\n              },\n            },\n          },\n        },\n      },\n      negative_number_2: {\n        on: {\n          NUMBER: [\n            {\n              cond: \"isZero\",\n              target: \"operand2.zero\",\n              actions: [\"defaultNegativeReadout\"],\n            },\n            {\n              cond: \"isNotZero\",\n              target: \"operand2.before_decimal_point\",\n              actions: [\"setNegativeReadoutNum\"],\n            },\n          ],\n          DECIMAL_POINT: {\n            target: \"operand2.after_decimal_point\",\n            actions: [\"defaultNegativeReadout\"],\n          },\n          CLEAR_ENTRY: {\n            target: \"operator_entered\",\n            actions: [\"defaultReadout\"],\n          },\n        },\n      },\n      result: {\n        on: {\n          NUMBER: [\n            {\n              cond: \"isZero\",\n              target: \"operand1\",\n              actions: [\"defaultReadout\"],\n            },\n            {\n              cond: \"isNotZero\",\n              target: \"operand1.before_decimal_point\",\n              actions: [\"setReadoutNum\"],\n            },\n          ],\n          PERCENTAGE: {\n            target: \"result\",\n            actions: [\"storeResultAsOperand2\", \"computePercentage\"],\n          },\n          OPERATOR: {\n            target: \"operator_entered\",\n            actions: [\"storeResultAsOperand1\", \"recordOperator\"],\n          },\n          CLEAR_ENTRY: {\n            target: \"start\",\n            actions: [\"defaultReadout\"],\n          },\n        },\n      },\n      alert: {\n        on: {\n          OK: \"operand2.hist\",\n        },\n      },\n    },\n  },\n  {\n    guards: {\n      isMinus,\n      isNotMinus,\n      isZero,\n      isNotZero,\n      notDivideByZero,\n    },\n    actions: {\n      defaultReadout: assign({\n        display: () =\u003E \"0.\",\n      }),\n\n      defaultNegativeReadout: assign({\n        display: () =\u003E \"-0.\",\n      }),\n\n      appendNumBeforeDecimal: assign({\n        display: (context, event) =\u003E\n          context.display.slice(0, -1) + event.key + \".\",\n      }),\n\n      appendNumAfterDecimal: assign({\n        display: (context, event) =\u003E context.display + event.key,\n      }),\n\n      setReadoutNum: assign({\n        display: (context, event) =\u003E event.key + \".\",\n      }),\n\n      setNegativeReadoutNum: assign({\n        display: (context, event) =\u003E \"-\" + event.key + \".\",\n      }),\n\n      startNegativeNumber: assign({\n        display: () =\u003E \"-\",\n      }),\n\n      recordOperator: assign({\n        operand1: (context) =\u003E context.display,\n        operator: (_, event) =\u003E event.operator,\n      }),\n\n      setOperator: assign({\n        operator: ({operator}) =\u003E operator,\n      }),\n\n      computePercentage: assign({\n        display: (context) =\u003E context.display \u002F 100,\n      }),\n\n      compute: assign({\n        display: ({operand1, operand2, operator}) =\u003E\n          doMath(operand1, operand2, operator),\n      }),\n\n      storeResultAsOperand1: assign({\n        operand1: (context) =\u003E context.display,\n      }),\n\n      storeResultAsOperand2: assign({\n        operand2: (context) =\u003E context.display,\n      }),\n\n      divideByZeroAlert() {\n        \u002F\u002F have to put the alert in setTimeout because action is executed on event, before the transition to next state happens\n        \u002F\u002F this alert is supposed to happend on transition\n        \u002F\u002F setTimeout allows time for other state transition (to 'alert' state) to happen before showing the alert\n        \u002F\u002F probably a better way to do it. like entry or exit actions\n        setTimeout(() =\u003E {\n          alert(\"Cannot divide by zero!\");\n          this.transition(\"OK\");\n        }, 0);\n      },\n\n      reset: assign({\n        display: () =\u003E \"0.\",\n        operand1: () =\u003E null,\n        operand2: () =\u003E null,\n        operator: () =\u003E null,\n      }),\n    },\n  },\n);\n\nconst buttonLabels = [\n  \"C\",\n  \"CE\",\n  \"\u002F\",\n  \"7\",\n  \"8\",\n  \"9\",\n  \"x\",\n  \"4\",\n  \"5\",\n  \"6\",\n  \"-\",\n  \"1\",\n  \"2\",\n  \"3\",\n  \"+\",\n  \"0\",\n  \".\",\n  \"=\",\n  \"%\",\n];\n\nfunction isOperator(label: string): boolean {\n  return \"+-x\u002F\".indexOf(label) \u003E -1;\n}\n\nfunction buttonDescription(label: string): string {\n  if (Number.isInteger(+label)) return `NUMBER ${label}`;\n  if (isOperator(label)) return `OPERATOR ${label}`;\n  if (label === \"C\") return \"CLEAR_EVERYTHING\";\n  if (label === \"CE\") return \"CLEAR_ENTRY\";\n  if (label === \".\") return \"DECIMAL_POINT\";\n  if (label === \"%\") return \"PERCENTAGE\";\n  if (label === \"=\") return \"EQUALS\";\n  return \"\";\n}\n\nfunction* Calculator(this: Context) {\n  let state = calcMachine.initialState;\n  this.addEventListener(\"click\", (el) =\u003E {\n    if ((el.target as Element).tagName === \"BUTTON\") {\n      \u002F\u002F TODO: could this be abstracted somehow :-)\n      const label = (el.target as Element).textContent!;\n      this.refresh(() =\u003E {\n        if (Number.isInteger(+label)) {\n          state = calcMachine.transition(state, {type: \"NUMBER\", key: +label});\n        } else if (isOperator(label)) {\n          state = calcMachine.transition(state, {\n            type: \"OPERATOR\",\n            operator: label,\n          });\n        } else if (label === \"C\") {\n          state = calcMachine.transition(state, {type: \"CLEAR_EVERYTHING\"});\n        } else if (label === \".\") {\n          state = calcMachine.transition(state, {type: \"DECIMAL_POINT\"});\n        } else if (label === \"=\") {\n          state = calcMachine.transition(state, {type: \"EQUALS\"});\n        } else if (label === \"%\") {\n          state = calcMachine.transition(state, {type: \"PERCENTAGE\"});\n        } else if (label === \"CE\") {\n          state = calcMachine.transition(state, {type: \"CLEAR_ENTRY\"});\n        }\n      });\n    }\n  });\n\n  for ({} of this) {\n    yield (\n      \u003Cdiv id=\"app\"\u003E\n        \u003Cdiv class=\"container\"\u003E\n          \u003Cinput class=\"readout\" disabled value={state.context.display} \u002F\u003E\n          \u003Cdiv class=\"button-grid\"\u003E\n            {buttonLabels.map((b) =\u003E (\n              \u003Cbutton\n                class={\"calc-button\" + (b === \"C\" ? \" two-span\" : \"\")}\n                title={buttonDescription(b)}\n              \u003E\n                {b}\n              \u003C\u002Fbutton\u003E\n            ))}\n          \u003C\u002Fdiv\u003E\n        \u003C\u002Fdiv\u003E\n        {\u002F* Uncomment to debug\n        \u003Cdiv class=\"debug\"\u003E\n          \u003Clabel\u003EState:\u003C\u002Flabel\u003E\n          \u003Cpre\u003E\n            \u003Ccode\u003E{JSON.stringify(state.value, null, 2)}\u003C\u002Fcode\u003E\n          \u003C\u002Fpre\u003E\n          \u003Clabel\u003EContext:\u003C\u002Flabel\u003E\n          \u003Cpre\u003E\n            \u003Ccode\u003E{JSON.stringify(state.context, null, 2)}\u003C\u002Fcode\u003E\n          \u003C\u002Fpre\u003E\n        \u003C\u002Fdiv\u003E\n        *\u002F}\n      \u003C\u002Fdiv\u003E\n    );\n  }\n}\n\nconst style = document.createElement(\"style\");\nstyle.textContent = `\n.container {\n  max-width: 300px;\n  margin: 0 auto;\n  border: 2px solid gray;\n  border-radius: 4px;\n  box-sizing: border-box;\n}\n.readout {\n  font-size: 32px;\n  color: #333;\n  text-align: right;\n  padding: 5px 13px;\n  width: 100%;\n  border: none;\n  border-bottom: 1px solid gray;\n  box-sizing: border-box;\n}\n.button-grid {\n  display: grid;\n  padding: 20px;\n  grid-template-columns: repeat(4, 1fr);\n  grid-gap: 15px;\n}\n.calc-button {\n  padding: 10px;\n  font-size: 22px;\n  color: #eee;\n  background: rgba(0, 0, 0, 0.5);\n  cursor: pointer;\n  border-radius: 2px;\n  border: 0;\n  outline: none;\n  opacity: 0.8;\n  transition: opacity 0.2s ease-in-out;\n}\n.calc-button:hover {\n  opacity: 1;\n}\n.calc-button:active {\n  background: #999;\n  box-shadow: inset 0 1px 4px rgba(0, 0, 0, 0.6);\n}\n.two-span {\n  grid-column: span 2;\n  background-color: #3572db;\n}\n`;\ndocument.head.appendChild(style);\n\nrenderer.render(\u003CCalculator \u002F\u003E, document.body);\n"},{"name":"password-strength","label":"Password Strength","code":"import {renderer} from \"@b9g\u002Fcrank\u002Fdom\";\n\n\u002F\u002F Adapted from https:\u002F\u002Fbackbonenotbad.hyperclay.com\u002F\n\u002F\u002F https:\u002F\u002Fgist.github.com\u002Fpanphora\u002F8f4d620ae92e8b28dcb4f20152185749\nfunction* PasswordStrength() {\n  const requirements = [\n    {label: \"8+ characters\", check: (pwd) =\u003E pwd.length \u003E= 8},\n    {label: \"12+ characters\", check: (pwd) =\u003E pwd.length \u003E= 12},\n    {label: \"Lowercase letter\", check: (pwd) =\u003E \u002F[a-z]\u002F.test(pwd)},\n    {label: \"Uppercase letter\", check: (pwd) =\u003E \u002F[A-Z]\u002F.test(pwd)},\n    {label: \"Number\", check: (pwd) =\u003E \u002F\\d\u002F.test(pwd)},\n    {label: \"Special character\", check: (pwd) =\u003E \u002F[^a-zA-Z0-9]\u002F.test(pwd)},\n  ];\n\n  let password = \"\";\n\n  for ({} of this) {\n    yield (\n      \u003Cdiv class=\"w-80 p-6 bg-white rounded-xl shadow-lg space-y-4\"\u003E\n        \u003Cinput\n          type=\"password\"\n          value={password}\n          oninput={(e) =\u003E this.refresh(() =\u003E (password = e.target.value))}\n          placeholder=\"Enter password\"\n          class=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2\"\n        \u002F\u003E\n        \u003Cdiv class=\"space-y-2\"\u003E\n          {requirements.map((req, idx) =\u003E {\n            const isMet = req.check(password);\n            return (\n              \u003Cdiv key={idx} class=\"flex items-center gap-2\"\u003E\n                \u003Cdiv\n                  class={`w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold ${isMet ? \"bg-green-500 text-white\" : \"bg-gray-200 text-gray-400\"}`}\n                \u003E\n                  {isMet ? \"âœ“\" : \"\"}\n                \u003C\u002Fdiv\u003E\n                \u003Cspan\n                  class={`text-sm ${isMet ? \"text-green-600 font-medium\" : \"text-gray-500\"}`}\n                \u003E\n                  {req.label}\n                \u003C\u002Fspan\u003E\n              \u003C\u002Fdiv\u003E\n            );\n          })}\n        \u003C\u002Fdiv\u003E\n      \u003C\u002Fdiv\u003E\n    );\n  }\n}\n\nconst script = document.createElement(\"script\");\nscript.src = \"https:\u002F\u002Fcdn.tailwindcss.com\";\ndocument.head.appendChild(script);\nawait new Promise((resolve) =\u003E\n  script.addEventListener(\"load\", () =\u003E resolve(), {once: true}),\n);\nrenderer.render(\u003CPasswordStrength \u002F\u003E, document.body);\n"},{"name":"wizard","label":"Form Wizard","code":"import {renderer} from \"@b9g\u002Fcrank\u002Fdom\";\n\nfunction* Wizard() {\n  let step = 0;\n  const formData = new FormData();\n  this.addEventListener(\"submit\", (ev) =\u003E {\n    const isValid = ev.target.reportValidity();\n    if (isValid) {\n      ev.preventDefault();\n      const data = new FormData(ev.target);\n      for (const [key, value] of data) {\n        formData.append(key, value);\n      }\n\n      \u002F\u002F Code to handle form submission\n      this.refresh(() =\u003E step++);\n    }\n  });\n\n  for ({} of this) {\n    yield (\n      \u003Cform key={step}\u003E\n        {step === 0 ? (\n          \u003C\u003E\n            \u003Clabel for=\"name\"\u003EName:\u003C\u002Flabel\u003E\n            \u003Cbr \u002F\u003E\n            \u003Cinput name=\"name\" type=\"text\" required \u002F\u003E\n            \u003Cbr \u002F\u003E\n            \u003Clabel for=\"email\"\u003EEmail:\u003C\u002Flabel\u003E\n            \u003Cbr \u002F\u003E\n            \u003Cinput name=\"email\" type=\"email\" required \u002F\u003E\n            \u003Cbr \u002F\u003E\n            \u003Cbr \u002F\u003E\n            \u003Cbutton type=\"submit\"\u003ENext\u003C\u002Fbutton\u003E\n          \u003C\u002F\u003E\n        ) : step === 1 ? (\n          \u003C\u003E\n            \u003Clabel for=\"profile\"\u003EProfile:\u003C\u002Flabel\u003E\n            \u003Cbr \u002F\u003E\n            \u003Ctextarea name=\"profile\" required \u002F\u003E\n            \u003Cbr \u002F\u003E\n            \u003Clabel for=\"avatar\"\u003EAvatar:\u003C\u002Flabel\u003E\n            \u003Cbr \u002F\u003E\n            \u003Cinput name=\"avatar\" type=\"file\" \u002F\u003E\n            \u003Cbr \u002F\u003E\n            \u003Cbr \u002F\u003E\n            \u003Cbutton type=\"submit\"\u003ESubmit\u003C\u002Fbutton\u003E\n          \u003C\u002F\u003E\n        ) : (\n          \u003Cpre\u003E{JSON.stringify(Object.fromEntries(formData), null, 2)}\u003C\u002Fpre\u003E\n        )}\n      \u003C\u002Fform\u003E\n    );\n  }\n}\n\nrenderer.render(\u003CWizard \u002F\u003E, document.body);\n"}];
		</script><script type="module" src="/static/playground-dbe04b8aca292ff9.js"></script><script data-name="embedded-json-11" id="static-urls">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['embedded-json-11'] = {"client.css":"\u002Fstatic\u002Fclient-3f2e47bea41770a9.css","@b9g\u002Fcrank":"\u002Fstatic\u002Findex-f24db9ec1faf2d79.js","@b9g\u002Fcrank\u002Fasync":"\u002Fstatic\u002Fasync-3db978e65c84a55b.js","@b9g\u002Fcrank\u002Fdom":"\u002Fstatic\u002Fdom-99d3b4d2ff92e9df.js","@b9g\u002Fcrank\u002Fevent-target":"\u002Fstatic\u002Fevent-target-2c01c58f7606eeb9.js","@b9g\u002Fcrank\u002Fhtml":"\u002Fstatic\u002Fhtml-1bd751aee7ae1a45.js","@b9g\u002Fcrank\u002Fjsx-dev-runtime":"\u002Fstatic\u002Fjsx-dev-runtime-ecbadb89fa15c845.js","@b9g\u002Fcrank\u002Fjsx-runtime":"\u002Fstatic\u002Fjsx-runtime-ecbadb89fa15c845.js","@b9g\u002Fcrank\u002Fjsx-tag":"\u002Fstatic\u002Fjsx-tag-25a058368a652f33.js","@b9g\u002Fcrank\u002Fstandalone":"\u002Fstatic\u002Fstandalone-cd454af9ce80e4d8.js"};
		</script><script type="module" src="/static/navbar-aea88ca83ee67433.js"></script><script type="module" src="/static/code-blocks-c9c2922d0b681baa.js"></script><script type="module" src="/static/search-af0b57d15b236bc4.js"></script><script type="module" src="/static/gear-084fda2bdc02011d.js"></script></body></html>