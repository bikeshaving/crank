<html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><title>Crank.js | Why Be Reactive?</title><link rel="shortcut icon" href="/static/favicon-eefec412b1f6cade.ico"><style>.css-yop4go{position:relative;width:60px;height:32px;border-radius:16px;border:1px solid var(--text-color);background:transparent;cursor:pointer;padding:0 4px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;font-size:16px;}.css-yop4go:focus{outline:none;border-color:var(--highlight-color);}.css-zj66tk{position:absolute;width:26px;height:26px;border-radius:50%;border:1px solid var(--text-color);background:var(--bg-color);-webkit-transition:left 0.2s;transition:left 0.2s;display:none;}.css-1l1hcps{position:fixed;top:0;left:0;right:0;height:50px;z-index:999;gap:1em;}.css-1n0j5y9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:1em;}.css-1xmwt0h{border-bottom:1px solid var(--text-color);overflow-x:auto;background-color:inherit;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;gap:1em;}.css-1xmwt0h a{-webkit-text-decoration:none;text-decoration:none;font-weight:bold;}@media screen and (min-width: 800px){.css-1xmwt0h{padding:0 2em;}}.css-1nd56js{background-color:var(--bg-color);border-top:1px solid var(--text-color);padding:2em;text-align:center;font-size:14px;}.css-nf2n4z{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;gap:2em;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-bottom:1em;}.css-1st8n6b{margin:0;color:var(--text-color);opacity:0.7;}.css-1cvb758{max-width:calc(100% - 1px);}.css-1xzghkg{position:absolute;top:0.5em;right:0.5em;z-index:10;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:8px;}.css-x8uxd2{position:relative;width:48px;height:24px;border-radius:12px;border:1px solid var(--text-color);background:transparent;cursor:pointer;padding:0 4px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;font-size:10px;font-family:monospace;opacity:0.7;-webkit-transition:opacity 0.2s;transition:opacity 0.2s;}.css-x8uxd2:hover{opacity:1;}.css-x8uxd2:focus{outline:none;opacity:1;}.css-1rbk3h3{position:absolute;width:22px;height:22px;border-radius:11px;border:1px solid var(--text-color);background:var(--bg-color);-webkit-transition:left 0.2s;transition:left 0.2s;}.css-1y5ulpa{height:24px;padding:0 8px;border-radius:4px;border:1px solid var(--text-color);background:transparent;font-size:10px;font-family:monospace;cursor:pointer;opacity:0.7;-webkit-transition:opacity 0.2s;transition:opacity 0.2s;}.css-1y5ulpa:hover{opacity:1;}.css-i7rnhw{overflow-x:auto;}.css-1y4o4pq{position:relative;min-height:100%;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;background-color:var(--bg-color);}.css-84ojsb{display:contents;}.css-1ashatc{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;word-break:break-all;overflow-wrap:anywhere;line-break:anywhere;white-space:pre-wrap;white-space:break-spaces;font-size:16px;}.css-1flouoi{border-bottom:1px dotted #333;}.color-scheme-light .css-1flouoi{border-bottom:1px dotted #ddd;}.css-fxcfu0{-webkit-animation:pulse-bg 1.5s ease-in-out infinite;animation:pulse-bg 1.5s ease-in-out infinite;}@-webkit-keyframes pulse-bg{0%,100%{background-color:rgba(218, 165, 32, 0.2);}50%{background-color:var(--bg-color);}}@keyframes pulse-bg{0%,100%{background-color:rgba(218, 165, 32, 0.2);}50%{background-color:var(--bg-color);}}.css-rp15d{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;position:relative;}.css-1j6wuma{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;padding:1em;width:100%;position:relative;}.css-hjkbgb{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;border:none;width:100%;background-color:var(--bg-color);}.css-zdhcu5{max-width:900px;margin:0 auto;padding:80px 1rem 3rem;}@media (min-width: 800px){.css-zdhcu5{padding:100px 2rem 4rem;}}.css-x4gmui{margin-bottom:2rem;}.css-1n45enn{color:var(--highlight-color);-webkit-text-decoration:none;text-decoration:none;font-size:0.95rem;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:0.5rem;}.css-1n45enn:hover{-webkit-text-decoration:underline;text-decoration:underline;}.css-1gworah{max-width:800px;margin-top:2rem;}.css-9hlwm{max-width:800px;margin-top:3rem;padding-top:2rem;border-top:1px solid var(--text-color);}.css-46rcdh{max-width:800px;}.css-v1f5ct{margin-bottom:2.5rem;padding-bottom:2rem;border-bottom:1px solid var(--text-color);}.css-1kfm06i{font-size:2.25rem;line-height:1.2;margin:0 0 1rem;color:var(--highlight-color);}@media (min-width: 600px){.css-1kfm06i{font-size:2.75rem;}}.css-1nw8vb3{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:0.5rem 1rem;font-size:0.95rem;color:var(--text-color);opacity:0.7;}.css-1hygmuu{color:var(--highlight-color);-webkit-text-decoration:none;text-decoration:none;}.css-1hygmuu:hover{-webkit-text-decoration:underline;text-decoration:underline;}.css-1q673rb{font-size:1.2rem;line-height:1.6;color:var(--text-color);opacity:0.85;margin:1.5rem 0 0;font-style:italic;}.css-19mvv3y{font-size:1.1rem;line-height:1.75;}.css-19mvv3y h2{font-size:1.75rem;margin:2.5rem 0 1rem;color:var(--highlight-color);}.css-19mvv3y h3{font-size:1.35rem;margin:2rem 0 0.75rem;}.css-19mvv3y p{margin:1.25rem 0;}.css-19mvv3y a{color:var(--highlight-color);}.css-19mvv3y blockquote{margin:1.5rem 0;padding:1rem 1.5rem;border-left:3px solid var(--highlight-color);background:rgba(128, 128, 128, 0.1);font-style:italic;}.css-19mvv3y blockquote p{margin:0;}.css-19mvv3y ul,.css-19mvv3y ol{margin:1.25rem 0;padding-left:1.5rem;}.css-19mvv3y li{margin:0.5rem 0;}.css-19mvv3y img{max-width:100%;height:auto;border-radius:4px;}.css-19mvv3y hr{border:none;border-top:1px solid var(--text-color);opacity:0.3;margin:2.5rem 0;}.css-19mvv3y .code-block-live{width:100vw;max-width:1400px;position:relative;left:50%;-webkit-transform:translateX(-50%);-moz-transform:translateX(-50%);-ms-transform:translateX(-50%);transform:translateX(-50%);padding:0 1rem;box-sizing:border-box;}@media (min-width: 800px){.css-19mvv3y .code-block-live{padding:0 2rem;}}.css-19mvv3y .code-block-container:not(.code-block-live){max-width:100%;}.css-1vm8pxc{max-width:min(100%, 1000px);}.css-1s1lac9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;font-size:16px;}@media (min-width: 1300px){.css-1s1lac9{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-1lyfw13{position:relative;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;width:100%;border:1px solid var(--text-color);border-radius:4px;overflow:hidden;}.css-vrpffa{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:0.5rem;font-size:0.9rem;color:var(--text-color);opacity:0.6;-webkit-text-decoration:none;text-decoration:none;-webkit-transition:opacity 0.2s ease;transition:opacity 0.2s ease;}.css-vrpffa:hover{opacity:1;color:var(--highlight-color);}.css-1uorqld{position:relative;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;width:100%;border:1px solid var(--text-color);border-radius:4px 4px 0 0;overflow:hidden;}@media (min-width: 1300px){.css-1uorqld{max-width:61.8%;border-radius:4px 0 0 4px;}}.css-37p1l2{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;position:-webkit-sticky;position:sticky;top:100px;border:1px solid var(--text-color);border-radius:0 0 4px 4px;margin-top:-1px;min-height:50px;width:100%;background-color:var(--bg-color);}@media screen and (min-width: 1300px){.css-37p1l2{margin-top:0;margin-left:-1px;border-radius:0 4px 4px 0;width:30%;}}</style><link rel="stylesheet" type="text/css" href="/static/client-3f2e47bea41770a9.css"><meta name="description" content="Reactive frameworks promise automatic UI updates but create subtle bugs and performance traps. Crank&#039;s explicit refresh() calls aren&#039;t a limitation - they&#039;re a superpower for building ambitious web applications. This essay examines common gotchas of reactive abstractions and provides a philosophical grounding for why Crank will never have a reactive abstraction."><meta property="og:title" content="Crank.js | Why Be Reactive?"><meta property="og:url" content="https:/crank.js.org/blog/why-be-reactive"><meta property="og:description" content="Reactive frameworks promise automatic UI updates but create subtle bugs and performance traps. Crank&#039;s explicit refresh() calls aren&#039;t a limitation - they&#039;re a superpower for building ambitious web applications. This essay examines common gotchas of reactive abstractions and provides a philosophical grounding for why Crank will never have a reactive abstraction."><meta property="og:type" content="website"><meta property="og:site_name" content="Crank.js"><meta property="og:image" content="/static/logo-9c727b9c5ba929af.svg"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Crank.js | Why Be Reactive?"><meta name="twitter:description" content="Reactive frameworks promise automatic UI updates but create subtle bugs and performance traps. Crank&#039;s explicit refresh() calls aren&#039;t a limitation - they&#039;re a superpower for building ambitious web applications. This essay examines common gotchas of reactive abstractions and provides a philosophical grounding for why Crank will never have a reactive abstraction."><meta name="twitter:image" content="/static/logo-9c727b9c5ba929af.svg"></head><body><script>(() => { const s = sessionStorage.getItem("color-scheme");
		const scheme = s === "dark" || s === "light" ? s :
			(window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light");
		const isDark = scheme === "dark";
		document.documentElement.dataset.theme = scheme;
		document.documentElement.style.setProperty("--bg-color", isDark ? "#0a0e1f" : "#e7f4f5");
		document.documentElement.style.setProperty("--text-color", isDark ? "#f5f9ff" : "#0a0e1f");
		if (!isDark) document.documentElement.classList.add("color-scheme-light"); })()</script><div id="navbar-root"><nav class="
				blur-background
				css-1l1hcps
				css-1xmwt0h
			"><div class="css-1n0j5y9"><div><a class="css-1n0j5y9" style="gap: 0.3em" href="/"><svg style="flex: none;" fill="none" viewBox="-200 -200 400 400" width="1.9em" height="1.9em" xmlns="http://www.w3.org/2000/svg"><defs><mask id="wedge-mask"><rect x="-200" y="-200" width="400" height="400" fill="white"></rect><path stroke="none" fill="black" d="
							M 0 0
							L 245.74561328669753 172.07293090531383
							L 245.74561328669753 -172.07293090531383
							z
						"></path></mask></defs><g stroke="none" fill="var(--highlight-color)"><path transform="rotate(0)" d="M 149.39 -16.97 M 149.62 -16.98 M 150.29 -17 M 151.42 -16.97 M 153 -16.85 M 155.02 -16.57 M 157.46 -16.1 M 160.32 -15.39 M 163.56 -14.39 M 167.17 -13.06 M 171.11 -11.35 M 175.36 -9.23 M 179.88 -6.66 M 179.88 6.66 M 175.36 9.23 M 171.11 11.35 M 167.17 13.06 M 163.56 14.39 M 160.32 15.39 M 157.46 16.1 M 155.02 16.57 M 153 16.85 M 151.42 16.97 M 150.29 17 M 149.62 16.98 M 149.39 16.97 A 8 8 0 0 0 144.51 41.5 L 144.73 41.57 L 145.36 41.81 L 146.39 42.27 L 147.8 42.99 L 149.56 44.01 L 151.64 45.38 L 154 47.13 L 156.62 49.29 L 159.44 51.9 L 162.43 54.99 L 165.54 58.58 L 168.73 62.69 L 163.64 74.98 L 158.48 75.64 L 153.74 75.97 L 149.44 76.04 L 145.6 75.89 L 142.22 75.57 L 139.31 75.14 L 136.88 74.63 L 134.91 74.11 L 133.4 73.63 L 132.35 73.22 L 131.73 72.95 L 131.53 72.84 A 8 8 0 0 0 117.63 93.64 L 117.8 93.79 L 118.3 94.25 L 119.07 95.07 L 120.1 96.28 L 121.33 97.9 L 122.73 99.96 L 124.24 102.48 L 125.83 105.48 L 127.44 108.97 L 129.02 112.96 L 130.52 117.47 L 131.9 122.49 L 122.49 131.9 L 117.47 130.52 L 112.96 129.02 L 108.97 127.44 L 105.48 125.83 L 102.48 124.24 L 99.96 122.73 L 97.9 121.33 L 96.28 120.1 L 95.07 119.07 L 94.25 118.3 L 93.79 117.8 L 93.64 117.63 A 8 8 0 0 0 72.84 131.53 L 72.95 131.73 L 73.22 132.35 L 73.63 133.4 L 74.11 134.91 L 74.63 136.88 L 75.14 139.31 L 75.57 142.22 L 75.89 145.6 L 76.04 149.44 L 75.97 153.74 L 75.64 158.48 L 74.98 163.64 L 62.69 168.73 L 58.58 165.54 L 54.99 162.43 L 51.9 159.44 L 49.29 156.62 L 47.13 154 L 45.38 151.64 L 44.01 149.56 L 42.99 147.8 L 42.27 146.39 L 41.81 145.36 L 41.57 144.73 L 41.5 144.51 A 8 8 0 0 0 16.97 149.39 L 16.98 149.62 L 17 150.29 L 16.97 151.42 L 16.85 153 L 16.57 155.02 L 16.1 157.46 L 15.39 160.32 L 14.39 163.56 L 13.06 167.17 L 11.35 171.11 L 9.23 175.36 L 6.66 179.88 L -6.66 179.88 L -9.23 175.36 L -11.35 171.11 L -13.06 167.17 L -14.39 163.56 L -15.39 160.32 L -16.1 157.46 L -16.57 155.02 L -16.85 153 L -16.97 151.42 L -17 150.29 L -16.98 149.62 L -16.97 149.39 A 8 8 0 0 0 -41.5 144.51 L -41.57 144.73 L -41.81 145.36 L -42.27 146.39 L -42.99 147.8 L -44.01 149.56 L -45.38 151.64 L -47.13 154 L -49.29 156.62 L -51.9 159.44 L -54.99 162.43 L -58.58 165.54 L -62.69 168.73 L -74.98 163.64 L -75.64 158.48 L -75.97 153.74 L -76.04 149.44 L -75.89 145.6 L -75.57 142.22 L -75.14 139.31 L -74.63 136.88 L -74.11 134.91 L -73.63 133.4 L -73.22 132.35 L -72.95 131.73 L -72.84 131.53 A 8 8 0 0 0 -93.64 117.63 L -93.79 117.8 L -94.25 118.3 L -95.07 119.07 L -96.28 120.1 L -97.9 121.33 L -99.96 122.73 L -102.48 124.24 L -105.48 125.83 L -108.97 127.44 L -112.96 129.02 L -117.47 130.52 L -122.49 131.9 L -131.9 122.49 L -130.52 117.47 L -129.02 112.96 L -127.44 108.97 L -125.83 105.48 L -124.24 102.48 L -122.73 99.96 L -121.33 97.9 L -120.1 96.28 L -119.07 95.07 L -118.3 94.25 L -117.8 93.79 L -117.63 93.64 A 8 8 0 0 0 -131.53 72.84 L -131.73 72.95 L -132.35 73.22 L -133.4 73.63 L -134.91 74.11 L -136.88 74.63 L -139.31 75.14 L -142.22 75.57 L -145.6 75.89 L -149.44 76.04 L -153.74 75.97 L -158.48 75.64 L -163.64 74.98 L -168.73 62.69 L -165.54 58.58 L -162.43 54.99 L -159.44 51.9 L -156.62 49.29 L -154 47.13 L -151.64 45.38 L -149.56 44.01 L -147.8 42.99 L -146.39 42.27 L -145.36 41.81 L -144.73 41.57 L -144.51 41.5 A 8 8 0 0 0 -149.39 16.97 L -149.62 16.98 L -150.29 17 L -151.42 16.97 L -153 16.85 L -155.02 16.57 L -157.46 16.1 L -160.32 15.39 L -163.56 14.39 L -167.17 13.06 L -171.11 11.35 L -175.36 9.23 L -179.88 6.66 L -179.88 -6.66 L -175.36 -9.23 L -171.11 -11.35 L -167.17 -13.06 L -163.56 -14.39 L -160.32 -15.39 L -157.46 -16.1 L -155.02 -16.57 L -153 -16.85 L -151.42 -16.97 L -150.29 -17 L -149.62 -16.98 L -149.39 -16.97 A 8 8 0 0 0 -144.51 -41.5 L -144.73 -41.57 L -145.36 -41.81 L -146.39 -42.27 L -147.8 -42.99 L -149.56 -44.01 L -151.64 -45.38 L -154 -47.13 L -156.62 -49.29 L -159.44 -51.9 L -162.43 -54.99 L -165.54 -58.58 L -168.73 -62.69 L -163.64 -74.98 L -158.48 -75.64 L -153.74 -75.97 L -149.44 -76.04 L -145.6 -75.89 L -142.22 -75.57 L -139.31 -75.14 L -136.88 -74.63 L -134.91 -74.11 L -133.4 -73.63 L -132.35 -73.22 L -131.73 -72.95 L -131.53 -72.84 A 8 8 0 0 0 -117.63 -93.64 L -117.8 -93.79 L -118.3 -94.25 L -119.07 -95.07 L -120.1 -96.28 L -121.33 -97.9 L -122.73 -99.96 L -124.24 -102.48 L -125.83 -105.48 L -127.44 -108.97 L -129.02 -112.96 L -130.52 -117.47 L -131.9 -122.49 L -122.49 -131.9 L -117.47 -130.52 L -112.96 -129.02 L -108.97 -127.44 L -105.48 -125.83 L -102.48 -124.24 L -99.96 -122.73 L -97.9 -121.33 L -96.28 -120.1 L -95.07 -119.07 L -94.25 -118.3 L -93.79 -117.8 L -93.64 -117.63 A 8 8 0 0 0 -72.84 -131.53 L -72.95 -131.73 L -73.22 -132.35 L -73.63 -133.4 L -74.11 -134.91 L -74.63 -136.88 L -75.14 -139.31 L -75.57 -142.22 L -75.89 -145.6 L -76.04 -149.44 L -75.97 -153.74 L -75.64 -158.48 L -74.98 -163.64 L -62.69 -168.73 L -58.58 -165.54 L -54.99 -162.43 L -51.9 -159.44 L -49.29 -156.62 L -47.13 -154 L -45.38 -151.64 L -44.01 -149.56 L -42.99 -147.8 L -42.27 -146.39 L -41.81 -145.36 L -41.57 -144.73 L -41.5 -144.51 A 8 8 0 0 0 -16.97 -149.39 L -16.98 -149.62 L -17 -150.29 L -16.97 -151.42 L -16.85 -153 L -16.57 -155.02 L -16.1 -157.46 L -15.39 -160.32 L -14.39 -163.56 L -13.06 -167.17 L -11.35 -171.11 L -9.23 -175.36 L -6.66 -179.88 L 6.66 -179.88 L 9.23 -175.36 L 11.35 -171.11 L 13.06 -167.17 L 14.39 -163.56 L 15.39 -160.32 L 16.1 -157.46 L 16.57 -155.02 L 16.85 -153 L 16.97 -151.42 L 17 -150.29 L 16.98 -149.62 L 16.97 -149.39 A 8 8 0 0 0 41.5 -144.51 L 41.57 -144.73 L 41.81 -145.36 L 42.27 -146.39 L 42.99 -147.8 L 44.01 -149.56 L 45.38 -151.64 L 47.13 -154 L 49.29 -156.62 L 51.9 -159.44 L 54.99 -162.43 L 58.58 -165.54 L 62.69 -168.73 L 74.98 -163.64 L 75.64 -158.48 L 75.97 -153.74 L 76.04 -149.44 L 75.89 -145.6 L 75.57 -142.22 L 75.14 -139.31 L 74.63 -136.88 L 74.11 -134.91 L 73.63 -133.4 L 73.22 -132.35 L 72.95 -131.73 L 72.84 -131.53 A 8 8 0 0 0 93.64 -117.63 L 93.79 -117.8 L 94.25 -118.3 L 95.07 -119.07 L 96.28 -120.1 L 97.9 -121.33 L 99.96 -122.73 L 102.48 -124.24 L 105.48 -125.83 L 108.97 -127.44 L 112.96 -129.02 L 117.47 -130.52 L 122.49 -131.9 L 131.9 -122.49 L 130.52 -117.47 L 129.02 -112.96 L 127.44 -108.97 L 125.83 -105.48 L 124.24 -102.48 L 122.73 -99.96 L 121.33 -97.9 L 120.1 -96.28 L 119.07 -95.07 L 118.3 -94.25 L 117.8 -93.79 L 117.63 -93.64 A 8 8 0 0 0 131.53 -72.84 L 131.73 -72.95 L 132.35 -73.22 L 133.4 -73.63 L 134.91 -74.11 L 136.88 -74.63 L 139.31 -75.14 L 142.22 -75.57 L 145.6 -75.89 L 149.44 -76.04 L 153.74 -75.97 L 158.48 -75.64 L 163.64 -74.98 L 168.73 -62.69 L 165.54 -58.58 L 162.43 -54.99 L 159.44 -51.9 L 156.62 -49.29 L 154 -47.13 L 151.64 -45.38 L 149.56 -44.01 L 147.8 -42.99 L 146.39 -42.27 L 145.36 -41.81 L 144.73 -41.57 L 144.51 -41.5 A 8 8 0 0 0 149.39 -16.97 L 149.62 -16.98 L 150.29 -17 L 151.42 -16.97 L 153 -16.85 L 155.02 -16.57 L 157.46 -16.1 L 160.32 -15.39 L 163.56 -14.39 L 167.17 -13.06 L 171.11 -11.35 L 175.36 -9.23 L 179.88 -6.66 L 179.88 6.66 L 175.36 9.23 L 171.11 11.35 L 167.17 13.06 L 163.56 14.39 L 160.32 15.39 L 157.46 16.1 L 155.02 16.57 L 153 16.85 L 151.42 16.97 L 150.29 17 L 149.62 16.98 L 149.39 16.97
			  M -110 0
				a 110 110 0 1 0 220 0
				a 110 110 0 1 0 -220 0
			" mask="url(#wedge-mask)" stroke="none" stroke-width="4"></path><circle cx="0" cy="0" r="60" stroke="none"></circle><path d="
						M 0 -28
						L 160 -14
						L 160 14
						L 0 28
						Z
					"></path></g></svg>Crank.js</a></div><div><a href="/guides/getting-started">Guides</a></div><div><a href="/api">API</a></div><div><a href="/blog/" aria-current="page">Blog</a></div><div><a href="/playground/">Playground</a></div></div><div class="css-1n0j5y9"><div><a href="https://github.com/bikeshaving/crank">GitHub</a></div><div><a href="http://npm.im/@b9g/crank">NPM</a></div><button role="switch" aria-label="toggle color scheme" aria-checked="true" class="css-yop4go"><span>üåô</span><span>üí°</span><span class="css-zj66tk"></span></button></div></nav></div><main class="css-zdhcu5"><nav class="css-x4gmui"><a href="/blog" class="css-1n45enn">‚Üê Back to Blog</a></nav><article class="css-46rcdh"><header class="css-v1f5ct"><h1 class="css-1kfm06i">Why Be Reactive?</h1><div class="css-1nw8vb3"><span>By <a href="https://github.com/brainkim" rel="author" class="css-1hygmuu">Brian Kim</a></span><span style="opacity: 0.5">/</span><span>August 20, 2025</span><span style="opacity: 0.5">/</span><span>21 min read</span></div><p class="css-1q673rb">Reactive frameworks promise automatic UI updates but create subtle bugs and performance traps. Crank&#039;s explicit refresh() calls aren&#039;t a limitation - they&#039;re a superpower for building ambitious web applications. This essay examines common gotchas of reactive abstractions and provides a philosophical grounding for why Crank will never have a reactive abstraction.</p></header><div class="css-19mvv3y"><p>I was pleasantly surprised by the warm reception to Crank.js back when I first released it. <a href="https://x.com/Vjeux/status/1250687160237211649">A pleasant tweet</a> from a React core team member, a rush of GitHub stars, and positive conversations on Reddit and Hacker News. Unfortunately, I squandered that JavaScript hype cycle, and today it isn&#039;t used very much.</p><p>Nevertheless, I‚Äôve found myself happy to work on Crank over the years, performing both basic and advanced maintenance tasks like ironing out embarrassing bugs, iterating on API design, and improving its runtime performance. However, I found the hardest task not to be technical but <em>social</em>: how do I convince developers to take the big step of adopting a new framework for their applications?</p><p>One of the pitches I‚Äôve tried is that Crank is the most ‚ÄúJust JavaScript‚Äù framework out there. Components are functions, including async and generator functions, so you can await promises directly in components, and define state as local variables. Intuitively, this feels JavaScript-y. I even went through the extra effort of writing a <a href="https://crank.js.org/guides/jsx-template-tag/">template tag</a> to appease those people who like to make the objection that JSX is not JavaScript. But was this convincing enough on its own?</p><p>As I‚Äôve used Crank over the years, I realized that I had a better pitch: Crank isn‚Äôt ‚Äúreactive‚Äù by any commonly held definition of ‚Äúreactive,‚Äù and could even be further described as a ‚Äúnon-reactive‚Äù framework. It‚Äôs unorthodox because almost every other web framework advertises itself as reactive, to the extent that frameworks are compared on the basis of their reactive abstractions.</p><p>Frameworks today (React, Vue, Svelte, Solid, etc.) are built around reactive primitives: signals, stores, observables, etc. Components create state, and re-render automatically in response to the framework‚Äôs chosen reactive abstraction, so much so that it seems to not ship a reactive abstraction is to ship an incomplete framework. So, why would I go through the trouble of writing a non-reactive framework, let alone thinking that this was a selling point?‚Ä®</p><p>I worry about being too abstract, so let me provide concrete definitions and code examples. We can define reactivity in the context of web frameworks as a feature where the framework updates its <em>views</em> when some associated <em>state</em> changes, however you define ‚Äúview‚Äù and ‚Äústate,‚Äù such that the two stay in sync. Even by this most general of definitions, the early releases of Crank were not reactive. For instance, here is how we defined a timer in earlier versions of Crank:</p><div style="margin: 30px auto;" class="code-block-container "><div class="css-1vm8pxc"><div class="css-1s1lac9"><div class="css-1lyfw13"><div class="css-1xzghkg"><button role="switch" aria-label="toggle syntax" aria-checked="false" class="css-x8uxd2"><span>JSX</span><span>JS</span><span class="css-1rbk3h3" style="left:24px;"></span></button><button class="css-1y5ulpa">Copy</button></div><div class="css-i7rnhw"><div class="css-1y4o4pq"><content-area class="css-84ojsb"><pre autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" class="
							language-
							css-1ashatc
						"><div class="
				prism-line
				css-1flouoi
			" data-index="0"><code><span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">Timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="1"><code>  <span class="token keyword">let</span> seconds <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="2"><code>  <span class="token keyword">const</span> interval <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="3"><code>    seconds<span class="token operator">++</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="4"><code>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="5"><code>  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="6"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="7"><code>  <span class="token keyword">try</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="8"><code>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="9"><code>      <span class="token keyword">yield</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>seconds<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="10"><code>    <span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="11"><code>  <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="12"><code>    <span class="token function">clearInterval</span><span class="token punctuation">(</span>interval<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="13"><code>  <span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="14"><code><span class="token punctuation">}</span></code><br></div></pre></content-area></div></div></div></div></div><script data-name="inline-code-block-props-64" class="props">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['inline-code-block-props-64'] = {"code":"function *Timer() {\n  let seconds = 0;\n  const interval = setInterval(() =\u003E {\n    seconds++;\n    this.refresh();\n  }, 1000);\n\n  try {\n    for ({} of this) {\n      yield \u003Cdiv\u003E{seconds}\u003C\u002Fdiv\u003E;\n    }\n  } finally {\n    clearInterval(interval);\n  }\n}","lang":"jsx"};
		</script></div><p>In the Timer component, the sole piece of state is the variable <code class="inline">seconds</code>, and when it is incremented, we have to separately call the utility method <code class="inline">refresh()</code> to actually update the view. When I first released Crank, some people saw code like this and balked. ‚ÄúAha,‚Äù declared reactivity lovers. ‚ÄúIsn‚Äôt it a flaw that you can update a component‚Äôs local state but forget to call the <code class="inline">refresh()</code> method? Isn&#039;t this a footgun‚Äù?</p><p>It‚Äôs true. As the first Crank user, I was also victim to this bug, forgetting to call <code class="inline">refresh()</code> after updating some state. But I refused to believe like some, that this meant I needed a reactive abstraction, and I just got really good at remembering to call it. Luckily, I recently realized that we can solve this problem with a slight API enhancement, by allowing a callback to be passed to <code class="inline">refresh()</code>.</p><div style="margin: 30px auto;" class="code-block-container code-block-live"><div class="css-1cvb758"><div class="css-1s1lac9"><div class="css-1uorqld"><div class="css-1xzghkg"><button role="switch" aria-label="toggle syntax" aria-checked="false" class="css-x8uxd2"><span>JSX</span><span>JS</span><span class="css-1rbk3h3" style="left:24px;"></span></button><button class="css-1y5ulpa">Copy</button></div><div class="css-i7rnhw"><div class="css-1y4o4pq"><content-area class="css-84ojsb"><pre autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" class="
							language-
							css-1ashatc
						"><div class="
				prism-line
				css-1flouoi
			" data-index="0"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>renderer<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@b9g/crank/dom&quot;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="1"><code><span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">Timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="2"><code>  <span class="token keyword">let</span> seconds <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="3"><code>  <span class="token keyword">const</span> interval <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="4"><code>    seconds<span class="token operator">++</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="5"><code>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="6"><code>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="7"><code>    <span class="token keyword">yield</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>seconds<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="8"><code>  <span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="9"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="10"><code>  <span class="token comment">// New in 0.5. for...of loops naturally return when the component is about to unmount</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="11"><code>  <span class="token function">clearInterval</span><span class="token punctuation">(</span>interval<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="12"><code><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="13"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="14"><code>renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Timer <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div></pre></content-area></div></div></div><div class="css-37p1l2"><div class="css-rp15d"><div class="css-1j6wuma css-fxcfu0"><iframe class="
							playground-iframe
							css-hjkbgb
						" style="height: 100px;"></iframe></div></div></div></div></div><script data-name="inline-code-block-props-65" class="props">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['inline-code-block-props-65'] = {"code":"import {renderer} from \"@b9g\u002Fcrank\u002Fdom\";\nfunction *Timer() {\n  let seconds = 0;\n  const interval = setInterval(() =\u003E this.refresh(() =\u003E {\n    seconds++;\n  }), 1000);\n  for ({} of this) {\n    yield \u003Cdiv\u003E{seconds}\u003C\u002Fdiv\u003E;\n  }\n\n  \u002F\u002F New in 0.5. for...of loops naturally return when the component is about to unmount\n  clearInterval(interval);\n}\n\nrenderer.render(\u003CTimer \u002F\u003E, document.body);","lang":"jsx live"};
		</script></div><p>This was so easy to implement it became a last-minute addition to the 0.7 API. Note that you no longer have to wrap <code class="inline">for...of</code> loops in a <code class="inline">try</code>/<code class="inline">finally</code>, another subtle quality of life improvement made in 0.5.</p><p>By having the convention where you put state changes in <code class="inline">refresh()</code> callbacks, you both make it impossible to forget to call <code class="inline">refresh()</code> and declaratively identify the code in the callback as intending to cause a re-render. And the API is ergonomic enough that you can usually wrap entire callbacks in a <code class="inline">refresh()</code> without causing an extra level of indentation. This is one of those ideas that I wish I came up with sooner; as a matter of fact, it came to me by way of Claude Code, who hallucinated the API while I was berating it for generating nasty React hallucinations in a Crank component. I‚Äôm grateful to Claude for imagining the <code class="inline">refresh()</code> callback API, and embarrassed that I didn‚Äôt discover it sooner.</p><h2 id="bug-severity-analysis">Bug severity analysis</h2><p>Yet even with the <code class="inline">refresh()</code> callback API, the objection remains: why tolerate any possibility of forgetting to call <code class="inline">refresh()</code>? Reactive abstractions promise to eliminate this entire class of bugs by automatically syncing state with view. But as we&#039;ll see, this &quot;solution&quot; creates its own problems.</p><p>To understand why I don‚Äôt think non-reactivity indicates flawed design, we have to take a step back and consider the potential severity of classes of bugs. We can evaluate the ‚Äúseverity‚Äù of a class of bugs by asking the following two questions:</p><ol><li>Are these bugs easy to spot?</li><li>Are these bugs easy to fix?</li></ol><p>These two questions determine if a bug will make it to your end users, and how long your applications remain broken.‚Ä®For Crank, the answers to both these questions is yes. Forgetting to call <code class="inline">refresh()</code> bugs are easy to spot because you immediately notice when your app hasn‚Äôt updated, and they‚Äôre easy to fix because you just add the <code class="inline">refresh()</code> call.</p><p>But here&#039;s where it gets interesting: while every reactive abstraction claims to eliminate stale renders, reactive abstractions have their own gotchas specific to them. In the next section, let me apply this same severity heuristic to some alternative frameworks - Solid, Vue, and Svelte - to show you what I mean.</p><h3 id="losing-reactivity">Losing Reactivity</h3><p>Consider these notorious examples from Solid.js.</p><div style="margin: 30px auto;" class="code-block-container "><div class="css-1vm8pxc"><div class="css-1s1lac9"><div class="css-1lyfw13"><div class="css-1xzghkg"><button role="switch" aria-label="toggle syntax" aria-checked="false" class="css-x8uxd2"><span>JSX</span><span>JS</span><span class="css-1rbk3h3" style="left:24px;"></span></button><button class="css-1y5ulpa">Copy</button></div><div class="css-i7rnhw"><div class="css-1y4o4pq"><content-area class="css-84ojsb"><pre autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" class="
							language-
							css-1ashatc
						"><div class="
				prism-line
				css-1flouoi
			" data-index="0"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>render<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;solid-js/web&quot;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="1"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>createSignal<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;solid-js&quot;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="2"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="3"><code><span class="token comment">// ‚ùå Wrong: Destructuring props in function parameters</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="4"><code><span class="token keyword">function</span> <span class="token function">BrokenDisplay1</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>seconds<span class="token punctuation">}</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">seconds</span><span class="token operator">:</span> number<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="5"><code>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>seconds<span class="token punctuation">}</span> second<span class="token punctuation">{</span>seconds <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;s&quot;</span><span class="token punctuation">}</span> elapsed<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="6"><code><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="7"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="8"><code><span class="token comment">// ‚ùå Also wrong: Computing derived values outside of reactive context</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="9"><code><span class="token keyword">function</span> <span class="token function">BrokenDisplay2</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">seconds</span><span class="token operator">:</span> number<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="10"><code>  <span class="token keyword">const</span> minutes <span class="token operator">=</span> props<span class="token punctuation">.</span>seconds <span class="token operator">/</span> <span class="token number">60</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="11"><code>  <span class="token keyword">return</span> <span class="token punctuation">(</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="12"><code>    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="13"><code>      <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>seconds<span class="token punctuation">}</span> second<span class="token punctuation">{</span>props<span class="token punctuation">.</span>seconds <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;s&quot;</span><span class="token punctuation">}</span> elapsed<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="14"><code>      <span class="token punctuation">{</span><span class="token string">&quot; &quot;</span><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="15"><code>      <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span>minutes<span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">}</span> minutes<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="16"><code>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="17"><code>  <span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="18"><code><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="19"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="20"><code><span class="token comment">// ‚úÖ Right: Accessing props directly in JSX</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="21"><code><span class="token keyword">function</span> <span class="token function">WorkingDisplay1</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">seconds</span><span class="token operator">:</span> number<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="22"><code>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>seconds<span class="token punctuation">}</span> second<span class="token punctuation">{</span>props<span class="token punctuation">.</span>seconds <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;s&quot;</span><span class="token punctuation">}</span> elapsed<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="23"><code><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="24"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="25"><code><span class="token comment">// ‚úÖ Also right: Computing derived values in a callback</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="26"><code><span class="token keyword">function</span> <span class="token function">WorkingDisplay2</span><span class="token punctuation">(</span><span class="token parameter"><span class="token literal-property property">props</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">seconds</span><span class="token operator">:</span> number<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="27"><code>  <span class="token keyword">const</span> <span class="token function-variable function">minutes</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> props<span class="token punctuation">.</span>seconds <span class="token operator">/</span> <span class="token number">60</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="28"><code>  <span class="token keyword">return</span> <span class="token punctuation">(</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="29"><code>    <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="30"><code>      <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>seconds<span class="token punctuation">}</span> second<span class="token punctuation">{</span>props<span class="token punctuation">.</span>seconds <span class="token operator">===</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">&quot;&quot;</span> <span class="token operator">:</span> <span class="token string">&quot;s&quot;</span><span class="token punctuation">}</span> elapsed<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="31"><code>      <span class="token punctuation">{</span><span class="token string">&quot; &quot;</span><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="32"><code>      <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token function">minutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">}</span> minutes<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="33"><code>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="34"><code>  <span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="35"><code><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="36"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="37"><code><span class="token keyword">function</span> <span class="token function">Timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="38"><code>  <span class="token keyword">const</span> <span class="token punctuation">[</span>seconds<span class="token punctuation">,</span> setSeconds<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">createSignal</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="39"><code>  <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setSeconds</span><span class="token punctuation">(</span><span class="token function">seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="40"><code>  <span class="token keyword">return</span> <span class="token operator">&lt;</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="41"><code>    <span class="token operator">&lt;</span>BrokenDisplay1 seconds<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="42"><code>    <span class="token operator">&lt;</span>BrokenDisplay2 seconds<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="43"><code>    <span class="token operator">&lt;</span>WorkingDisplay1 seconds<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="44"><code>    <span class="token operator">&lt;</span>WorkingDisplay2 seconds<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">seconds</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="45"><code>  <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="46"><code><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="47"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="48"><code><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>Timer <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;app&quot;</span><span class="token punctuation">)</span><span class="token operator">!</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div></pre></content-area></div></div></div></div></div><script data-name="inline-code-block-props-66" class="props">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['inline-code-block-props-66'] = {"code":"import {render} from \"solid-js\u002Fweb\";\nimport {createSignal} from \"solid-js\";\n\n\u002F\u002F ‚ùå Wrong: Destructuring props in function parameters\nfunction BrokenDisplay1({seconds}: {seconds: number}) {\n  return \u003Cdiv\u003E{seconds} second{seconds === 1 ? \"\" : \"s\"} elapsed\u003C\u002Fdiv\u003E;\n}\n\n\u002F\u002F ‚ùå Also wrong: Computing derived values outside of reactive context\nfunction BrokenDisplay2(props: {seconds: number}) {\n  const minutes = props.seconds \u002F 60;\n  return (\n    \u003Cdiv\u003E\n      \u003Cspan\u003E{props.seconds} second{props.seconds === 1 ? \"\" : \"s\"} elapsed\u003C\u002Fspan\u003E\n      {\" \"}\n      \u003Cspan\u003E({minutes.toFixed(2)} minutes)\u003C\u002Fspan\u003E\n    \u003C\u002Fdiv\u003E\n  );\n}\n\n\u002F\u002F ‚úÖ Right: Accessing props directly in JSX\nfunction WorkingDisplay1(props: {seconds: number}) {\n  return \u003Cdiv\u003E{props.seconds} second{props.seconds === 1 ? \"\" : \"s\"} elapsed\u003C\u002Fdiv\u003E;\n}\n\n\u002F\u002F ‚úÖ Also right: Computing derived values in a callback\nfunction WorkingDisplay2(props: {seconds: number}) {\n  const minutes = () =\u003E props.seconds \u002F 60;\n  return (\n    \u003Cdiv\u003E\n      \u003Cspan\u003E{props.seconds} second{props.seconds === 1 ? \"\" : \"s\"} elapsed\u003C\u002Fspan\u003E\n      {\" \"}\n      \u003Cspan\u003E({minutes().toFixed(2)} minutes)\u003C\u002Fspan\u003E\n    \u003C\u002Fdiv\u003E\n  );\n}\n\nfunction Timer() {\n  const [seconds, setSeconds] = createSignal(0);\n  setInterval(() =\u003E setSeconds(seconds() + 1), 1000);\n  return \u003C\u003E\n    \u003CBrokenDisplay1 seconds={seconds()} \u002F\u003E\n    \u003CBrokenDisplay2 seconds={seconds()} \u002F\u003E\n    \u003CWorkingDisplay1 seconds={seconds()} \u002F\u003E\n    \u003CWorkingDisplay2 seconds={seconds()} \u002F\u003E\n  \u003C\u002F\u003E;\n}\n\nrender(() =\u003E \u003CTimer \u002F\u003E, document.getElementById(\"app\")!);","lang":"tsx"};
		</script></div><p>Solid uses two reactive abstractions called signals and stores, and instruments reads to them to cause DOM updates. In Solid.js, components are functions, but the props passed to components is a reactive store. To make sure the DOM is kept up to date, Solid.js requires a special babel renderer for JSX which makes reads of state in JSX expressions trigger the re-execution logic.</p><p>This fails quickly when you try to destructure the <code class="inline">props</code> store, or try to compute derived values outside of JSX expressions. The broken components won&#039;t update when props change because you&#039;ve extracted the value and broken the reactive connection from props to JSX.</p><p>Let&#039;s consider this bug using the bug severity heuristic: while simple cases of these bugs are easy to spot because there are linter rules to not destructure props and use callbacks to compute derived data, complex applications have edge-cases which still fall through the linter cracks. You only need to search for the term ‚Äúlosing reactivity‚Äù in framework issue trackers to see edge-cases in Solid and every reactive framework.</p><p>Well are they easy to fix? No, they&#039;re difficult to fix because you need to understand the framework&#039;s reactive rules: which contexts are reactive. The problem of manipulating props, which is just regular objects in Crank, is so overwhelming that Solid has to provide utilities to perform basic tasks like <a href="https://docs.solidjs.com/reference/reactive-utilities/split-props">splitting</a> and <a href="https://docs.solidjs.com/reference/reactive-utilities/merge-props">merging</a> props.</p><p>With Crank&#039;s explicit refresh model, this entire class of bugs doesn&#039;t exist. Props are just values passed to functions. You can destructure them, compute derived values with them, pass them around - it&#039;s all just JavaScript. When you want the component to update, you call <code class="inline">refresh()</code>. There&#039;s no invisible reactive graph to break or reactive context to be outside of.</p><h3 id="the-deep-reactivity-performance-trap">The Deep Reactivity Performance Trap</h3><p>Consider Vue.js. Like Solid it uses a reactive abstraction which instruments reads. It does this by using a proxy which recursively wraps a reactive object‚Äôs properties and children in reactive abstractions as well. This is useful for performing DOM updates when some deeply nested state is modified:</p><div style="margin: 30px auto;" class="code-block-container "><div class="css-1vm8pxc"><div class="css-1s1lac9"><div class="css-1lyfw13"><div class="css-1xzghkg"><button class="css-1y5ulpa">Copy</button></div><div class="css-i7rnhw"><div class="css-1y4o4pq"><content-area class="css-84ojsb"><pre autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" class="
							language-
							css-1ashatc
						"><div class="
				prism-line
				css-1flouoi
			" data-index="0"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>ref<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="1"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="2"><code><span class="token keyword">const</span> state <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="3"><code>  <span class="token literal-property property">todos</span><span class="token operator">:</span> <span class="token punctuation">[</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="4"><code>    <span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;Learn Vue&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">completed</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token literal-property property">metadata</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token string">&quot;high&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">tags</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;learning&quot;</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">,</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="5"><code>    <span class="token comment">// ... imagine 1000 more todos with nested objects</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="6"><code>  <span class="token punctuation">]</span><span class="token punctuation">,</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="7"><code>  <span class="token literal-property property">filters</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token string">&quot;all&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">search</span><span class="token operator">:</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="8"><code>  <span class="token literal-property property">ui</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">selectedTodo</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token literal-property property">theme</span><span class="token operator">:</span> <span class="token string">&quot;light&quot;</span><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="9"><code><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="10"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="11"><code>state<span class="token punctuation">.</span>value<span class="token punctuation">.</span>todos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>completed <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">// ‚úÖ UI updates</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="12"><code>state<span class="token punctuation">.</span>value<span class="token punctuation">.</span>todos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>priority <span class="token operator">=</span> <span class="token string">&#039;low&#039;</span><span class="token punctuation">;</span> <span class="token comment">// ‚úÖ UI updates</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="13"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="14"><code><span class="token keyword">const</span> <span class="token punctuation">{</span>ui<span class="token punctuation">}</span> <span class="token operator">=</span> state<span class="token punctuation">.</span>value<span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="15"><code><span class="token comment">// ‚úÖ UI updates even though the reference was destructured, unlike Solid</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="16"><code>ui<span class="token punctuation">.</span>selectedTodo <span class="token operator">=</span> state<span class="token punctuation">.</span>value<span class="token punctuation">.</span>todos<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code><br></div></pre></content-area></div></div></div></div></div><script data-name="inline-code-block-props-67" class="props">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['inline-code-block-props-67'] = {"code":"import {ref} from \"vue\";\n\nconst state = ref({\n  todos: [\n    {id: 1, text: \"Learn Vue\", completed: false, metadata: {priority: \"high\", tags: [\"learning\"]}},\n    \u002F\u002F ... imagine 1000 more todos with nested objects\n  ],\n  filters: {status: \"all\", search: \"\"},\n  ui: {selectedTodo: null, theme: \"light\"}\n});\n\nstate.value.todos[0].completed = true; \u002F\u002F ‚úÖ UI updates\nstate.value.todos[0].metadata.priority = 'low'; \u002F\u002F ‚úÖ UI updates\n\nconst {ui} = state.value;\n\u002F\u002F ‚úÖ UI updates even though the reference was destructured, unlike Solid\nui.selectedTodo = state.value.todos[0];","lang":"js"};
		</script></div><p>Let‚Äôs ignore the fact that proxies just don‚Äôt work with private class members, which is an unfortunate language design decision. Let‚Äôs ignore the fact that proxies can‚Äôt be used for primitives, which is why Vue confusingly ships both a <code class="inline">reactive()</code> and <code class="inline">ref()</code> API, so that reading/writing to primitive data causes property access.</p><p>Besides all this, deeply proxying large objects and arrays is a performance bottleneck, and for this reason Vue prefers that large objects and arrays be wrapped in shallow proxies, which only change in response to top level mutations. The <a href="https://github.com/krausest/js-framework-benchmark/blob/chrome139/frameworks/keyed/vue/src/App.vue">official Vue.js framework benchmark code</a> shows this preference, and every framework which uses deeply nested proxies for reactivity finds a way to avoid using them in benchmarks.</p><div style="margin: 30px auto;" class="code-block-container "><div class="css-1vm8pxc"><div class="css-1s1lac9"><div class="css-1lyfw13"><div class="css-1xzghkg"><button class="css-1y5ulpa">Copy</button></div><div class="css-i7rnhw"><div class="css-1y4o4pq"><content-area class="css-84ojsb"><pre autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" class="
							language-
							css-1ashatc
						"><div class="
				prism-line
				css-1flouoi
			" data-index="0"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>ref<span class="token punctuation">,</span> shallowRef<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;vue&quot;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="1"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="2"><code><span class="token comment">// ‚ùå Using ref() would wrap the entire array and all objects in proxies</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="3"><code><span class="token comment">// const rows = ref([])</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="4"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="5"><code><span class="token comment">// ‚úÖ Must use shallowRef to avoid deep reactivity for performance</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="6"><code><span class="token keyword">const</span> rows <span class="token operator">=</span> <span class="token function">shallowRef</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="7"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="8"><code><span class="token keyword">function</span> <span class="token function">setRows</span><span class="token punctuation">(</span><span class="token parameter">update <span class="token operator">=</span> rows<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="9"><code>  <span class="token comment">// Manually trigger reactivity by reassigning</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="10"><code>  rows<span class="token punctuation">.</span>value <span class="token operator">=</span> update</code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="11"><code><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="12"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="13"><code><span class="token keyword">function</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="14"><code>  <span class="token keyword">const</span> _rows <span class="token operator">=</span> rows<span class="token punctuation">.</span>value</code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="15"><code>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> _rows<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i <span class="token operator">+=</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="16"><code>    _rows<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>label <span class="token operator">+=</span> <span class="token string">&#039; !!!&#039;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="17"><code>  <span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="18"><code>  <span class="token comment">// Must manually trigger update after mutations</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="19"><code>  <span class="token function">setRows</span><span class="token punctuation">(</span><span class="token punctuation">)</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="20"><code><span class="token punctuation">}</span></code><br></div></pre></content-area></div></div></div></div></div><script data-name="inline-code-block-props-68" class="props">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['inline-code-block-props-68'] = {"code":"import {ref, shallowRef} from \"vue\";\n\n\u002F\u002F ‚ùå Using ref() would wrap the entire array and all objects in proxies\n\u002F\u002F const rows = ref([])\n\n\u002F\u002F ‚úÖ Must use shallowRef to avoid deep reactivity for performance\nconst rows = shallowRef([])\n\nfunction setRows(update = rows.value.slice()) {\n  \u002F\u002F Manually trigger reactivity by reassigning\n  rows.value = update\n}\n\nfunction update() {\n  const _rows = rows.value\n  for (let i = 0; i \u003C _rows.length; i += 10) {\n    _rows[i].label += ' !!!'\n  }\n  \u002F\u002F Must manually trigger update after mutations\n  setRows()\n}","lang":"js"};
		</script></div><p>Vue provides escape hatches like <code class="inline">shallowRef()</code> and  <code class="inline">markRaw()</code> to work around these performance issues and make nested state non-proxied. But suddenly, we went from having the convenience of having deeply nested updates cause re-renders, to having to track when they do and when they don‚Äôt. This necessitates Vue ship utilities like <code class="inline">isReactive()</code> to tell you which parts of your data are reactive or not, because otherwise this fact would just be invisible to developers.</p><p>Again, consider the bug severity heuristics. These bugs are hard to spot because reactivity is a property which is invisibly added to your data structures and selectively removed for performance. These bugs are difficult to fix because again the quality of your data structures being reactive requires you to trace your state all the way back to where it was created to figure out why or why not it is reactive, and then trace all usage of the state to make sure consumers don‚Äôt assume it‚Äôs reactive.</p><p>Again, consider Crank‚Äôs alternative. Crank does not care whether you make updates to deeply nested state, just that you call <code class="inline">refresh()</code>. Again, a reactive abstraction which is meant to ‚Äúfix‚Äù the bug which Crank is susceptible to, leaks and potentially causes the same exact bug in a more subtle manner.</p><h3 id="effects-and-infinite-loops">Effects and Infinite Loops</h3><p>When you have a case of reactivity brain, you start to develop a totalizing view of programming, like when functional programmers start seeing everything as monads. All the state in your programs is reactive, derived state is also reactive, and you read the reactive state using ‚Äúeffects‚Äù which re-run automagically whenever you update them. Then, the framework‚Äôs actual updates of the DOM is just one effect among many, and you can write your effects to do other things like calling third-party libraries, or making updates to an imperative canvas.</p><p>Svelte had in its earlier versions (v4 and less) what I thought was the Crank-iest reactivity API: the Svelte compiler instrumented assignments to state in components, and made these assignments trigger re-renders. No nested state updates, no runtime reactive abstraction, just assignments = update.</p><div style="margin: 30px auto;" class="code-block-container "><div class="css-1vm8pxc"><div class="css-1s1lac9"><div class="css-1lyfw13"><div class="css-1xzghkg"><button class="css-1y5ulpa">Copy</button></div><div class="css-i7rnhw"><div class="css-1y4o4pq"><content-area class="css-84ojsb"><pre autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" class="
							language-
							css-1ashatc
						"><div class="
				prism-line
				css-1flouoi
			" data-index="0"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="1"><code> <span class="token keyword">let</span> todos <span class="token operator">=</span> <span class="token punctuation">[</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="2"><code>   <span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&quot;Learn Svelte&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">completed</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token literal-property property">metadata</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token string">&quot;high&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="3"><code>   <span class="token comment">// more todos...</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="4"><code> <span class="token punctuation">]</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="5"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="6"><code> <span class="token keyword">function</span> <span class="token function">toggleTodo</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="7"><code>   <span class="token comment">// ‚ùå This mutation doesn&#039;t trigger reactivity - no assignment to `todos`</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="8"><code>   <span class="token keyword">const</span> todo <span class="token operator">=</span> todos<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">t</span> <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="9"><code>   todo<span class="token punctuation">.</span>completed <span class="token operator">=</span> <span class="token operator">!</span>todo<span class="token punctuation">.</span>completed<span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="10"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="11"><code>   <span class="token comment">// ‚úÖ Must reassign the array to trigger reactivity</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="12"><code>   todos <span class="token operator">=</span> todos<span class="token punctuation">;</span> <span class="token comment">// or todos = [...todos]</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="13"><code> <span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="14"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="15"><code> <span class="token keyword">function</span> <span class="token function">addTodo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="16"><code>   <span class="token comment">// ‚ùå This push doesn&#039;t trigger reactivity</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="17"><code>   todos<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">id</span><span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#039;New todo&#039;</span><span class="token punctuation">,</span> <span class="token literal-property property">completed</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="18"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="19"><code>   <span class="token comment">// ‚úÖ Must reassign</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="20"><code>   todos <span class="token operator">=</span> todos<span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="21"><code> <span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="22"><code><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="23"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="24"><code><span class="token punctuation">{</span>#each todos <span class="token keyword">as</span> todo<span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="25"><code> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="26"><code>   <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;checkbox&quot;</span> checked<span class="token operator">=</span><span class="token punctuation">{</span>todo<span class="token punctuation">.</span>completed<span class="token punctuation">}</span> on<span class="token operator">:</span>change<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">toggleTodo</span><span class="token punctuation">(</span>todo<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="27"><code>   <span class="token punctuation">{</span>todo<span class="token punctuation">.</span>text<span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="28"><code> <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="29"><code><span class="token punctuation">{</span><span class="token operator">/</span>each<span class="token punctuation">}</span></code><br></div></pre></content-area></div></div></div></div></div><script data-name="inline-code-block-props-69" class="props">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['inline-code-block-props-69'] = {"code":"\u003Cscript\u003E\n let todos = [\n   {id: 1, text: \"Learn Svelte\", completed: false, metadata: {priority: \"high\"}}\n   \u002F\u002F more todos...\n ];\n\n function toggleTodo(id) {\n   \u002F\u002F ‚ùå This mutation doesn't trigger reactivity - no assignment to `todos`\n   const todo = todos.find(t =\u003E t.id === id);\n   todo.completed = !todo.completed;\n\n   \u002F\u002F ‚úÖ Must reassign the array to trigger reactivity\n   todos = todos; \u002F\u002F or todos = [...todos]\n }\n\n function addTodo() {\n   \u002F\u002F ‚ùå This push doesn't trigger reactivity\n   todos.push({id: Date.now(), text: 'New todo', completed: false});\n\n   \u002F\u002F ‚úÖ Must reassign\n   todos = todos;\n }\n\u003C\u002Fscript\u003E\n\n{#each todos as todo}\n \u003Cdiv\u003E\n   \u003Cinput type=\"checkbox\" checked={todo.completed} on:change={() =\u003E toggleTodo(todo.id)} \u002F\u003E\n   {todo.text}\n \u003C\u002Fdiv\u003E\n{\u002Feach}","lang":"svelte"};
		</script></div><p>Unfortunately, the Svelte maintainers thought that this lack of reactivity was a problem and created a special syntax called ‚Äúrunes,‚Äù where calls to <code class="inline">$</code>-prefixed functions like <code class="inline">$state()</code> and <code class="inline">$derived()</code> allow you to create variables with reactive properties, while other calls to functions like <code class="inline">$effect()</code> allow you to listen for changes.</p><div style="margin: 30px auto;" class="code-block-container "><div class="css-1vm8pxc"><div class="css-1s1lac9"><div class="css-1lyfw13"><div class="css-1xzghkg"><button class="css-1y5ulpa">Copy</button></div><div class="css-i7rnhw"><div class="css-1y4o4pq"><content-area class="css-84ojsb"><pre autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" class="
							language-
							css-1ashatc
						"><div class="
				prism-line
				css-1flouoi
			" data-index="0"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="1"><code>  <span class="token keyword">let</span> todos <span class="token operator">=</span> <span class="token function">$state</span><span class="token punctuation">(</span><span class="token punctuation">[</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="2"><code>    <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#039;Learn Svelte&#039;</span><span class="token punctuation">,</span> <span class="token literal-property property">completed</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token literal-property property">metadata</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">priority</span><span class="token operator">:</span> <span class="token string">&#039;high&#039;</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="3"><code>  <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="4"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="5"><code>  <span class="token keyword">function</span> <span class="token function">toggleTodo</span><span class="token punctuation">(</span><span class="token parameter">id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="6"><code>    <span class="token comment">// ‚úÖ Deep reactivity works - direct mutation triggers updates</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="7"><code>    <span class="token keyword">const</span> todo <span class="token operator">=</span> todos<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">t</span> <span class="token operator">=&gt;</span> t<span class="token punctuation">.</span>id <span class="token operator">===</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="8"><code>    todo<span class="token punctuation">.</span>completed <span class="token operator">=</span> <span class="token operator">!</span>todo<span class="token punctuation">.</span>completed<span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="9"><code>  <span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="10"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="11"><code>  <span class="token keyword">function</span> <span class="token function">addTodo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="12"><code>    <span class="token comment">// ‚úÖ Array mutations work automatically</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="13"><code>    todos<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token literal-property property">text</span><span class="token operator">:</span> <span class="token string">&#039;New todo&#039;</span><span class="token punctuation">,</span> <span class="token literal-property property">completed</span><span class="token operator">:</span> <span class="token boolean">false</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="14"><code>  <span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="15"><code><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="16"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="17"><code><span class="token punctuation">{</span>#each todos <span class="token keyword">as</span> todo<span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="18"><code>  <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="19"><code>    <span class="token operator">&lt;</span>input type<span class="token operator">=</span><span class="token string">&quot;checkbox&quot;</span> checked<span class="token operator">=</span><span class="token punctuation">{</span>todo<span class="token punctuation">.</span>completed<span class="token punctuation">}</span> onchange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">toggleTodo</span><span class="token punctuation">(</span>todo<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="20"><code>    <span class="token punctuation">{</span>todo<span class="token punctuation">.</span>text<span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="21"><code>  <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="22"><code><span class="token punctuation">{</span><span class="token operator">/</span>each<span class="token punctuation">}</span></code><br></div></pre></content-area></div></div></div></div></div><script data-name="inline-code-block-props-70" class="props">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['inline-code-block-props-70'] = {"code":"\u003Cscript\u003E\n  let todos = $state([\n    { id: 1, text: 'Learn Svelte', completed: false, metadata: { priority: 'high' } }\n  ]);\n\n  function toggleTodo(id) {\n    \u002F\u002F ‚úÖ Deep reactivity works - direct mutation triggers updates\n    const todo = todos.find(t =\u003E t.id === id);\n    todo.completed = !todo.completed;\n  }\n\n  function addTodo() {\n    \u002F\u002F ‚úÖ Array mutations work automatically\n    todos.push({ id: Date.now(), text: 'New todo', completed: false });\n  }\n\u003C\u002Fscript\u003E\n\n{#each todos as todo}\n  \u003Cdiv\u003E\n    \u003Cinput type=\"checkbox\" checked={todo.completed} onchange={() =\u003E toggleTodo(todo.id)} \u002F\u003E\n    {todo.text}\n  \u003C\u002Fdiv\u003E\n{\u002Feach}","lang":"svelte"};
		</script></div><p>Let‚Äôs ignore the fact that these runes can only work in files which end with <code class="inline">*.svelte.js</code>. Let‚Äôs ignore the compiler infrastructure needed to make them work. Let‚Äôs ignore the fact that you can‚Äôt assign a <code class="inline">$derived()</code> rune to a let variable and re-assign it. Let‚Äôs ignore that these ‚Äúrunes‚Äù are actually compiler intrinsics, like a C++ feature, except instead of providing you low-level access to memory and assembly they provide access to a high-level reactive abstraction.</p><p>The thing I want to focus on is that any reactive abstraction which uses effects is prone to infinite loops:</p><div style="margin: 30px auto;" class="code-block-container "><div class="css-1vm8pxc"><div class="css-1s1lac9"><div class="css-1lyfw13"><div class="css-1xzghkg"><button class="css-1y5ulpa">Copy</button></div><div class="css-i7rnhw"><div class="css-1y4o4pq"><content-area class="css-84ojsb"><pre autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" class="
							language-
							css-1ashatc
						"><div class="
				prism-line
				css-1flouoi
			" data-index="0"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="1"><code>  <span class="token keyword">let</span> password <span class="token operator">=</span> <span class="token function">$state</span><span class="token punctuation">(</span><span class="token string">&#039;&#039;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="2"><code>  <span class="token keyword">let</span> attempts <span class="token operator">=</span> <span class="token function">$state</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="3"><code>  <span class="token keyword">let</span> isSubmitting <span class="token operator">=</span> <span class="token function">$state</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="4"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="5"><code>  <span class="token comment">// ‚ùå Creates infinite loop!</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="6"><code>  <span class="token function">$effect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="7"><code>    <span class="token keyword">if</span> <span class="token punctuation">(</span>isSubmitting <span class="token operator">&amp;&amp;</span> password <span class="token operator">!==</span> <span class="token string">&#039;hunter2&#039;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="8"><code>      attempts<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">// This triggers the effect again!</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="9"><code>      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="10"><code>        isSubmitting <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="11"><code>        password <span class="token operator">=</span> <span class="token string">&#039;&#039;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="12"><code>      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="13"><code>    <span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="14"><code>  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="15"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="16"><code>  <span class="token keyword">function</span> <span class="token function">handleSubmit</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="17"><code>    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="18"><code>    <span class="token keyword">if</span> <span class="token punctuation">(</span>password<span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="19"><code>      isSubmitting <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="20"><code>    <span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="21"><code>  <span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="22"><code><span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="23"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="24"><code><span class="token operator">&lt;</span>form onsubmit<span class="token operator">=</span><span class="token punctuation">{</span>handleSubmit<span class="token punctuation">}</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="25"><code>  <span class="token operator">&lt;</span>input</code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="26"><code>    type<span class="token operator">=</span><span class="token string">&quot;password&quot;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="27"><code>    <span class="token literal-property property">bind</span><span class="token operator">:</span>value<span class="token operator">=</span><span class="token punctuation">{</span>password<span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="28"><code>    disabled<span class="token operator">=</span><span class="token punctuation">{</span>isSubmitting<span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="29"><code>  <span class="token operator">/</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="30"><code>  <span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;submit&quot;</span> disabled<span class="token operator">=</span><span class="token punctuation">{</span>isSubmitting <span class="token operator">||</span> <span class="token operator">!</span>password<span class="token punctuation">}</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="31"><code>    <span class="token punctuation">{</span>isSubmitting <span class="token operator">?</span> <span class="token string">&#039;Checking...&#039;</span> <span class="token operator">:</span> <span class="token string">&#039;Login&#039;</span><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="32"><code>  <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="33"><code>  <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Failed attempts<span class="token operator">:</span> <span class="token punctuation">{</span>attempts<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="34"><code><span class="token operator">&lt;</span><span class="token operator">/</span>form<span class="token operator">&gt;</span></code><br></div></pre></content-area></div></div></div></div></div><script data-name="inline-code-block-props-71" class="props">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['inline-code-block-props-71'] = {"code":"\u003Cscript\u003E\n  let password = $state('');\n  let attempts = $state(0);\n  let isSubmitting = $state(false);\n\n  \u002F\u002F ‚ùå Creates infinite loop!\n  $effect(() =\u003E {\n    if (isSubmitting && password !== 'hunter2') {\n      attempts++; \u002F\u002F This triggers the effect again!\n      setTimeout(() =\u003E {\n        isSubmitting = false;\n        password = '';\n      }, 2000);\n    }\n  });\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    if (password) {\n      isSubmitting = true;\n    }\n  }\n\u003C\u002Fscript\u003E\n\n\u003Cform onsubmit={handleSubmit}\u003E\n  \u003Cinput\n    type=\"password\"\n    bind:value={password}\n    disabled={isSubmitting}\n  \u002F\u003E\n  \u003Cbutton type=\"submit\" disabled={isSubmitting || !password}\u003E\n    {isSubmitting ? 'Checking...' : 'Login'}\n  \u003C\u002Fbutton\u003E\n  \u003Cp\u003EFailed attempts: {attempts}\u003C\u002Fp\u003E\n\u003C\u002Fform\u003E","lang":"svelte"};
		</script></div><p>This component immediately blows the stack because we‚Äôre both reading to and writing to the same <code class="inline">$state()</code> rune in an <code class="inline">$effect()</code> rune callback, so the callback keeps firing.</p><p><a href="https://www.youtube.com/watch?v=AdNJ3fydeao">Reactivity proponents often wax poetic about reactivity making programming like using spreadsheets</a>, where each cell can update and cause other computed cells to update. This just betrays the fact that these programmers have never had to update an excel file in anger. Spreadsheets with many computed cells often suffer from issues like slow-loading, and messy ones might fail to open at all.</p><p>All ‚Äúeffect‚Äù callback APIs suffer from the possibility that a write causes another read, and therefore an infinite loop. Just like Excel, Svelte provides sophisticated heuristics and tricks to prevent infinite loops for most cases, but these crashes can still happen.</p><p>The solution in Svelte is to not use the <code class="inline">$effect()</code> rune, be careful about updating random variables in <code class="inline">$effect()</code>, or use Svelte&#039;s special escape hatch to mark a read of a rune as being non-reactive: the <code class="inline">untrack()</code> function.</p><div style="margin: 30px auto;" class="code-block-container "><div class="css-1vm8pxc"><div class="css-1s1lac9"><div class="css-1lyfw13"><div class="css-1xzghkg"><button class="css-1y5ulpa">Copy</button></div><div class="css-i7rnhw"><div class="css-1y4o4pq"><content-area class="css-84ojsb"><pre autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" class="
							language-
							css-1ashatc
						"><div class="
				prism-line
				css-1flouoi
			" data-index="0"><code><span class="token comment">// ‚úÖ Must use untrack() to break the reactive chain</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="1"><code><span class="token function">$effect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="2"><code>  <span class="token keyword">if</span> <span class="token punctuation">(</span>isSubmitting <span class="token operator">&amp;&amp;</span> password <span class="token operator">!==</span> <span class="token string">&#039;hunter2&#039;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="3"><code>    <span class="token function">untrack</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="4"><code>      attempts<span class="token operator">++</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="5"><code>    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="6"><code>    <span class="token comment">// ... rest of logic</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="7"><code>  <span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="8"><code><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div></pre></content-area></div></div></div></div></div><script data-name="inline-code-block-props-72" class="props">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['inline-code-block-props-72'] = {"code":"\u002F\u002F ‚úÖ Must use untrack() to break the reactive chain\n$effect(() =\u003E {\n  if (isSubmitting && password !== 'hunter2') {\n    untrack(() =\u003E {\n      attempts++;\n    });\n    \u002F\u002F ... rest of logic\n  }\n});","lang":"js"};
		</script></div><p>Again, let&#039;s apply the bug severity heuristic. Are these bugs easy to spot? Usually you‚Äôll blow the stack immediately, but there are still edge-cases in complex components where the infinite loop isn‚Äôt immediately triggered. And because the <code class="inline">$effect()</code> rune colors the execution of all code which runs in it, you have to make sure that not only the code within the effect callback itself doesn‚Äôt write to runes, but also that all nested function calls don‚Äôt write to runes as well. This coloring of effect code is invisible to the user and requires careful tracing of logic, or defensive calls to <code class="inline">untrack()</code>, which might make it so that the effect doesn‚Äôt fire again when you want it to.</p><p>These infinite loop bugs are also uniquely infuriating to fix because debugging when you‚Äôre in a reactive effect might subtly alter the reactivity. Even innocuous operations like logging different pieces of state can trigger infinite loops which wouldn‚Äôt happen when the logging code is commented out, making it so that you can‚Äôt actually introspect your functions without changing their behavior.</p><p>In Crank, there is no effect API to cause infinite loops. There is no effect API. Crank uses the natural lifecycle of generator functions along with some strategic callback APIs for when rendering finishes or a component is unmounted. You can definitely still cause infinite loops, but it will likely be your own fault and the error will usually come with a clear stack trace.</p><p>The irony is that reactive abstractions promise to eliminate manual update management, yet each framework requires its own set of escape hatches and workarounds. Solid needs <code class="inline">splitProps</code> and <code class="inline">mergeProps</code> to safely manipulate props. Vue needs <code class="inline">shallowRef</code> and <code class="inline">markRaw</code> to avoid performance cliffs. Svelte needs <code class="inline">untrack()</code> to prevent infinite loops. These APIs exist precisely because reactivity doesn&#039;t fully insulate you from update concerns - it just transforms them into different, often more subtle problems.</p><h3 id="executional-transparency">Executional Transparency</h3><p>When I wonder why I made Crank use explicit refreshes, and why I tolerated Crank having no good solution to the ‚ÄúI forgot to call <code class="inline">refresh()</code> problem‚Äù until the recent <code class="inline">refresh()</code> callback API, I have to reach for a philosophical computing principle which I haven‚Äôt seen described much called <em>executional transparency.</em></p><p>Executional transparency can be thought of as a quality of code that can be opposed to <em>referential transparency</em>, which is a formal quality of code where when your statements avoid side-effects and use immutable variable declarations and data structures. The result of these constraints is that it becomes easier to ‚Äúsee‚Äù how data is transformed in your code, because there is no hidden state elsewhere which changes how the data is transformed.</p><div style="margin: 30px auto;" class="code-block-container "><div class="css-1vm8pxc"><div class="css-1s1lac9"><div class="css-1lyfw13"><div class="css-1xzghkg"><button role="switch" aria-label="toggle syntax" aria-checked="false" class="css-x8uxd2"><span>JSX</span><span>JS</span><span class="css-1rbk3h3" style="left:24px;"></span></button><button class="css-1y5ulpa">Copy</button></div><div class="css-i7rnhw"><div class="css-1y4o4pq"><content-area class="css-84ojsb"><pre autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" class="
							language-
							css-1ashatc
						"><div class="
				prism-line
				css-1flouoi
			" data-index="0"><code><span class="token comment">// Referentially transparent - no side effects, same input = same output</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="1"><code><span class="token keyword">const</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="2"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="3"><code><span class="token comment">// Not referentially transparent - depends on external state</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="4"><code><span class="token keyword">let</span> counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="5"><code><span class="token keyword">const</span> <span class="token function-variable function">increment</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token operator">++</span>counter<span class="token punctuation">;</span></code><br></div></pre></content-area></div></div></div></div></div><script data-name="inline-code-block-props-73" class="props">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['inline-code-block-props-73'] = {"code":"\u002F\u002F Referentially transparent - no side effects, same input = same output\nconst add = (a, b) =\u003E a + b;\n\n\u002F\u002F Not referentially transparent - depends on external state\nlet counter = 0;\nconst increment = () =\u003E ++counter;","lang":"jsx"};
		</script></div><p>If referential transparency is about seeing what your data does, executional transparency is about seeing when your code runs. Frameworks, classically defined as abstractions which exhibit ‚ÄúInversion of Control,‚Äù or simply defined APIs which call your code rather than you calling the API‚Äôs code, clearly have an important role to play in making your code executionally transparent. Crank code is executionally transparent because of its explicitness: a component runs if and only if it is updated by a parent or <code class="inline">refresh()</code> is called on the component. Crank also encourages executionally transparent code in a ‚Äúexercise every day‚Äù kind of way, in that it forces developers to reason about when exactly they need their app updated with explicit calls to <code class="inline">refresh()</code>.‚Ä®</p><p>The root of this philosophy of prioritizing ‚Äúexecutional transparency‚Äù is to contrast it with React.js, whose development is painful mainly because, despite the fact it has the least reactive abstraction of all frameworks mentioned, simple <code class="inline">setState()</code> calls, it is also somehow the most executionally opaque. Over the years, React devalued this sort of transparency by design, by, for instance, double-rendering components in development to ensure that rendering doesn‚Äôt contain any side-effects, and implementing confusing APIs like <code class="inline">useEffect()</code> and <code class="inline">useSyncExternalStore()</code> and <code class="inline">useTransition()</code> where callbacks return callbacks and all of them can be called at the whim of some arbitrary scheduling algorithm.</p><p>At each step of post-class React development, it seems that React has made component code more and more executionally opaque by cutting up the component model into more and more individual callbacks which can be fired at any time, and differently based on platform. Perhaps it was because React maintainers thought referential transparency was more important than executional transparency, even if they didn‚Äôt think in these terms. But the reality is you can have both referentially transparent and executionally transparent code. While they are opposing concepts, the two qualities are not inversely correlated, and good software engineering often maximizes both.</p><p>The result for the React ecosystem is countless misunderstandings and blog posts about when code runs, a variety of tools to help developers debug excess rendering like <code class="inline">Why Did You Render</code>, and best practice disputes for even the simplest of tasks like storing a constant value in scope over the lifetime of a component. Even in 2025, people are still writing articles about when to use <a href="https://tkdodo.eu/blog/the-useless-use-callback"><code class="inline">useCallback</code></a>.</p><h3 id="non-reactivity-is-a-superpower">Non-reactivity Is a Superpower</h3><p>Honestly, when I think about reactive abstractions and their drawbacks, and all the human-months poured into making the Web reactive, I am shocked that more frameworks don&#039;t choose to be non-reactive. And then late at night, I wonder: is it any wonder that framework maintainers, mostly men, might not think that the simplest solution is to <em>ask</em> the developer when to update? Is it any wonder that framework maintainers, often employed by advertising firms like Facebook and Google, might think it‚Äôs necessary for there to be an abstraction which surveils your code and deduces when to update, rather than explicitly asking you for permission?</p><p>Maybe it‚Äôs because I see the problems of the web differently. While every framework chases increasingly complete reactive solutions ‚Äî the latest versions of React Compiler literally put all your variables in a giant cache, making step-through debugging useless, just to prevent <em>some</em> re-renders ‚Äî the end result seems to be that they‚Äôre making TodoMVC prettier.</p><p>But the frontiers of the web aren&#039;t about TODO apps. The frontier is the hard things like animations, virtual lists, scrollytelling, content-editable code editors, WebGL renderers, games, realtime applications with websocket streams, massive data visualizations, audio and video editors, slippy cartographic maps ‚Äî the list of cool but difficult things you can build on the Web Platform goes on and on, and yet...</p><p>Reactive abstractions don‚Äôt help with any of these difficult problems. The more I use Crank, the more I see that explicit control over when your component renders is a superpower. You keep the context of why your code is running. You render precisely when needed. And there are no leaky reactive abstractions mediating these critical decisions.</p><p>After five years and 1,875 commits of working on Crank, meditatively, repetitively, obsessively asking the question ‚Äúwhat if components were just functions?‚Äù I think Crank now has a pretty good developer experience, and if you read this far please head over to the <a href="https://crank.js.org/playground">playground</a> and play around with some of the cool examples. We have the ability to make the web more expressive and interactive, and it really just starts with the question ‚ÄúWhy be Reactive?‚Äù</p></div></article><div class="css-1gworah"><a href="https://github.com/bikeshaving/crank/edit/main/docs/blog/2025-08-20-why-be-reactive.md" target="_blank" rel="noopener noreferrer" class="css-vrpffa"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>Edit on GitHub</a></div><div class="css-9hlwm"><script src="https://giscus.app/client.js" data-repo="bikeshaving/crank" data-repo-id="MDEwOlJlcG9zaXRvcnkyMDY0Mzk3MDc=" data-category="Comments" data-category-id="DIC_kwDODE4FG84Cw3V5" data-mapping="url" data-strict="1" data-reactions-enabled="1" data-emit-metadata="1" data-input-position="top" data-theme="preferred_color_scheme" data-lang="en" data-loading="lazy" crossorigin="anonymous" async></script></div></main><footer class="css-1nd56js"><nav class="css-nf2n4z"><a href="/guides/getting-started">Docs</a><a href="/blog">Blog</a><a href="/playground">Playground</a><a href="https://github.com/bikeshaving/crank">GitHub</a><a href="https://www.npmjs.com/package/@b9g/crank">NPM</a></nav><p class="css-1st8n6b">MIT Licensed ¬∑ Made with Crank.js</p></footer><script data-name="embedded-json-74" id="static-urls">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['embedded-json-74'] = {"client.css":"\u002Fstatic\u002Fclient-3f2e47bea41770a9.css","@b9g\u002Fcrank":"\u002Fstatic\u002Findex-f24db9ec1faf2d79.js","@b9g\u002Fcrank\u002Fasync":"\u002Fstatic\u002Fasync-3db978e65c84a55b.js","@b9g\u002Fcrank\u002Fdom":"\u002Fstatic\u002Fdom-99d3b4d2ff92e9df.js","@b9g\u002Fcrank\u002Fevent-target":"\u002Fstatic\u002Fevent-target-2c01c58f7606eeb9.js","@b9g\u002Fcrank\u002Fhtml":"\u002Fstatic\u002Fhtml-1bd751aee7ae1a45.js","@b9g\u002Fcrank\u002Fjsx-dev-runtime":"\u002Fstatic\u002Fjsx-dev-runtime-ecbadb89fa15c845.js","@b9g\u002Fcrank\u002Fjsx-runtime":"\u002Fstatic\u002Fjsx-runtime-ecbadb89fa15c845.js","@b9g\u002Fcrank\u002Fjsx-tag":"\u002Fstatic\u002Fjsx-tag-25a058368a652f33.js","@b9g\u002Fcrank\u002Fstandalone":"\u002Fstatic\u002Fstandalone-cd454af9ce80e4d8.js"};
		</script><script type="module" src="/static/navbar-aea88ca83ee67433.js"></script><script type="module" src="/static/code-blocks-619c6b2bdf2b9885.js"></script><script type="module" src="/static/search-c7ba3c3c7573106c.js"></script><script type="module" src="/static/gear-ee8d9b6348bc018a.js"></script></body></html>