{
  "version": 3,
  "sources": ["../node_modules/@esbuild-plugins/node-globals-polyfill/process.js", "../node_modules/@esbuild-plugins/node-globals-polyfill/Buffer.js", "../../src/crank.ts", "../../src/jsx-tag.ts", "../node_modules/@emotion/sheet/dist/emotion-sheet.browser.esm.js", "../node_modules/stylis/src/Enum.js", "../node_modules/stylis/src/Utility.js", "../node_modules/stylis/src/Tokenizer.js", "../node_modules/stylis/src/Parser.js", "../node_modules/stylis/src/Serializer.js", "../node_modules/stylis/src/Middleware.js", "../node_modules/@emotion/memoize/dist/emotion-memoize.esm.js", "../node_modules/@emotion/cache/dist/emotion-cache.browser.esm.js", "../node_modules/@emotion/hash/dist/emotion-hash.esm.js", "../node_modules/@emotion/unitless/dist/emotion-unitless.esm.js", "../node_modules/@emotion/serialize/dist/emotion-serialize.browser.esm.js", "../node_modules/@emotion/utils/dist/emotion-utils.browser.esm.js", "../node_modules/@emotion/css/create-instance/dist/emotion-css-create-instance.esm.js", "../node_modules/@emotion/css/dist/emotion-css.esm.js", "components/gear-interactive.ts", "components/color-scheme-toggle.ts", "components/navbar.ts", "../../src/dom.ts", "clients/navbar.ts"],
  "sourcesContent": ["// shim for using process in browser\n// based off https://github.com/defunctzombie/node-process/blob/master/browser.js\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined')\n}\nfunction defaultClearTimeout() {\n    throw new Error('clearTimeout has not been defined')\n}\nvar cachedSetTimeout = defaultSetTimout\nvar cachedClearTimeout = defaultClearTimeout\nif (typeof global.setTimeout === 'function') {\n    cachedSetTimeout = setTimeout\n}\nif (typeof global.clearTimeout === 'function') {\n    cachedClearTimeout = clearTimeout\n}\n\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0)\n    }\n    // if setTimeout wasn't available but was latter defined\n    if (\n        (cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) &&\n        setTimeout\n    ) {\n        cachedSetTimeout = setTimeout\n        return setTimeout(fun, 0)\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0)\n    } catch (e) {\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0)\n        } catch (e) {\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0)\n        }\n    }\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker)\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if (\n        (cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) &&\n        clearTimeout\n    ) {\n        cachedClearTimeout = clearTimeout\n        return clearTimeout(marker)\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker)\n    } catch (e) {\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker)\n        } catch (e) {\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker)\n        }\n    }\n}\nvar queue = []\nvar draining = false\nvar currentQueue\nvar queueIndex = -1\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return\n    }\n    draining = false\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue)\n    } else {\n        queueIndex = -1\n    }\n    if (queue.length) {\n        drainQueue()\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return\n    }\n    var timeout = runTimeout(cleanUpNextTick)\n    draining = true\n\n    var len = queue.length\n    while (len) {\n        currentQueue = queue\n        queue = []\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run()\n            }\n        }\n        queueIndex = -1\n        len = queue.length\n    }\n    currentQueue = null\n    draining = false\n    runClearTimeout(timeout)\n}\nfunction nextTick(fun) {\n    var args = new Array(arguments.length - 1)\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i]\n        }\n    }\n    queue.push(new Item(fun, args))\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue)\n    }\n}\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun\n    this.array = array\n}\nItem.prototype.run = function() {\n    this.fun.apply(null, this.array)\n}\nvar title = 'browser'\nvar platform = 'browser'\nvar browser = true\nvar env = {}\nvar argv = []\nvar version = '' // empty string to avoid regexp issues\nvar versions = {}\nvar release = {}\nvar config = {}\n\nfunction noop() {}\n\nvar on = noop\nvar addListener = noop\nvar once = noop\nvar off = noop\nvar removeListener = noop\nvar removeAllListeners = noop\nvar emit = noop\n\nfunction binding(name) {\n    throw new Error('process.binding is not supported')\n}\n\nfunction cwd() {\n    return '/'\n}\nfunction chdir(dir) {\n    throw new Error('process.chdir is not supported')\n}\nfunction umask() {\n    return 0\n}\n\n// from https://github.com/kumavis/browser-process-hrtime/blob/master/index.js\nvar performance = global.performance || {}\nvar performanceNow =\n    performance.now ||\n    performance.mozNow ||\n    performance.msNow ||\n    performance.oNow ||\n    performance.webkitNow ||\n    function() {\n        return new Date().getTime()\n    }\n\n// generate timestamp or delta\n// see http://nodejs.org/api/process.html#process_process_hrtime\nfunction hrtime(previousTimestamp) {\n    var clocktime = performanceNow.call(performance) * 1e-3\n    var seconds = Math.floor(clocktime)\n    var nanoseconds = Math.floor((clocktime % 1) * 1e9)\n    if (previousTimestamp) {\n        seconds = seconds - previousTimestamp[0]\n        nanoseconds = nanoseconds - previousTimestamp[1]\n        if (nanoseconds < 0) {\n            seconds--\n            nanoseconds += 1e9\n        }\n    }\n    return [seconds, nanoseconds]\n}\n\nvar startTime = new Date()\nfunction uptime() {\n    var currentTime = new Date()\n    var dif = currentTime - startTime\n    return dif / 1000\n}\n\nexport var process = {\n    nextTick: nextTick,\n    title: title,\n    browser: browser,\n    env: env,\n    argv: argv,\n    version: version,\n    versions: versions,\n    on: on,\n    addListener: addListener,\n    once: once,\n    off: off,\n    removeListener: removeListener,\n    removeAllListeners: removeAllListeners,\n    emit: emit,\n    binding: binding,\n    cwd: cwd,\n    chdir: chdir,\n    umask: umask,\n    hrtime: hrtime,\n    platform: platform,\n    release: release,\n    config: config,\n    uptime: uptime,\n}\n\n// replace process.env.VAR with define\n\nconst defines = {}\nObject.keys(defines).forEach((key) => {\n    const segs = key.split('.')\n    let target = process\n    for (let i = 0; i < segs.length; i++) {\n        const seg = segs[i]\n        if (i === segs.length - 1) {\n            target[seg] = defines[key]\n        } else {\n            target = target[seg] || (target[seg] = {})\n        }\n    }\n})\n", "// taken from https://github.com/calvinmetcalf/buffer-es6\n\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\nvar inited = false\nfunction init() {\n    inited = true\n    var code =\n        'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\n    for (var i = 0, len = code.length; i < len; ++i) {\n        lookup[i] = code[i]\n        revLookup[code.charCodeAt(i)] = i\n    }\n\n    revLookup['-'.charCodeAt(0)] = 62\n    revLookup['_'.charCodeAt(0)] = 63\n}\n\nfunction base64toByteArray(b64) {\n    if (!inited) {\n        init()\n    }\n    var i, j, l, tmp, placeHolders, arr\n    var len = b64.length\n\n    if (len % 4 > 0) {\n        throw new Error('Invalid string. Length must be a multiple of 4')\n    }\n\n    // the number of equal signs (place holders)\n    // if there are two placeholders, than the two characters before it\n    // represent one byte\n    // if there is only one, then the three characters before it represent 2 bytes\n    // this is just a cheap hack to not do indexOf twice\n    placeHolders = b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0\n\n    // base64 is 4/3 + up to two characters of the original data\n    arr = new Arr((len * 3) / 4 - placeHolders)\n\n    // if there are placeholders, only get up to the last complete 4 chars\n    l = placeHolders > 0 ? len - 4 : len\n\n    var L = 0\n\n    for (i = 0, j = 0; i < l; i += 4, j += 3) {\n        tmp =\n            (revLookup[b64.charCodeAt(i)] << 18) |\n            (revLookup[b64.charCodeAt(i + 1)] << 12) |\n            (revLookup[b64.charCodeAt(i + 2)] << 6) |\n            revLookup[b64.charCodeAt(i + 3)]\n        arr[L++] = (tmp >> 16) & 0xff\n        arr[L++] = (tmp >> 8) & 0xff\n        arr[L++] = tmp & 0xff\n    }\n\n    if (placeHolders === 2) {\n        tmp =\n            (revLookup[b64.charCodeAt(i)] << 2) |\n            (revLookup[b64.charCodeAt(i + 1)] >> 4)\n        arr[L++] = tmp & 0xff\n    } else if (placeHolders === 1) {\n        tmp =\n            (revLookup[b64.charCodeAt(i)] << 10) |\n            (revLookup[b64.charCodeAt(i + 1)] << 4) |\n            (revLookup[b64.charCodeAt(i + 2)] >> 2)\n        arr[L++] = (tmp >> 8) & 0xff\n        arr[L++] = tmp & 0xff\n    }\n\n    return arr\n}\n\nfunction tripletToBase64(num) {\n    return (\n        lookup[(num >> 18) & 0x3f] +\n        lookup[(num >> 12) & 0x3f] +\n        lookup[(num >> 6) & 0x3f] +\n        lookup[num & 0x3f]\n    )\n}\n\nfunction encodeChunk(uint8, start, end) {\n    var tmp\n    var output = []\n    for (var i = start; i < end; i += 3) {\n        tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + uint8[i + 2]\n        output.push(tripletToBase64(tmp))\n    }\n    return output.join('')\n}\n\nfunction base64fromByteArray(uint8) {\n    if (!inited) {\n        init()\n    }\n    var tmp\n    var len = uint8.length\n    var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n    var output = ''\n    var parts = []\n    var maxChunkLength = 16383 // must be multiple of 3\n\n    // go through the array every three bytes, we'll deal with trailing stuff later\n    for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n        parts.push(\n            encodeChunk(\n                uint8,\n                i,\n                i + maxChunkLength > len2 ? len2 : i + maxChunkLength,\n            ),\n        )\n    }\n\n    // pad the end with zeros, but make sure to not forget the extra bytes\n    if (extraBytes === 1) {\n        tmp = uint8[len - 1]\n        output += lookup[tmp >> 2]\n        output += lookup[(tmp << 4) & 0x3f]\n        output += '=='\n    } else if (extraBytes === 2) {\n        tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n        output += lookup[tmp >> 10]\n        output += lookup[(tmp >> 4) & 0x3f]\n        output += lookup[(tmp << 2) & 0x3f]\n        output += '='\n    }\n\n    parts.push(output)\n\n    return parts.join('')\n}\n\nvar INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT =\n    global.TYPED_ARRAY_SUPPORT !== undefined ? global.TYPED_ARRAY_SUPPORT : true\n\nfunction kMaxLength() {\n    return Buffer.TYPED_ARRAY_SUPPORT ? 0x7fffffff : 0x3fffffff\n}\n\nfunction createBuffer(that, length) {\n    if (kMaxLength() < length) {\n        throw new RangeError('Invalid typed array length')\n    }\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        // Return an augmented `Uint8Array` instance, for best performance\n        that = new Uint8Array(length)\n        that.__proto__ = Buffer.prototype\n    } else {\n        // Fallback: Return an object instance of the Buffer class\n        if (that === null) {\n            that = new Buffer(length)\n        }\n        that.length = length\n    }\n\n    return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nexport function Buffer(arg, encodingOrOffset, length) {\n    if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n        return new Buffer(arg, encodingOrOffset, length)\n    }\n\n    // Common case.\n    if (typeof arg === 'number') {\n        if (typeof encodingOrOffset === 'string') {\n            throw new Error(\n                'If encoding is specified then the first argument must be a string',\n            )\n        }\n        return allocUnsafe(this, arg)\n    }\n    return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function(arr) {\n    arr.__proto__ = Buffer.prototype\n    return arr\n}\n\nfunction from(that, value, encodingOrOffset, length) {\n    if (typeof value === 'number') {\n        throw new TypeError('\"value\" argument must not be a number')\n    }\n\n    if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n        return fromArrayBuffer(that, value, encodingOrOffset, length)\n    }\n\n    if (typeof value === 'string') {\n        return fromString(that, value, encodingOrOffset)\n    }\n\n    return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function(value, encodingOrOffset, length) {\n    return from(null, value, encodingOrOffset, length)\n}\n\nBuffer.kMaxLength = kMaxLength()\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n    Buffer.prototype.__proto__ = Uint8Array.prototype\n    Buffer.__proto__ = Uint8Array\n    if (\n        typeof Symbol !== 'undefined' &&\n        Symbol.species &&\n        Buffer[Symbol.species] === Buffer\n    ) {\n        // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n        // Object.defineProperty(Buffer, Symbol.species, {\n        //   value: null,\n        //   configurable: true\n        // })\n    }\n}\n\nfunction assertSize(size) {\n    if (typeof size !== 'number') {\n        throw new TypeError('\"size\" argument must be a number')\n    } else if (size < 0) {\n        throw new RangeError('\"size\" argument must not be negative')\n    }\n}\n\nfunction alloc(that, size, fill, encoding) {\n    assertSize(size)\n    if (size <= 0) {\n        return createBuffer(that, size)\n    }\n    if (fill !== undefined) {\n        // Only pay attention to encoding if it's a string. This\n        // prevents accidentally sending in a number that would\n        // be interpretted as a start offset.\n        return typeof encoding === 'string'\n            ? createBuffer(that, size).fill(fill, encoding)\n            : createBuffer(that, size).fill(fill)\n    }\n    return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function(size, fill, encoding) {\n    return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe(that, size) {\n    assertSize(size)\n    that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n    if (!Buffer.TYPED_ARRAY_SUPPORT) {\n        for (var i = 0; i < size; ++i) {\n            that[i] = 0\n        }\n    }\n    return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function(size) {\n    return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function(size) {\n    return allocUnsafe(null, size)\n}\n\nfunction fromString(that, string, encoding) {\n    if (typeof encoding !== 'string' || encoding === '') {\n        encoding = 'utf8'\n    }\n\n    if (!Buffer.isEncoding(encoding)) {\n        throw new TypeError('\"encoding\" must be a valid string encoding')\n    }\n\n    var length = byteLength(string, encoding) | 0\n    that = createBuffer(that, length)\n\n    var actual = that.write(string, encoding)\n\n    if (actual !== length) {\n        // Writing a hex string, for example, that contains invalid characters will\n        // cause everything after the first invalid character to be ignored. (e.g.\n        // 'abxxcd' will be treated as 'ab')\n        that = that.slice(0, actual)\n    }\n\n    return that\n}\n\nfunction fromArrayLike(that, array) {\n    var length = array.length < 0 ? 0 : checked(array.length) | 0\n    that = createBuffer(that, length)\n    for (var i = 0; i < length; i += 1) {\n        that[i] = array[i] & 255\n    }\n    return that\n}\n\nfunction fromArrayBuffer(that, array, byteOffset, length) {\n    array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n    if (byteOffset < 0 || array.byteLength < byteOffset) {\n        throw new RangeError(\"'offset' is out of bounds\")\n    }\n\n    if (array.byteLength < byteOffset + (length || 0)) {\n        throw new RangeError(\"'length' is out of bounds\")\n    }\n\n    if (byteOffset === undefined && length === undefined) {\n        array = new Uint8Array(array)\n    } else if (length === undefined) {\n        array = new Uint8Array(array, byteOffset)\n    } else {\n        array = new Uint8Array(array, byteOffset, length)\n    }\n\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        // Return an augmented `Uint8Array` instance, for best performance\n        that = array\n        that.__proto__ = Buffer.prototype\n    } else {\n        // Fallback: Return an object instance of the Buffer class\n        that = fromArrayLike(that, array)\n    }\n    return that\n}\n\nfunction fromObject(that, obj) {\n    if (internalIsBuffer(obj)) {\n        var len = checked(obj.length) | 0\n        that = createBuffer(that, len)\n\n        if (that.length === 0) {\n            return that\n        }\n\n        obj.copy(that, 0, 0, len)\n        return that\n    }\n\n    if (obj) {\n        if (\n            (typeof ArrayBuffer !== 'undefined' &&\n                obj.buffer instanceof ArrayBuffer) ||\n            'length' in obj\n        ) {\n            if (typeof obj.length !== 'number' || isnan(obj.length)) {\n                return createBuffer(that, 0)\n            }\n            return fromArrayLike(that, obj)\n        }\n\n        if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n            return fromArrayLike(that, obj.data)\n        }\n    }\n\n    throw new TypeError(\n        'First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.',\n    )\n}\n\nfunction checked(length) {\n    // Note: cannot use `length < kMaxLength()` here because that fails when\n    // length is NaN (which is otherwise coerced to zero.)\n    if (length >= kMaxLength()) {\n        throw new RangeError(\n            'Attempt to allocate Buffer larger than maximum ' +\n                'size: 0x' +\n                kMaxLength().toString(16) +\n                ' bytes',\n        )\n    }\n    return length | 0\n}\n\nexport function SlowBuffer(length) {\n    if (+length != length) {\n        // eslint-disable-line eqeqeq\n        length = 0\n    }\n    return Buffer.alloc(+length)\n}\nBuffer.isBuffer = isBuffer\nfunction internalIsBuffer(b) {\n    return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare(a, b) {\n    if (!internalIsBuffer(a) || !internalIsBuffer(b)) {\n        throw new TypeError('Arguments must be Buffers')\n    }\n\n    if (a === b) return 0\n\n    var x = a.length\n    var y = b.length\n\n    for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n        if (a[i] !== b[i]) {\n            x = a[i]\n            y = b[i]\n            break\n        }\n    }\n\n    if (x < y) return -1\n    if (y < x) return 1\n    return 0\n}\n\nBuffer.isEncoding = function isEncoding(encoding) {\n    switch (String(encoding).toLowerCase()) {\n        case 'hex':\n        case 'utf8':\n        case 'utf-8':\n        case 'ascii':\n        case 'latin1':\n        case 'binary':\n        case 'base64':\n        case 'ucs2':\n        case 'ucs-2':\n        case 'utf16le':\n        case 'utf-16le':\n            return true\n        default:\n            return false\n    }\n}\n\nBuffer.concat = function concat(list, length) {\n    if (!Array.isArray(list)) {\n        throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n\n    if (list.length === 0) {\n        return Buffer.alloc(0)\n    }\n\n    var i\n    if (length === undefined) {\n        length = 0\n        for (i = 0; i < list.length; ++i) {\n            length += list[i].length\n        }\n    }\n\n    var buffer = Buffer.allocUnsafe(length)\n    var pos = 0\n    for (i = 0; i < list.length; ++i) {\n        var buf = list[i]\n        if (!internalIsBuffer(buf)) {\n            throw new TypeError('\"list\" argument must be an Array of Buffers')\n        }\n        buf.copy(buffer, pos)\n        pos += buf.length\n    }\n    return buffer\n}\n\nfunction byteLength(string, encoding) {\n    if (internalIsBuffer(string)) {\n        return string.length\n    }\n    if (\n        typeof ArrayBuffer !== 'undefined' &&\n        typeof ArrayBuffer.isView === 'function' &&\n        (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)\n    ) {\n        return string.byteLength\n    }\n    if (typeof string !== 'string') {\n        string = '' + string\n    }\n\n    var len = string.length\n    if (len === 0) return 0\n\n    // Use a for loop to avoid recursion\n    var loweredCase = false\n    for (;;) {\n        switch (encoding) {\n            case 'ascii':\n            case 'latin1':\n            case 'binary':\n                return len\n            case 'utf8':\n            case 'utf-8':\n            case undefined:\n                return utf8ToBytes(string).length\n            case 'ucs2':\n            case 'ucs-2':\n            case 'utf16le':\n            case 'utf-16le':\n                return len * 2\n            case 'hex':\n                return len >>> 1\n            case 'base64':\n                return base64ToBytes(string).length\n            default:\n                if (loweredCase) return utf8ToBytes(string).length // assume utf8\n                encoding = ('' + encoding).toLowerCase()\n                loweredCase = true\n        }\n    }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString(encoding, start, end) {\n    var loweredCase = false\n\n    // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n    // property of a typed array.\n\n    // This behaves neither like String nor Uint8Array in that we set start/end\n    // to their upper/lower bounds if the value passed is out of range.\n    // undefined is handled specially as per ECMA-262 6th Edition,\n    // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n    if (start === undefined || start < 0) {\n        start = 0\n    }\n    // Return early if start > this.length. Done here to prevent potential uint32\n    // coercion fail below.\n    if (start > this.length) {\n        return ''\n    }\n\n    if (end === undefined || end > this.length) {\n        end = this.length\n    }\n\n    if (end <= 0) {\n        return ''\n    }\n\n    // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n    end >>>= 0\n    start >>>= 0\n\n    if (end <= start) {\n        return ''\n    }\n\n    if (!encoding) encoding = 'utf8'\n\n    while (true) {\n        switch (encoding) {\n            case 'hex':\n                return hexSlice(this, start, end)\n\n            case 'utf8':\n            case 'utf-8':\n                return utf8Slice(this, start, end)\n\n            case 'ascii':\n                return asciiSlice(this, start, end)\n\n            case 'latin1':\n            case 'binary':\n                return latin1Slice(this, start, end)\n\n            case 'base64':\n                return base64Slice(this, start, end)\n\n            case 'ucs2':\n            case 'ucs-2':\n            case 'utf16le':\n            case 'utf-16le':\n                return utf16leSlice(this, start, end)\n\n            default:\n                if (loweredCase)\n                    throw new TypeError('Unknown encoding: ' + encoding)\n                encoding = (encoding + '').toLowerCase()\n                loweredCase = true\n        }\n    }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap(b, n, m) {\n    var i = b[n]\n    b[n] = b[m]\n    b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16() {\n    var len = this.length\n    if (len % 2 !== 0) {\n        throw new RangeError('Buffer size must be a multiple of 16-bits')\n    }\n    for (var i = 0; i < len; i += 2) {\n        swap(this, i, i + 1)\n    }\n    return this\n}\n\nBuffer.prototype.swap32 = function swap32() {\n    var len = this.length\n    if (len % 4 !== 0) {\n        throw new RangeError('Buffer size must be a multiple of 32-bits')\n    }\n    for (var i = 0; i < len; i += 4) {\n        swap(this, i, i + 3)\n        swap(this, i + 1, i + 2)\n    }\n    return this\n}\n\nBuffer.prototype.swap64 = function swap64() {\n    var len = this.length\n    if (len % 8 !== 0) {\n        throw new RangeError('Buffer size must be a multiple of 64-bits')\n    }\n    for (var i = 0; i < len; i += 8) {\n        swap(this, i, i + 7)\n        swap(this, i + 1, i + 6)\n        swap(this, i + 2, i + 5)\n        swap(this, i + 3, i + 4)\n    }\n    return this\n}\n\nBuffer.prototype.toString = function toString() {\n    var length = this.length | 0\n    if (length === 0) return ''\n    if (arguments.length === 0) return utf8Slice(this, 0, length)\n    return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals(b) {\n    if (!internalIsBuffer(b)) throw new TypeError('Argument must be a Buffer')\n    if (this === b) return true\n    return Buffer.compare(this, b) === 0\n}\n\n\nBuffer.prototype.compare = function compare(\n    target,\n    start,\n    end,\n    thisStart,\n    thisEnd,\n) {\n    if (!internalIsBuffer(target)) {\n        throw new TypeError('Argument must be a Buffer')\n    }\n\n    if (start === undefined) {\n        start = 0\n    }\n    if (end === undefined) {\n        end = target ? target.length : 0\n    }\n    if (thisStart === undefined) {\n        thisStart = 0\n    }\n    if (thisEnd === undefined) {\n        thisEnd = this.length\n    }\n\n    if (\n        start < 0 ||\n        end > target.length ||\n        thisStart < 0 ||\n        thisEnd > this.length\n    ) {\n        throw new RangeError('out of range index')\n    }\n\n    if (thisStart >= thisEnd && start >= end) {\n        return 0\n    }\n    if (thisStart >= thisEnd) {\n        return -1\n    }\n    if (start >= end) {\n        return 1\n    }\n\n    start >>>= 0\n    end >>>= 0\n    thisStart >>>= 0\n    thisEnd >>>= 0\n\n    if (this === target) return 0\n\n    var x = thisEnd - thisStart\n    var y = end - start\n    var len = Math.min(x, y)\n\n    var thisCopy = this.slice(thisStart, thisEnd)\n    var targetCopy = target.slice(start, end)\n\n    for (var i = 0; i < len; ++i) {\n        if (thisCopy[i] !== targetCopy[i]) {\n            x = thisCopy[i]\n            y = targetCopy[i]\n            break\n        }\n    }\n\n    if (x < y) return -1\n    if (y < x) return 1\n    return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf(buffer, val, byteOffset, encoding, dir) {\n    // Empty buffer means no match\n    if (buffer.length === 0) return -1\n\n    // Normalize byteOffset\n    if (typeof byteOffset === 'string') {\n        encoding = byteOffset\n        byteOffset = 0\n    } else if (byteOffset > 0x7fffffff) {\n        byteOffset = 0x7fffffff\n    } else if (byteOffset < -0x80000000) {\n        byteOffset = -0x80000000\n    }\n    byteOffset = +byteOffset // Coerce to Number.\n    if (isNaN(byteOffset)) {\n        // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n        byteOffset = dir ? 0 : buffer.length - 1\n    }\n\n    // Normalize byteOffset: negative offsets start from the end of the buffer\n    if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n    if (byteOffset >= buffer.length) {\n        if (dir) return -1\n        else byteOffset = buffer.length - 1\n    } else if (byteOffset < 0) {\n        if (dir) byteOffset = 0\n        else return -1\n    }\n\n    // Normalize val\n    if (typeof val === 'string') {\n        val = Buffer.from(val, encoding)\n    }\n\n    // Finally, search either indexOf (if dir is true) or lastIndexOf\n    if (internalIsBuffer(val)) {\n        // Special case: looking for empty string/buffer always fails\n        if (val.length === 0) {\n            return -1\n        }\n        return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n    } else if (typeof val === 'number') {\n        val = val & 0xff // Search for a byte value [0-255]\n        if (\n            Buffer.TYPED_ARRAY_SUPPORT &&\n            typeof Uint8Array.prototype.indexOf === 'function'\n        ) {\n            if (dir) {\n                return Uint8Array.prototype.indexOf.call(\n                    buffer,\n                    val,\n                    byteOffset,\n                )\n            } else {\n                return Uint8Array.prototype.lastIndexOf.call(\n                    buffer,\n                    val,\n                    byteOffset,\n                )\n            }\n        }\n        return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n    }\n\n    throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf(arr, val, byteOffset, encoding, dir) {\n    var indexSize = 1\n    var arrLength = arr.length\n    var valLength = val.length\n\n    if (encoding !== undefined) {\n        encoding = String(encoding).toLowerCase()\n        if (\n            encoding === 'ucs2' ||\n            encoding === 'ucs-2' ||\n            encoding === 'utf16le' ||\n            encoding === 'utf-16le'\n        ) {\n            if (arr.length < 2 || val.length < 2) {\n                return -1\n            }\n            indexSize = 2\n            arrLength /= 2\n            valLength /= 2\n            byteOffset /= 2\n        }\n    }\n\n    function read(buf, i) {\n        if (indexSize === 1) {\n            return buf[i]\n        } else {\n            return buf.readUInt16BE(i * indexSize)\n        }\n    }\n\n    var i\n    if (dir) {\n        var foundIndex = -1\n        for (i = byteOffset; i < arrLength; i++) {\n            if (\n                read(arr, i) ===\n                read(val, foundIndex === -1 ? 0 : i - foundIndex)\n            ) {\n                if (foundIndex === -1) foundIndex = i\n                if (i - foundIndex + 1 === valLength)\n                    return foundIndex * indexSize\n            } else {\n                if (foundIndex !== -1) i -= i - foundIndex\n                foundIndex = -1\n            }\n        }\n    } else {\n        if (byteOffset + valLength > arrLength)\n            byteOffset = arrLength - valLength\n        for (i = byteOffset; i >= 0; i--) {\n            var found = true\n            for (var j = 0; j < valLength; j++) {\n                if (read(arr, i + j) !== read(val, j)) {\n                    found = false\n                    break\n                }\n            }\n            if (found) return i\n        }\n    }\n\n    return -1\n}\n\nBuffer.prototype.includes = function includes(val, byteOffset, encoding) {\n    return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf(val, byteOffset, encoding) {\n    return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf(val, byteOffset, encoding) {\n    return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite(buf, string, offset, length) {\n    offset = Number(offset) || 0\n    var remaining = buf.length - offset\n    if (!length) {\n        length = remaining\n    } else {\n        length = Number(length)\n        if (length > remaining) {\n            length = remaining\n        }\n    }\n\n    // must be an even number of digits\n    var strLen = string.length\n    if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n    if (length > strLen / 2) {\n        length = strLen / 2\n    }\n    for (var i = 0; i < length; ++i) {\n        var parsed = parseInt(string.substr(i * 2, 2), 16)\n        if (isNaN(parsed)) return i\n        buf[offset + i] = parsed\n    }\n    return i\n}\n\nfunction utf8Write(buf, string, offset, length) {\n    return blitBuffer(\n        utf8ToBytes(string, buf.length - offset),\n        buf,\n        offset,\n        length,\n    )\n}\n\nfunction asciiWrite(buf, string, offset, length) {\n    return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write(buf, string, offset, length) {\n    return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write(buf, string, offset, length) {\n    return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write(buf, string, offset, length) {\n    return blitBuffer(\n        utf16leToBytes(string, buf.length - offset),\n        buf,\n        offset,\n        length,\n    )\n}\n\nBuffer.prototype.write = function write(string, offset, length, encoding) {\n    // Buffer#write(string)\n    if (offset === undefined) {\n        encoding = 'utf8'\n        length = this.length\n        offset = 0\n        // Buffer#write(string, encoding)\n    } else if (length === undefined && typeof offset === 'string') {\n        encoding = offset\n        length = this.length\n        offset = 0\n        // Buffer#write(string, offset[, length][, encoding])\n    } else if (isFinite(offset)) {\n        offset = offset | 0\n        if (isFinite(length)) {\n            length = length | 0\n            if (encoding === undefined) encoding = 'utf8'\n        } else {\n            encoding = length\n            length = undefined\n        }\n        // legacy write(string, encoding, offset, length) - remove in v0.13\n    } else {\n        throw new Error(\n            'Buffer.write(string, encoding, offset[, length]) is no longer supported',\n        )\n    }\n\n    var remaining = this.length - offset\n    if (length === undefined || length > remaining) length = remaining\n\n    if (\n        (string.length > 0 && (length < 0 || offset < 0)) ||\n        offset > this.length\n    ) {\n        throw new RangeError('Attempt to write outside buffer bounds')\n    }\n\n    if (!encoding) encoding = 'utf8'\n\n    var loweredCase = false\n    for (;;) {\n        switch (encoding) {\n            case 'hex':\n                return hexWrite(this, string, offset, length)\n\n            case 'utf8':\n            case 'utf-8':\n                return utf8Write(this, string, offset, length)\n\n            case 'ascii':\n                return asciiWrite(this, string, offset, length)\n\n            case 'latin1':\n            case 'binary':\n                return latin1Write(this, string, offset, length)\n\n            case 'base64':\n                // Warning: maxLength not taken into account in base64Write\n                return base64Write(this, string, offset, length)\n\n            case 'ucs2':\n            case 'ucs-2':\n            case 'utf16le':\n            case 'utf-16le':\n                return ucs2Write(this, string, offset, length)\n\n            default:\n                if (loweredCase)\n                    throw new TypeError('Unknown encoding: ' + encoding)\n                encoding = ('' + encoding).toLowerCase()\n                loweredCase = true\n        }\n    }\n}\n\nBuffer.prototype.toJSON = function toJSON() {\n    return {\n        type: 'Buffer',\n        data: Array.prototype.slice.call(this._arr || this, 0),\n    }\n}\n\nfunction base64Slice(buf, start, end) {\n    if (start === 0 && end === buf.length) {\n        return base64fromByteArray(buf)\n    } else {\n        return base64fromByteArray(buf.slice(start, end))\n    }\n}\n\nfunction utf8Slice(buf, start, end) {\n    end = Math.min(buf.length, end)\n    var res = []\n\n    var i = start\n    while (i < end) {\n        var firstByte = buf[i]\n        var codePoint = null\n        var bytesPerSequence =\n            firstByte > 0xef\n                ? 4\n                : firstByte > 0xdf\n                ? 3\n                : firstByte > 0xbf\n                ? 2\n                : 1\n\n        if (i + bytesPerSequence <= end) {\n            var secondByte, thirdByte, fourthByte, tempCodePoint\n\n            switch (bytesPerSequence) {\n                case 1:\n                    if (firstByte < 0x80) {\n                        codePoint = firstByte\n                    }\n                    break\n                case 2:\n                    secondByte = buf[i + 1]\n                    if ((secondByte & 0xc0) === 0x80) {\n                        tempCodePoint =\n                            ((firstByte & 0x1f) << 0x6) | (secondByte & 0x3f)\n                        if (tempCodePoint > 0x7f) {\n                            codePoint = tempCodePoint\n                        }\n                    }\n                    break\n                case 3:\n                    secondByte = buf[i + 1]\n                    thirdByte = buf[i + 2]\n                    if (\n                        (secondByte & 0xc0) === 0x80 &&\n                        (thirdByte & 0xc0) === 0x80\n                    ) {\n                        tempCodePoint =\n                            ((firstByte & 0xf) << 0xc) |\n                            ((secondByte & 0x3f) << 0x6) |\n                            (thirdByte & 0x3f)\n                        if (\n                            tempCodePoint > 0x7ff &&\n                            (tempCodePoint < 0xd800 || tempCodePoint > 0xdfff)\n                        ) {\n                            codePoint = tempCodePoint\n                        }\n                    }\n                    break\n                case 4:\n                    secondByte = buf[i + 1]\n                    thirdByte = buf[i + 2]\n                    fourthByte = buf[i + 3]\n                    if (\n                        (secondByte & 0xc0) === 0x80 &&\n                        (thirdByte & 0xc0) === 0x80 &&\n                        (fourthByte & 0xc0) === 0x80\n                    ) {\n                        tempCodePoint =\n                            ((firstByte & 0xf) << 0x12) |\n                            ((secondByte & 0x3f) << 0xc) |\n                            ((thirdByte & 0x3f) << 0x6) |\n                            (fourthByte & 0x3f)\n                        if (\n                            tempCodePoint > 0xffff &&\n                            tempCodePoint < 0x110000\n                        ) {\n                            codePoint = tempCodePoint\n                        }\n                    }\n            }\n        }\n\n        if (codePoint === null) {\n            // we did not generate a valid codePoint so insert a\n            // replacement char (U+FFFD) and advance only 1 byte\n            codePoint = 0xfffd\n            bytesPerSequence = 1\n        } else if (codePoint > 0xffff) {\n            // encode to utf16 (surrogate pair dance)\n            codePoint -= 0x10000\n            res.push(((codePoint >>> 10) & 0x3ff) | 0xd800)\n            codePoint = 0xdc00 | (codePoint & 0x3ff)\n        }\n\n        res.push(codePoint)\n        i += bytesPerSequence\n    }\n\n    return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray(codePoints) {\n    var len = codePoints.length\n    if (len <= MAX_ARGUMENTS_LENGTH) {\n        return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n    }\n\n    // Decode in chunks to avoid \"call stack size exceeded\".\n    var res = ''\n    var i = 0\n    while (i < len) {\n        res += String.fromCharCode.apply(\n            String,\n            codePoints.slice(i, (i += MAX_ARGUMENTS_LENGTH)),\n        )\n    }\n    return res\n}\n\nfunction asciiSlice(buf, start, end) {\n    var ret = ''\n    end = Math.min(buf.length, end)\n\n    for (var i = start; i < end; ++i) {\n        ret += String.fromCharCode(buf[i] & 0x7f)\n    }\n    return ret\n}\n\nfunction latin1Slice(buf, start, end) {\n    var ret = ''\n    end = Math.min(buf.length, end)\n\n    for (var i = start; i < end; ++i) {\n        ret += String.fromCharCode(buf[i])\n    }\n    return ret\n}\n\nfunction hexSlice(buf, start, end) {\n    var len = buf.length\n\n    if (!start || start < 0) start = 0\n    if (!end || end < 0 || end > len) end = len\n\n    var out = ''\n    for (var i = start; i < end; ++i) {\n        out += toHex(buf[i])\n    }\n    return out\n}\n\nfunction utf16leSlice(buf, start, end) {\n    var bytes = buf.slice(start, end)\n    var res = ''\n    for (var i = 0; i < bytes.length; i += 2) {\n        res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n    }\n    return res\n}\n\nBuffer.prototype.slice = function slice(start, end) {\n    var len = this.length\n    start = ~~start\n    end = end === undefined ? len : ~~end\n\n    if (start < 0) {\n        start += len\n        if (start < 0) start = 0\n    } else if (start > len) {\n        start = len\n    }\n\n    if (end < 0) {\n        end += len\n        if (end < 0) end = 0\n    } else if (end > len) {\n        end = len\n    }\n\n    if (end < start) end = start\n\n    var newBuf\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        newBuf = this.subarray(start, end)\n        newBuf.__proto__ = Buffer.prototype\n    } else {\n        var sliceLen = end - start\n        newBuf = new Buffer(sliceLen, undefined)\n        for (var i = 0; i < sliceLen; ++i) {\n            newBuf[i] = this[i + start]\n        }\n    }\n\n    return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset(offset, ext, length) {\n    if (offset % 1 !== 0 || offset < 0)\n        throw new RangeError('offset is not uint')\n    if (offset + ext > length)\n        throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE(\n    offset,\n    byteLength,\n    noAssert,\n) {\n    offset = offset | 0\n    byteLength = byteLength | 0\n    if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n    var val = this[offset]\n    var mul = 1\n    var i = 0\n    while (++i < byteLength && (mul *= 0x100)) {\n        val += this[offset + i] * mul\n    }\n\n    return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE(\n    offset,\n    byteLength,\n    noAssert,\n) {\n    offset = offset | 0\n    byteLength = byteLength | 0\n    if (!noAssert) {\n        checkOffset(offset, byteLength, this.length)\n    }\n\n    var val = this[offset + --byteLength]\n    var mul = 1\n    while (byteLength > 0 && (mul *= 0x100)) {\n        val += this[offset + --byteLength] * mul\n    }\n\n    return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 1, this.length)\n    return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 2, this.length)\n    return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 2, this.length)\n    return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 4, this.length)\n\n    return (\n        (this[offset] | (this[offset + 1] << 8) | (this[offset + 2] << 16)) +\n        this[offset + 3] * 0x1000000\n    )\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 4, this.length)\n\n    return (\n        this[offset] * 0x1000000 +\n        ((this[offset + 1] << 16) | (this[offset + 2] << 8) | this[offset + 3])\n    )\n}\n\nBuffer.prototype.readIntLE = function readIntLE(offset, byteLength, noAssert) {\n    offset = offset | 0\n    byteLength = byteLength | 0\n    if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n    var val = this[offset]\n    var mul = 1\n    var i = 0\n    while (++i < byteLength && (mul *= 0x100)) {\n        val += this[offset + i] * mul\n    }\n    mul *= 0x80\n\n    if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n    return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE(offset, byteLength, noAssert) {\n    offset = offset | 0\n    byteLength = byteLength | 0\n    if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n    var i = byteLength\n    var mul = 1\n    var val = this[offset + --i]\n    while (i > 0 && (mul *= 0x100)) {\n        val += this[offset + --i] * mul\n    }\n    mul *= 0x80\n\n    if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n    return val\n}\n\nBuffer.prototype.readInt8 = function readInt8(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 1, this.length)\n    if (!(this[offset] & 0x80)) return this[offset]\n    return (0xff - this[offset] + 1) * -1\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 2, this.length)\n    var val = this[offset] | (this[offset + 1] << 8)\n    return val & 0x8000 ? val | 0xffff0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 2, this.length)\n    var val = this[offset + 1] | (this[offset] << 8)\n    return val & 0x8000 ? val | 0xffff0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 4, this.length)\n\n    return (\n        this[offset] |\n        (this[offset + 1] << 8) |\n        (this[offset + 2] << 16) |\n        (this[offset + 3] << 24)\n    )\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 4, this.length)\n\n    return (\n        (this[offset] << 24) |\n        (this[offset + 1] << 16) |\n        (this[offset + 2] << 8) |\n        this[offset + 3]\n    )\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 4, this.length)\n    return ieee754read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 4, this.length)\n    return ieee754read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 8, this.length)\n    return ieee754read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 8, this.length)\n    return ieee754read(this, offset, false, 52, 8)\n}\n\nfunction checkInt(buf, value, offset, ext, max, min) {\n    if (!internalIsBuffer(buf))\n        throw new TypeError('\"buffer\" argument must be a Buffer instance')\n    if (value > max || value < min)\n        throw new RangeError('\"value\" argument is out of bounds')\n    if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE(\n    value,\n    offset,\n    byteLength,\n    noAssert,\n) {\n    value = +value\n    offset = offset | 0\n    byteLength = byteLength | 0\n    if (!noAssert) {\n        var maxBytes = Math.pow(2, 8 * byteLength) - 1\n        checkInt(this, value, offset, byteLength, maxBytes, 0)\n    }\n\n    var mul = 1\n    var i = 0\n    this[offset] = value & 0xff\n    while (++i < byteLength && (mul *= 0x100)) {\n        this[offset + i] = (value / mul) & 0xff\n    }\n\n    return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE(\n    value,\n    offset,\n    byteLength,\n    noAssert,\n) {\n    value = +value\n    offset = offset | 0\n    byteLength = byteLength | 0\n    if (!noAssert) {\n        var maxBytes = Math.pow(2, 8 * byteLength) - 1\n        checkInt(this, value, offset, byteLength, maxBytes, 0)\n    }\n\n    var i = byteLength - 1\n    var mul = 1\n    this[offset + i] = value & 0xff\n    while (--i >= 0 && (mul *= 0x100)) {\n        this[offset + i] = (value / mul) & 0xff\n    }\n\n    return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n    if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n    this[offset] = value & 0xff\n    return offset + 1\n}\n\nfunction objectWriteUInt16(buf, value, offset, littleEndian) {\n    if (value < 0) value = 0xffff + value + 1\n    for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n        buf[offset + i] =\n            (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n            ((littleEndian ? i : 1 - i) * 8)\n    }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE(\n    value,\n    offset,\n    noAssert,\n) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value & 0xff\n        this[offset + 1] = value >>> 8\n    } else {\n        objectWriteUInt16(this, value, offset, true)\n    }\n    return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE(\n    value,\n    offset,\n    noAssert,\n) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value >>> 8\n        this[offset + 1] = value & 0xff\n    } else {\n        objectWriteUInt16(this, value, offset, false)\n    }\n    return offset + 2\n}\n\nfunction objectWriteUInt32(buf, value, offset, littleEndian) {\n    if (value < 0) value = 0xffffffff + value + 1\n    for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n        buf[offset + i] = (value >>> ((littleEndian ? i : 3 - i) * 8)) & 0xff\n    }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE(\n    value,\n    offset,\n    noAssert,\n) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset + 3] = value >>> 24\n        this[offset + 2] = value >>> 16\n        this[offset + 1] = value >>> 8\n        this[offset] = value & 0xff\n    } else {\n        objectWriteUInt32(this, value, offset, true)\n    }\n    return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE(\n    value,\n    offset,\n    noAssert,\n) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value >>> 24\n        this[offset + 1] = value >>> 16\n        this[offset + 2] = value >>> 8\n        this[offset + 3] = value & 0xff\n    } else {\n        objectWriteUInt32(this, value, offset, false)\n    }\n    return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE(\n    value,\n    offset,\n    byteLength,\n    noAssert,\n) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) {\n        var limit = Math.pow(2, 8 * byteLength - 1)\n\n        checkInt(this, value, offset, byteLength, limit - 1, -limit)\n    }\n\n    var i = 0\n    var mul = 1\n    var sub = 0\n    this[offset] = value & 0xff\n    while (++i < byteLength && (mul *= 0x100)) {\n        if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n            sub = 1\n        }\n        this[offset + i] = (((value / mul) >> 0) - sub) & 0xff\n    }\n\n    return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE(\n    value,\n    offset,\n    byteLength,\n    noAssert,\n) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) {\n        var limit = Math.pow(2, 8 * byteLength - 1)\n\n        checkInt(this, value, offset, byteLength, limit - 1, -limit)\n    }\n\n    var i = byteLength - 1\n    var mul = 1\n    var sub = 0\n    this[offset + i] = value & 0xff\n    while (--i >= 0 && (mul *= 0x100)) {\n        if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n            sub = 1\n        }\n        this[offset + i] = (((value / mul) >> 0) - sub) & 0xff\n    }\n\n    return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n    if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n    if (value < 0) value = 0xff + value + 1\n    this[offset] = value & 0xff\n    return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value & 0xff\n        this[offset + 1] = value >>> 8\n    } else {\n        objectWriteUInt16(this, value, offset, true)\n    }\n    return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value >>> 8\n        this[offset + 1] = value & 0xff\n    } else {\n        objectWriteUInt16(this, value, offset, false)\n    }\n    return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value & 0xff\n        this[offset + 1] = value >>> 8\n        this[offset + 2] = value >>> 16\n        this[offset + 3] = value >>> 24\n    } else {\n        objectWriteUInt32(this, value, offset, true)\n    }\n    return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n    if (value < 0) value = 0xffffffff + value + 1\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value >>> 24\n        this[offset + 1] = value >>> 16\n        this[offset + 2] = value >>> 8\n        this[offset + 3] = value & 0xff\n    } else {\n        objectWriteUInt32(this, value, offset, false)\n    }\n    return offset + 4\n}\n\nfunction checkIEEE754(buf, value, offset, ext, max, min) {\n    if (offset + ext > buf.length) throw new RangeError('Index out of range')\n    if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat(buf, value, offset, littleEndian, noAssert) {\n    if (!noAssert) {\n        checkIEEE754(\n            buf,\n            value,\n            offset,\n            4,\n            3.4028234663852886e38,\n            -3.4028234663852886e38,\n        )\n    }\n    ieee754write(buf, value, offset, littleEndian, 23, 4)\n    return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {\n    return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {\n    return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble(buf, value, offset, littleEndian, noAssert) {\n    if (!noAssert) {\n        checkIEEE754(\n            buf,\n            value,\n            offset,\n            8,\n            1.7976931348623157e308,\n            -1.7976931348623157e308,\n        )\n    }\n    ieee754write(buf, value, offset, littleEndian, 52, 8)\n    return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE(\n    value,\n    offset,\n    noAssert,\n) {\n    return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE(\n    value,\n    offset,\n    noAssert,\n) {\n    return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy(target, targetStart, start, end) {\n    if (!start) start = 0\n    if (!end && end !== 0) end = this.length\n    if (targetStart >= target.length) targetStart = target.length\n    if (!targetStart) targetStart = 0\n    if (end > 0 && end < start) end = start\n\n    // Copy 0 bytes; we're done\n    if (end === start) return 0\n    if (target.length === 0 || this.length === 0) return 0\n\n    // Fatal error conditions\n    if (targetStart < 0) {\n        throw new RangeError('targetStart out of bounds')\n    }\n    if (start < 0 || start >= this.length)\n        throw new RangeError('sourceStart out of bounds')\n    if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n    // Are we oob?\n    if (end > this.length) end = this.length\n    if (target.length - targetStart < end - start) {\n        end = target.length - targetStart + start\n    }\n\n    var len = end - start\n    var i\n\n    if (this === target && start < targetStart && targetStart < end) {\n        // descending copy from end\n        for (i = len - 1; i >= 0; --i) {\n            target[i + targetStart] = this[i + start]\n        }\n    } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n        // ascending copy from start\n        for (i = 0; i < len; ++i) {\n            target[i + targetStart] = this[i + start]\n        }\n    } else {\n        Uint8Array.prototype.set.call(\n            target,\n            this.subarray(start, start + len),\n            targetStart,\n        )\n    }\n\n    return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill(val, start, end, encoding) {\n    // Handle string cases:\n    if (typeof val === 'string') {\n        if (typeof start === 'string') {\n            encoding = start\n            start = 0\n            end = this.length\n        } else if (typeof end === 'string') {\n            encoding = end\n            end = this.length\n        }\n        if (val.length === 1) {\n            var code = val.charCodeAt(0)\n            if (code < 256) {\n                val = code\n            }\n        }\n        if (encoding !== undefined && typeof encoding !== 'string') {\n            throw new TypeError('encoding must be a string')\n        }\n        if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n            throw new TypeError('Unknown encoding: ' + encoding)\n        }\n    } else if (typeof val === 'number') {\n        val = val & 255\n    }\n\n    // Invalid ranges are not set to a default, so can range check early.\n    if (start < 0 || this.length < start || this.length < end) {\n        throw new RangeError('Out of range index')\n    }\n\n    if (end <= start) {\n        return this\n    }\n\n    start = start >>> 0\n    end = end === undefined ? this.length : end >>> 0\n\n    if (!val) val = 0\n\n    var i\n    if (typeof val === 'number') {\n        for (i = start; i < end; ++i) {\n            this[i] = val\n        }\n    } else {\n        var bytes = internalIsBuffer(val)\n            ? val\n            : utf8ToBytes(new Buffer(val, encoding).toString())\n        var len = bytes.length\n        for (i = 0; i < end - start; ++i) {\n            this[i + start] = bytes[i % len]\n        }\n    }\n\n    return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean(str) {\n    // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n    str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n    // Node converts strings with length < 2 to ''\n    if (str.length < 2) return ''\n    // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n    while (str.length % 4 !== 0) {\n        str = str + '='\n    }\n    return str\n}\n\nfunction stringtrim(str) {\n    if (str.trim) return str.trim()\n    return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex(n) {\n    if (n < 16) return '0' + n.toString(16)\n    return n.toString(16)\n}\n\nfunction utf8ToBytes(string, units) {\n    units = units || Infinity\n    var codePoint\n    var length = string.length\n    var leadSurrogate = null\n    var bytes = []\n\n    for (var i = 0; i < length; ++i) {\n        codePoint = string.charCodeAt(i)\n\n        // is surrogate component\n        if (codePoint > 0xd7ff && codePoint < 0xe000) {\n            // last char was a lead\n            if (!leadSurrogate) {\n                // no lead yet\n                if (codePoint > 0xdbff) {\n                    // unexpected trail\n                    if ((units -= 3) > -1) bytes.push(0xef, 0xbf, 0xbd)\n                    continue\n                } else if (i + 1 === length) {\n                    // unpaired lead\n                    if ((units -= 3) > -1) bytes.push(0xef, 0xbf, 0xbd)\n                    continue\n                }\n\n                // valid lead\n                leadSurrogate = codePoint\n\n                continue\n            }\n\n            // 2 leads in a row\n            if (codePoint < 0xdc00) {\n                if ((units -= 3) > -1) bytes.push(0xef, 0xbf, 0xbd)\n                leadSurrogate = codePoint\n                continue\n            }\n\n            // valid surrogate pair\n            codePoint =\n                (((leadSurrogate - 0xd800) << 10) | (codePoint - 0xdc00)) +\n                0x10000\n        } else if (leadSurrogate) {\n            // valid bmp char, but last char was a lead\n            if ((units -= 3) > -1) bytes.push(0xef, 0xbf, 0xbd)\n        }\n\n        leadSurrogate = null\n\n        // encode utf8\n        if (codePoint < 0x80) {\n            if ((units -= 1) < 0) break\n            bytes.push(codePoint)\n        } else if (codePoint < 0x800) {\n            if ((units -= 2) < 0) break\n            bytes.push((codePoint >> 0x6) | 0xc0, (codePoint & 0x3f) | 0x80)\n        } else if (codePoint < 0x10000) {\n            if ((units -= 3) < 0) break\n            bytes.push(\n                (codePoint >> 0xc) | 0xe0,\n                ((codePoint >> 0x6) & 0x3f) | 0x80,\n                (codePoint & 0x3f) | 0x80,\n            )\n        } else if (codePoint < 0x110000) {\n            if ((units -= 4) < 0) break\n            bytes.push(\n                (codePoint >> 0x12) | 0xf0,\n                ((codePoint >> 0xc) & 0x3f) | 0x80,\n                ((codePoint >> 0x6) & 0x3f) | 0x80,\n                (codePoint & 0x3f) | 0x80,\n            )\n        } else {\n            throw new Error('Invalid code point')\n        }\n    }\n\n    return bytes\n}\n\nfunction asciiToBytes(str) {\n    var byteArray = []\n    for (var i = 0; i < str.length; ++i) {\n        // Node's code seems to be doing this and not & 0x7F..\n        byteArray.push(str.charCodeAt(i) & 0xff)\n    }\n    return byteArray\n}\n\nfunction utf16leToBytes(str, units) {\n    var c, hi, lo\n    var byteArray = []\n    for (var i = 0; i < str.length; ++i) {\n        if ((units -= 2) < 0) break\n\n        c = str.charCodeAt(i)\n        hi = c >> 8\n        lo = c % 256\n        byteArray.push(lo)\n        byteArray.push(hi)\n    }\n\n    return byteArray\n}\n\nfunction base64ToBytes(str) {\n    return base64toByteArray(base64clean(str))\n}\n\nfunction blitBuffer(src, dst, offset, length) {\n    for (var i = 0; i < length; ++i) {\n        if (i + offset >= dst.length || i >= src.length) break\n        dst[i + offset] = src[i]\n    }\n    return i\n}\n\nfunction isnan(val) {\n    return val !== val // eslint-disable-line no-self-compare\n}\n\n// the following is from is-buffer, also by Feross Aboukhadijeh and with same lisence\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nfunction isBuffer(obj) {\n    return (\n        obj != null &&\n        (!!obj._isBuffer || isFastBuffer(obj) || isSlowBuffer(obj))\n    )\n}\n\nfunction isFastBuffer(obj) {\n    return (\n        !!obj.constructor &&\n        typeof obj.constructor.isBuffer === 'function' &&\n        obj.constructor.isBuffer(obj)\n    )\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer(obj) {\n    return (\n        typeof obj.readFloatLE === 'function' &&\n        typeof obj.slice === 'function' &&\n        isFastBuffer(obj.slice(0, 0))\n    )\n}\n\nfunction ieee754read(buffer, offset, isLE, mLen, nBytes) {\n    var e, m\n    var eLen = nBytes * 8 - mLen - 1\n    var eMax = (1 << eLen) - 1\n    var eBias = eMax >> 1\n    var nBits = -7\n    var i = isLE ? nBytes - 1 : 0\n    var d = isLE ? -1 : 1\n    var s = buffer[offset + i]\n\n    i += d\n\n    e = s & ((1 << -nBits) - 1)\n    s >>= -nBits\n    nBits += eLen\n    for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n    m = e & ((1 << -nBits) - 1)\n    e >>= -nBits\n    nBits += mLen\n    for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n    if (e === 0) {\n        e = 1 - eBias\n    } else if (e === eMax) {\n        return m ? NaN : (s ? -1 : 1) * Infinity\n    } else {\n        m = m + Math.pow(2, mLen)\n        e = e - eBias\n    }\n    return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nfunction ieee754write(buffer, value, offset, isLE, mLen, nBytes) {\n    var e, m, c\n    var eLen = nBytes * 8 - mLen - 1\n    var eMax = (1 << eLen) - 1\n    var eBias = eMax >> 1\n    var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0\n    var i = isLE ? 0 : nBytes - 1\n    var d = isLE ? 1 : -1\n    var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n    value = Math.abs(value)\n\n    if (isNaN(value) || value === Infinity) {\n        m = isNaN(value) ? 1 : 0\n        e = eMax\n    } else {\n        e = Math.floor(Math.log(value) / Math.LN2)\n        if (value * (c = Math.pow(2, -e)) < 1) {\n            e--\n            c *= 2\n        }\n        if (e + eBias >= 1) {\n            value += rt / c\n        } else {\n            value += rt * Math.pow(2, 1 - eBias)\n        }\n        if (value * c >= 2) {\n            e++\n            c /= 2\n        }\n\n        if (e + eBias >= eMax) {\n            m = 0\n            e = eMax\n        } else if (e + eBias >= 1) {\n            m = (value * c - 1) * Math.pow(2, mLen)\n            e = e + eBias\n        } else {\n            m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n            e = 0\n        }\n    }\n\n    for (\n        ;\n        mLen >= 8;\n        buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8\n    ) {}\n\n    e = (e << mLen) | m\n    eLen += mLen\n    for (\n        ;\n        eLen > 0;\n        buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8\n    ) {}\n\n    buffer[offset + i - d] |= s * 128\n}\n", "const NOOP = () => {};\nconst IDENTITY = <T>(value: T): T => value;\n\nfunction wrap<T>(value: Array<T> | T | undefined): Array<T> {\n\treturn value === undefined ? [] : Array.isArray(value) ? value : [value];\n}\n\nfunction unwrap<T>(arr: Array<T>): Array<T> | T | undefined {\n\treturn arr.length === 0 ? undefined : arr.length === 1 ? arr[0] : arr;\n}\n\ntype NonStringIterable<T> = Iterable<T> & object;\n\n/**\n * Ensures a value is an array.\n *\n * This function does the same thing as wrap() above except it handles nulls\n * and iterables, so it is appropriate for wrapping user-provided element\n * children.\n */\nfunction arrayify<T>(\n\tvalue: NonStringIterable<T> | T | null | undefined,\n): Array<T> {\n\treturn value == null\n\t\t? []\n\t\t: Array.isArray(value)\n\t\t? value\n\t\t: typeof value === \"string\" ||\n\t\t  typeof (value as any)[Symbol.iterator] !== \"function\"\n\t\t? [value]\n\t\t: // TODO: inference broke in TypeScript 3.9.\n\t\t  [...(value as any)];\n}\n\nfunction isIteratorLike(\n\tvalue: any,\n): value is Iterator<unknown> | AsyncIterator<unknown> {\n\treturn value != null && typeof value.next === \"function\";\n}\n\nfunction isPromiseLike(value: any): value is PromiseLike<unknown> {\n\treturn value != null && typeof value.then === \"function\";\n}\n\n/**\n * A type which represents all valid values for an element tag.\n */\nexport type Tag = string | symbol | Component;\n\n/**\n * A helper type to map the tag of an element to its expected props.\n *\n * @template TTag - The tag associated with the props. Can be a string, symbol\n * or a component function.\n */\nexport type TagProps<TTag extends Tag> = TTag extends string\n\t? JSX.IntrinsicElements[TTag]\n\t: TTag extends Component<infer TProps>\n\t? TProps\n\t: Record<string, unknown>;\n\n/***\n * SPECIAL TAGS\n *\n * Crank provides a couple tags which have special meaning for the renderer.\n ***/\n\n/**\n * A special tag for grouping multiple children within the same parent.\n *\n * All non-string iterables which appear in the element tree are implicitly\n * wrapped in a fragment element.\n *\n * This tag is just the empty string, and you can use the empty string in\n * createElement calls or transpiler options directly to avoid having to\n * reference this export.\n */\nexport const Fragment = \"\";\nexport type Fragment = typeof Fragment;\n\n// TODO: We assert the following symbol tags as any because TypeScript support\n// for symbol tags in JSX doesn’t exist yet.\n// https://github.com/microsoft/TypeScript/issues/38367\n\n/**\n * A special tag for rendering into a new root node via a root prop.\n *\n * This tag is useful for creating element trees with multiple roots, for\n * things like modals or tooltips.\n *\n * Renderer.prototype.render() will implicitly wrap top-level element trees in\n * a Portal element.\n */\nexport const Portal = Symbol.for(\"crank.Portal\") as any;\nexport type Portal = typeof Portal;\n\n/**\n * A special tag which preserves whatever was previously rendered in the\n * element’s position.\n *\n * Copy elements are useful for when you want to prevent a subtree from\n * rerendering as a performance optimization. Copy elements can also be keyed,\n * in which case the previously rendered keyed element will be copied.\n */\nexport const Copy = Symbol.for(\"crank.Copy\") as any;\nexport type Copy = typeof Copy;\n\n/**\n * A special tag for injecting raw nodes or strings via a value prop.\n *\n * Renderer.prototype.raw() is called with the value prop.\n */\nexport const Raw = Symbol.for(\"crank.Raw\") as any;\nexport type Raw = typeof Raw;\n\n/**\n * Describes all valid values of an element tree, excluding iterables.\n *\n * Arbitrary objects can also be safely rendered, but will be converted to a\n * string using the toString() method. We exclude them from this type to catch\n * potential mistakes.\n */\nexport type Child = Element | string | number | boolean | null | undefined;\n\n/**\n * An arbitrarily nested iterable of Child values.\n *\n * We use a recursive interface here rather than making the Children type\n * directly recursive because recursive type aliases were added in TypeScript\n * 3.7.\n *\n * You should avoid referencing this type directly, as it is mainly exported to\n * prevent TypeScript errors.\n */\nexport interface ChildIterable extends Iterable<Child | ChildIterable> {}\n\n/**\n * Describes all valid values of an element tree, including arbitrarily nested\n * iterables of such values.\n */\nexport type Children = Child | ChildIterable;\n\n/**\n * Represents all functions which can be used as a component.\n *\n * @template [TProps=*] - The expected props for the component.\n */\nexport type Component<TProps extends Record<string, unknown> = any> = (\n\tthis: Context<TProps>,\n\tprops: TProps,\n) =>\n\t| Children\n\t| PromiseLike<Children>\n\t// The return type of iterators must include void because TypeScript will\n\t// infer generators which return implicitly as having a void return type.\n\t| Iterator<Children, Children | void, any>\n\t| AsyncIterator<Children, Children | void, any>;\n\ntype ChildrenIteratorResult = IteratorResult<Children, Children | void>;\n\n/**\n * A type to keep track of keys. Any value can be a key, though null and\n * undefined are ignored.\n */\ntype Key = unknown;\n\nconst ElementSymbol = Symbol.for(\"crank.Element\");\n\n// To maximize compatibility between Crank versions, starting with 0.2.0, any\n// changes to the Element properties will be considered a breaking change.\nexport interface Element<TTag extends Tag = Tag> {\n\t/**\n\t * @internal\n\t * A unique symbol to identify elements as elements across versions and\n\t * realms, and to protect against basic injection attacks.\n\t * https://overreacted.io/why-do-react-elements-have-typeof-property/\n\t *\n\t * This property is defined on the element prototype rather than per\n\t * instance, because it is the same for every Element.\n\t */\n\t$$typeof: typeof ElementSymbol;\n\n\t/**\n\t * The tag of the element. Can be a string, symbol or function.\n\t */\n\ttag: TTag;\n\n\t/**\n\t * An object containing the “properties” of an element. These correspond to\n\t * the attribute syntax from JSX.\n\t */\n\tprops: TagProps<TTag>;\n\n\t/**\n\t * A value which uniquely identifies an element from its siblings so that it\n\t * can be added/updated/moved/removed by key rather than position.\n\t *\n\t * Passed in createElement() as the prop \"c-key\".\n\t */\n\tkey: Key;\n\n\t/**\n\t * A callback which is called with the element’s result when it is committed.\n\t *\n\t * Passed in createElement() as the prop \"c-ref\".\n\t */\n\tref: ((value: unknown) => unknown) | undefined;\n\n\t/**\n\t * A possible boolean which indicates that element should NOT be rerendered.\n\t * If the element has never been rendered, this property has no effect.\n\t *\n\t * Passed in createElement() as the prop \"c-static\".\n\t */\n\tstatic_: boolean | undefined;\n}\n\n/**\n * Elements are the basic building blocks of Crank applications. They are\n * JavaScript objects which are interpreted by special classes called renderers\n * to produce and manage stateful nodes.\n *\n * @template {Tag} [TTag=Tag] - The type of the tag of the element.\n *\n * @example\n * // specific element types\n * let div: Element<\"div\">;\n * let portal: Element<Portal>;\n * let myEl: Element<MyComponent>;\n *\n * // general element types\n * let host: Element<string | symbol>;\n * let component: Element<Component>;\n *\n * Typically, you use a helper function like createElement to create elements\n * rather than instatiating this class directly.\n */\nexport class Element<TTag extends Tag = Tag> {\n\tconstructor(\n\t\ttag: TTag,\n\t\tprops: TagProps<TTag>,\n\t\tkey: Key,\n\t\tref?: ((value: unknown) => unknown) | undefined,\n\t\tstatic_?: boolean | undefined,\n\t) {\n\t\tthis.tag = tag;\n\t\tthis.props = props;\n\t\tthis.key = key;\n\t\tthis.ref = ref;\n\t\tthis.static_ = static_;\n\t}\n}\n\n// See Element interface\nElement.prototype.$$typeof = ElementSymbol;\n\nexport function isElement(value: any): value is Element {\n\treturn value != null && value.$$typeof === ElementSymbol;\n}\n\n/**\n * Creates an element with the specified tag, props and children.\n *\n * This function is usually used as a transpilation target for JSX transpilers,\n * but it can also be called directly. It additionally extracts special props so\n * they aren’t accessible to renderer methods or components, and assigns the\n * children prop according to any additional arguments passed to the function.\n */\nexport function createElement<TTag extends Tag>(\n\ttag: TTag,\n\tprops?: TagProps<TTag> | null | undefined,\n\t...children: Array<unknown>\n): Element<TTag> {\n\tlet key: Key;\n\tlet ref: ((value: unknown) => unknown) | undefined;\n\tlet static_ = false;\n\tconst props1 = {} as TagProps<TTag>;\n\tif (props != null) {\n\t\tfor (const name in props) {\n\t\t\tswitch (name) {\n\t\t\t\tcase \"crank-key\":\n\t\t\t\tcase \"c-key\":\n\t\t\t\tcase \"$key\":\n\t\t\t\t\t// We have to make sure we don’t assign null to the key because we\n\t\t\t\t\t// don’t check for null keys in the diffing functions.\n\t\t\t\t\tif (props[name] != null) {\n\t\t\t\t\t\tkey = props[name];\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"crank-ref\":\n\t\t\t\tcase \"c-ref\":\n\t\t\t\tcase \"$ref\":\n\t\t\t\t\tif (typeof props[name] === \"function\") {\n\t\t\t\t\t\tref = props[name];\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"crank-static\":\n\t\t\t\tcase \"c-static\":\n\t\t\t\tcase \"$static\":\n\t\t\t\t\tstatic_ = !!props[name];\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tprops1[name] = props[name];\n\t\t\t}\n\t\t}\n\t}\n\n\tif (children.length > 1) {\n\t\tprops1.children = children;\n\t} else if (children.length === 1) {\n\t\tprops1.children = children[0];\n\t}\n\n\treturn new Element(tag, props1, key, ref, static_);\n}\n\n/** Clones a given element, shallowly copying the props object. */\nexport function cloneElement<TTag extends Tag>(\n\tel: Element<TTag>,\n): Element<TTag> {\n\tif (!isElement(el)) {\n\t\tthrow new TypeError(\"Cannot clone non-element\");\n\t}\n\n\treturn new Element(el.tag, {...el.props}, el.key, el.ref);\n}\n\n/*** ELEMENT UTILITIES ***/\n\n// WHAT ARE WE DOING TO THE CHILDREN???\n/**\n * All values in the element tree are narrowed from the union in Child to\n * NarrowedChild during rendering, to simplify element diffing.\n */\ntype NarrowedChild = Element | string | undefined;\n\nfunction narrow(value: Children): NarrowedChild {\n\tif (typeof value === \"boolean\" || value == null) {\n\t\treturn undefined;\n\t} else if (typeof value === \"string\" || isElement(value)) {\n\t\treturn value;\n\t} else if (typeof (value as any)[Symbol.iterator] === \"function\") {\n\t\treturn createElement(Fragment, null, value);\n\t}\n\n\treturn value.toString();\n}\n\n/**\n * A helper type which repesents all possible rendered values of an element.\n *\n * @template TNode - The node type for the element provided by the renderer.\n *\n * When asking the question, what is the “value” of a specific element, the\n * answer varies depending on the tag:\n *\n * For host elements, the value is the nodes created for the element.\n *\n * For fragments, the value is usually an array of nodes.\n *\n * For portals, the value is undefined, because a Portal element’s root and\n * children are opaque to its parent.\n *\n * For components, the value can be any of the above, because the value of a\n * component is determined by its immediate children.\n *\n * Rendered values can also be strings or arrays of nodes and strings, in the\n * case of component or fragment elements with strings or multiple children.\n *\n * All of these possible values are reflected in this utility type.\n */\nexport type ElementValue<TNode> =\n\t| Array<TNode | string>\n\t| TNode\n\t| string\n\t| undefined;\n\n/**\n * Takes an array of element values and normalizes the output as an array of\n * nodes and strings.\n *\n * @returns Normalized array of nodes and/or strings.\n *\n * Normalize will flatten only one level of nested arrays, because it is\n * designed to be called once at each level of the tree. It will also\n * concatenate adjacent strings and remove all undefined values.\n */\nfunction normalize<TNode>(\n\tvalues: Array<ElementValue<TNode>>,\n): Array<TNode | string> {\n\tconst result: Array<TNode | string> = [];\n\tlet buffer: string | undefined;\n\tfor (let i = 0; i < values.length; i++) {\n\t\tconst value = values[i];\n\t\tif (!value) {\n\t\t\t// pass\n\t\t} else if (typeof value === \"string\") {\n\t\t\tbuffer = (buffer || \"\") + value;\n\t\t} else if (!Array.isArray(value)) {\n\t\t\tif (buffer) {\n\t\t\t\tresult.push(buffer);\n\t\t\t\tbuffer = undefined;\n\t\t\t}\n\n\t\t\tresult.push(value);\n\t\t} else {\n\t\t\t// We could use recursion here but it’s just easier to do it inline.\n\t\t\tfor (let j = 0; j < value.length; j++) {\n\t\t\t\tconst value1 = value[j];\n\t\t\t\tif (!value1) {\n\t\t\t\t\t// pass\n\t\t\t\t} else if (typeof value1 === \"string\") {\n\t\t\t\t\tbuffer = (buffer || \"\") + value1;\n\t\t\t\t} else {\n\t\t\t\t\tif (buffer) {\n\t\t\t\t\t\tresult.push(buffer);\n\t\t\t\t\t\tbuffer = undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\tresult.push(value1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (buffer) {\n\t\tresult.push(buffer);\n\t}\n\n\treturn result;\n}\n\n/**\n * @internal\n * The internal nodes which are cached and diffed against new elements when\n * rendering element trees.\n */\nclass Retainer<TNode> {\n\t/**\n\t * The element associated with this retainer.\n\t */\n\tdeclare el: Element;\n\t/**\n\t * The context associated with this element. Will only be defined for\n\t * component elements.\n\t */\n\tdeclare ctx: ContextImpl<TNode> | undefined;\n\t/**\n\t * The retainer children of this element. Retainers form a tree which mirrors\n\t * elements. Can be a single child or undefined as a memory optimization.\n\t */\n\tdeclare children: Array<RetainerChild<TNode>> | RetainerChild<TNode>;\n\t/**\n\t * The value associated with this element.\n\t */\n\tdeclare value: ElementValue<TNode>;\n\t/**\n\t * The cached child values of this element. Only host and component elements\n\t * will use this property.\n\t */\n\tdeclare cachedChildValues: ElementValue<TNode>;\n\t/**\n\t * The child which this retainer replaces. This property is used when an\n\t * async retainer tree replaces previously rendered elements, so that the\n\t * previously rendered elements can remain visible until the async tree\n\t * fulfills. Will be set to undefined once this subtree fully renders.\n\t */\n\tdeclare fallbackValue: RetainerChild<TNode>;\n\n\tdeclare inflightValue: Promise<ElementValue<TNode>> | undefined;\n\tdeclare onNextValues: Function | undefined;\n\tconstructor(el: Element) {\n\t\tthis.el = el;\n\t\tthis.ctx = undefined;\n\t\tthis.children = undefined;\n\t\tthis.value = undefined;\n\t\tthis.cachedChildValues = undefined;\n\t\tthis.fallbackValue = undefined;\n\t\tthis.inflightValue = undefined;\n\t\tthis.onNextValues = undefined;\n\t}\n}\n\n/**\n * The retainer equivalent of ElementValue\n */\ntype RetainerChild<TNode> = Retainer<TNode> | string | undefined;\n\n/**\n * Finds the value of the element according to its type.\n *\n * @returns The value of the element.\n */\nfunction getValue<TNode>(ret: Retainer<TNode>): ElementValue<TNode> {\n\tif (typeof ret.fallbackValue !== \"undefined\") {\n\t\treturn typeof ret.fallbackValue === \"object\"\n\t\t\t? getValue(ret.fallbackValue)\n\t\t\t: ret.fallbackValue;\n\t} else if (ret.el.tag === Portal) {\n\t\treturn;\n\t} else if (typeof ret.el.tag !== \"function\" && ret.el.tag !== Fragment) {\n\t\treturn ret.value;\n\t}\n\n\treturn unwrap(getChildValues(ret));\n}\n\n/**\n * Walks an element’s children to find its child values.\n *\n * @returns A normalized array of nodes and strings.\n */\nfunction getChildValues<TNode>(ret: Retainer<TNode>): Array<TNode | string> {\n\tif (ret.cachedChildValues) {\n\t\treturn wrap(ret.cachedChildValues);\n\t}\n\n\tconst values: Array<ElementValue<TNode>> = [];\n\tconst children = wrap(ret.children);\n\tfor (let i = 0; i < children.length; i++) {\n\t\tconst child = children[i];\n\t\tif (child) {\n\t\t\tvalues.push(typeof child === \"string\" ? child : getValue(child));\n\t\t}\n\t}\n\n\tconst values1 = normalize(values);\n\tconst tag = ret.el.tag;\n\tif (typeof tag === \"function\" || (tag !== Fragment && tag !== Raw)) {\n\t\tret.cachedChildValues = unwrap(values1);\n\t}\n\treturn values1;\n}\n\nexport interface HydrationData<TNode> {\n\tprops: Record<string, unknown>;\n\tchildren: Array<TNode | string>;\n}\n\n// TODO: Document the interface and methods\nexport interface RendererImpl<\n\tTNode,\n\tTScope,\n\tTRoot extends TNode = TNode,\n\tTResult = ElementValue<TNode>,\n> {\n\tscope<TTag extends string | symbol>(\n\t\tscope: TScope | undefined,\n\t\ttag: TTag,\n\t\tprops: TagProps<TTag>,\n\t): TScope | undefined;\n\n\tcreate<TTag extends string | symbol>(\n\t\ttag: TTag,\n\t\tprops: TagProps<TTag>,\n\t\tscope: TScope | undefined,\n\t): TNode;\n\n\thydrate<TTag extends string | symbol>(\n\t\ttag: TTag,\n\t\tnode: TNode | TRoot,\n\t\tprops: TagProps<TTag>,\n\t): HydrationData<TNode> | undefined;\n\n\t/**\n\t * Called when an element’s rendered value is exposed via render, schedule,\n\t * refresh, refs, or generator yield expressions.\n\t *\n\t * @param value - The value of the element being read. Can be a node, a\n\t * string, undefined, or an array of nodes and strings, depending on the\n\t * element.\n\t *\n\t * @returns Varies according to the specific renderer subclass. By default,\n\t * it exposes the element’s value.\n\t *\n\t * This is useful for renderers which don’t want to expose their internal\n\t * nodes. For instance, the HTML renderer will convert all internal nodes to\n\t * strings.\n\t */\n\tread(value: ElementValue<TNode>): TResult;\n\n\t/**\n\t * Called for each string in an element tree.\n\t *\n\t * @param text - The string child.\n\t * @param scope - The current scope.\n\t *\n\t * @returns A string to be passed to arrange.\n\t *\n\t * Rather than returning Text nodes as we would in the DOM case, for example,\n\t * we delay that step for Renderer.prototype.arrange. We do this so that\n\t * adjacent strings can be concatenated, and the actual element tree can be\n\t * rendered in normalized form.\n\t */\n\ttext(\n\t\ttext: string,\n\t\tscope: TScope | undefined,\n\t\thydration: HydrationData<TNode> | undefined,\n\t): string;\n\n\t/**\n\t * Called for each Raw element whose value prop is a string.\n\t *\n\t * @param text - The string child.\n\t * @param scope - The current scope.\n\t *\n\t * @returns The parsed node or string.\n\t */\n\traw(\n\t\tvalue: string | TNode,\n\t\tscope: TScope | undefined,\n\t\thydration: HydrationData<TNode> | undefined,\n\t): ElementValue<TNode>;\n\n\tpatch<TTag extends string | symbol, TName extends string>(\n\t\ttag: TTag,\n\t\tnode: TNode,\n\t\tname: TName,\n\t\tvalue: TagProps<TTag>[TName],\n\t\toldValue: TagProps<TTag>[TName] | undefined,\n\t\tscope: TScope,\n\t): unknown;\n\n\tarrange<TTag extends string | symbol>(\n\t\ttag: TTag,\n\t\tnode: TNode,\n\t\tprops: TagProps<TTag>,\n\t\tchildren: Array<TNode | string>,\n\t\toldProps: TagProps<TTag> | undefined,\n\t\toldChildren: Array<TNode | string> | undefined,\n\t): unknown;\n\n\tdispose<TTag extends string | symbol>(\n\t\ttag: TTag,\n\t\tnode: TNode,\n\t\tprops: TagProps<TTag>,\n\t): unknown;\n\n\tflush(root: TRoot): unknown;\n}\n\nconst defaultRendererImpl: RendererImpl<unknown, unknown, unknown, unknown> = {\n\tcreate() {\n\t\tthrow new Error(\"Not implemented\");\n\t},\n\thydrate() {\n\t\tthrow new Error(\"Not implemented\");\n\t},\n\tscope: IDENTITY,\n\tread: IDENTITY,\n\ttext: IDENTITY,\n\traw: IDENTITY,\n\tpatch: NOOP,\n\tarrange: NOOP,\n\tdispose: NOOP,\n\tflush: NOOP,\n};\n\nconst _RendererImpl = Symbol.for(\"crank.RendererImpl\");\n/**\n * An abstract class which is subclassed to render to different target\n * environments. This class is responsible for kicking off the rendering\n * process and caching previous trees by root.\n *\n * @template TNode - The type of the node for a rendering environment.\n * @template TScope - Data which is passed down the tree.\n * @template TRoot - The type of the root for a rendering environment.\n * @template TResult - The type of exposed values.\n */\nexport class Renderer<\n\tTNode extends object = object,\n\tTScope = unknown,\n\tTRoot extends TNode = TNode,\n\tTResult = ElementValue<TNode>,\n> {\n\t/**\n\t * @internal\n\t * A weakmap which stores element trees by root.\n\t */\n\tdeclare cache: WeakMap<object, Retainer<TNode>>;\n\n\tdeclare [_RendererImpl]: RendererImpl<TNode, TScope, TRoot, TResult>;\n\tconstructor(impl: Partial<RendererImpl<TNode, TScope, TRoot, TResult>>) {\n\t\tthis.cache = new WeakMap();\n\t\tthis[_RendererImpl] = {\n\t\t\t...(defaultRendererImpl as RendererImpl<TNode, TScope, TRoot, TResult>),\n\t\t\t...impl,\n\t\t};\n\t}\n\n\t/**\n\t * Renders an element tree into a specific root.\n\t *\n\t * @param children - An element tree. You can render null with a previously\n\t * used root to delete the previously rendered element tree from the cache.\n\t * @param root - The node to be rendered into. The renderer will cache\n\t * element trees per root.\n\t * @param bridge - An optional context that will be the ancestor context of all\n\t * elements in the tree. Useful for connecting different renderers so that\n\t * events/provisions properly propagate. The context for a given root must be\n\t * the same or an error will be thrown.\n\t *\n\t * @returns The result of rendering the children, or a possible promise of\n\t * the result if the element tree renders asynchronously.\n\t */\n\trender(\n\t\tchildren: Children,\n\t\troot?: TRoot | undefined,\n\t\tbridge?: Context | undefined,\n\t): Promise<TResult> | TResult {\n\t\tlet ret: Retainer<TNode> | undefined;\n\t\tconst ctx = bridge && (bridge[_ContextImpl] as ContextImpl<TNode>);\n\t\tif (typeof root === \"object\" && root !== null) {\n\t\t\tret = this.cache.get(root);\n\t\t}\n\n\t\tlet oldProps: Record<string, any> | undefined;\n\t\tif (ret === undefined) {\n\t\t\tret = new Retainer(createElement(Portal, {children, root}));\n\t\t\tret.value = root;\n\t\t\tret.ctx = ctx;\n\t\t\tif (typeof root === \"object\" && root !== null && children != null) {\n\t\t\t\tthis.cache.set(root, ret);\n\t\t\t}\n\t\t} else if (ret.ctx !== ctx) {\n\t\t\tthrow new Error(\"Context mismatch\");\n\t\t} else {\n\t\t\toldProps = ret.el.props;\n\t\t\tret.el = createElement(Portal, {children, root});\n\t\t\tif (typeof root === \"object\" && root !== null && children == null) {\n\t\t\t\tthis.cache.delete(root);\n\t\t\t}\n\t\t}\n\n\t\tconst impl = this[_RendererImpl];\n\t\tconst childValues = diffChildren(\n\t\t\timpl,\n\t\t\troot,\n\t\t\tret,\n\t\t\tctx,\n\t\t\timpl.scope(undefined, Portal, ret.el.props),\n\t\t\tret,\n\t\t\tchildren,\n\t\t\tundefined, // hydration data\n\t\t);\n\n\t\t// We return the child values of the portal because portal elements\n\t\t// themselves have no readable value.\n\t\tif (isPromiseLike(childValues)) {\n\t\t\treturn childValues.then((childValues) =>\n\t\t\t\tcommitRootRender(impl, root, ctx, ret!, childValues, oldProps),\n\t\t\t);\n\t\t}\n\n\t\treturn commitRootRender(impl, root, ctx, ret, childValues, oldProps);\n\t}\n\n\thydrate(\n\t\tchildren: Children,\n\t\troot: TRoot,\n\t\tbridge?: Context | undefined,\n\t): Promise<TResult> | TResult {\n\t\tconst impl = this[_RendererImpl];\n\t\tconst ctx = bridge && (bridge[_ContextImpl] as ContextImpl<TNode>);\n\t\tlet ret: Retainer<TNode> | undefined;\n\t\tret = this.cache.get(root);\n\t\tif (ret !== undefined) {\n\t\t\t// If there is a retainer for the root, hydration is not necessary.\n\t\t\treturn this.render(children, root, bridge);\n\t\t}\n\n\t\tlet oldProps: Record<string, any> | undefined;\n\t\tret = new Retainer(createElement(Portal, {children, root}));\n\t\tret.value = root;\n\t\tif (typeof root === \"object\" && root !== null && children != null) {\n\t\t\tthis.cache.set(root, ret);\n\t\t}\n\n\t\tconst hydrationData = impl.hydrate(Portal, root, {});\n\t\tconst childValues = diffChildren(\n\t\t\timpl,\n\t\t\troot,\n\t\t\tret,\n\t\t\tctx,\n\t\t\timpl.scope(undefined, Portal, ret.el.props),\n\t\t\tret,\n\t\t\tchildren,\n\t\t\thydrationData,\n\t\t);\n\n\t\t// We return the child values of the portal because portal elements\n\t\t// themselves have no readable value.\n\t\tif (isPromiseLike(childValues)) {\n\t\t\treturn childValues.then((childValues) =>\n\t\t\t\tcommitRootRender(impl, root, ctx, ret!, childValues, oldProps),\n\t\t\t);\n\t\t}\n\n\t\treturn commitRootRender(impl, root, ctx, ret, childValues, oldProps);\n\t}\n}\n\n/*** PRIVATE RENDERER FUNCTIONS ***/\nfunction commitRootRender<TNode, TRoot extends TNode, TResult>(\n\trenderer: RendererImpl<TNode, unknown, TRoot, TResult>,\n\troot: TRoot | undefined,\n\tctx: ContextImpl<TNode> | undefined,\n\tret: Retainer<TNode>,\n\tchildValues: Array<TNode | string>,\n\toldProps: Record<string, any> | undefined,\n): TResult {\n\t// element is a host or portal element\n\tif (root != null) {\n\t\trenderer.arrange(\n\t\t\tPortal,\n\t\t\troot,\n\t\t\tret.el.props,\n\t\t\tchildValues,\n\t\t\toldProps,\n\t\t\twrap(ret.cachedChildValues),\n\t\t);\n\t\tflush(renderer, root);\n\t}\n\n\tret.cachedChildValues = unwrap(childValues);\n\tif (root == null) {\n\t\tunmount(renderer, ret, ctx, ret);\n\t}\n\n\treturn renderer.read(ret.cachedChildValues);\n}\n\nfunction diffChildren<TNode, TScope, TRoot extends TNode, TResult>(\n\trenderer: RendererImpl<TNode, TScope, TRoot, TResult>,\n\troot: TRoot | undefined,\n\thost: Retainer<TNode>,\n\tctx: ContextImpl<TNode, TScope, TRoot, TResult> | undefined,\n\tscope: TScope | undefined,\n\tparent: Retainer<TNode>,\n\tchildren: Children,\n\thydrationData: HydrationData<TNode> | undefined,\n): Promise<Array<TNode | string>> | Array<TNode | string> {\n\tconst oldRetained = wrap(parent.children);\n\tconst newRetained: typeof oldRetained = [];\n\tconst newChildren = arrayify(children);\n\tconst values: Array<Promise<ElementValue<TNode>> | ElementValue<TNode>> = [];\n\tlet graveyard: Array<Retainer<TNode>> | undefined;\n\tlet childrenByKey: Map<Key, Retainer<TNode>> | undefined;\n\tlet seenKeys: Set<Key> | undefined;\n\tlet isAsync = false;\n\tlet hydrationBlock: Promise<unknown> | undefined;\n\tlet oi = 0;\n\tlet oldLength = oldRetained.length;\n\tfor (let ni = 0, newLength = newChildren.length; ni < newLength; ni++) {\n\t\t// length checks to prevent index out of bounds deoptimizations.\n\t\tlet ret = oi >= oldLength ? undefined : oldRetained[oi];\n\t\tlet child = narrow(newChildren[ni]);\n\t\t{\n\t\t\t// aligning new children with old retainers\n\t\t\tlet oldKey = typeof ret === \"object\" ? ret.el.key : undefined;\n\t\t\tlet newKey = typeof child === \"object\" ? child.key : undefined;\n\t\t\tif (newKey !== undefined && seenKeys && seenKeys.has(newKey)) {\n\t\t\t\tconsole.error(\"Duplicate key\", newKey);\n\t\t\t\tnewKey = undefined;\n\t\t\t}\n\n\t\t\tif (oldKey === newKey) {\n\t\t\t\tif (childrenByKey !== undefined && newKey !== undefined) {\n\t\t\t\t\tchildrenByKey.delete(newKey);\n\t\t\t\t}\n\n\t\t\t\toi++;\n\t\t\t} else {\n\t\t\t\tchildrenByKey = childrenByKey || createChildrenByKey(oldRetained, oi);\n\t\t\t\tif (newKey === undefined) {\n\t\t\t\t\twhile (ret !== undefined && oldKey !== undefined) {\n\t\t\t\t\t\toi++;\n\t\t\t\t\t\tret = oldRetained[oi];\n\t\t\t\t\t\toldKey = typeof ret === \"object\" ? ret.el.key : undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\toi++;\n\t\t\t\t} else {\n\t\t\t\t\tret = childrenByKey.get(newKey);\n\t\t\t\t\tif (ret !== undefined) {\n\t\t\t\t\t\tchildrenByKey.delete(newKey);\n\t\t\t\t\t}\n\n\t\t\t\t\t(seenKeys = seenKeys || new Set()).add(newKey);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Updating\n\t\tlet value: Promise<ElementValue<TNode>> | ElementValue<TNode>;\n\t\tif (typeof child === \"object\") {\n\t\t\tif (child.tag === Copy) {\n\t\t\t\tvalue = getInflightValue(ret);\n\t\t\t} else {\n\t\t\t\tlet oldProps: Record<string, any> | undefined;\n\t\t\t\tlet static_ = false;\n\t\t\t\tif (typeof ret === \"object\" && ret.el.tag === child.tag) {\n\t\t\t\t\toldProps = ret.el.props;\n\t\t\t\t\tret.el = child;\n\t\t\t\t\tif (child.static_) {\n\t\t\t\t\t\tvalue = getInflightValue(ret);\n\t\t\t\t\t\tstatic_ = true;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (typeof ret === \"object\") {\n\t\t\t\t\t\t(graveyard = graveyard || []).push(ret);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst fallback = ret;\n\t\t\t\t\tret = new Retainer<TNode>(child);\n\t\t\t\t\tret.fallbackValue = fallback;\n\t\t\t\t}\n\n\t\t\t\tif (static_) {\n\t\t\t\t\t// pass\n\t\t\t\t} else if (child.tag === Raw) {\n\t\t\t\t\tvalue = hydrationBlock\n\t\t\t\t\t\t? hydrationBlock.then(() =>\n\t\t\t\t\t\t\t\tupdateRaw(\n\t\t\t\t\t\t\t\t\trenderer,\n\t\t\t\t\t\t\t\t\tret as Retainer<TNode>,\n\t\t\t\t\t\t\t\t\tscope,\n\t\t\t\t\t\t\t\t\toldProps,\n\t\t\t\t\t\t\t\t\thydrationData,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t  )\n\t\t\t\t\t\t: updateRaw(renderer, ret, scope, oldProps, hydrationData);\n\t\t\t\t} else if (child.tag === Fragment) {\n\t\t\t\t\tvalue = hydrationBlock\n\t\t\t\t\t\t? hydrationBlock.then(() =>\n\t\t\t\t\t\t\t\tupdateFragment(\n\t\t\t\t\t\t\t\t\trenderer,\n\t\t\t\t\t\t\t\t\troot,\n\t\t\t\t\t\t\t\t\thost,\n\t\t\t\t\t\t\t\t\tctx,\n\t\t\t\t\t\t\t\t\tscope,\n\t\t\t\t\t\t\t\t\tret as Retainer<TNode>,\n\t\t\t\t\t\t\t\t\thydrationData,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t  )\n\t\t\t\t\t\t: updateFragment(\n\t\t\t\t\t\t\t\trenderer,\n\t\t\t\t\t\t\t\troot,\n\t\t\t\t\t\t\t\thost,\n\t\t\t\t\t\t\t\tctx,\n\t\t\t\t\t\t\t\tscope,\n\t\t\t\t\t\t\t\tret,\n\t\t\t\t\t\t\t\thydrationData,\n\t\t\t\t\t\t  );\n\t\t\t\t} else if (typeof child.tag === \"function\") {\n\t\t\t\t\tvalue = hydrationBlock\n\t\t\t\t\t\t? hydrationBlock.then(() =>\n\t\t\t\t\t\t\t\tupdateComponent(\n\t\t\t\t\t\t\t\t\trenderer,\n\t\t\t\t\t\t\t\t\troot,\n\t\t\t\t\t\t\t\t\thost,\n\t\t\t\t\t\t\t\t\tctx,\n\t\t\t\t\t\t\t\t\tscope,\n\t\t\t\t\t\t\t\t\tret as Retainer<TNode>,\n\t\t\t\t\t\t\t\t\toldProps,\n\t\t\t\t\t\t\t\t\thydrationData,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t  )\n\t\t\t\t\t\t: updateComponent(\n\t\t\t\t\t\t\t\trenderer,\n\t\t\t\t\t\t\t\troot,\n\t\t\t\t\t\t\t\thost,\n\t\t\t\t\t\t\t\tctx,\n\t\t\t\t\t\t\t\tscope,\n\t\t\t\t\t\t\t\tret,\n\t\t\t\t\t\t\t\toldProps,\n\t\t\t\t\t\t\t\thydrationData,\n\t\t\t\t\t\t  );\n\t\t\t\t} else {\n\t\t\t\t\tvalue = hydrationBlock\n\t\t\t\t\t\t? hydrationBlock.then(() =>\n\t\t\t\t\t\t\t\tupdateHost(\n\t\t\t\t\t\t\t\t\trenderer,\n\t\t\t\t\t\t\t\t\troot,\n\t\t\t\t\t\t\t\t\tctx,\n\t\t\t\t\t\t\t\t\tscope,\n\t\t\t\t\t\t\t\t\tret as Retainer<TNode>,\n\t\t\t\t\t\t\t\t\toldProps,\n\t\t\t\t\t\t\t\t\thydrationData,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t  )\n\t\t\t\t\t\t: updateHost(\n\t\t\t\t\t\t\t\trenderer,\n\t\t\t\t\t\t\t\troot,\n\t\t\t\t\t\t\t\tctx,\n\t\t\t\t\t\t\t\tscope,\n\t\t\t\t\t\t\t\tret,\n\t\t\t\t\t\t\t\toldProps,\n\t\t\t\t\t\t\t\thydrationData,\n\t\t\t\t\t\t  );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst ref = child.ref;\n\t\t\tif (isPromiseLike(value)) {\n\t\t\t\tisAsync = true;\n\t\t\t\tif (typeof ref === \"function\") {\n\t\t\t\t\tvalue = value.then((value) => {\n\t\t\t\t\t\tref(renderer.read(value));\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (hydrationData !== undefined) {\n\t\t\t\t\thydrationBlock = value;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (typeof ref === \"function\") {\n\t\t\t\t\tref(renderer.read(value));\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\t// child is a string or undefined\n\t\t\tif (typeof ret === \"object\") {\n\t\t\t\t(graveyard = graveyard || []).push(ret);\n\t\t\t}\n\n\t\t\tif (typeof child === \"string\") {\n\t\t\t\tvalue = ret = renderer.text(child, scope, hydrationData);\n\t\t\t} else {\n\t\t\t\tret = undefined;\n\t\t\t}\n\t\t}\n\n\t\tvalues[ni] = value;\n\t\tnewRetained[ni] = ret;\n\t}\n\n\t// cleanup remaining retainers\n\tfor (; oi < oldLength; oi++) {\n\t\tconst ret = oldRetained[oi];\n\t\tif (typeof ret === \"object\" && typeof ret.el.key === \"undefined\") {\n\t\t\t(graveyard = graveyard || []).push(ret);\n\t\t}\n\t}\n\n\tif (childrenByKey !== undefined && childrenByKey.size > 0) {\n\t\t(graveyard = graveyard || []).push(...childrenByKey.values());\n\t}\n\n\tparent.children = unwrap(newRetained);\n\tif (isAsync) {\n\t\tlet childValues1 = Promise.all(values).finally(() => {\n\t\t\tif (graveyard) {\n\t\t\t\tfor (let i = 0; i < graveyard.length; i++) {\n\t\t\t\t\tunmount(renderer, host, ctx, graveyard[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tlet onChildValues!: Function;\n\t\tchildValues1 = Promise.race([\n\t\t\tchildValues1,\n\t\t\tnew Promise<any>((resolve) => (onChildValues = resolve)),\n\t\t]);\n\n\t\tif (parent.onNextValues) {\n\t\t\tparent.onNextValues(childValues1);\n\t\t}\n\n\t\tparent.onNextValues = onChildValues;\n\t\treturn childValues1.then((childValues) => {\n\t\t\tparent.inflightValue = parent.fallbackValue = undefined;\n\t\t\treturn normalize(childValues);\n\t\t});\n\t} else {\n\t\tif (graveyard) {\n\t\t\tfor (let i = 0; i < graveyard.length; i++) {\n\t\t\t\tunmount(renderer, host, ctx, graveyard[i]);\n\t\t\t}\n\t\t}\n\n\t\tif (parent.onNextValues) {\n\t\t\tparent.onNextValues(values);\n\t\t\tparent.onNextValues = undefined;\n\t\t}\n\n\t\tparent.inflightValue = parent.fallbackValue = undefined;\n\t\t// We can assert there are no promises in the array because isAsync is false\n\t\treturn normalize(values as Array<ElementValue<TNode>>);\n\t}\n}\n\nfunction createChildrenByKey<TNode>(\n\tchildren: Array<RetainerChild<TNode>>,\n\toffset: number,\n): Map<Key, Retainer<TNode>> {\n\tconst childrenByKey = new Map<Key, Retainer<TNode>>();\n\tfor (let i = offset; i < children.length; i++) {\n\t\tconst child = children[i];\n\t\tif (typeof child === \"object\" && typeof child.el.key !== \"undefined\") {\n\t\t\tchildrenByKey.set(child.el.key, child);\n\t\t}\n\t}\n\n\treturn childrenByKey;\n}\n\nfunction getInflightValue<TNode>(\n\tchild: RetainerChild<TNode>,\n): Promise<ElementValue<TNode>> | ElementValue<TNode> {\n\tif (typeof child !== \"object\") {\n\t\treturn child;\n\t}\n\n\tconst ctx: ContextImpl<TNode> | undefined =\n\t\ttypeof child.el.tag === \"function\" ? child.ctx : undefined;\n\tif (ctx && ctx.f & IsUpdating && ctx.inflightValue) {\n\t\treturn ctx.inflightValue;\n\t} else if (child.inflightValue) {\n\t\treturn child.inflightValue;\n\t}\n\n\treturn getValue(child);\n}\n\nfunction updateRaw<TNode, TScope>(\n\trenderer: RendererImpl<TNode, TScope, TNode, unknown>,\n\tret: Retainer<TNode>,\n\tscope: TScope | undefined,\n\toldProps: Record<string, any> | undefined,\n\thydrationData: HydrationData<TNode> | undefined,\n): ElementValue<TNode> {\n\tconst props = ret.el.props;\n\tif (!oldProps || oldProps.value !== props.value) {\n\t\tret.value = renderer.raw(props.value, scope, hydrationData);\n\t}\n\n\treturn ret.value;\n}\n\nfunction updateFragment<TNode, TScope, TRoot extends TNode>(\n\trenderer: RendererImpl<TNode, TScope, TRoot, unknown>,\n\troot: TRoot | undefined,\n\thost: Retainer<TNode>,\n\tctx: ContextImpl<TNode, TScope, TRoot> | undefined,\n\tscope: TScope | undefined,\n\tret: Retainer<TNode>,\n\thydrationData: HydrationData<TNode> | undefined,\n): Promise<ElementValue<TNode>> | ElementValue<TNode> {\n\tconst childValues = diffChildren(\n\t\trenderer,\n\t\troot,\n\t\thost,\n\t\tctx,\n\t\tscope,\n\t\tret,\n\t\tret.el.props.children,\n\t\thydrationData,\n\t);\n\n\tif (isPromiseLike(childValues)) {\n\t\tret.inflightValue = childValues.then((childValues) => unwrap(childValues));\n\t\treturn ret.inflightValue;\n\t}\n\n\treturn unwrap(childValues);\n}\n\nfunction updateHost<TNode, TScope, TRoot extends TNode>(\n\trenderer: RendererImpl<TNode, TScope, TRoot, unknown>,\n\troot: TRoot | undefined,\n\tctx: ContextImpl<TNode, TScope, TRoot> | undefined,\n\tscope: TScope | undefined,\n\tret: Retainer<TNode>,\n\toldProps: Record<string, any> | undefined,\n\thydrationData: HydrationData<TNode> | undefined,\n): Promise<ElementValue<TNode>> | ElementValue<TNode> {\n\tconst el = ret.el;\n\tconst tag = el.tag as string | symbol;\n\tlet hydrationValue: TNode | string | undefined;\n\tif (el.tag === Portal) {\n\t\troot = ret.value = el.props.root;\n\t} else {\n\t\tif (hydrationData !== undefined) {\n\t\t\tconst value = hydrationData.children.shift();\n\t\t\thydrationValue = value;\n\t\t}\n\t}\n\n\tscope = renderer.scope(scope, tag, el.props);\n\tlet childHydrationData: HydrationData<TNode> | undefined;\n\tif (hydrationValue != null && typeof hydrationValue !== \"string\") {\n\t\tchildHydrationData = renderer.hydrate(tag, hydrationValue, el.props);\n\n\t\tif (childHydrationData === undefined) {\n\t\t\thydrationValue = undefined;\n\t\t}\n\t}\n\tconst childValues = diffChildren(\n\t\trenderer,\n\t\troot,\n\t\tret,\n\t\tctx,\n\t\tscope,\n\t\tret,\n\t\tret.el.props.children,\n\t\tchildHydrationData,\n\t);\n\n\tif (isPromiseLike(childValues)) {\n\t\tret.inflightValue = childValues.then((childValues) =>\n\t\t\tcommitHost(renderer, scope, ret, childValues, oldProps, hydrationValue),\n\t\t);\n\n\t\treturn ret.inflightValue;\n\t}\n\n\treturn commitHost(\n\t\trenderer,\n\t\tscope,\n\t\tret,\n\t\tchildValues,\n\t\toldProps,\n\t\thydrationValue,\n\t);\n}\n\nfunction commitHost<TNode, TScope>(\n\trenderer: RendererImpl<TNode, TScope, TNode, unknown>,\n\tscope: TScope,\n\tret: Retainer<TNode>,\n\tchildValues: Array<TNode | string>,\n\toldProps: Record<string, any> | undefined,\n\thydrationValue: TNode | undefined,\n): ElementValue<TNode> {\n\tconst tag = ret.el.tag as string | symbol;\n\tlet value = ret.value as TNode;\n\tif (hydrationValue != null) {\n\t\tvalue = ret.value = hydrationValue;\n\t}\n\n\tlet props = ret.el.props;\n\tlet copied: Set<string> | undefined;\n\tif (tag !== Portal) {\n\t\tif (value == null) {\n\t\t\t// This assumes that renderer.create does not return nullish values.\n\t\t\tvalue = ret.value = renderer.create(tag, props, scope);\n\t\t}\n\n\t\tfor (const propName in {...oldProps, ...props}) {\n\t\t\tconst propValue = props[propName];\n\t\t\tif (propValue === Copy) {\n\t\t\t\t// TODO: The Copy tag doubles as a way to skip the patching of a prop.\n\t\t\t\t// Not sure about this feature. Should probably be removed.\n\t\t\t\t(copied = copied || new Set()).add(propName);\n\t\t\t} else if (propName !== \"children\") {\n\t\t\t\trenderer.patch(\n\t\t\t\t\ttag,\n\t\t\t\t\tvalue,\n\t\t\t\t\tpropName,\n\t\t\t\t\tpropValue,\n\t\t\t\t\toldProps && oldProps[propName],\n\t\t\t\t\tscope,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (copied) {\n\t\tprops = {...ret.el.props};\n\t\tfor (const name of copied) {\n\t\t\tprops[name] = oldProps && oldProps[name];\n\t\t}\n\n\t\tret.el = new Element(tag, props, ret.el.key, ret.el.ref);\n\t}\n\n\trenderer.arrange(\n\t\ttag,\n\t\tvalue,\n\t\tprops,\n\t\tchildValues,\n\t\toldProps,\n\t\twrap(ret.cachedChildValues),\n\t);\n\tret.cachedChildValues = unwrap(childValues);\n\tif (tag === Portal) {\n\t\tflush(renderer, ret.value);\n\t\treturn;\n\t}\n\n\treturn value;\n}\n\nfunction flush<TRoot>(\n\trenderer: RendererImpl<unknown, unknown, TRoot>,\n\troot: TRoot,\n\tinitiator?: ContextImpl,\n) {\n\trenderer.flush(root);\n\tif (typeof root !== \"object\" || root === null) {\n\t\treturn;\n\t}\n\n\tconst flushMap = flushMaps.get(root as any);\n\tif (flushMap) {\n\t\tif (initiator) {\n\t\t\tconst flushMap1 = new Map<ContextImpl, Set<Function>>();\n\t\t\tfor (let [ctx, callbacks] of flushMap) {\n\t\t\t\tif (!ctxContains(initiator, ctx)) {\n\t\t\t\t\tflushMap.delete(ctx);\n\t\t\t\t\tflushMap1.set(ctx, callbacks);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (flushMap1.size) {\n\t\t\t\tflushMaps.set(root as any, flushMap1);\n\t\t\t} else {\n\t\t\t\tflushMaps.delete(root as any);\n\t\t\t}\n\t\t} else {\n\t\t\tflushMaps.delete(root as any);\n\t\t}\n\n\t\tfor (const [ctx, callbacks] of flushMap) {\n\t\t\tconst value = renderer.read(getValue(ctx.ret));\n\t\t\tfor (const callback of callbacks) {\n\t\t\t\tcallback(value);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction unmount<TNode, TScope, TRoot extends TNode, TResult>(\n\trenderer: RendererImpl<TNode, TScope, TRoot, TResult>,\n\thost: Retainer<TNode>,\n\tctx: ContextImpl<TNode, TScope, TRoot, TResult> | undefined,\n\tret: Retainer<TNode>,\n): void {\n\tif (typeof ret.el.tag === \"function\") {\n\t\tctx = ret.ctx as ContextImpl<TNode, TScope, TRoot, TResult>;\n\t\tunmountComponent(ctx);\n\t} else if (ret.el.tag === Portal) {\n\t\thost = ret;\n\t\trenderer.arrange(\n\t\t\tPortal,\n\t\t\thost.value as TNode,\n\t\t\thost.el.props,\n\t\t\t[],\n\t\t\thost.el.props,\n\t\t\twrap(host.cachedChildValues),\n\t\t);\n\t\tflush(renderer, host.value);\n\t} else if (ret.el.tag !== Fragment) {\n\t\tif (isEventTarget(ret.value)) {\n\t\t\tconst records = getListenerRecords(ctx, host);\n\t\t\tfor (let i = 0; i < records.length; i++) {\n\t\t\t\tconst record = records[i];\n\t\t\t\tret.value.removeEventListener(\n\t\t\t\t\trecord.type,\n\t\t\t\t\trecord.callback,\n\t\t\t\t\trecord.options,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\trenderer.dispose(ret.el.tag, ret.value as TNode, ret.el.props);\n\t\thost = ret;\n\t}\n\n\tconst children = wrap(ret.children);\n\tfor (let i = 0; i < children.length; i++) {\n\t\tconst child = children[i];\n\t\tif (typeof child === \"object\") {\n\t\t\tunmount(renderer, host, ctx, child);\n\t\t}\n\t}\n}\n\n/*** CONTEXT FLAGS ***/\n/**\n * A flag which is true when the component is initialized or updated by an\n * ancestor component or the root render call.\n *\n * Used to determine things like whether the nearest host ancestor needs to be\n * rearranged.\n */\nconst IsUpdating = 1 << 0;\n\n/**\n * A flag which is true when the component is synchronously executing.\n *\n * Used to guard against components triggering stack overflow or generator error.\n */\nconst IsSyncExecuting = 1 << 1;\n\n/**\n * A flag which is true when the component is in a for...of loop.\n */\nconst IsInForOfLoop = 1 << 2;\n\n/**\n * A flag which is true when the component is in a for await...of loop.\n */\nconst IsInForAwaitOfLoop = 1 << 3;\n\n/**\n * A flag which is true when the component starts the render loop but has not\n * yielded yet.\n *\n * Used to make sure that components yield at least once per loop.\n */\nconst NeedsToYield = 1 << 4;\n\n/**\n * A flag used by async generator components in conjunction with the\n * onAvailable callback to mark whether new props can be pulled via the context\n * async iterator. See the Symbol.asyncIterator method and the\n * resumeCtxIterator function.\n */\nconst PropsAvailable = 1 << 5;\n\n/**\n * A flag which is set when a component errors.\n *\n * NOTE: This is mainly used to prevent some false positives in component\n * yields or returns undefined warnings. The reason we’re using this versus\n * IsUnmounted is a very troubling test (cascades sync generator parent and\n * sync generator child) where synchronous code causes a stack overflow error\n * in a non-deterministic way. Deeply disturbing stuff.\n */\nconst IsErrored = 1 << 6;\n\n/**\n * A flag which is set when the component is unmounted. Unmounted components\n * are no longer in the element tree and cannot refresh or rerender.\n */\nconst IsUnmounted = 1 << 7;\n\n/**\n * A flag which indicates that the component is a sync generator component.\n */\nconst IsSyncGen = 1 << 8;\n\n/**\n * A flag which indicates that the component is an async generator component.\n */\nconst IsAsyncGen = 1 << 9;\n\n/**\n * A flag which is set while schedule callbacks are called.\n */\nconst IsScheduling = 1 << 10;\n\n/**\n * A flag which is set when a schedule callback calls refresh.\n */\nconst IsSchedulingRefresh = 1 << 11;\n\nexport interface Context extends Crank.Context {}\n\n/**\n * An interface which can be extended to provide strongly typed provisions.\n * See Context.prototype.consume and Context.prototype.provide.\n */\nexport interface ProvisionMap extends Crank.ProvisionMap {}\n\nconst provisionMaps = new WeakMap<ContextImpl, Map<unknown, unknown>>();\n\nconst scheduleMap = new WeakMap<ContextImpl, Set<Function>>();\n\nconst cleanupMap = new WeakMap<ContextImpl, Set<Function>>();\n\n// keys are roots\nconst flushMaps = new WeakMap<object, Map<ContextImpl, Set<Function>>>();\n\n/**\n * @internal\n * The internal class which holds context data.\n */\nclass ContextImpl<\n\tTNode = unknown,\n\tTScope = unknown,\n\tTRoot extends TNode = TNode,\n\tTResult = unknown,\n> {\n\t/** A bitmask. See CONTEXT FLAGS above. */\n\tdeclare f: number;\n\n\t/** The actual context associated with this impl. */\n\tdeclare owner: Context<unknown, TResult>;\n\n\t/**\n\t * The renderer which created this context.\n\t */\n\tdeclare renderer: RendererImpl<TNode, TScope, TRoot, TResult>;\n\n\t/** The root node as set by the nearest ancestor portal. */\n\tdeclare root: TRoot | undefined;\n\n\t/**\n\t * The nearest ancestor host or portal retainer.\n\t *\n\t * When refresh is called, the host element will be arranged as the last step\n\t * of the commit, to make sure the parent’s children properly reflects the\n\t * components’s children.\n\t */\n\tdeclare host: Retainer<TNode>;\n\n\t/** The parent context impl. */\n\tdeclare parent: ContextImpl<TNode, TScope, TRoot, TResult> | undefined;\n\n\t/** The value of the scope at the point of element’s creation. */\n\tdeclare scope: TScope | undefined;\n\n\t/** The internal node associated with this context. */\n\tdeclare ret: Retainer<TNode>;\n\n\t/**\n\t * The iterator returned by the component function.\n\t *\n\t * Existence of this property implies that the component is a generator\n\t * component. It is deleted when a component is returned.\n\t */\n\tdeclare iterator:\n\t\t| Iterator<Children, Children | void, unknown>\n\t\t| AsyncIterator<Children, Children | void, unknown>\n\t\t| undefined;\n\n\t// The following properties are used to implement the\n\tdeclare inflightBlock: Promise<unknown> | undefined;\n\tdeclare inflightValue: Promise<ElementValue<TNode>> | undefined;\n\tdeclare enqueuedBlock: Promise<unknown> | undefined;\n\tdeclare enqueuedValue: Promise<ElementValue<TNode>> | undefined;\n\n\t// The following callbacks are used to implement the async generator render\n\t// loop behavior.\n\tdeclare onProps: ((props: Record<string, any>) => unknown) | undefined;\n\tdeclare onPropsRequested: Function | undefined;\n\tconstructor(\n\t\trenderer: RendererImpl<TNode, TScope, TRoot, TResult>,\n\t\troot: TRoot | undefined,\n\t\thost: Retainer<TNode>,\n\t\tparent: ContextImpl<TNode, TScope, TRoot, TResult> | undefined,\n\t\tscope: TScope | undefined,\n\t\tret: Retainer<TNode>,\n\t) {\n\t\tthis.f = 0;\n\t\tthis.owner = new Context(this);\n\t\tthis.renderer = renderer;\n\t\tthis.root = root;\n\t\tthis.host = host;\n\t\tthis.parent = parent;\n\t\tthis.scope = scope;\n\t\tthis.ret = ret;\n\n\t\tthis.iterator = undefined;\n\t\tthis.inflightBlock = undefined;\n\t\tthis.inflightValue = undefined;\n\t\tthis.enqueuedBlock = undefined;\n\t\tthis.enqueuedValue = undefined;\n\t\tthis.onProps = undefined;\n\t\tthis.onPropsRequested = undefined;\n\t}\n}\n\nconst _ContextImpl = Symbol.for(\"crank.ContextImpl\");\n\ntype ComponentProps<T> = T extends () => any\n\t? {}\n\t: T extends (props: infer U) => any\n\t? U\n\t: T;\n/**\n * A class which is instantiated and passed to every component as its this\n * value. Contexts form a tree just like elements and all components in the\n * element tree are connected via contexts. Components can use this tree to\n * communicate data upwards via events and downwards via provisions.\n *\n * @template [T=*] - The expected shape of the props passed to the component,\n * or a component function. Used to strongly type the Context iterator methods.\n * @template [TResult=*] - The readable element value type. It is used in\n * places such as the return value of refresh and the argument passed to\n * schedule and cleanup callbacks.\n */\nexport class Context<T = any, TResult = any> implements EventTarget {\n\t/**\n\t * @internal\n\t */\n\tdeclare [_ContextImpl]: ContextImpl<unknown, unknown, unknown, TResult>;\n\n\t// TODO: If we could make the constructor function take a nicer value, it\n\t// would be useful for testing purposes.\n\tconstructor(impl: ContextImpl<unknown, unknown, unknown, TResult>) {\n\t\tthis[_ContextImpl] = impl;\n\t}\n\n\t/**\n\t * The current props of the associated element.\n\t *\n\t * Typically, you should read props either via the first parameter of the\n\t * component or via the context iterator methods. This property is mainly for\n\t * plugins or utilities which wrap contexts.\n\t */\n\tget props(): ComponentProps<T> {\n\t\treturn this[_ContextImpl].ret.el.props;\n\t}\n\n\t// TODO: Should we rename this???\n\t/**\n\t * The current value of the associated element.\n\t *\n\t * Typically, you should read values via refs, generator yield expressions,\n\t * or the refresh, schedule, cleanup, or flush methods. This property is\n\t * mainly for plugins or utilities which wrap contexts.\n\t */\n\tget value(): TResult {\n\t\treturn this[_ContextImpl].renderer.read(getValue(this[_ContextImpl].ret));\n\t}\n\n\t*[Symbol.iterator](): Generator<ComponentProps<T>> {\n\t\tconst ctx = this[_ContextImpl];\n\t\ttry {\n\t\t\tctx.f |= IsInForOfLoop;\n\t\t\twhile (!(ctx.f & IsUnmounted)) {\n\t\t\t\tif (ctx.f & NeedsToYield) {\n\t\t\t\t\tthrow new Error(\"Context iterated twice without a yield\");\n\t\t\t\t} else {\n\t\t\t\t\tctx.f |= NeedsToYield;\n\t\t\t\t}\n\n\t\t\t\tyield ctx.ret.el.props!;\n\t\t\t}\n\t\t} finally {\n\t\t\tctx.f &= ~IsInForOfLoop;\n\t\t}\n\t}\n\n\tasync *[Symbol.asyncIterator](): AsyncGenerator<ComponentProps<T>> {\n\t\tconst ctx = this[_ContextImpl];\n\t\tif (ctx.f & IsSyncGen) {\n\t\t\tthrow new Error(\"Use for...of in sync generator components\");\n\t\t}\n\n\t\ttry {\n\t\t\tctx.f |= IsInForAwaitOfLoop;\n\t\t\twhile (!(ctx.f & IsUnmounted)) {\n\t\t\t\tif (ctx.f & NeedsToYield) {\n\t\t\t\t\tthrow new Error(\"Context iterated twice without a yield\");\n\t\t\t\t} else {\n\t\t\t\t\tctx.f |= NeedsToYield;\n\t\t\t\t}\n\n\t\t\t\tif (ctx.f & PropsAvailable) {\n\t\t\t\t\tctx.f &= ~PropsAvailable;\n\t\t\t\t\tyield ctx.ret.el.props;\n\t\t\t\t} else {\n\t\t\t\t\tconst props = await new Promise((resolve) => (ctx.onProps = resolve));\n\t\t\t\t\tif (ctx.f & IsUnmounted) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tyield props as ComponentProps<T>;\n\t\t\t\t}\n\n\t\t\t\tif (ctx.onPropsRequested) {\n\t\t\t\t\tctx.onPropsRequested();\n\t\t\t\t\tctx.onPropsRequested = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t} finally {\n\t\t\tctx.f &= ~IsInForAwaitOfLoop;\n\t\t\tif (ctx.onPropsRequested) {\n\t\t\t\tctx.onPropsRequested();\n\t\t\t\tctx.onPropsRequested = undefined;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Re-executes a component.\n\t *\n\t * @returns The rendered value of the component or a promise thereof if the\n\t * component or its children execute asynchronously.\n\t *\n\t * The refresh method works a little differently for async generator\n\t * components, in that it will resume the Context’s props async iterator\n\t * rather than resuming execution. This is because async generator components\n\t * are perpetually resumed independent of updates, and rely on the props\n\t * async iterator to suspend.\n\t */\n\trefresh(): Promise<TResult> | TResult {\n\t\tconst ctx = this[_ContextImpl];\n\t\tif (ctx.f & IsUnmounted) {\n\t\t\tconsole.error(\"Component is unmounted\");\n\t\t\treturn ctx.renderer.read(undefined);\n\t\t} else if (ctx.f & IsSyncExecuting) {\n\t\t\tconsole.error(\"Component is already executing\");\n\t\t\treturn this.value;\n\t\t}\n\n\t\tconst value = enqueueComponentRun(ctx);\n\t\tif (isPromiseLike(value)) {\n\t\t\treturn (value as Promise<any>).then((value) => ctx.renderer.read(value));\n\t\t}\n\n\t\treturn ctx.renderer.read(value);\n\t}\n\n\t/**\n\t * Registers a callback which fires when the component commits. Will only\n\t * fire once per callback and update.\n\t */\n\tschedule(callback: (value: TResult) => unknown): void {\n\t\tconst ctx = this[_ContextImpl];\n\t\tlet callbacks = scheduleMap.get(ctx);\n\t\tif (!callbacks) {\n\t\t\tcallbacks = new Set<Function>();\n\t\t\tscheduleMap.set(ctx, callbacks);\n\t\t}\n\n\t\tcallbacks.add(callback);\n\t}\n\n\t/**\n\t * Registers a callback which fires when the component’s children are\n\t * rendered into the root. Will only fire once per callback and render.\n\t */\n\tflush(callback: (value: TResult) => unknown): void {\n\t\tconst ctx = this[_ContextImpl];\n\t\tif (typeof ctx.root !== \"object\" || ctx.root === null) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet flushMap = flushMaps.get(ctx.root);\n\t\tif (!flushMap) {\n\t\t\tflushMap = new Map<ContextImpl, Set<Function>>();\n\t\t\tflushMaps.set(ctx.root, flushMap);\n\t\t}\n\n\t\tlet callbacks = flushMap.get(ctx);\n\t\tif (!callbacks) {\n\t\t\tcallbacks = new Set<Function>();\n\t\t\tflushMap.set(ctx, callbacks);\n\t\t}\n\n\t\tcallbacks.add(callback);\n\t}\n\n\t/**\n\t * Registers a callback which fires when the component unmounts. Will only\n\t * fire once per callback.\n\t */\n\tcleanup(callback: (value: TResult) => unknown): void {\n\t\tconst ctx = this[_ContextImpl];\n\n\t\tif (ctx.f & IsUnmounted) {\n\t\t\tconst value = ctx.renderer.read(getValue(ctx.ret));\n\t\t\tcallback(value);\n\t\t\treturn;\n\t\t}\n\n\t\tlet callbacks = cleanupMap.get(ctx);\n\t\tif (!callbacks) {\n\t\t\tcallbacks = new Set<Function>();\n\t\t\tcleanupMap.set(ctx, callbacks);\n\t\t}\n\n\t\tcallbacks.add(callback);\n\t}\n\n\tconsume<TKey extends keyof ProvisionMap>(key: TKey): ProvisionMap[TKey];\n\tconsume(key: unknown): any;\n\tconsume(key: unknown): any {\n\t\tfor (\n\t\t\tlet ctx = this[_ContextImpl].parent;\n\t\t\tctx !== undefined;\n\t\t\tctx = ctx.parent\n\t\t) {\n\t\t\tconst provisions = provisionMaps.get(ctx);\n\t\t\tif (provisions && provisions.has(key)) {\n\t\t\t\treturn provisions.get(key)!;\n\t\t\t}\n\t\t}\n\t}\n\n\tprovide<TKey extends keyof ProvisionMap>(\n\t\tkey: TKey,\n\t\tvalue: ProvisionMap[TKey],\n\t): void;\n\tprovide(key: unknown, value: any): void;\n\tprovide(key: unknown, value: any): void {\n\t\tconst ctx = this[_ContextImpl];\n\t\tlet provisions = provisionMaps.get(ctx);\n\t\tif (!provisions) {\n\t\t\tprovisions = new Map();\n\t\t\tprovisionMaps.set(ctx, provisions);\n\t\t}\n\n\t\tprovisions.set(key, value);\n\t}\n\n\taddEventListener<T extends string>(\n\t\ttype: T,\n\t\tlistener: MappedEventListenerOrEventListenerObject<T> | null,\n\t\toptions?: boolean | AddEventListenerOptions,\n\t): void {\n\t\tconst ctx = this[_ContextImpl];\n\t\tlet listeners: Array<EventListenerRecord>;\n\t\tif (!isListenerOrListenerObject(listener)) {\n\t\t\treturn;\n\t\t} else {\n\t\t\tconst listeners1 = listenersMap.get(ctx);\n\t\t\tif (listeners1) {\n\t\t\t\tlisteners = listeners1;\n\t\t\t} else {\n\t\t\t\tlisteners = [];\n\t\t\t\tlistenersMap.set(ctx, listeners);\n\t\t\t}\n\t\t}\n\n\t\toptions = normalizeListenerOptions(options);\n\t\tlet callback: MappedEventListener<T>;\n\t\tif (typeof listener === \"object\") {\n\t\t\tcallback = () => listener.handleEvent.apply(listener, arguments as any);\n\t\t} else {\n\t\t\tcallback = listener;\n\t\t}\n\n\t\tconst record: EventListenerRecord = {type, listener, callback, options};\n\t\tif (options.once) {\n\t\t\trecord.callback = function (this: any) {\n\t\t\t\tconst i = listeners.indexOf(record);\n\t\t\t\tif (i !== -1) {\n\t\t\t\t\tlisteners.splice(i, 1);\n\t\t\t\t}\n\n\t\t\t\treturn callback.apply(this, arguments as any);\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\tlisteners.some(\n\t\t\t\t(record1) =>\n\t\t\t\t\trecord.type === record1.type &&\n\t\t\t\t\trecord.listener === record1.listener &&\n\t\t\t\t\t!record.options.capture === !record1.options.capture,\n\t\t\t)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tlisteners.push(record);\n\n\t\t// TODO: is it possible to separate out the EventTarget delegation logic\n\t\tfor (const value of getChildValues(ctx.ret)) {\n\t\t\tif (isEventTarget(value)) {\n\t\t\t\tvalue.addEventListener(record.type, record.callback, record.options);\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveEventListener<T extends string>(\n\t\ttype: T,\n\t\tlistener: MappedEventListenerOrEventListenerObject<T> | null,\n\t\toptions?: EventListenerOptions | boolean,\n\t): void {\n\t\tconst ctx = this[_ContextImpl];\n\t\tconst listeners = listenersMap.get(ctx);\n\t\tif (listeners == null || !isListenerOrListenerObject(listener)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst options1 = normalizeListenerOptions(options);\n\t\tconst i = listeners.findIndex(\n\t\t\t(record) =>\n\t\t\t\trecord.type === type &&\n\t\t\t\trecord.listener === listener &&\n\t\t\t\t!record.options.capture === !options1.capture,\n\t\t);\n\n\t\tif (i === -1) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst record = listeners[i];\n\t\tlisteners.splice(i, 1);\n\n\t\t// TODO: is it possible to separate out the EventTarget delegation logic\n\t\tfor (const value of getChildValues(ctx.ret)) {\n\t\t\tif (isEventTarget(value)) {\n\t\t\t\tvalue.removeEventListener(record.type, record.callback, record.options);\n\t\t\t}\n\t\t}\n\t}\n\n\tdispatchEvent(ev: Event): boolean {\n\t\tconst ctx = this[_ContextImpl];\n\t\tconst path: Array<ContextImpl> = [];\n\t\tfor (\n\t\t\tlet parent = ctx.parent;\n\t\t\tparent !== undefined;\n\t\t\tparent = parent.parent\n\t\t) {\n\t\t\tpath.push(parent);\n\t\t}\n\n\t\t// We patch the stopImmediatePropagation method because ev.cancelBubble\n\t\t// only informs us if stopPropagation was called and there are no\n\t\t// properties which inform us if stopImmediatePropagation was called.\n\t\tlet immediateCancelBubble = false;\n\t\tconst stopImmediatePropagation = ev.stopImmediatePropagation;\n\t\tsetEventProperty(ev, \"stopImmediatePropagation\", () => {\n\t\t\timmediateCancelBubble = true;\n\t\t\treturn stopImmediatePropagation.call(ev);\n\t\t});\n\t\tsetEventProperty(ev, \"target\", ctx.owner);\n\n\t\t// The only possible errors in this block are errors thrown by callbacks,\n\t\t// and dispatchEvent will only log these errors rather than throwing\n\t\t// them. Therefore, we place all code in a try block, log errors in the\n\t\t// catch block, and use an unsafe return statement in the finally block.\n\t\t//\n\t\t// Each early return within the try block returns true because while the\n\t\t// return value is overridden in the finally block, TypeScript\n\t\t// (justifiably) does not recognize the unsafe return statement.\n\t\ttry {\n\t\t\tsetEventProperty(ev, \"eventPhase\", CAPTURING_PHASE);\n\t\t\tfor (let i = path.length - 1; i >= 0; i--) {\n\t\t\t\tconst target = path[i];\n\t\t\t\tconst listeners = listenersMap.get(target);\n\t\t\t\tif (listeners) {\n\t\t\t\t\tsetEventProperty(ev, \"currentTarget\", target.owner);\n\t\t\t\t\tfor (const record of listeners) {\n\t\t\t\t\t\tif (record.type === ev.type && record.options.capture) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\trecord.callback.call(target.owner, ev);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (immediateCancelBubble) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (ev.cancelBubble) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t{\n\t\t\t\tsetEventProperty(ev, \"eventPhase\", AT_TARGET);\n\t\t\t\tsetEventProperty(ev, \"currentTarget\", ctx.owner);\n\t\t\t\tconst propCallback = ctx.ret.el.props[\"on\" + ev.type];\n\t\t\t\tif (propCallback != null) {\n\t\t\t\t\tpropCallback(ev);\n\t\t\t\t\tif (immediateCancelBubble || ev.cancelBubble) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst listeners = listenersMap.get(ctx);\n\t\t\t\tif (listeners) {\n\t\t\t\t\tfor (const record of listeners) {\n\t\t\t\t\t\tif (record.type === ev.type) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\trecord.callback.call(ctx.owner, ev);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (immediateCancelBubble) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (ev.cancelBubble) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (ev.bubbles) {\n\t\t\t\tsetEventProperty(ev, \"eventPhase\", BUBBLING_PHASE);\n\t\t\t\tfor (let i = 0; i < path.length; i++) {\n\t\t\t\t\tconst target = path[i];\n\t\t\t\t\tconst listeners = listenersMap.get(target);\n\t\t\t\t\tif (listeners) {\n\t\t\t\t\t\tsetEventProperty(ev, \"currentTarget\", target.owner);\n\t\t\t\t\t\tfor (const record of listeners) {\n\t\t\t\t\t\t\tif (record.type === ev.type && !record.options.capture) {\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\trecord.callback.call(target.owner, ev);\n\t\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (immediateCancelBubble) {\n\t\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (ev.cancelBubble) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} finally {\n\t\t\tsetEventProperty(ev, \"eventPhase\", NONE);\n\t\t\tsetEventProperty(ev, \"currentTarget\", null);\n\t\t\t// eslint-disable-next-line no-unsafe-finally\n\t\t\treturn !ev.defaultPrevented;\n\t\t}\n\t}\n}\n\n/*** PRIVATE CONTEXT FUNCTIONS ***/\nfunction ctxContains(parent: ContextImpl, child: ContextImpl): boolean {\n\tfor (\n\t\tlet current: ContextImpl | undefined = child;\n\t\tcurrent !== undefined;\n\t\tcurrent = current.parent\n\t) {\n\t\tif (current === parent) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n\nfunction updateComponent<TNode, TScope, TRoot extends TNode, TResult>(\n\trenderer: RendererImpl<TNode, TScope, TRoot, TResult>,\n\troot: TRoot | undefined,\n\thost: Retainer<TNode>,\n\tparent: ContextImpl<TNode, TScope, TRoot, TResult> | undefined,\n\tscope: TScope | undefined,\n\tret: Retainer<TNode>,\n\toldProps: Record<string, any> | undefined,\n\thydrationData: HydrationData<TNode> | undefined,\n): Promise<ElementValue<TNode>> | ElementValue<TNode> {\n\tlet ctx: ContextImpl<TNode, TScope, TRoot, TResult>;\n\tif (oldProps) {\n\t\tctx = ret.ctx as ContextImpl<TNode, TScope, TRoot, TResult>;\n\t\tif (ctx.f & IsSyncExecuting) {\n\t\t\tconsole.error(\"Component is already executing\");\n\t\t\treturn ret.cachedChildValues;\n\t\t}\n\t} else {\n\t\tctx = ret.ctx = new ContextImpl(renderer, root, host, parent, scope, ret);\n\t}\n\n\tctx.f |= IsUpdating;\n\treturn enqueueComponentRun(ctx, hydrationData);\n}\n\nfunction updateComponentChildren<TNode, TResult>(\n\tctx: ContextImpl<TNode, unknown, TNode, TResult>,\n\tchildren: Children,\n\thydrationData?: HydrationData<TNode> | undefined,\n): Promise<ElementValue<TNode>> | ElementValue<TNode> {\n\tif (ctx.f & IsUnmounted) {\n\t\treturn;\n\t} else if (ctx.f & IsErrored) {\n\t\t// This branch is necessary for some race conditions where this function is\n\t\t// called after iterator.throw() in async generator components.\n\t\treturn;\n\t} else if (children === undefined) {\n\t\tconsole.error(\n\t\t\t\"A component has returned or yielded undefined. If this was intentional, return or yield null instead.\",\n\t\t);\n\t}\n\n\tlet childValues: Promise<Array<string | TNode>> | Array<string | TNode>;\n\ttry {\n\t\t// TODO: WAT\n\t\t// We set the isExecuting flag in case a child component dispatches an event\n\t\t// which bubbles to this component and causes a synchronous refresh().\n\t\tctx.f |= IsSyncExecuting;\n\t\tchildValues = diffChildren(\n\t\t\tctx.renderer,\n\t\t\tctx.root,\n\t\t\tctx.host,\n\t\t\tctx,\n\t\t\tctx.scope,\n\t\t\tctx.ret,\n\t\t\tnarrow(children),\n\t\t\thydrationData,\n\t\t);\n\t} finally {\n\t\tctx.f &= ~IsSyncExecuting;\n\t}\n\n\tif (isPromiseLike(childValues)) {\n\t\tctx.ret.inflightValue = childValues.then((childValues) =>\n\t\t\tcommitComponent(ctx, childValues),\n\t\t);\n\n\t\treturn ctx.ret.inflightValue;\n\t}\n\n\treturn commitComponent(ctx, childValues);\n}\n\nfunction commitComponent<TNode>(\n\tctx: ContextImpl<TNode, unknown, TNode>,\n\tvalues: Array<TNode | string>,\n): ElementValue<TNode> {\n\tif (ctx.f & IsUnmounted) {\n\t\treturn;\n\t}\n\n\tconst listeners = listenersMap.get(ctx);\n\tif (listeners && listeners.length) {\n\t\tfor (let i = 0; i < values.length; i++) {\n\t\t\tconst value = values[i];\n\t\t\tif (isEventTarget(value)) {\n\t\t\t\tfor (let j = 0; j < listeners.length; j++) {\n\t\t\t\t\tconst record = listeners[j];\n\t\t\t\t\tvalue.addEventListener(record.type, record.callback, record.options);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tconst oldValues = wrap(ctx.ret.cachedChildValues);\n\tlet value = (ctx.ret.cachedChildValues = unwrap(values));\n\tif (ctx.f & IsScheduling) {\n\t\tctx.f |= IsSchedulingRefresh;\n\t} else if (!(ctx.f & IsUpdating)) {\n\t\t// If we’re not updating the component, which happens when components are\n\t\t// refreshed, or when async generator components iterate, we have to do a\n\t\t// little bit housekeeping when a component’s child values have changed.\n\t\tif (!arrayEqual(oldValues, values)) {\n\t\t\tconst records = getListenerRecords(ctx.parent, ctx.host);\n\t\t\tif (records.length) {\n\t\t\t\tfor (let i = 0; i < values.length; i++) {\n\t\t\t\t\tconst value = values[i];\n\t\t\t\t\tif (isEventTarget(value)) {\n\t\t\t\t\t\tfor (let j = 0; j < records.length; j++) {\n\t\t\t\t\t\t\tconst record = records[j];\n\t\t\t\t\t\t\tvalue.addEventListener(\n\t\t\t\t\t\t\t\trecord.type,\n\t\t\t\t\t\t\t\trecord.callback,\n\t\t\t\t\t\t\t\trecord.options,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// rearranging the nearest ancestor host element\n\t\t\tconst host = ctx.host;\n\t\t\tconst oldHostValues = wrap(host.cachedChildValues);\n\t\t\tinvalidate(ctx, host);\n\t\t\tconst hostValues = getChildValues(host);\n\t\t\tctx.renderer.arrange(\n\t\t\t\thost.el.tag as string | symbol,\n\t\t\t\thost.value as TNode,\n\t\t\t\thost.el.props,\n\t\t\t\thostValues,\n\t\t\t\t// props and oldProps are the same because the host isn’t updated.\n\t\t\t\thost.el.props,\n\t\t\t\toldHostValues,\n\t\t\t);\n\t\t}\n\n\t\tflush(ctx.renderer, ctx.root, ctx);\n\t}\n\n\tconst callbacks = scheduleMap.get(ctx);\n\tif (callbacks) {\n\t\tscheduleMap.delete(ctx);\n\t\tctx.f |= IsScheduling;\n\t\tconst value1 = ctx.renderer.read(value);\n\t\tfor (const callback of callbacks) {\n\t\t\tcallback(value1);\n\t\t}\n\n\t\tctx.f &= ~IsScheduling;\n\t\t// Handles an edge case where refresh() is called during a schedule().\n\t\tif (ctx.f & IsSchedulingRefresh) {\n\t\t\tctx.f &= ~IsSchedulingRefresh;\n\t\t\tvalue = getValue(ctx.ret);\n\t\t}\n\t}\n\n\tctx.f &= ~IsUpdating;\n\treturn value;\n}\n\nfunction invalidate(ctx: ContextImpl, host: Retainer<unknown>): void {\n\tfor (\n\t\tlet parent = ctx.parent;\n\t\tparent !== undefined && parent.host === host;\n\t\tparent = parent.parent\n\t) {\n\t\tparent.ret.cachedChildValues = undefined;\n\t}\n\n\thost.cachedChildValues = undefined;\n}\n\nfunction arrayEqual<TValue>(arr1: Array<TValue>, arr2: Array<TValue>): boolean {\n\tif (arr1.length !== arr2.length) {\n\t\treturn false;\n\t}\n\n\tfor (let i = 0; i < arr1.length; i++) {\n\t\tconst value1 = arr1[i];\n\t\tconst value2 = arr2[i];\n\t\tif (value1 !== value2) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\n/** Enqueues and executes the component associated with the context. */\nfunction enqueueComponentRun<TNode, TResult>(\n\tctx: ContextImpl<TNode, unknown, TNode, TResult>,\n\thydrationData?: HydrationData<TNode> | undefined,\n): Promise<ElementValue<TNode>> | ElementValue<TNode> {\n\tif (ctx.f & IsAsyncGen && !(ctx.f & IsInForOfLoop)) {\n\t\tif (hydrationData !== undefined) {\n\t\t\tthrow new Error(\"Hydration error\");\n\t\t}\n\n\t\t// This branch will run for non-initial renders of async generator\n\t\t// components when they are not in for...of loops. When in a for...of loop,\n\t\t// async generator components will behave normally.\n\t\t//\n\t\t// Async gen componennts can be in one of three states:\n\t\t//\n\t\t// 1. propsAvailable flag is true: \"available\"\n\t\t//\n\t\t//   The component is suspended somewhere in the loop. When the component\n\t\t//   reaches the bottom of the loop, it will run again with the next props.\n\t\t//\n\t\t// 2. onAvailable callback is defined: \"suspended\"\n\t\t//\n\t\t//   The component has suspended at the bottom of the loop and is waiting\n\t\t//   for new props.\n\t\t//\n\t\t// 3. neither 1 or 2: \"Running\"\n\t\t//\n\t\t//   The component is suspended somewhere in the loop. When the component\n\t\t//   reaches the bottom of the loop, it will suspend.\n\t\t//\n\t\t// Components will never be both available and suspended at\n\t\t// the same time.\n\t\t//\n\t\t// If the component is at the loop bottom, this means that the next value\n\t\t// produced by the component will have the most up to date props, so we can\n\t\t// simply return the current inflight value. Otherwise, we have to wait for\n\t\t// the bottom of the loop to be reached before returning the inflight\n\t\t// value.\n\t\tconst isAtLoopbottom = ctx.f & IsInForAwaitOfLoop && !ctx.onProps;\n\t\tresumePropsIterator(ctx);\n\t\tif (isAtLoopbottom) {\n\t\t\tif (ctx.inflightBlock == null) {\n\t\t\t\tctx.inflightBlock = new Promise(\n\t\t\t\t\t(resolve) => (ctx.onPropsRequested = resolve),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn ctx.inflightBlock.then(() => {\n\t\t\t\tctx.inflightBlock = undefined;\n\t\t\t\treturn ctx.inflightValue;\n\t\t\t});\n\t\t}\n\n\t\treturn ctx.inflightValue;\n\t} else if (!ctx.inflightBlock) {\n\t\ttry {\n\t\t\tconst [block, value] = runComponent<TNode, TResult>(ctx, hydrationData);\n\t\t\tif (block) {\n\t\t\t\tctx.inflightBlock = block\n\t\t\t\t\t// TODO: there is some fuckery going on here related to async\n\t\t\t\t\t// generator components resuming when they’re meant to be returned.\n\t\t\t\t\t.then((v) => v)\n\t\t\t\t\t.finally(() => advanceComponent(ctx));\n\t\t\t\t// stepComponent will only return a block if the value is asynchronous\n\t\t\t\tctx.inflightValue = value as Promise<ElementValue<TNode>>;\n\t\t\t}\n\n\t\t\treturn value;\n\t\t} catch (err) {\n\t\t\tif (!(ctx.f & IsUpdating)) {\n\t\t\t\tif (!ctx.parent) {\n\t\t\t\t\tthrow err;\n\t\t\t\t}\n\t\t\t\treturn propagateError<TNode>(ctx.parent, err);\n\t\t\t}\n\n\t\t\tthrow err;\n\t\t}\n\t} else if (!ctx.enqueuedBlock) {\n\t\tif (hydrationData !== undefined) {\n\t\t\tthrow new Error(\"Hydration error\");\n\t\t}\n\t\t// We need to assign enqueuedBlock and enqueuedValue synchronously, hence\n\t\t// the Promise constructor call here.\n\t\tlet resolveEnqueuedBlock: Function;\n\t\tctx.enqueuedBlock = new Promise(\n\t\t\t(resolve) => (resolveEnqueuedBlock = resolve),\n\t\t);\n\n\t\tctx.enqueuedValue = ctx.inflightBlock.then(() => {\n\t\t\ttry {\n\t\t\t\tconst [block, value] = runComponent<TNode, TResult>(ctx);\n\t\t\t\tif (block) {\n\t\t\t\t\tresolveEnqueuedBlock(block.finally(() => advanceComponent(ctx)));\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t} catch (err) {\n\t\t\t\tif (!(ctx.f & IsUpdating)) {\n\t\t\t\t\tif (!ctx.parent) {\n\t\t\t\t\t\tthrow err;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn propagateError<TNode>(ctx.parent, err);\n\t\t\t\t}\n\n\t\t\t\tthrow err;\n\t\t\t}\n\t\t});\n\t}\n\n\treturn ctx.enqueuedValue;\n}\n\n/** Called when the inflight block promise settles. */\nfunction advanceComponent(ctx: ContextImpl): void {\n\tif (ctx.f & IsAsyncGen && !(ctx.f & IsInForOfLoop)) {\n\t\treturn;\n\t}\n\n\tctx.inflightBlock = ctx.enqueuedBlock;\n\tctx.inflightValue = ctx.enqueuedValue;\n\tctx.enqueuedBlock = undefined;\n\tctx.enqueuedValue = undefined;\n}\n\n/**\n * This function is responsible for executing the component and handling all\n * the different component types. We cannot identify whether a component is a\n * generator or async without calling it and inspecting the return value.\n *\n * @returns {[block, value]} A tuple where\n * block - A possible promise which represents the duration during which the\n * component is blocked from updating.\n * value - A possible promise resolving to the rendered value of children.\n *\n * Each component type will block according to the type of the component.\n * - Sync function components never block and will transparently pass updates\n * to children.\n * - Async function components and async generator components block while\n * executing itself, but will not block for async children.\n * - Sync generator components block while any children are executing, because\n * they are expected to only resume when they’ve actually rendered.\n */\nfunction runComponent<TNode, TResult>(\n\tctx: ContextImpl<TNode, unknown, TNode, TResult>,\n\thydrationData?: HydrationData<TNode> | undefined,\n): [\n\tPromise<unknown> | undefined,\n\tPromise<ElementValue<TNode>> | ElementValue<TNode>,\n] {\n\tconst ret = ctx.ret;\n\tconst initial = !ctx.iterator;\n\tif (initial) {\n\t\tresumePropsIterator(ctx);\n\t\tctx.f |= IsSyncExecuting;\n\t\tclearEventListeners(ctx);\n\t\tlet result: ReturnType<Component>;\n\t\ttry {\n\t\t\tresult = (ret.el.tag as Component).call(ctx.owner, ret.el.props);\n\t\t} catch (err) {\n\t\t\tctx.f |= IsErrored;\n\t\t\tthrow err;\n\t\t} finally {\n\t\t\tctx.f &= ~IsSyncExecuting;\n\t\t}\n\n\t\tif (isIteratorLike(result)) {\n\t\t\tctx.iterator = result;\n\t\t} else if (isPromiseLike(result)) {\n\t\t\t// async function component\n\t\t\tconst result1 =\n\t\t\t\tresult instanceof Promise ? result : Promise.resolve(result);\n\t\t\tconst value = result1.then(\n\t\t\t\t(result) =>\n\t\t\t\t\tupdateComponentChildren<TNode, TResult>(ctx, result, hydrationData),\n\t\t\t\t(err) => {\n\t\t\t\t\tctx.f |= IsErrored;\n\t\t\t\t\tthrow err;\n\t\t\t\t},\n\t\t\t);\n\t\t\treturn [result1.catch(NOOP), value];\n\t\t} else {\n\t\t\t// sync function component\n\t\t\treturn [\n\t\t\t\tundefined,\n\t\t\t\tupdateComponentChildren<TNode, TResult>(ctx, result, hydrationData),\n\t\t\t];\n\t\t}\n\t} else if (hydrationData !== undefined) {\n\t\tthrow new Error(\"Hydration error\");\n\t}\n\n\tlet iteration!: Promise<ChildrenIteratorResult> | ChildrenIteratorResult;\n\tif (initial) {\n\t\ttry {\n\t\t\tctx.f |= IsSyncExecuting;\n\t\t\titeration = ctx.iterator!.next();\n\t\t} catch (err) {\n\t\t\tctx.f |= IsErrored;\n\t\t\tthrow err;\n\t\t} finally {\n\t\t\tctx.f &= ~IsSyncExecuting;\n\t\t}\n\n\t\tif (isPromiseLike(iteration)) {\n\t\t\tctx.f |= IsAsyncGen;\n\t\t} else {\n\t\t\tctx.f |= IsSyncGen;\n\t\t}\n\t}\n\n\tif (ctx.f & IsSyncGen) {\n\t\tctx.f &= ~NeedsToYield;\n\t\t// sync generator component\n\t\tif (!initial) {\n\t\t\ttry {\n\t\t\t\tctx.f |= IsSyncExecuting;\n\t\t\t\titeration = ctx.iterator!.next(ctx.renderer.read(getValue(ret)));\n\t\t\t} catch (err) {\n\t\t\t\tctx.f |= IsErrored;\n\t\t\t\tthrow err;\n\t\t\t} finally {\n\t\t\t\tctx.f &= ~IsSyncExecuting;\n\t\t\t}\n\t\t}\n\n\t\tif (isPromiseLike(iteration)) {\n\t\t\tthrow new Error(\"Mixed generator component\");\n\t\t}\n\n\t\tif (iteration.done) {\n\t\t\tctx.f &= ~IsSyncGen;\n\t\t\tctx.iterator = undefined;\n\t\t}\n\n\t\tlet value: Promise<ElementValue<TNode>> | ElementValue<TNode>;\n\t\ttry {\n\t\t\tvalue = updateComponentChildren<TNode, TResult>(\n\t\t\t\tctx,\n\t\t\t\t// Children can be void so we eliminate that here\n\t\t\t\titeration.value as Children,\n\t\t\t\thydrationData,\n\t\t\t);\n\n\t\t\tif (isPromiseLike(value)) {\n\t\t\t\tvalue = value.catch((err) => handleChildError(ctx, err));\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tvalue = handleChildError(ctx, err);\n\t\t}\n\n\t\tconst block = isPromiseLike(value) ? value.catch(NOOP) : undefined;\n\t\treturn [block, value];\n\t} else if (ctx.f & IsInForOfLoop) {\n\t\t// TODO: does this need to be done async?\n\t\tctx.f &= ~NeedsToYield;\n\t\t// we are in a for...of loop for async generator\n\t\tif (!initial) {\n\t\t\ttry {\n\t\t\t\tctx.f |= IsSyncExecuting;\n\t\t\t\titeration = ctx.iterator!.next(ctx.renderer.read(getValue(ret)));\n\t\t\t} catch (err) {\n\t\t\t\tctx.f |= IsErrored;\n\t\t\t\tthrow err;\n\t\t\t} finally {\n\t\t\t\tctx.f &= ~IsSyncExecuting;\n\t\t\t}\n\t\t}\n\n\t\tif (!isPromiseLike(iteration)) {\n\t\t\tthrow new Error(\"Mixed generator component\");\n\t\t}\n\n\t\tconst block = iteration.catch(NOOP);\n\t\tconst value = iteration.then(\n\t\t\t(iteration) => {\n\t\t\t\tlet value: Promise<ElementValue<TNode>> | ElementValue<TNode>;\n\t\t\t\tif (!(ctx.f & IsInForOfLoop)) {\n\t\t\t\t\trunAsyncGenComponent(ctx, Promise.resolve(iteration), hydrationData);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvalue = updateComponentChildren<TNode, TResult>(\n\t\t\t\t\t\tctx,\n\t\t\t\t\t\t// Children can be void so we eliminate that here\n\t\t\t\t\t\titeration.value as Children,\n\t\t\t\t\t\thydrationData,\n\t\t\t\t\t);\n\n\t\t\t\t\tif (isPromiseLike(value)) {\n\t\t\t\t\t\tvalue = value.catch((err) => handleChildError(ctx, err));\n\t\t\t\t\t}\n\t\t\t\t} catch (err) {\n\t\t\t\t\tvalue = handleChildError(ctx, err);\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t},\n\t\t\t(err) => {\n\t\t\t\tctx.f |= IsErrored;\n\t\t\t\tthrow err;\n\t\t\t},\n\t\t);\n\n\t\treturn [block, value];\n\t} else {\n\t\trunAsyncGenComponent(\n\t\t\tctx,\n\t\t\titeration as Promise<ChildrenIteratorResult>,\n\t\t\thydrationData,\n\t\t);\n\t\t// async generator component\n\t\treturn [ctx.inflightBlock, ctx.inflightValue];\n\t}\n}\n\nasync function runAsyncGenComponent<TNode, TResult>(\n\tctx: ContextImpl<TNode, unknown, TNode, TResult>,\n\titerationP: Promise<ChildrenIteratorResult>,\n\thydrationData: HydrationData<TNode> | undefined,\n): Promise<void> {\n\tlet done = false;\n\ttry {\n\t\twhile (!done) {\n\t\t\tif (ctx.f & IsInForOfLoop) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// inflightValue must be set synchronously.\n\t\t\tlet onValue!: Function;\n\t\t\tctx.inflightValue = new Promise((resolve) => (onValue = resolve));\n\t\t\tif (ctx.f & IsUpdating) {\n\t\t\t\t// We should not swallow unhandled promise rejections if the component is\n\t\t\t\t// updating independently.\n\t\t\t\t// TODO: Does this handle this.refresh() calls?\n\t\t\t\tctx.inflightValue.catch(NOOP);\n\t\t\t}\n\n\t\t\tlet iteration: ChildrenIteratorResult;\n\t\t\ttry {\n\t\t\t\titeration = await iterationP;\n\t\t\t} catch (err) {\n\t\t\t\tdone = true;\n\t\t\t\tctx.f |= IsErrored;\n\t\t\t\tonValue(Promise.reject(err));\n\t\t\t\tbreak;\n\t\t\t} finally {\n\t\t\t\tctx.f &= ~NeedsToYield;\n\t\t\t\tif (!(ctx.f & IsInForAwaitOfLoop)) {\n\t\t\t\t\tctx.f &= ~PropsAvailable;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdone = !!iteration.done;\n\t\t\tlet value: Promise<ElementValue<TNode>> | ElementValue<TNode>;\n\t\t\ttry {\n\t\t\t\tvalue = updateComponentChildren<TNode, TResult>(\n\t\t\t\t\tctx,\n\t\t\t\t\titeration.value!,\n\t\t\t\t\thydrationData,\n\t\t\t\t);\n\t\t\t\thydrationData = undefined;\n\t\t\t\tif (isPromiseLike(value)) {\n\t\t\t\t\tvalue = value.catch((err: any) => handleChildError(ctx, err));\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\t// Do we need to catch potential errors here in the case of unhandled\n\t\t\t\t// promise rejections?\n\t\t\t\tvalue = handleChildError(ctx, err);\n\t\t\t} finally {\n\t\t\t\tonValue(value);\n\t\t\t}\n\n\t\t\t// TODO: this can be done more elegantly\n\t\t\tlet oldValue: Promise<TResult> | TResult;\n\t\t\tif (ctx.ret.inflightValue) {\n\t\t\t\t// The value passed back into the generator as the argument to the next\n\t\t\t\t// method is a promise if an async generator component has async\n\t\t\t\t// children. Sync generator components only resume when their children\n\t\t\t\t// have fulfilled so the element’s inflight child values will never be\n\t\t\t\t// defined.\n\t\t\t\toldValue = ctx.ret.inflightValue.then((value) =>\n\t\t\t\t\tctx.renderer.read(value),\n\t\t\t\t);\n\n\t\t\t\toldValue.catch((err) => {\n\t\t\t\t\tif (ctx.f & IsUpdating) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!ctx.parent) {\n\t\t\t\t\t\tthrow err;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn propagateError(ctx.parent, err);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\toldValue = ctx.renderer.read(getValue(ctx.ret));\n\t\t\t}\n\n\t\t\tif (ctx.f & IsUnmounted) {\n\t\t\t\tif (ctx.f & IsInForAwaitOfLoop) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tctx.f |= IsSyncExecuting;\n\t\t\t\t\t\titerationP = ctx.iterator!.next(\n\t\t\t\t\t\t\toldValue,\n\t\t\t\t\t\t) as Promise<ChildrenIteratorResult>;\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tctx.f &= ~IsSyncExecuting;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturnComponent(ctx);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else if (!done && !(ctx.f & IsInForOfLoop)) {\n\t\t\t\ttry {\n\t\t\t\t\tctx.f |= IsSyncExecuting;\n\t\t\t\t\titerationP = ctx.iterator!.next(\n\t\t\t\t\t\toldValue,\n\t\t\t\t\t) as Promise<ChildrenIteratorResult>;\n\t\t\t\t} finally {\n\t\t\t\t\tctx.f &= ~IsSyncExecuting;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} finally {\n\t\tif (done) {\n\t\t\tctx.f &= ~IsAsyncGen;\n\t\t\tctx.iterator = undefined;\n\t\t}\n\t}\n}\n\n/**\n * Called to resume the props async iterator for async generator components.\n */\nfunction resumePropsIterator(ctx: ContextImpl): void {\n\tif (ctx.onProps) {\n\t\tctx.onProps(ctx.ret.el.props);\n\t\tctx.onProps = undefined;\n\t\tctx.f &= ~PropsAvailable;\n\t} else {\n\t\tctx.f |= PropsAvailable;\n\t}\n}\n\n// TODO: async unmounting\nfunction unmountComponent(ctx: ContextImpl): void {\n\tclearEventListeners(ctx);\n\tconst callbacks = cleanupMap.get(ctx);\n\tif (callbacks) {\n\t\tcleanupMap.delete(ctx);\n\t\tconst value = ctx.renderer.read(getValue(ctx.ret));\n\t\tfor (const callback of callbacks) {\n\t\t\tcallback(value);\n\t\t}\n\t}\n\n\tctx.f |= IsUnmounted;\n\tif (ctx.iterator) {\n\t\tif (ctx.f & IsSyncGen) {\n\t\t\tlet value: unknown;\n\t\t\tif (ctx.f & IsInForOfLoop) {\n\t\t\t\tvalue = enqueueComponentRun(ctx);\n\t\t\t}\n\n\t\t\tif (isPromiseLike(value)) {\n\t\t\t\tvalue.then(\n\t\t\t\t\t() => {\n\t\t\t\t\t\tif (ctx.f & IsInForOfLoop) {\n\t\t\t\t\t\t\tunmountComponent(ctx);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturnComponent(ctx);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t(err) => {\n\t\t\t\t\t\tif (!ctx.parent) {\n\t\t\t\t\t\t\tthrow err;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn propagateError<unknown>(ctx.parent, err);\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tif (ctx.f & IsInForOfLoop) {\n\t\t\t\t\tunmountComponent(ctx);\n\t\t\t\t} else {\n\t\t\t\t\treturnComponent(ctx);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (ctx.f & IsAsyncGen) {\n\t\t\tif (ctx.f & IsInForOfLoop) {\n\t\t\t\tconst value = enqueueComponentRun(ctx) as Promise<unknown>;\n\t\t\t\tvalue.then(\n\t\t\t\t\t() => {\n\t\t\t\t\t\tif (ctx.f & IsInForOfLoop) {\n\t\t\t\t\t\t\tunmountComponent(ctx);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturnComponent(ctx);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t(err) => {\n\t\t\t\t\t\tif (!ctx.parent) {\n\t\t\t\t\t\t\tthrow err;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn propagateError<unknown>(ctx.parent, err);\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t// The logic for unmounting async generator components is in the\n\t\t\t\t// runAsyncGenComponent function.\n\t\t\t\tresumePropsIterator(ctx);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction returnComponent(ctx: ContextImpl): void {\n\tresumePropsIterator(ctx);\n\tif (ctx.iterator && typeof ctx.iterator!.return === \"function\") {\n\t\ttry {\n\t\t\tctx.f |= IsSyncExecuting;\n\t\t\tconst iteration = ctx.iterator!.return();\n\t\t\tif (isPromiseLike(iteration)) {\n\t\t\t\titeration.catch((err) => {\n\t\t\t\t\tif (!ctx.parent) {\n\t\t\t\t\t\tthrow err;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn propagateError<unknown>(ctx.parent, err);\n\t\t\t\t});\n\t\t\t}\n\t\t} finally {\n\t\t\tctx.f &= ~IsSyncExecuting;\n\t\t}\n\t}\n}\n\n/*** EVENT TARGET UTILITIES ***/\n// EVENT PHASE CONSTANTS\n// https://developer.mozilla.org/en-US/docs/Web/API/Event/eventPhase\nconst NONE = 0;\nconst CAPTURING_PHASE = 1;\nconst AT_TARGET = 2;\nconst BUBBLING_PHASE = 3;\n\nconst listenersMap = new WeakMap<ContextImpl, Array<EventListenerRecord>>();\n/**\n * A map of event type strings to Event subclasses. Can be extended via\n * TypeScript module augmentation to have strongly typed event listeners.\n */\nexport interface EventMap extends Crank.EventMap {\n\t[type: string]: Event;\n}\n\ntype MappedEventListener<T extends string> = (ev: EventMap[T]) => unknown;\n\ntype MappedEventListenerOrEventListenerObject<T extends string> =\n\t| MappedEventListener<T>\n\t| {handleEvent: MappedEventListener<T>};\n\nfunction isListenerOrListenerObject(\n\tvalue: unknown,\n): value is MappedEventListenerOrEventListenerObject<string> {\n\treturn (\n\t\ttypeof value === \"function\" ||\n\t\t(value !== null &&\n\t\t\ttypeof value === \"object\" &&\n\t\t\ttypeof (value as any).handleEvent === \"function\")\n\t);\n}\n\ninterface EventListenerRecord {\n\ttype: string;\n\t// listener is the original value passed to addEventListener, callback is the\n\t// transformed function\n\tlistener: MappedEventListenerOrEventListenerObject<any>;\n\tcallback: MappedEventListener<any>;\n\toptions: AddEventListenerOptions;\n}\n\nfunction normalizeListenerOptions(\n\toptions: AddEventListenerOptions | boolean | null | undefined,\n): AddEventListenerOptions {\n\tif (typeof options === \"boolean\") {\n\t\treturn {capture: options};\n\t} else if (options == null) {\n\t\treturn {};\n\t}\n\n\treturn options;\n}\n\nfunction isEventTarget(value: any): value is EventTarget {\n\treturn (\n\t\tvalue != null &&\n\t\ttypeof value.addEventListener === \"function\" &&\n\t\ttypeof value.removeEventListener === \"function\" &&\n\t\ttypeof value.dispatchEvent === \"function\"\n\t);\n}\n\nfunction setEventProperty<T extends keyof Event>(\n\tev: Event,\n\tkey: T,\n\tvalue: Event[T],\n): void {\n\tObject.defineProperty(ev, key, {value, writable: false, configurable: true});\n}\n\n// TODO: Maybe we can pass in the current context directly, rather than\n// starting from the parent?\n/**\n * A function to reconstruct an array of every listener given a context and a\n * host element.\n *\n * This function exploits the fact that contexts retain their nearest ancestor\n * host element. We can determine all the contexts which are directly listening\n * to an element by traversing up the context tree and checking that the host\n * element passed in matches the parent context’s host element.\n */\nfunction getListenerRecords(\n\tctx: ContextImpl | undefined,\n\tret: Retainer<unknown>,\n): Array<EventListenerRecord> {\n\tlet listeners: Array<EventListenerRecord> = [];\n\twhile (ctx !== undefined && ctx.host === ret) {\n\t\tconst listeners1 = listenersMap.get(ctx);\n\t\tif (listeners1) {\n\t\t\tlisteners = listeners.concat(listeners1);\n\t\t}\n\n\t\tctx = ctx.parent;\n\t}\n\n\treturn listeners;\n}\n\nfunction clearEventListeners(ctx: ContextImpl): void {\n\tconst listeners = listenersMap.get(ctx);\n\tif (listeners && listeners.length) {\n\t\tfor (const value of getChildValues(ctx.ret)) {\n\t\t\tif (isEventTarget(value)) {\n\t\t\t\tfor (const record of listeners) {\n\t\t\t\t\tvalue.removeEventListener(\n\t\t\t\t\t\trecord.type,\n\t\t\t\t\t\trecord.callback,\n\t\t\t\t\t\trecord.options,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlisteners.length = 0;\n\t}\n}\n\n/*** ERROR HANDLING UTILITIES ***/\nfunction handleChildError<TNode>(\n\tctx: ContextImpl<TNode, unknown, TNode>,\n\terr: unknown,\n): Promise<ElementValue<TNode>> | ElementValue<TNode> {\n\tif (!ctx.iterator || typeof ctx.iterator.throw !== \"function\") {\n\t\tthrow err;\n\t}\n\n\tresumePropsIterator(ctx);\n\tlet iteration: ChildrenIteratorResult | Promise<ChildrenIteratorResult>;\n\ttry {\n\t\tctx.f |= IsSyncExecuting;\n\t\titeration = ctx.iterator.throw(err);\n\t} catch (err) {\n\t\tctx.f |= IsErrored;\n\t\tthrow err;\n\t} finally {\n\t\tctx.f &= ~IsSyncExecuting;\n\t}\n\n\tif (isPromiseLike(iteration)) {\n\t\treturn iteration.then(\n\t\t\t(iteration) => {\n\t\t\t\tif (iteration.done) {\n\t\t\t\t\tctx.f &= ~IsAsyncGen;\n\t\t\t\t\tctx.iterator = undefined;\n\t\t\t\t}\n\n\t\t\t\treturn updateComponentChildren(ctx, iteration.value as Children);\n\t\t\t},\n\t\t\t(err) => {\n\t\t\t\tctx.f |= IsErrored;\n\t\t\t\tthrow err;\n\t\t\t},\n\t\t);\n\t}\n\n\tif (iteration.done) {\n\t\tctx.f &= ~IsSyncGen;\n\t\tctx.f &= ~IsAsyncGen;\n\t\tctx.iterator = undefined;\n\t}\n\n\treturn updateComponentChildren(ctx, iteration.value as Children);\n}\n\nfunction propagateError<TNode>(\n\tctx: ContextImpl<TNode, unknown, TNode>,\n\terr: unknown,\n): Promise<ElementValue<TNode>> | ElementValue<TNode> {\n\tlet result: Promise<ElementValue<TNode>> | ElementValue<TNode>;\n\ttry {\n\t\tresult = handleChildError(ctx, err);\n\t} catch (err) {\n\t\tif (!ctx.parent) {\n\t\t\tthrow err;\n\t\t}\n\n\t\treturn propagateError<TNode>(ctx.parent, err);\n\t}\n\n\tif (isPromiseLike(result)) {\n\t\treturn result.catch((err) => {\n\t\t\tif (!ctx.parent) {\n\t\t\t\tthrow err;\n\t\t\t}\n\n\t\t\treturn propagateError<TNode>(ctx.parent, err);\n\t\t});\n\t}\n\n\treturn result;\n}\n\n// TODO: uncomment and use in the Element interface below\n// type CrankElement = Element;\ndeclare global {\n\tnamespace Crank {\n\t\texport interface EventMap {}\n\n\t\texport interface ProvisionMap {}\n\n\t\texport interface Context {}\n\t}\n\n\tnamespace JSX {\n\t\t// TODO: JSX Element type (the result of JSX expressions) don’t work\n\t\t// because TypeScript demands that all Components return JSX elements for\n\t\t// some reason.\n\t\t// interface Element extends CrankElement {}\n\n\t\texport interface IntrinsicElements {\n\t\t\t[tag: string]: any;\n\t\t}\n\n\t\texport interface ElementChildrenAttribute {\n\t\t\tchildren: {};\n\t\t}\n\t}\n}\n\n// Some JSX transpilation tools expect these functions to be defined on the\n// default export. Prefer named exports when importing directly.\nexport default {createElement, Fragment};\n", "import {createElement} from \"./crank.js\";\nimport type {Element} from \"./crank.js\";\n\nconst cache = new Map<string, ParseResult>();\nexport function jsx(\n\tspans: TemplateStringsArray,\n\t...expressions: Array<unknown>\n): Element {\n\tconst key = JSON.stringify(spans.raw);\n\tlet parseResult = cache.get(key);\n\tif (parseResult == null) {\n\t\tparseResult = parse(spans.raw);\n\t\tcache.set(key, parseResult);\n\t}\n\n\tconst {element, targets} = parseResult;\n\tfor (let i = 0; i < expressions.length; i++) {\n\t\tconst exp = expressions[i];\n\t\tconst target = targets[i];\n\t\tif (target) {\n\t\t\tif (target.type === \"error\") {\n\t\t\t\tthrow new SyntaxError(\n\t\t\t\t\ttarget.message.replace(\"${}\", formatTagForError(exp)),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\ttarget.value = exp;\n\t\t}\n\t}\n\n\treturn build(element);\n}\n\n// Type definitions for a bare-bones AST\ninterface ParseElement {\n\ttype: \"element\";\n\topen: ParseTag;\n\tclose: ParseTag | null;\n\t// ParseValue is used to represent spread props.\n\tprops: Array<ParseProp | ParseValue>;\n\tchildren: Array<ParseElement | ParseValue>;\n}\n\ninterface ParseValue {\n\ttype: \"value\";\n\tvalue: any;\n}\n\ninterface ParseTag {\n\ttype: \"tag\";\n\tslash: string;\n\tvalue: any;\n}\n\ninterface ParseProp {\n\ttype: \"prop\";\n\tname: string;\n\tvalue: ParseValue | ParsePropString;\n}\n\ninterface ParsePropString {\n\ttype: \"propString\";\n\tparts: Array<string | ParseValue>;\n}\n\ninterface ParseError {\n\ttype: \"error\";\n\tmessage: string;\n\tvalue: any;\n}\n\n// The parse result includes an array of targets, references to objects in the\n// parse tree whose `value` property is overwritten with expressions when the\n// template function is called. By separating the logic of parsing static\n// template spans from the handling of dynamic expressions, we can cache parse\n// results for successive calls.\ntype ExpressionTarget = ParseValue | ParseTag | ParseProp | ParseError;\n\ninterface ParseResult {\n\telement: ParseElement;\n\ttargets: Array<ExpressionTarget | null>;\n}\n\n/**\n * Matches first significant character in children mode.\n *\n * Group 1: newline\n * Group 2: comment\n * Group 3: tag\n * Group 4: closing slash\n * Group 5: tag name\n *\n * The comment group must appear first because the tag group can potentially\n * match a comment, so that we can handle tag expressions where we’ve reached\n * the end of a span.\n */\nconst CHILDREN_RE =\n\t/((?:\\r|\\n|\\r\\n)\\s*)|(<!--[\\S\\s]*?(?:-->|$))|(<\\s*(\\/{0,2})\\s*([-_$\\w]*))/g;\n\n/**\n * Matches props after element tags.\n *\n * Group 1: tag end\n * Group 2: spread props\n * Group 3: prop name\n * Group 4: equals\n * Group 5: prop value string\n */\nconst PROPS_RE =\n\t/\\s*(?:(\\/?\\s*>)|(\\.\\.\\.\\s*)|(?:([-_$\\w]+)\\s*(=)?\\s*(?:(\"(\\\\\"|[\\S\\s])*?(?:\"|$)|'(?:\\\\'|[\\S\\s])*?(?:'|$)))?))/g;\n\nconst CLOSING_BRACKET_RE = />/g;\n\nconst CLOSING_SINGLE_QUOTE_RE = /[^\\\\]?'/g;\n\nconst CLOSING_DOUBLE_QUOTE_RE = /[^\\\\]?\"/g;\n\nconst CLOSING_COMMENT_RE = /-->/g;\n\nfunction parse(spans: ArrayLike<string>): ParseResult {\n\tlet matcher = CHILDREN_RE;\n\tconst stack: Array<ParseElement> = [];\n\tlet element: ParseElement = {\n\t\ttype: \"element\",\n\t\topen: {type: \"tag\", slash: \"\", value: \"\"},\n\t\tclose: null,\n\t\tprops: [],\n\t\tchildren: [],\n\t};\n\n\tconst targets: Array<ExpressionTarget | null> = [];\n\tlet lineStart = true;\n\tfor (let s = 0; s < spans.length; s++) {\n\t\tconst span = spans[s];\n\t\t// Whether or not an expression is upcoming. Used to provide better errors.\n\t\tconst expressing = s < spans.length - 1;\n\t\tlet expressionTarget: ExpressionTarget | null = null;\n\t\tfor (let i = 0, end = i; i < span.length; i = end) {\n\t\t\tmatcher.lastIndex = i;\n\t\t\tconst match = matcher.exec(span);\n\t\t\tend = match ? match.index + match[0].length : span.length;\n\t\t\tswitch (matcher) {\n\t\t\t\tcase CHILDREN_RE: {\n\t\t\t\t\tif (match) {\n\t\t\t\t\t\tconst [, newline, comment, tag, closingSlash, tagName] = match;\n\t\t\t\t\t\tif (i < match.index) {\n\t\t\t\t\t\t\tlet before = span.slice(i, match.index);\n\t\t\t\t\t\t\tif (lineStart) {\n\t\t\t\t\t\t\t\tbefore = before.replace(/^\\s*/, \"\");\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (newline) {\n\t\t\t\t\t\t\t\tif (span[Math.max(0, match.index - 1)] === \"\\\\\") {\n\t\t\t\t\t\t\t\t\t// We preserve whitespace before escaped newlines and have to\n\t\t\t\t\t\t\t\t\t// remove the backslash.\n\t\t\t\t\t\t\t\t\t//   jsx` \\\n\t\t\t\t\t\t\t\t\t//   `\n\t\t\t\t\t\t\t\t\tbefore = before.slice(0, -1);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tbefore = before.replace(/\\s*$/, \"\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (before) {\n\t\t\t\t\t\t\t\telement.children.push({type: \"value\", value: before});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlineStart = !!newline;\n\t\t\t\t\t\tif (comment) {\n\t\t\t\t\t\t\tif (end === span.length) {\n\t\t\t\t\t\t\t\t// Expression in a comment:\n\t\t\t\t\t\t\t\t//   jsx`<!-- ${exp} -->`\n\t\t\t\t\t\t\t\tmatcher = CLOSING_COMMENT_RE;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (tag) {\n\t\t\t\t\t\t\tif (closingSlash) {\n\t\t\t\t\t\t\t\telement.close = {\n\t\t\t\t\t\t\t\t\ttype: \"tag\",\n\t\t\t\t\t\t\t\t\tslash: closingSlash,\n\t\t\t\t\t\t\t\t\tvalue: tagName,\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\tif (!stack.length) {\n\t\t\t\t\t\t\t\t\tif (end !== span.length) {\n\t\t\t\t\t\t\t\t\t\tthrow new SyntaxError(`Unmatched closing tag \"${tagName}\"`);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// ERROR EXPRESSION\n\t\t\t\t\t\t\t\t\texpressionTarget = {\n\t\t\t\t\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\t\t\t\t\tmessage: \"Unmatched closing tag ${}\",\n\t\t\t\t\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif (end === span.length) {\n\t\t\t\t\t\t\t\t\t\t// TAG EXPRESSION\n\t\t\t\t\t\t\t\t\t\texpressionTarget = element.close;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\telement = stack.pop()!;\n\t\t\t\t\t\t\t\t\tmatcher = CLOSING_BRACKET_RE;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst next: ParseElement = {\n\t\t\t\t\t\t\t\t\ttype: \"element\",\n\t\t\t\t\t\t\t\t\topen: {\n\t\t\t\t\t\t\t\t\t\ttype: \"tag\",\n\t\t\t\t\t\t\t\t\t\tslash: \"\",\n\t\t\t\t\t\t\t\t\t\tvalue: tagName,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tclose: null,\n\t\t\t\t\t\t\t\t\tprops: [],\n\t\t\t\t\t\t\t\t\tchildren: [],\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\telement.children.push(next);\n\t\t\t\t\t\t\t\tstack.push(element);\n\t\t\t\t\t\t\t\telement = next;\n\t\t\t\t\t\t\t\tmatcher = PROPS_RE;\n\t\t\t\t\t\t\t\tif (end === span.length) {\n\t\t\t\t\t\t\t\t\t// TAG EXPRESSION\n\t\t\t\t\t\t\t\t\texpressionTarget = element.open;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (i < span.length) {\n\t\t\t\t\t\t\tlet after = span.slice(i);\n\t\t\t\t\t\t\tif (!expressing) {\n\t\t\t\t\t\t\t\t// trim trailing whitespace\n\t\t\t\t\t\t\t\tafter = after.replace(/\\s*$/, \"\");\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (after) {\n\t\t\t\t\t\t\t\telement.children.push({type: \"value\", value: after});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase PROPS_RE: {\n\t\t\t\t\tif (match) {\n\t\t\t\t\t\tconst [, tagEnd, spread, name, equals, string] = match;\n\t\t\t\t\t\tif (i < match.index) {\n\t\t\t\t\t\t\tthrow new SyntaxError(\n\t\t\t\t\t\t\t\t`Unexpected text \\`${span.slice(i, match.index).trim()}\\``,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (tagEnd) {\n\t\t\t\t\t\t\tif (tagEnd[0] === \"/\") {\n\t\t\t\t\t\t\t\t// This is a self-closing element, so there will always be a\n\t\t\t\t\t\t\t\t// result on the stack.\n\t\t\t\t\t\t\t\telement = stack.pop()!;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tmatcher = CHILDREN_RE;\n\t\t\t\t\t\t} else if (spread) {\n\t\t\t\t\t\t\tconst value = {\n\t\t\t\t\t\t\t\ttype: \"value\" as const,\n\t\t\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\telement.props.push(value);\n\t\t\t\t\t\t\t// SPREAD PROP EXPRESSION\n\t\t\t\t\t\t\texpressionTarget = value;\n\t\t\t\t\t\t\tif (!(expressing && end === span.length)) {\n\t\t\t\t\t\t\t\tthrow new SyntaxError('Expression expected after \"...\"');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (name) {\n\t\t\t\t\t\t\tlet value: ParseValue | ParsePropString;\n\t\t\t\t\t\t\tif (string == null) {\n\t\t\t\t\t\t\t\tif (!equals) {\n\t\t\t\t\t\t\t\t\tvalue = {type: \"value\", value: true};\n\t\t\t\t\t\t\t\t} else if (end < span.length) {\n\t\t\t\t\t\t\t\t\tthrow new SyntaxError(\n\t\t\t\t\t\t\t\t\t\t`Unexpected text \\`${span.slice(end, end + 20)}\\``,\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tvalue = {type: \"value\" as const, value: null};\n\t\t\t\t\t\t\t\t\t// PROP EXPRESSION\n\t\t\t\t\t\t\t\t\texpressionTarget = value;\n\t\t\t\t\t\t\t\t\tif (!(expressing && end === span.length)) {\n\t\t\t\t\t\t\t\t\t\tthrow new SyntaxError(\n\t\t\t\t\t\t\t\t\t\t\t`Expression expected for prop \"${name}\"`,\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst quote = string[0];\n\t\t\t\t\t\t\t\tvalue = {type: \"propString\", parts: []};\n\t\t\t\t\t\t\t\tvalue.parts.push(string);\n\t\t\t\t\t\t\t\tif (end === span.length) {\n\t\t\t\t\t\t\t\t\tmatcher =\n\t\t\t\t\t\t\t\t\t\tquote === \"'\"\n\t\t\t\t\t\t\t\t\t\t\t? CLOSING_SINGLE_QUOTE_RE\n\t\t\t\t\t\t\t\t\t\t\t: CLOSING_DOUBLE_QUOTE_RE;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst prop = {\n\t\t\t\t\t\t\t\ttype: \"prop\" as const,\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\telement.props.push(prop);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!expressing) {\n\t\t\t\t\t\t\tif (i === span.length) {\n\t\t\t\t\t\t\t\tthrow new SyntaxError(\n\t\t\t\t\t\t\t\t\t`Expected props but reached end of document`,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthrow new SyntaxError(\n\t\t\t\t\t\t\t\t\t`Unexpected text \\`${span.slice(i, i + 20).trim()}\\``,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Unexpected expression errors are handled in the outer loop.\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// This would most likely be the starting point for the logic of\n\t\t\t\t\t\t// prop name expressions.\n\t\t\t\t\t\t//   jsx`<p ${name}=${value}>`\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase CLOSING_BRACKET_RE: {\n\t\t\t\t\t// We’re in a closing tag and looking for the >.\n\t\t\t\t\tif (match) {\n\t\t\t\t\t\tif (i < match.index) {\n\t\t\t\t\t\t\tthrow new SyntaxError(\n\t\t\t\t\t\t\t\t`Unexpected text \\`${span.slice(i, match.index).trim()}\\``,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmatcher = CHILDREN_RE;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!expressing) {\n\t\t\t\t\t\t\tthrow new SyntaxError(\n\t\t\t\t\t\t\t\t`Unexpected text \\`${span.slice(i, i + 20).trim()}\\``,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase CLOSING_SINGLE_QUOTE_RE:\n\t\t\t\tcase CLOSING_DOUBLE_QUOTE_RE: {\n\t\t\t\t\tconst string = span.slice(i, end);\n\t\t\t\t\tconst prop = element.props[element.props.length - 1] as ParseProp;\n\t\t\t\t\tconst propString = prop.value as ParsePropString;\n\t\t\t\t\tpropString.parts.push(string);\n\t\t\t\t\tif (match) {\n\t\t\t\t\t\tmatcher = PROPS_RE;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!expressing) {\n\t\t\t\t\t\t\tthrow new SyntaxError(\n\t\t\t\t\t\t\t\t`Missing \\`${\n\t\t\t\t\t\t\t\t\tmatcher === CLOSING_SINGLE_QUOTE_RE ? \"'\" : '\"'\n\t\t\t\t\t\t\t\t}\\``,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase CLOSING_COMMENT_RE: {\n\t\t\t\t\tif (match) {\n\t\t\t\t\t\tmatcher = CHILDREN_RE;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!expressing) {\n\t\t\t\t\t\t\tthrow new SyntaxError(\n\t\t\t\t\t\t\t\t\"Expected `-->` but reached end of template\",\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (expressing) {\n\t\t\tif (expressionTarget) {\n\t\t\t\ttargets.push(expressionTarget);\n\t\t\t\tif (expressionTarget.type === \"error\") {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tswitch (matcher) {\n\t\t\t\tcase CHILDREN_RE: {\n\t\t\t\t\tconst target = {type: \"value\" as const, value: null};\n\t\t\t\t\telement.children.push(target);\n\t\t\t\t\ttargets.push(target);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase CLOSING_SINGLE_QUOTE_RE:\n\t\t\t\tcase CLOSING_DOUBLE_QUOTE_RE: {\n\t\t\t\t\tconst prop = element.props[element.props.length - 1] as ParseProp;\n\t\t\t\t\tconst target = {type: \"value\" as const, value: null};\n\t\t\t\t\t(prop.value as ParsePropString).parts.push(target);\n\t\t\t\t\ttargets.push(target);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase CLOSING_COMMENT_RE:\n\t\t\t\t\ttargets.push(null);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new SyntaxError(\"Unexpected expression\");\n\t\t\t}\n\t\t} else if (expressionTarget) {\n\t\t\tthrow new SyntaxError(\"Expression expected\");\n\t\t}\n\n\t\tlineStart = false;\n\t}\n\n\tif (stack.length) {\n\t\tconst ti = targets.indexOf(element.open);\n\t\tif (ti === -1) {\n\t\t\tthrow new SyntaxError(`Unmatched opening tag \"${element.open.value}\"`);\n\t\t}\n\n\t\ttargets[ti] = {\n\t\t\ttype: \"error\",\n\t\t\tmessage: \"Unmatched opening tag ${}\",\n\t\t\tvalue: null,\n\t\t};\n\t}\n\n\tif (element.children.length === 1 && element.children[0].type === \"element\") {\n\t\telement = element.children[0];\n\t}\n\n\treturn {element, targets};\n}\n\nfunction build(parsed: ParseElement): Element {\n\tif (\n\t\tparsed.close !== null &&\n\t\tparsed.close.slash !== \"//\" &&\n\t\tparsed.open.value !== parsed.close.value\n\t) {\n\t\tthrow new SyntaxError(\n\t\t\t`Unmatched closing tag ${formatTagForError(\n\t\t\t\tparsed.close.value,\n\t\t\t)}, expected ${formatTagForError(parsed.open.value)}`,\n\t\t);\n\t}\n\n\tconst children: Array<unknown> = [];\n\tfor (let i = 0; i < parsed.children.length; i++) {\n\t\tconst child = parsed.children[i];\n\t\tchildren.push(child.type === \"element\" ? build(child) : child.value);\n\t}\n\n\tlet props = parsed.props.length ? ({} as Record<string, unknown>) : null;\n\tfor (let i = 0; i < parsed.props.length; i++) {\n\t\tconst prop = parsed.props[i];\n\t\tif (prop.type === \"prop\") {\n\t\t\tlet value: any;\n\t\t\tif (prop.value.type === \"value\") {\n\t\t\t\tvalue = prop.value.value;\n\t\t\t} else {\n\t\t\t\tlet string = \"\";\n\t\t\t\tfor (let i = 0; i < prop.value.parts.length; i++) {\n\t\t\t\t\tconst part = prop.value.parts[i];\n\t\t\t\t\tif (typeof part === \"string\") {\n\t\t\t\t\t\tstring += part;\n\t\t\t\t\t} else if (typeof part.value !== \"boolean\" && part.value != null) {\n\t\t\t\t\t\tstring +=\n\t\t\t\t\t\t\ttypeof part.value === \"string\" ? part.value : String(part.value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvalue = string\n\t\t\t\t\t// remove quotes\n\t\t\t\t\t.slice(1, -1)\n\t\t\t\t\t// unescape things\n\t\t\t\t\t// adapted from https://stackoverflow.com/a/57330383/1825413\n\t\t\t\t\t.replace(\n\t\t\t\t\t\t/\\\\x[0-9a-f]{2}|\\\\u[0-9a-f]{4}|\\\\u\\{[0-9a-f]+\\}|\\\\./gi,\n\t\t\t\t\t\t(match) => {\n\t\t\t\t\t\t\tswitch (match[1]) {\n\t\t\t\t\t\t\t\tcase \"b\":\n\t\t\t\t\t\t\t\t\treturn \"\\b\";\n\t\t\t\t\t\t\t\tcase \"f\":\n\t\t\t\t\t\t\t\t\treturn \"\\f\";\n\t\t\t\t\t\t\t\tcase \"n\":\n\t\t\t\t\t\t\t\t\treturn \"\\n\";\n\t\t\t\t\t\t\t\tcase \"r\":\n\t\t\t\t\t\t\t\t\treturn \"\\r\";\n\t\t\t\t\t\t\t\tcase \"t\":\n\t\t\t\t\t\t\t\t\treturn \"\\t\";\n\t\t\t\t\t\t\t\tcase \"v\":\n\t\t\t\t\t\t\t\t\treturn \"\\v\";\n\t\t\t\t\t\t\t\tcase \"x\":\n\t\t\t\t\t\t\t\t\treturn String.fromCharCode(parseInt(match.slice(2), 16));\n\t\t\t\t\t\t\t\tcase \"u\":\n\t\t\t\t\t\t\t\t\tif (match[2] === \"{\") {\n\t\t\t\t\t\t\t\t\t\treturn String.fromCodePoint(\n\t\t\t\t\t\t\t\t\t\t\tparseInt(match.slice(3, -1), 16),\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn String.fromCharCode(parseInt(match.slice(2), 16));\n\t\t\t\t\t\t\t\tcase \"0\":\n\t\t\t\t\t\t\t\t\treturn \"\\0\";\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\treturn match.slice(1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t}\n\n\t\t\tprops![prop.name] = value;\n\t\t} else {\n\t\t\t// spread prop\n\t\t\tprops = {...props, ...(prop.value as any)};\n\t\t}\n\t}\n\n\treturn createElement(parsed.open.value, props, ...children);\n}\n\nfunction formatTagForError(tag: unknown): string {\n\treturn typeof tag === \"function\"\n\t\t? tag.name + \"()\"\n\t\t: typeof tag === \"string\"\n\t\t? `\"${tag}\"`\n\t\t: JSON.stringify(tag);\n}\n", "/*\n\nBased off glamor's StyleSheet, thanks Sunil \u2764\uFE0F\n\nhigh performance StyleSheet for css-in-js systems\n\n- uses multiple style tags behind the scenes for millions of rules\n- uses `insertRule` for appending in production for *much* faster performance\n\n// usage\n\nimport { StyleSheet } from '@emotion/sheet'\n\nlet styleSheet = new StyleSheet({ key: '', container: document.head })\n\nstyleSheet.insert('#box { border: 1px solid red; }')\n- appends a css rule into the stylesheet\n\nstyleSheet.flush()\n- empties the stylesheet of all its contents\n\n*/\n// $FlowFixMe\nfunction sheetForTag(tag) {\n  if (tag.sheet) {\n    // $FlowFixMe\n    return tag.sheet;\n  } // this weirdness brought to you by firefox\n\n  /* istanbul ignore next */\n\n\n  for (var i = 0; i < document.styleSheets.length; i++) {\n    if (document.styleSheets[i].ownerNode === tag) {\n      // $FlowFixMe\n      return document.styleSheets[i];\n    }\n  }\n}\n\nfunction createStyleElement(options) {\n  var tag = document.createElement('style');\n  tag.setAttribute('data-emotion', options.key);\n\n  if (options.nonce !== undefined) {\n    tag.setAttribute('nonce', options.nonce);\n  }\n\n  tag.appendChild(document.createTextNode(''));\n  tag.setAttribute('data-s', '');\n  return tag;\n}\n\nvar StyleSheet = /*#__PURE__*/function () {\n  // Using Node instead of HTMLElement since container may be a ShadowRoot\n  function StyleSheet(options) {\n    var _this = this;\n\n    this._insertTag = function (tag) {\n      var before;\n\n      if (_this.tags.length === 0) {\n        if (_this.insertionPoint) {\n          before = _this.insertionPoint.nextSibling;\n        } else if (_this.prepend) {\n          before = _this.container.firstChild;\n        } else {\n          before = _this.before;\n        }\n      } else {\n        before = _this.tags[_this.tags.length - 1].nextSibling;\n      }\n\n      _this.container.insertBefore(tag, before);\n\n      _this.tags.push(tag);\n    };\n\n    this.isSpeedy = options.speedy === undefined ? process.env.NODE_ENV === 'production' : options.speedy;\n    this.tags = [];\n    this.ctr = 0;\n    this.nonce = options.nonce; // key is the value of the data-emotion attribute, it's used to identify different sheets\n\n    this.key = options.key;\n    this.container = options.container;\n    this.prepend = options.prepend;\n    this.insertionPoint = options.insertionPoint;\n    this.before = null;\n  }\n\n  var _proto = StyleSheet.prototype;\n\n  _proto.hydrate = function hydrate(nodes) {\n    nodes.forEach(this._insertTag);\n  };\n\n  _proto.insert = function insert(rule) {\n    // the max length is how many rules we have per style tag, it's 65000 in speedy mode\n    // it's 1 in dev because we insert source maps that map a single rule to a location\n    // and you can only have one source map per style tag\n    if (this.ctr % (this.isSpeedy ? 65000 : 1) === 0) {\n      this._insertTag(createStyleElement(this));\n    }\n\n    var tag = this.tags[this.tags.length - 1];\n\n    if (process.env.NODE_ENV !== 'production') {\n      var isImportRule = rule.charCodeAt(0) === 64 && rule.charCodeAt(1) === 105;\n\n      if (isImportRule && this._alreadyInsertedOrderInsensitiveRule) {\n        // this would only cause problem in speedy mode\n        // but we don't want enabling speedy to affect the observable behavior\n        // so we report this error at all times\n        console.error(\"You're attempting to insert the following rule:\\n\" + rule + '\\n\\n`@import` rules must be before all other types of rules in a stylesheet but other rules have already been inserted. Please ensure that `@import` rules are before all other rules.');\n      }\n      this._alreadyInsertedOrderInsensitiveRule = this._alreadyInsertedOrderInsensitiveRule || !isImportRule;\n    }\n\n    if (this.isSpeedy) {\n      var sheet = sheetForTag(tag);\n\n      try {\n        // this is the ultrafast version, works across browsers\n        // the big drawback is that the css won't be editable in devtools\n        sheet.insertRule(rule, sheet.cssRules.length);\n      } catch (e) {\n        if (process.env.NODE_ENV !== 'production' && !/:(-moz-placeholder|-moz-focus-inner|-moz-focusring|-ms-input-placeholder|-moz-read-write|-moz-read-only|-ms-clear|-ms-expand|-ms-reveal){/.test(rule)) {\n          console.error(\"There was a problem inserting the following rule: \\\"\" + rule + \"\\\"\", e);\n        }\n      }\n    } else {\n      tag.appendChild(document.createTextNode(rule));\n    }\n\n    this.ctr++;\n  };\n\n  _proto.flush = function flush() {\n    // $FlowFixMe\n    this.tags.forEach(function (tag) {\n      return tag.parentNode && tag.parentNode.removeChild(tag);\n    });\n    this.tags = [];\n    this.ctr = 0;\n\n    if (process.env.NODE_ENV !== 'production') {\n      this._alreadyInsertedOrderInsensitiveRule = false;\n    }\n  };\n\n  return StyleSheet;\n}();\n\nexport { StyleSheet };\n", "export var MS = '-ms-'\nexport var MOZ = '-moz-'\nexport var WEBKIT = '-webkit-'\n\nexport var COMMENT = 'comm'\nexport var RULESET = 'rule'\nexport var DECLARATION = 'decl'\n\nexport var PAGE = '@page'\nexport var MEDIA = '@media'\nexport var IMPORT = '@import'\nexport var CHARSET = '@charset'\nexport var VIEWPORT = '@viewport'\nexport var SUPPORTS = '@supports'\nexport var DOCUMENT = '@document'\nexport var NAMESPACE = '@namespace'\nexport var KEYFRAMES = '@keyframes'\nexport var FONT_FACE = '@font-face'\nexport var COUNTER_STYLE = '@counter-style'\nexport var FONT_FEATURE_VALUES = '@font-feature-values'\n", "/**\n * @param {number}\n * @return {number}\n */\nexport var abs = Math.abs\n\n/**\n * @param {number}\n * @return {string}\n */\nexport var from = String.fromCharCode\n\n/**\n * @param {object}\n * @return {object}\n */\nexport var assign = Object.assign\n\n/**\n * @param {string} value\n * @param {number} length\n * @return {number}\n */\nexport function hash (value, length) {\n\treturn charat(value, 0) ^ 45 ? (((((((length << 2) ^ charat(value, 0)) << 2) ^ charat(value, 1)) << 2) ^ charat(value, 2)) << 2) ^ charat(value, 3) : 0\n}\n\n/**\n * @param {string} value\n * @return {string}\n */\nexport function trim (value) {\n\treturn value.trim()\n}\n\n/**\n * @param {string} value\n * @param {RegExp} pattern\n * @return {string?}\n */\nexport function match (value, pattern) {\n\treturn (value = pattern.exec(value)) ? value[0] : value\n}\n\n/**\n * @param {string} value\n * @param {(string|RegExp)} pattern\n * @param {string} replacement\n * @return {string}\n */\nexport function replace (value, pattern, replacement) {\n\treturn value.replace(pattern, replacement)\n}\n\n/**\n * @param {string} value\n * @param {string} search\n * @return {number}\n */\nexport function indexof (value, search) {\n\treturn value.indexOf(search)\n}\n\n/**\n * @param {string} value\n * @param {number} index\n * @return {number}\n */\nexport function charat (value, index) {\n\treturn value.charCodeAt(index) | 0\n}\n\n/**\n * @param {string} value\n * @param {number} begin\n * @param {number} end\n * @return {string}\n */\nexport function substr (value, begin, end) {\n\treturn value.slice(begin, end)\n}\n\n/**\n * @param {string} value\n * @return {number}\n */\nexport function strlen (value) {\n\treturn value.length\n}\n\n/**\n * @param {any[]} value\n * @return {number}\n */\nexport function sizeof (value) {\n\treturn value.length\n}\n\n/**\n * @param {any} value\n * @param {any[]} array\n * @return {any}\n */\nexport function append (value, array) {\n\treturn array.push(value), value\n}\n\n/**\n * @param {string[]} array\n * @param {function} callback\n * @return {string}\n */\nexport function combine (array, callback) {\n\treturn array.map(callback).join('')\n}\n", "import {from, trim, charat, strlen, substr, append, assign} from './Utility.js'\n\nexport var line = 1\nexport var column = 1\nexport var length = 0\nexport var position = 0\nexport var character = 0\nexport var characters = ''\n\n/**\n * @param {string} value\n * @param {object | null} root\n * @param {object | null} parent\n * @param {string} type\n * @param {string[] | string} props\n * @param {object[] | string} children\n * @param {number} length\n */\nexport function node (value, root, parent, type, props, children, length) {\n\treturn {value: value, root: root, parent: parent, type: type, props: props, children: children, line: line, column: column, length: length, return: ''}\n}\n\n/**\n * @param {object} root\n * @param {object} props\n * @return {object}\n */\nexport function copy (root, props) {\n\treturn assign(node('', null, null, '', null, null, 0), root, {length: -root.length}, props)\n}\n\n/**\n * @return {number}\n */\nexport function char () {\n\treturn character\n}\n\n/**\n * @return {number}\n */\nexport function prev () {\n\tcharacter = position > 0 ? charat(characters, --position) : 0\n\n\tif (column--, character === 10)\n\t\tcolumn = 1, line--\n\n\treturn character\n}\n\n/**\n * @return {number}\n */\nexport function next () {\n\tcharacter = position < length ? charat(characters, position++) : 0\n\n\tif (column++, character === 10)\n\t\tcolumn = 1, line++\n\n\treturn character\n}\n\n/**\n * @return {number}\n */\nexport function peek () {\n\treturn charat(characters, position)\n}\n\n/**\n * @return {number}\n */\nexport function caret () {\n\treturn position\n}\n\n/**\n * @param {number} begin\n * @param {number} end\n * @return {string}\n */\nexport function slice (begin, end) {\n\treturn substr(characters, begin, end)\n}\n\n/**\n * @param {number} type\n * @return {number}\n */\nexport function token (type) {\n\tswitch (type) {\n\t\t// \\0 \\t \\n \\r \\s whitespace token\n\t\tcase 0: case 9: case 10: case 13: case 32:\n\t\t\treturn 5\n\t\t// ! + , / > @ ~ isolate token\n\t\tcase 33: case 43: case 44: case 47: case 62: case 64: case 126:\n\t\t// ; { } breakpoint token\n\t\tcase 59: case 123: case 125:\n\t\t\treturn 4\n\t\t// : accompanied token\n\t\tcase 58:\n\t\t\treturn 3\n\t\t// \" ' ( [ opening delimit token\n\t\tcase 34: case 39: case 40: case 91:\n\t\t\treturn 2\n\t\t// ) ] closing delimit token\n\t\tcase 41: case 93:\n\t\t\treturn 1\n\t}\n\n\treturn 0\n}\n\n/**\n * @param {string} value\n * @return {any[]}\n */\nexport function alloc (value) {\n\treturn line = column = 1, length = strlen(characters = value), position = 0, []\n}\n\n/**\n * @param {any} value\n * @return {any}\n */\nexport function dealloc (value) {\n\treturn characters = '', value\n}\n\n/**\n * @param {number} type\n * @return {string}\n */\nexport function delimit (type) {\n\treturn trim(slice(position - 1, delimiter(type === 91 ? type + 2 : type === 40 ? type + 1 : type)))\n}\n\n/**\n * @param {string} value\n * @return {string[]}\n */\nexport function tokenize (value) {\n\treturn dealloc(tokenizer(alloc(value)))\n}\n\n/**\n * @param {number} type\n * @return {string}\n */\nexport function whitespace (type) {\n\twhile (character = peek())\n\t\tif (character < 33)\n\t\t\tnext()\n\t\telse\n\t\t\tbreak\n\n\treturn token(type) > 2 || token(character) > 3 ? '' : ' '\n}\n\n/**\n * @param {string[]} children\n * @return {string[]}\n */\nexport function tokenizer (children) {\n\twhile (next())\n\t\tswitch (token(character)) {\n\t\t\tcase 0: append(identifier(position - 1), children)\n\t\t\t\tbreak\n\t\t\tcase 2: append(delimit(character), children)\n\t\t\t\tbreak\n\t\t\tdefault: append(from(character), children)\n\t\t}\n\n\treturn children\n}\n\n/**\n * @param {number} index\n * @param {number} count\n * @return {string}\n */\nexport function escaping (index, count) {\n\twhile (--count && next())\n\t\t// not 0-9 A-F a-f\n\t\tif (character < 48 || character > 102 || (character > 57 && character < 65) || (character > 70 && character < 97))\n\t\t\tbreak\n\n\treturn slice(index, caret() + (count < 6 && peek() == 32 && next() == 32))\n}\n\n/**\n * @param {number} type\n * @return {number}\n */\nexport function delimiter (type) {\n\twhile (next())\n\t\tswitch (character) {\n\t\t\t// ] ) \" '\n\t\t\tcase type:\n\t\t\t\treturn position\n\t\t\t// \" '\n\t\t\tcase 34: case 39:\n\t\t\t\tif (type !== 34 && type !== 39)\n\t\t\t\t\tdelimiter(character)\n\t\t\t\tbreak\n\t\t\t// (\n\t\t\tcase 40:\n\t\t\t\tif (type === 41)\n\t\t\t\t\tdelimiter(type)\n\t\t\t\tbreak\n\t\t\t// \\\n\t\t\tcase 92:\n\t\t\t\tnext()\n\t\t\t\tbreak\n\t\t}\n\n\treturn position\n}\n\n/**\n * @param {number} type\n * @param {number} index\n * @return {number}\n */\nexport function commenter (type, index) {\n\twhile (next())\n\t\t// //\n\t\tif (type + character === 47 + 10)\n\t\t\tbreak\n\t\t// /*\n\t\telse if (type + character === 42 + 42 && peek() === 47)\n\t\t\tbreak\n\n\treturn '/*' + slice(index, position - 1) + '*' + from(type === 47 ? type : next())\n}\n\n/**\n * @param {number} index\n * @return {string}\n */\nexport function identifier (index) {\n\twhile (!token(peek()))\n\t\tnext()\n\n\treturn slice(index, position)\n}\n", "import {COMMENT, RULESET, DECLARATION} from './Enum.js'\nimport {abs, charat, trim, from, sizeof, strlen, substr, append, replace, indexof} from './Utility.js'\nimport {node, char, prev, next, peek, caret, alloc, dealloc, delimit, whitespace, escaping, identifier, commenter} from './Tokenizer.js'\n\n/**\n * @param {string} value\n * @return {object[]}\n */\nexport function compile (value) {\n\treturn dealloc(parse('', null, null, null, [''], value = alloc(value), 0, [0], value))\n}\n\n/**\n * @param {string} value\n * @param {object} root\n * @param {object?} parent\n * @param {string[]} rule\n * @param {string[]} rules\n * @param {string[]} rulesets\n * @param {number[]} pseudo\n * @param {number[]} points\n * @param {string[]} declarations\n * @return {object}\n */\nexport function parse (value, root, parent, rule, rules, rulesets, pseudo, points, declarations) {\n\tvar index = 0\n\tvar offset = 0\n\tvar length = pseudo\n\tvar atrule = 0\n\tvar property = 0\n\tvar previous = 0\n\tvar variable = 1\n\tvar scanning = 1\n\tvar ampersand = 1\n\tvar character = 0\n\tvar type = ''\n\tvar props = rules\n\tvar children = rulesets\n\tvar reference = rule\n\tvar characters = type\n\n\twhile (scanning)\n\t\tswitch (previous = character, character = next()) {\n\t\t\t// (\n\t\t\tcase 40:\n\t\t\t\tif (previous != 108 && charat(characters, length - 1) == 58) {\n\t\t\t\t\tif (indexof(characters += replace(delimit(character), '&', '&\\f'), '&\\f') != -1)\n\t\t\t\t\t\tampersand = -1\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t// \" ' [\n\t\t\tcase 34: case 39: case 91:\n\t\t\t\tcharacters += delimit(character)\n\t\t\t\tbreak\n\t\t\t// \\t \\n \\r \\s\n\t\t\tcase 9: case 10: case 13: case 32:\n\t\t\t\tcharacters += whitespace(previous)\n\t\t\t\tbreak\n\t\t\t// \\\n\t\t\tcase 92:\n\t\t\t\tcharacters += escaping(caret() - 1, 7)\n\t\t\t\tcontinue\n\t\t\t// /\n\t\t\tcase 47:\n\t\t\t\tswitch (peek()) {\n\t\t\t\t\tcase 42: case 47:\n\t\t\t\t\t\tappend(comment(commenter(next(), caret()), root, parent), declarations)\n\t\t\t\t\t\tbreak\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tcharacters += '/'\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\t// {\n\t\t\tcase 123 * variable:\n\t\t\t\tpoints[index++] = strlen(characters) * ampersand\n\t\t\t// } ; \\0\n\t\t\tcase 125 * variable: case 59: case 0:\n\t\t\t\tswitch (character) {\n\t\t\t\t\t// \\0 }\n\t\t\t\t\tcase 0: case 125: scanning = 0\n\t\t\t\t\t// ;\n\t\t\t\t\tcase 59 + offset:\n\t\t\t\t\t\tif (property > 0 && (strlen(characters) - length))\n\t\t\t\t\t\t\tappend(property > 32 ? declaration(characters + ';', rule, parent, length - 1) : declaration(replace(characters, ' ', '') + ';', rule, parent, length - 2), declarations)\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// @ ;\n\t\t\t\t\tcase 59: characters += ';'\n\t\t\t\t\t// { rule/at-rule\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tappend(reference = ruleset(characters, root, parent, index, offset, rules, points, type, props = [], children = [], length), rulesets)\n\n\t\t\t\t\t\tif (character === 123)\n\t\t\t\t\t\t\tif (offset === 0)\n\t\t\t\t\t\t\t\tparse(characters, root, reference, reference, props, rulesets, length, points, children)\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tswitch (atrule === 99 && charat(characters, 3) === 110 ? 100 : atrule) {\n\t\t\t\t\t\t\t\t\t// d m s\n\t\t\t\t\t\t\t\t\tcase 100: case 109: case 115:\n\t\t\t\t\t\t\t\t\t\tparse(value, reference, reference, rule && append(ruleset(value, reference, reference, 0, 0, rules, points, type, rules, props = [], length), children), rules, children, length, points, rule ? props : children)\n\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tparse(characters, reference, reference, reference, [''], children, 0, points, children)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tindex = offset = property = 0, variable = ampersand = 1, type = characters = '', length = pseudo\n\t\t\t\tbreak\n\t\t\t// :\n\t\t\tcase 58:\n\t\t\t\tlength = 1 + strlen(characters), property = previous\n\t\t\tdefault:\n\t\t\t\tif (variable < 1)\n\t\t\t\t\tif (character == 123)\n\t\t\t\t\t\t--variable\n\t\t\t\t\telse if (character == 125 && variable++ == 0 && prev() == 125)\n\t\t\t\t\t\tcontinue\n\n\t\t\t\tswitch (characters += from(character), character * variable) {\n\t\t\t\t\t// &\n\t\t\t\t\tcase 38:\n\t\t\t\t\t\tampersand = offset > 0 ? 1 : (characters += '\\f', -1)\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// ,\n\t\t\t\t\tcase 44:\n\t\t\t\t\t\tpoints[index++] = (strlen(characters) - 1) * ampersand, ampersand = 1\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// @\n\t\t\t\t\tcase 64:\n\t\t\t\t\t\t// -\n\t\t\t\t\t\tif (peek() === 45)\n\t\t\t\t\t\t\tcharacters += delimit(next())\n\n\t\t\t\t\t\tatrule = peek(), offset = length = strlen(type = characters += identifier(caret())), character++\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// -\n\t\t\t\t\tcase 45:\n\t\t\t\t\t\tif (previous === 45 && strlen(characters) == 2)\n\t\t\t\t\t\t\tvariable = 0\n\t\t\t\t}\n\t\t}\n\n\treturn rulesets\n}\n\n/**\n * @param {string} value\n * @param {object} root\n * @param {object?} parent\n * @param {number} index\n * @param {number} offset\n * @param {string[]} rules\n * @param {number[]} points\n * @param {string} type\n * @param {string[]} props\n * @param {string[]} children\n * @param {number} length\n * @return {object}\n */\nexport function ruleset (value, root, parent, index, offset, rules, points, type, props, children, length) {\n\tvar post = offset - 1\n\tvar rule = offset === 0 ? rules : ['']\n\tvar size = sizeof(rule)\n\n\tfor (var i = 0, j = 0, k = 0; i < index; ++i)\n\t\tfor (var x = 0, y = substr(value, post + 1, post = abs(j = points[i])), z = value; x < size; ++x)\n\t\t\tif (z = trim(j > 0 ? rule[x] + ' ' + y : replace(y, /&\\f/g, rule[x])))\n\t\t\t\tprops[k++] = z\n\n\treturn node(value, root, parent, offset === 0 ? RULESET : type, props, children, length)\n}\n\n/**\n * @param {number} value\n * @param {object} root\n * @param {object?} parent\n * @return {object}\n */\nexport function comment (value, root, parent) {\n\treturn node(value, root, parent, COMMENT, from(char()), substr(value, 2, -2), 0)\n}\n\n/**\n * @param {string} value\n * @param {object} root\n * @param {object?} parent\n * @param {number} length\n * @return {object}\n */\nexport function declaration (value, root, parent, length) {\n\treturn node(value, root, parent, DECLARATION, substr(value, 0, length), substr(value, length + 1, -1), length)\n}\n", "import {IMPORT, COMMENT, RULESET, DECLARATION, KEYFRAMES} from './Enum.js'\nimport {strlen, sizeof} from './Utility.js'\n\n/**\n * @param {object[]} children\n * @param {function} callback\n * @return {string}\n */\nexport function serialize (children, callback) {\n\tvar output = ''\n\tvar length = sizeof(children)\n\n\tfor (var i = 0; i < length; i++)\n\t\toutput += callback(children[i], i, children, callback) || ''\n\n\treturn output\n}\n\n/**\n * @param {object} element\n * @param {number} index\n * @param {object[]} children\n * @param {function} callback\n * @return {string}\n */\nexport function stringify (element, index, children, callback) {\n\tswitch (element.type) {\n\t\tcase IMPORT: case DECLARATION: return element.return = element.return || element.value\n\t\tcase COMMENT: return ''\n\t\tcase KEYFRAMES: return element.return = element.value + '{' + serialize(element.children, callback) + '}'\n\t\tcase RULESET: element.value = element.props.join(',')\n\t}\n\n\treturn strlen(children = serialize(element.children, callback)) ? element.return = element.value + '{' + children + '}' : ''\n}\n", "import {MS, MOZ, WEBKIT, RULESET, KEYFRAMES, DECLARATION} from './Enum.js'\nimport {match, charat, substr, strlen, sizeof, replace, combine} from './Utility.js'\nimport {copy, tokenize} from './Tokenizer.js'\nimport {serialize} from './Serializer.js'\nimport {prefix} from './Prefixer.js'\n\n/**\n * @param {function[]} collection\n * @return {function}\n */\nexport function middleware (collection) {\n\tvar length = sizeof(collection)\n\n\treturn function (element, index, children, callback) {\n\t\tvar output = ''\n\n\t\tfor (var i = 0; i < length; i++)\n\t\t\toutput += collection[i](element, index, children, callback) || ''\n\n\t\treturn output\n\t}\n}\n\n/**\n * @param {function} callback\n * @return {function}\n */\nexport function rulesheet (callback) {\n\treturn function (element) {\n\t\tif (!element.root)\n\t\t\tif (element = element.return)\n\t\t\t\tcallback(element)\n\t}\n}\n\n/**\n * @param {object} element\n * @param {number} index\n * @param {object[]} children\n * @param {function} callback\n */\nexport function prefixer (element, index, children, callback) {\n\tif (element.length > -1)\n\t\tif (!element.return)\n\t\t\tswitch (element.type) {\n\t\t\t\tcase DECLARATION: element.return = prefix(element.value, element.length, children)\n\t\t\t\t\treturn\n\t\t\t\tcase KEYFRAMES:\n\t\t\t\t\treturn serialize([copy(element, {value: replace(element.value, '@', '@' + WEBKIT)})], callback)\n\t\t\t\tcase RULESET:\n\t\t\t\t\tif (element.length)\n\t\t\t\t\t\treturn combine(element.props, function (value) {\n\t\t\t\t\t\t\tswitch (match(value, /(::plac\\w+|:read-\\w+)/)) {\n\t\t\t\t\t\t\t\t// :read-(only|write)\n\t\t\t\t\t\t\t\tcase ':read-only': case ':read-write':\n\t\t\t\t\t\t\t\t\treturn serialize([copy(element, {props: [replace(value, /:(read-\\w+)/, ':' + MOZ + '$1')]})], callback)\n\t\t\t\t\t\t\t\t// :placeholder\n\t\t\t\t\t\t\t\tcase '::placeholder':\n\t\t\t\t\t\t\t\t\treturn serialize([\n\t\t\t\t\t\t\t\t\t\tcopy(element, {props: [replace(value, /:(plac\\w+)/, ':' + WEBKIT + 'input-$1')]}),\n\t\t\t\t\t\t\t\t\t\tcopy(element, {props: [replace(value, /:(plac\\w+)/, ':' + MOZ + '$1')]}),\n\t\t\t\t\t\t\t\t\t\tcopy(element, {props: [replace(value, /:(plac\\w+)/, MS + 'input-$1')]})\n\t\t\t\t\t\t\t\t\t], callback)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn ''\n\t\t\t\t\t\t})\n\t\t\t}\n}\n\n/**\n * @param {object} element\n * @param {number} index\n * @param {object[]} children\n */\nexport function namespace (element) {\n\tswitch (element.type) {\n\t\tcase RULESET:\n\t\t\telement.props = element.props.map(function (value) {\n\t\t\t\treturn combine(tokenize(value), function (value, index, children) {\n\t\t\t\t\tswitch (charat(value, 0)) {\n\t\t\t\t\t\t// \\f\n\t\t\t\t\t\tcase 12:\n\t\t\t\t\t\t\treturn substr(value, 1, strlen(value))\n\t\t\t\t\t\t// \\0 ( + > ~\n\t\t\t\t\t\tcase 0: case 40: case 43: case 62: case 126:\n\t\t\t\t\t\t\treturn value\n\t\t\t\t\t\t// :\n\t\t\t\t\t\tcase 58:\n\t\t\t\t\t\t\tif (children[++index] === 'global')\n\t\t\t\t\t\t\t\tchildren[index] = '', children[++index] = '\\f' + substr(children[index], index = 1, -1)\n\t\t\t\t\t\t// \\s\n\t\t\t\t\t\tcase 32:\n\t\t\t\t\t\t\treturn index === 1 ? '' : value\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tswitch (index) {\n\t\t\t\t\t\t\t\tcase 0: element = value\n\t\t\t\t\t\t\t\t\treturn sizeof(children) > 1 ? '' : value\n\t\t\t\t\t\t\t\tcase index = sizeof(children) - 1: case 2:\n\t\t\t\t\t\t\t\t\treturn index === 2 ? value + element + element : value + element\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\treturn value\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t}\n}\n", "function memoize(fn) {\n  var cache = Object.create(null);\n  return function (arg) {\n    if (cache[arg] === undefined) cache[arg] = fn(arg);\n    return cache[arg];\n  };\n}\n\nexport default memoize;\n", "import { StyleSheet } from '@emotion/sheet';\nimport { dealloc, alloc, next, token, from, peek, delimit, slice, position, RULESET, combine, match, serialize, copy, replace, WEBKIT, MOZ, MS, KEYFRAMES, DECLARATION, hash, charat, strlen, indexof, stringify, COMMENT, rulesheet, middleware, compile } from 'stylis';\nimport '@emotion/weak-memoize';\nimport '@emotion/memoize';\n\nvar identifierWithPointTracking = function identifierWithPointTracking(begin, points, index) {\n  var previous = 0;\n  var character = 0;\n\n  while (true) {\n    previous = character;\n    character = peek(); // &\\f\n\n    if (previous === 38 && character === 12) {\n      points[index] = 1;\n    }\n\n    if (token(character)) {\n      break;\n    }\n\n    next();\n  }\n\n  return slice(begin, position);\n};\n\nvar toRules = function toRules(parsed, points) {\n  // pretend we've started with a comma\n  var index = -1;\n  var character = 44;\n\n  do {\n    switch (token(character)) {\n      case 0:\n        // &\\f\n        if (character === 38 && peek() === 12) {\n          // this is not 100% correct, we don't account for literal sequences here - like for example quoted strings\n          // stylis inserts \\f after & to know when & where it should replace this sequence with the context selector\n          // and when it should just concatenate the outer and inner selectors\n          // it's very unlikely for this sequence to actually appear in a different context, so we just leverage this fact here\n          points[index] = 1;\n        }\n\n        parsed[index] += identifierWithPointTracking(position - 1, points, index);\n        break;\n\n      case 2:\n        parsed[index] += delimit(character);\n        break;\n\n      case 4:\n        // comma\n        if (character === 44) {\n          // colon\n          parsed[++index] = peek() === 58 ? '&\\f' : '';\n          points[index] = parsed[index].length;\n          break;\n        }\n\n      // fallthrough\n\n      default:\n        parsed[index] += from(character);\n    }\n  } while (character = next());\n\n  return parsed;\n};\n\nvar getRules = function getRules(value, points) {\n  return dealloc(toRules(alloc(value), points));\n}; // WeakSet would be more appropriate, but only WeakMap is supported in IE11\n\n\nvar fixedElements = /* #__PURE__ */new WeakMap();\nvar compat = function compat(element) {\n  if (element.type !== 'rule' || !element.parent || // positive .length indicates that this rule contains pseudo\n  // negative .length indicates that this rule has been already prefixed\n  element.length < 1) {\n    return;\n  }\n\n  var value = element.value,\n      parent = element.parent;\n  var isImplicitRule = element.column === parent.column && element.line === parent.line;\n\n  while (parent.type !== 'rule') {\n    parent = parent.parent;\n    if (!parent) return;\n  } // short-circuit for the simplest case\n\n\n  if (element.props.length === 1 && value.charCodeAt(0) !== 58\n  /* colon */\n  && !fixedElements.get(parent)) {\n    return;\n  } // if this is an implicitly inserted rule (the one eagerly inserted at the each new nested level)\n  // then the props has already been manipulated beforehand as they that array is shared between it and its \"rule parent\"\n\n\n  if (isImplicitRule) {\n    return;\n  }\n\n  fixedElements.set(element, true);\n  var points = [];\n  var rules = getRules(value, points);\n  var parentRules = parent.props;\n\n  for (var i = 0, k = 0; i < rules.length; i++) {\n    for (var j = 0; j < parentRules.length; j++, k++) {\n      element.props[k] = points[i] ? rules[i].replace(/&\\f/g, parentRules[j]) : parentRules[j] + \" \" + rules[i];\n    }\n  }\n};\nvar removeLabel = function removeLabel(element) {\n  if (element.type === 'decl') {\n    var value = element.value;\n\n    if ( // charcode for l\n    value.charCodeAt(0) === 108 && // charcode for b\n    value.charCodeAt(2) === 98) {\n      // this ignores label\n      element[\"return\"] = '';\n      element.value = '';\n    }\n  }\n};\nvar ignoreFlag = 'emotion-disable-server-rendering-unsafe-selector-warning-please-do-not-use-this-the-warning-exists-for-a-reason';\n\nvar isIgnoringComment = function isIgnoringComment(element) {\n  return element.type === 'comm' && element.children.indexOf(ignoreFlag) > -1;\n};\n\nvar createUnsafeSelectorsAlarm = function createUnsafeSelectorsAlarm(cache) {\n  return function (element, index, children) {\n    if (element.type !== 'rule' || cache.compat) return;\n    var unsafePseudoClasses = element.value.match(/(:first|:nth|:nth-last)-child/g);\n\n    if (unsafePseudoClasses) {\n      var isNested = element.parent === children[0]; // in nested rules comments become children of the \"auto-inserted\" rule\n      //\n      // considering this input:\n      // .a {\n      //   .b /* comm */ {}\n      //   color: hotpink;\n      // }\n      // we get output corresponding to this:\n      // .a {\n      //   & {\n      //     /* comm */\n      //     color: hotpink;\n      //   }\n      //   .b {}\n      // }\n\n      var commentContainer = isNested ? children[0].children : // global rule at the root level\n      children;\n\n      for (var i = commentContainer.length - 1; i >= 0; i--) {\n        var node = commentContainer[i];\n\n        if (node.line < element.line) {\n          break;\n        } // it is quite weird but comments are *usually* put at `column: element.column - 1`\n        // so we seek *from the end* for the node that is earlier than the rule's `element` and check that\n        // this will also match inputs like this:\n        // .a {\n        //   /* comm */\n        //   .b {}\n        // }\n        //\n        // but that is fine\n        //\n        // it would be the easiest to change the placement of the comment to be the first child of the rule:\n        // .a {\n        //   .b { /* comm */ }\n        // }\n        // with such inputs we wouldn't have to search for the comment at all\n        // TODO: consider changing this comment placement in the next major version\n\n\n        if (node.column < element.column) {\n          if (isIgnoringComment(node)) {\n            return;\n          }\n\n          break;\n        }\n      }\n\n      unsafePseudoClasses.forEach(function (unsafePseudoClass) {\n        console.error(\"The pseudo class \\\"\" + unsafePseudoClass + \"\\\" is potentially unsafe when doing server-side rendering. Try changing it to \\\"\" + unsafePseudoClass.split('-child')[0] + \"-of-type\\\".\");\n      });\n    }\n  };\n};\n\nvar isImportRule = function isImportRule(element) {\n  return element.type.charCodeAt(1) === 105 && element.type.charCodeAt(0) === 64;\n};\n\nvar isPrependedWithRegularRules = function isPrependedWithRegularRules(index, children) {\n  for (var i = index - 1; i >= 0; i--) {\n    if (!isImportRule(children[i])) {\n      return true;\n    }\n  }\n\n  return false;\n}; // use this to remove incorrect elements from further processing\n// so they don't get handed to the `sheet` (or anything else)\n// as that could potentially lead to additional logs which in turn could be overhelming to the user\n\n\nvar nullifyElement = function nullifyElement(element) {\n  element.type = '';\n  element.value = '';\n  element[\"return\"] = '';\n  element.children = '';\n  element.props = '';\n};\n\nvar incorrectImportAlarm = function incorrectImportAlarm(element, index, children) {\n  if (!isImportRule(element)) {\n    return;\n  }\n\n  if (element.parent) {\n    console.error(\"`@import` rules can't be nested inside other rules. Please move it to the top level and put it before regular rules. Keep in mind that they can only be used within global styles.\");\n    nullifyElement(element);\n  } else if (isPrependedWithRegularRules(index, children)) {\n    console.error(\"`@import` rules can't be after other rules. Please put your `@import` rules before your other rules.\");\n    nullifyElement(element);\n  }\n};\n\n/* eslint-disable no-fallthrough */\n\nfunction prefix(value, length) {\n  switch (hash(value, length)) {\n    // color-adjust\n    case 5103:\n      return WEBKIT + 'print-' + value + value;\n    // animation, animation-(delay|direction|duration|fill-mode|iteration-count|name|play-state|timing-function)\n\n    case 5737:\n    case 4201:\n    case 3177:\n    case 3433:\n    case 1641:\n    case 4457:\n    case 2921: // text-decoration, filter, clip-path, backface-visibility, column, box-decoration-break\n\n    case 5572:\n    case 6356:\n    case 5844:\n    case 3191:\n    case 6645:\n    case 3005: // mask, mask-image, mask-(mode|clip|size), mask-(repeat|origin), mask-position, mask-composite,\n\n    case 6391:\n    case 5879:\n    case 5623:\n    case 6135:\n    case 4599:\n    case 4855: // background-clip, columns, column-(count|fill|gap|rule|rule-color|rule-style|rule-width|span|width)\n\n    case 4215:\n    case 6389:\n    case 5109:\n    case 5365:\n    case 5621:\n    case 3829:\n      return WEBKIT + value + value;\n    // appearance, user-select, transform, hyphens, text-size-adjust\n\n    case 5349:\n    case 4246:\n    case 4810:\n    case 6968:\n    case 2756:\n      return WEBKIT + value + MOZ + value + MS + value + value;\n    // flex, flex-direction\n\n    case 6828:\n    case 4268:\n      return WEBKIT + value + MS + value + value;\n    // order\n\n    case 6165:\n      return WEBKIT + value + MS + 'flex-' + value + value;\n    // align-items\n\n    case 5187:\n      return WEBKIT + value + replace(value, /(\\w+).+(:[^]+)/, WEBKIT + 'box-$1$2' + MS + 'flex-$1$2') + value;\n    // align-self\n\n    case 5443:\n      return WEBKIT + value + MS + 'flex-item-' + replace(value, /flex-|-self/, '') + value;\n    // align-content\n\n    case 4675:\n      return WEBKIT + value + MS + 'flex-line-pack' + replace(value, /align-content|flex-|-self/, '') + value;\n    // flex-shrink\n\n    case 5548:\n      return WEBKIT + value + MS + replace(value, 'shrink', 'negative') + value;\n    // flex-basis\n\n    case 5292:\n      return WEBKIT + value + MS + replace(value, 'basis', 'preferred-size') + value;\n    // flex-grow\n\n    case 6060:\n      return WEBKIT + 'box-' + replace(value, '-grow', '') + WEBKIT + value + MS + replace(value, 'grow', 'positive') + value;\n    // transition\n\n    case 4554:\n      return WEBKIT + replace(value, /([^-])(transform)/g, '$1' + WEBKIT + '$2') + value;\n    // cursor\n\n    case 6187:\n      return replace(replace(replace(value, /(zoom-|grab)/, WEBKIT + '$1'), /(image-set)/, WEBKIT + '$1'), value, '') + value;\n    // background, background-image\n\n    case 5495:\n    case 3959:\n      return replace(value, /(image-set\\([^]*)/, WEBKIT + '$1' + '$`$1');\n    // justify-content\n\n    case 4968:\n      return replace(replace(value, /(.+:)(flex-)?(.*)/, WEBKIT + 'box-pack:$3' + MS + 'flex-pack:$3'), /s.+-b[^;]+/, 'justify') + WEBKIT + value + value;\n    // (margin|padding)-inline-(start|end)\n\n    case 4095:\n    case 3583:\n    case 4068:\n    case 2532:\n      return replace(value, /(.+)-inline(.+)/, WEBKIT + '$1$2') + value;\n    // (min|max)?(width|height|inline-size|block-size)\n\n    case 8116:\n    case 7059:\n    case 5753:\n    case 5535:\n    case 5445:\n    case 5701:\n    case 4933:\n    case 4677:\n    case 5533:\n    case 5789:\n    case 5021:\n    case 4765:\n      // stretch, max-content, min-content, fill-available\n      if (strlen(value) - 1 - length > 6) switch (charat(value, length + 1)) {\n        // (m)ax-content, (m)in-content\n        case 109:\n          // -\n          if (charat(value, length + 4) !== 45) break;\n        // (f)ill-available, (f)it-content\n\n        case 102:\n          return replace(value, /(.+:)(.+)-([^]+)/, '$1' + WEBKIT + '$2-$3' + '$1' + MOZ + (charat(value, length + 3) == 108 ? '$3' : '$2-$3')) + value;\n        // (s)tretch\n\n        case 115:\n          return ~indexof(value, 'stretch') ? prefix(replace(value, 'stretch', 'fill-available'), length) + value : value;\n      }\n      break;\n    // position: sticky\n\n    case 4949:\n      // (s)ticky?\n      if (charat(value, length + 1) !== 115) break;\n    // display: (flex|inline-flex)\n\n    case 6444:\n      switch (charat(value, strlen(value) - 3 - (~indexof(value, '!important') && 10))) {\n        // stic(k)y\n        case 107:\n          return replace(value, ':', ':' + WEBKIT) + value;\n        // (inline-)?fl(e)x\n\n        case 101:\n          return replace(value, /(.+:)([^;!]+)(;|!.+)?/, '$1' + WEBKIT + (charat(value, 14) === 45 ? 'inline-' : '') + 'box$3' + '$1' + WEBKIT + '$2$3' + '$1' + MS + '$2box$3') + value;\n      }\n\n      break;\n    // writing-mode\n\n    case 5936:\n      switch (charat(value, length + 11)) {\n        // vertical-l(r)\n        case 114:\n          return WEBKIT + value + MS + replace(value, /[svh]\\w+-[tblr]{2}/, 'tb') + value;\n        // vertical-r(l)\n\n        case 108:\n          return WEBKIT + value + MS + replace(value, /[svh]\\w+-[tblr]{2}/, 'tb-rl') + value;\n        // horizontal(-)tb\n\n        case 45:\n          return WEBKIT + value + MS + replace(value, /[svh]\\w+-[tblr]{2}/, 'lr') + value;\n      }\n\n      return WEBKIT + value + MS + value + value;\n  }\n\n  return value;\n}\n\nvar prefixer = function prefixer(element, index, children, callback) {\n  if (element.length > -1) if (!element[\"return\"]) switch (element.type) {\n    case DECLARATION:\n      element[\"return\"] = prefix(element.value, element.length);\n      break;\n\n    case KEYFRAMES:\n      return serialize([copy(element, {\n        value: replace(element.value, '@', '@' + WEBKIT)\n      })], callback);\n\n    case RULESET:\n      if (element.length) return combine(element.props, function (value) {\n        switch (match(value, /(::plac\\w+|:read-\\w+)/)) {\n          // :read-(only|write)\n          case ':read-only':\n          case ':read-write':\n            return serialize([copy(element, {\n              props: [replace(value, /:(read-\\w+)/, ':' + MOZ + '$1')]\n            })], callback);\n          // :placeholder\n\n          case '::placeholder':\n            return serialize([copy(element, {\n              props: [replace(value, /:(plac\\w+)/, ':' + WEBKIT + 'input-$1')]\n            }), copy(element, {\n              props: [replace(value, /:(plac\\w+)/, ':' + MOZ + '$1')]\n            }), copy(element, {\n              props: [replace(value, /:(plac\\w+)/, MS + 'input-$1')]\n            })], callback);\n        }\n\n        return '';\n      });\n  }\n};\n\nvar defaultStylisPlugins = [prefixer];\n\nvar createCache = function createCache(options) {\n  var key = options.key;\n\n  if (process.env.NODE_ENV !== 'production' && !key) {\n    throw new Error(\"You have to configure `key` for your cache. Please make sure it's unique (and not equal to 'css') as it's used for linking styles to your cache.\\n\" + \"If multiple caches share the same key they might \\\"fight\\\" for each other's style elements.\");\n  }\n\n  if ( key === 'css') {\n    var ssrStyles = document.querySelectorAll(\"style[data-emotion]:not([data-s])\"); // get SSRed styles out of the way of React's hydration\n    // document.head is a safe place to move them to(though note document.head is not necessarily the last place they will be)\n    // note this very very intentionally targets all style elements regardless of the key to ensure\n    // that creating a cache works inside of render of a React component\n\n    Array.prototype.forEach.call(ssrStyles, function (node) {\n      // we want to only move elements which have a space in the data-emotion attribute value\n      // because that indicates that it is an Emotion 11 server-side rendered style elements\n      // while we will already ignore Emotion 11 client-side inserted styles because of the :not([data-s]) part in the selector\n      // Emotion 10 client-side inserted styles did not have data-s (but importantly did not have a space in their data-emotion attributes)\n      // so checking for the space ensures that loading Emotion 11 after Emotion 10 has inserted some styles\n      // will not result in the Emotion 10 styles being destroyed\n      var dataEmotionAttribute = node.getAttribute('data-emotion');\n\n      if (dataEmotionAttribute.indexOf(' ') === -1) {\n        return;\n      }\n      document.head.appendChild(node);\n      node.setAttribute('data-s', '');\n    });\n  }\n\n  var stylisPlugins = options.stylisPlugins || defaultStylisPlugins;\n\n  if (process.env.NODE_ENV !== 'production') {\n    // $FlowFixMe\n    if (/[^a-z-]/.test(key)) {\n      throw new Error(\"Emotion key must only contain lower case alphabetical characters and - but \\\"\" + key + \"\\\" was passed\");\n    }\n  }\n\n  var inserted = {};\n  var container;\n  var nodesToHydrate = [];\n\n  {\n    container = options.container || document.head;\n    Array.prototype.forEach.call( // this means we will ignore elements which don't have a space in them which\n    // means that the style elements we're looking at are only Emotion 11 server-rendered style elements\n    document.querySelectorAll(\"style[data-emotion^=\\\"\" + key + \" \\\"]\"), function (node) {\n      var attrib = node.getAttribute(\"data-emotion\").split(' '); // $FlowFixMe\n\n      for (var i = 1; i < attrib.length; i++) {\n        inserted[attrib[i]] = true;\n      }\n\n      nodesToHydrate.push(node);\n    });\n  }\n\n  var _insert;\n\n  var omnipresentPlugins = [compat, removeLabel];\n\n  if (process.env.NODE_ENV !== 'production') {\n    omnipresentPlugins.push(createUnsafeSelectorsAlarm({\n      get compat() {\n        return cache.compat;\n      }\n\n    }), incorrectImportAlarm);\n  }\n\n  {\n    var currentSheet;\n    var finalizingPlugins = [stringify, process.env.NODE_ENV !== 'production' ? function (element) {\n      if (!element.root) {\n        if (element[\"return\"]) {\n          currentSheet.insert(element[\"return\"]);\n        } else if (element.value && element.type !== COMMENT) {\n          // insert empty rule in non-production environments\n          // so @emotion/jest can grab `key` from the (JS)DOM for caches without any rules inserted yet\n          currentSheet.insert(element.value + \"{}\");\n        }\n      }\n    } : rulesheet(function (rule) {\n      currentSheet.insert(rule);\n    })];\n    var serializer = middleware(omnipresentPlugins.concat(stylisPlugins, finalizingPlugins));\n\n    var stylis = function stylis(styles) {\n      return serialize(compile(styles), serializer);\n    };\n\n    _insert = function insert(selector, serialized, sheet, shouldCache) {\n      currentSheet = sheet;\n\n      if (process.env.NODE_ENV !== 'production' && serialized.map !== undefined) {\n        currentSheet = {\n          insert: function insert(rule) {\n            sheet.insert(rule + serialized.map);\n          }\n        };\n      }\n\n      stylis(selector ? selector + \"{\" + serialized.styles + \"}\" : serialized.styles);\n\n      if (shouldCache) {\n        cache.inserted[serialized.name] = true;\n      }\n    };\n  }\n\n  var cache = {\n    key: key,\n    sheet: new StyleSheet({\n      key: key,\n      container: container,\n      nonce: options.nonce,\n      speedy: options.speedy,\n      prepend: options.prepend,\n      insertionPoint: options.insertionPoint\n    }),\n    nonce: options.nonce,\n    inserted: inserted,\n    registered: {},\n    insert: _insert\n  };\n  cache.sheet.hydrate(nodesToHydrate);\n  return cache;\n};\n\nexport default createCache;\n", "/* eslint-disable */\n// Inspired by https://github.com/garycourt/murmurhash-js\n// Ported from https://github.com/aappleby/smhasher/blob/61a0530f28277f2e850bfc39600ce61d02b518de/src/MurmurHash2.cpp#L37-L86\nfunction murmur2(str) {\n  // 'm' and 'r' are mixing constants generated offline.\n  // They're not really 'magic', they just happen to work well.\n  // const m = 0x5bd1e995;\n  // const r = 24;\n  // Initialize the hash\n  var h = 0; // Mix 4 bytes at a time into the hash\n\n  var k,\n      i = 0,\n      len = str.length;\n\n  for (; len >= 4; ++i, len -= 4) {\n    k = str.charCodeAt(i) & 0xff | (str.charCodeAt(++i) & 0xff) << 8 | (str.charCodeAt(++i) & 0xff) << 16 | (str.charCodeAt(++i) & 0xff) << 24;\n    k =\n    /* Math.imul(k, m): */\n    (k & 0xffff) * 0x5bd1e995 + ((k >>> 16) * 0xe995 << 16);\n    k ^=\n    /* k >>> r: */\n    k >>> 24;\n    h =\n    /* Math.imul(k, m): */\n    (k & 0xffff) * 0x5bd1e995 + ((k >>> 16) * 0xe995 << 16) ^\n    /* Math.imul(h, m): */\n    (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  } // Handle the last few bytes of the input array\n\n\n  switch (len) {\n    case 3:\n      h ^= (str.charCodeAt(i + 2) & 0xff) << 16;\n\n    case 2:\n      h ^= (str.charCodeAt(i + 1) & 0xff) << 8;\n\n    case 1:\n      h ^= str.charCodeAt(i) & 0xff;\n      h =\n      /* Math.imul(h, m): */\n      (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  } // Do a few final mixes of the hash to ensure the last few\n  // bytes are well-incorporated.\n\n\n  h ^= h >>> 13;\n  h =\n  /* Math.imul(h, m): */\n  (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  return ((h ^ h >>> 15) >>> 0).toString(36);\n}\n\nexport default murmur2;\n", "var unitlessKeys = {\n  animationIterationCount: 1,\n  borderImageOutset: 1,\n  borderImageSlice: 1,\n  borderImageWidth: 1,\n  boxFlex: 1,\n  boxFlexGroup: 1,\n  boxOrdinalGroup: 1,\n  columnCount: 1,\n  columns: 1,\n  flex: 1,\n  flexGrow: 1,\n  flexPositive: 1,\n  flexShrink: 1,\n  flexNegative: 1,\n  flexOrder: 1,\n  gridRow: 1,\n  gridRowEnd: 1,\n  gridRowSpan: 1,\n  gridRowStart: 1,\n  gridColumn: 1,\n  gridColumnEnd: 1,\n  gridColumnSpan: 1,\n  gridColumnStart: 1,\n  msGridRow: 1,\n  msGridRowSpan: 1,\n  msGridColumn: 1,\n  msGridColumnSpan: 1,\n  fontWeight: 1,\n  lineHeight: 1,\n  opacity: 1,\n  order: 1,\n  orphans: 1,\n  tabSize: 1,\n  widows: 1,\n  zIndex: 1,\n  zoom: 1,\n  WebkitLineClamp: 1,\n  // SVG-related properties\n  fillOpacity: 1,\n  floodOpacity: 1,\n  stopOpacity: 1,\n  strokeDasharray: 1,\n  strokeDashoffset: 1,\n  strokeMiterlimit: 1,\n  strokeOpacity: 1,\n  strokeWidth: 1\n};\n\nexport default unitlessKeys;\n", "import hashString from '@emotion/hash';\nimport unitless from '@emotion/unitless';\nimport memoize from '@emotion/memoize';\n\nvar ILLEGAL_ESCAPE_SEQUENCE_ERROR = \"You have illegal escape sequence in your template literal, most likely inside content's property value.\\nBecause you write your CSS inside a JavaScript string you actually have to do double escaping, so for example \\\"content: '\\\\00d7';\\\" should become \\\"content: '\\\\\\\\00d7';\\\".\\nYou can read more about this here:\\nhttps://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals#ES2018_revision_of_illegal_escape_sequences\";\nvar UNDEFINED_AS_OBJECT_KEY_ERROR = \"You have passed in falsy value as style object's key (can happen when in example you pass unexported component as computed key).\";\nvar hyphenateRegex = /[A-Z]|^ms/g;\nvar animationRegex = /_EMO_([^_]+?)_([^]*?)_EMO_/g;\n\nvar isCustomProperty = function isCustomProperty(property) {\n  return property.charCodeAt(1) === 45;\n};\n\nvar isProcessableValue = function isProcessableValue(value) {\n  return value != null && typeof value !== 'boolean';\n};\n\nvar processStyleName = /* #__PURE__ */memoize(function (styleName) {\n  return isCustomProperty(styleName) ? styleName : styleName.replace(hyphenateRegex, '-$&').toLowerCase();\n});\n\nvar processStyleValue = function processStyleValue(key, value) {\n  switch (key) {\n    case 'animation':\n    case 'animationName':\n      {\n        if (typeof value === 'string') {\n          return value.replace(animationRegex, function (match, p1, p2) {\n            cursor = {\n              name: p1,\n              styles: p2,\n              next: cursor\n            };\n            return p1;\n          });\n        }\n      }\n  }\n\n  if (unitless[key] !== 1 && !isCustomProperty(key) && typeof value === 'number' && value !== 0) {\n    return value + 'px';\n  }\n\n  return value;\n};\n\nif (process.env.NODE_ENV !== 'production') {\n  var contentValuePattern = /(var|attr|counters?|url|element|(((repeating-)?(linear|radial))|conic)-gradient)\\(|(no-)?(open|close)-quote/;\n  var contentValues = ['normal', 'none', 'initial', 'inherit', 'unset'];\n  var oldProcessStyleValue = processStyleValue;\n  var msPattern = /^-ms-/;\n  var hyphenPattern = /-(.)/g;\n  var hyphenatedCache = {};\n\n  processStyleValue = function processStyleValue(key, value) {\n    if (key === 'content') {\n      if (typeof value !== 'string' || contentValues.indexOf(value) === -1 && !contentValuePattern.test(value) && (value.charAt(0) !== value.charAt(value.length - 1) || value.charAt(0) !== '\"' && value.charAt(0) !== \"'\")) {\n        throw new Error(\"You seem to be using a value for 'content' without quotes, try replacing it with `content: '\\\"\" + value + \"\\\"'`\");\n      }\n    }\n\n    var processed = oldProcessStyleValue(key, value);\n\n    if (processed !== '' && !isCustomProperty(key) && key.indexOf('-') !== -1 && hyphenatedCache[key] === undefined) {\n      hyphenatedCache[key] = true;\n      console.error(\"Using kebab-case for css properties in objects is not supported. Did you mean \" + key.replace(msPattern, 'ms-').replace(hyphenPattern, function (str, _char) {\n        return _char.toUpperCase();\n      }) + \"?\");\n    }\n\n    return processed;\n  };\n}\n\nvar noComponentSelectorMessage = 'Component selectors can only be used in conjunction with ' + '@emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware ' + 'compiler transform.';\n\nfunction handleInterpolation(mergedProps, registered, interpolation) {\n  if (interpolation == null) {\n    return '';\n  }\n\n  if (interpolation.__emotion_styles !== undefined) {\n    if (process.env.NODE_ENV !== 'production' && interpolation.toString() === 'NO_COMPONENT_SELECTOR') {\n      throw new Error(noComponentSelectorMessage);\n    }\n\n    return interpolation;\n  }\n\n  switch (typeof interpolation) {\n    case 'boolean':\n      {\n        return '';\n      }\n\n    case 'object':\n      {\n        if (interpolation.anim === 1) {\n          cursor = {\n            name: interpolation.name,\n            styles: interpolation.styles,\n            next: cursor\n          };\n          return interpolation.name;\n        }\n\n        if (interpolation.styles !== undefined) {\n          var next = interpolation.next;\n\n          if (next !== undefined) {\n            // not the most efficient thing ever but this is a pretty rare case\n            // and there will be very few iterations of this generally\n            while (next !== undefined) {\n              cursor = {\n                name: next.name,\n                styles: next.styles,\n                next: cursor\n              };\n              next = next.next;\n            }\n          }\n\n          var styles = interpolation.styles + \";\";\n\n          if (process.env.NODE_ENV !== 'production' && interpolation.map !== undefined) {\n            styles += interpolation.map;\n          }\n\n          return styles;\n        }\n\n        return createStringFromObject(mergedProps, registered, interpolation);\n      }\n\n    case 'function':\n      {\n        if (mergedProps !== undefined) {\n          var previousCursor = cursor;\n          var result = interpolation(mergedProps);\n          cursor = previousCursor;\n          return handleInterpolation(mergedProps, registered, result);\n        } else if (process.env.NODE_ENV !== 'production') {\n          console.error('Functions that are interpolated in css calls will be stringified.\\n' + 'If you want to have a css call based on props, create a function that returns a css call like this\\n' + 'let dynamicStyle = (props) => css`color: ${props.color}`\\n' + 'It can be called directly with props or interpolated in a styled call like this\\n' + \"let SomeComponent = styled('div')`${dynamicStyle}`\");\n        }\n\n        break;\n      }\n\n    case 'string':\n      if (process.env.NODE_ENV !== 'production') {\n        var matched = [];\n        var replaced = interpolation.replace(animationRegex, function (match, p1, p2) {\n          var fakeVarName = \"animation\" + matched.length;\n          matched.push(\"const \" + fakeVarName + \" = keyframes`\" + p2.replace(/^@keyframes animation-\\w+/, '') + \"`\");\n          return \"${\" + fakeVarName + \"}\";\n        });\n\n        if (matched.length) {\n          console.error('`keyframes` output got interpolated into plain string, please wrap it with `css`.\\n\\n' + 'Instead of doing this:\\n\\n' + [].concat(matched, [\"`\" + replaced + \"`\"]).join('\\n') + '\\n\\nYou should wrap it with `css` like this:\\n\\n' + (\"css`\" + replaced + \"`\"));\n        }\n      }\n\n      break;\n  } // finalize string values (regular strings and functions interpolated into css calls)\n\n\n  if (registered == null) {\n    return interpolation;\n  }\n\n  var cached = registered[interpolation];\n  return cached !== undefined ? cached : interpolation;\n}\n\nfunction createStringFromObject(mergedProps, registered, obj) {\n  var string = '';\n\n  if (Array.isArray(obj)) {\n    for (var i = 0; i < obj.length; i++) {\n      string += handleInterpolation(mergedProps, registered, obj[i]) + \";\";\n    }\n  } else {\n    for (var _key in obj) {\n      var value = obj[_key];\n\n      if (typeof value !== 'object') {\n        if (registered != null && registered[value] !== undefined) {\n          string += _key + \"{\" + registered[value] + \"}\";\n        } else if (isProcessableValue(value)) {\n          string += processStyleName(_key) + \":\" + processStyleValue(_key, value) + \";\";\n        }\n      } else {\n        if (_key === 'NO_COMPONENT_SELECTOR' && process.env.NODE_ENV !== 'production') {\n          throw new Error(noComponentSelectorMessage);\n        }\n\n        if (Array.isArray(value) && typeof value[0] === 'string' && (registered == null || registered[value[0]] === undefined)) {\n          for (var _i = 0; _i < value.length; _i++) {\n            if (isProcessableValue(value[_i])) {\n              string += processStyleName(_key) + \":\" + processStyleValue(_key, value[_i]) + \";\";\n            }\n          }\n        } else {\n          var interpolated = handleInterpolation(mergedProps, registered, value);\n\n          switch (_key) {\n            case 'animation':\n            case 'animationName':\n              {\n                string += processStyleName(_key) + \":\" + interpolated + \";\";\n                break;\n              }\n\n            default:\n              {\n                if (process.env.NODE_ENV !== 'production' && _key === 'undefined') {\n                  console.error(UNDEFINED_AS_OBJECT_KEY_ERROR);\n                }\n\n                string += _key + \"{\" + interpolated + \"}\";\n              }\n          }\n        }\n      }\n    }\n  }\n\n  return string;\n}\n\nvar labelPattern = /label:\\s*([^\\s;\\n{]+)\\s*(;|$)/g;\nvar sourceMapPattern;\n\nif (process.env.NODE_ENV !== 'production') {\n  sourceMapPattern = /\\/\\*#\\ssourceMappingURL=data:application\\/json;\\S+\\s+\\*\\//g;\n} // this is the cursor for keyframes\n// keyframes are stored on the SerializedStyles object as a linked list\n\n\nvar cursor;\nvar serializeStyles = function serializeStyles(args, registered, mergedProps) {\n  if (args.length === 1 && typeof args[0] === 'object' && args[0] !== null && args[0].styles !== undefined) {\n    return args[0];\n  }\n\n  var stringMode = true;\n  var styles = '';\n  cursor = undefined;\n  var strings = args[0];\n\n  if (strings == null || strings.raw === undefined) {\n    stringMode = false;\n    styles += handleInterpolation(mergedProps, registered, strings);\n  } else {\n    if (process.env.NODE_ENV !== 'production' && strings[0] === undefined) {\n      console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n    }\n\n    styles += strings[0];\n  } // we start at 1 since we've already handled the first arg\n\n\n  for (var i = 1; i < args.length; i++) {\n    styles += handleInterpolation(mergedProps, registered, args[i]);\n\n    if (stringMode) {\n      if (process.env.NODE_ENV !== 'production' && strings[i] === undefined) {\n        console.error(ILLEGAL_ESCAPE_SEQUENCE_ERROR);\n      }\n\n      styles += strings[i];\n    }\n  }\n\n  var sourceMap;\n\n  if (process.env.NODE_ENV !== 'production') {\n    styles = styles.replace(sourceMapPattern, function (match) {\n      sourceMap = match;\n      return '';\n    });\n  } // using a global regex with .exec is stateful so lastIndex has to be reset each time\n\n\n  labelPattern.lastIndex = 0;\n  var identifierName = '';\n  var match; // https://esbench.com/bench/5b809c2cf2949800a0f61fb5\n\n  while ((match = labelPattern.exec(styles)) !== null) {\n    identifierName += '-' + // $FlowFixMe we know it's not null\n    match[1];\n  }\n\n  var name = hashString(styles) + identifierName;\n\n  if (process.env.NODE_ENV !== 'production') {\n    // $FlowFixMe SerializedStyles type doesn't have toString property (and we don't want to add it)\n    return {\n      name: name,\n      styles: styles,\n      map: sourceMap,\n      next: cursor,\n      toString: function toString() {\n        return \"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).\";\n      }\n    };\n  }\n\n  return {\n    name: name,\n    styles: styles,\n    next: cursor\n  };\n};\n\nexport { serializeStyles };\n", "var isBrowser = \"object\" !== 'undefined';\nfunction getRegisteredStyles(registered, registeredStyles, classNames) {\n  var rawClassName = '';\n  classNames.split(' ').forEach(function (className) {\n    if (registered[className] !== undefined) {\n      registeredStyles.push(registered[className] + \";\");\n    } else {\n      rawClassName += className + \" \";\n    }\n  });\n  return rawClassName;\n}\nvar registerStyles = function registerStyles(cache, serialized, isStringTag) {\n  var className = cache.key + \"-\" + serialized.name;\n\n  if ( // we only need to add the styles to the registered cache if the\n  // class name could be used further down\n  // the tree but if it's a string tag, we know it won't\n  // so we don't have to add it to registered cache.\n  // this improves memory usage since we can avoid storing the whole style string\n  (isStringTag === false || // we need to always store it if we're in compat mode and\n  // in node since emotion-server relies on whether a style is in\n  // the registered cache to know whether a style is global or not\n  // also, note that this check will be dead code eliminated in the browser\n  isBrowser === false ) && cache.registered[className] === undefined) {\n    cache.registered[className] = serialized.styles;\n  }\n};\nvar insertStyles = function insertStyles(cache, serialized, isStringTag) {\n  registerStyles(cache, serialized, isStringTag);\n  var className = cache.key + \"-\" + serialized.name;\n\n  if (cache.inserted[serialized.name] === undefined) {\n    var current = serialized;\n\n    do {\n      var maybeStyles = cache.insert(serialized === current ? \".\" + className : '', current, cache.sheet, true);\n\n      current = current.next;\n    } while (current !== undefined);\n  }\n};\n\nexport { getRegisteredStyles, insertStyles, registerStyles };\n", "import createCache from '@emotion/cache';\nimport { serializeStyles } from '@emotion/serialize';\nimport { getRegisteredStyles, insertStyles } from '@emotion/utils';\n\nfunction insertWithoutScoping(cache, serialized) {\n  if (cache.inserted[serialized.name] === undefined) {\n    return cache.insert('', serialized, cache.sheet, true);\n  }\n}\n\nfunction merge(registered, css, className) {\n  var registeredStyles = [];\n  var rawClassName = getRegisteredStyles(registered, registeredStyles, className);\n\n  if (registeredStyles.length < 2) {\n    return className;\n  }\n\n  return rawClassName + css(registeredStyles);\n}\n\nvar createEmotion = function createEmotion(options) {\n  var cache = createCache(options); // $FlowFixMe\n\n  cache.sheet.speedy = function (value) {\n    if (process.env.NODE_ENV !== 'production' && this.ctr !== 0) {\n      throw new Error('speedy must be changed before any rules are inserted');\n    }\n\n    this.isSpeedy = value;\n  };\n\n  cache.compat = true;\n\n  var css = function css() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var serialized = serializeStyles(args, cache.registered, undefined);\n    insertStyles(cache, serialized, false);\n    return cache.key + \"-\" + serialized.name;\n  };\n\n  var keyframes = function keyframes() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    var serialized = serializeStyles(args, cache.registered);\n    var animation = \"animation-\" + serialized.name;\n    insertWithoutScoping(cache, {\n      name: serialized.name,\n      styles: \"@keyframes \" + animation + \"{\" + serialized.styles + \"}\"\n    });\n    return animation;\n  };\n\n  var injectGlobal = function injectGlobal() {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    var serialized = serializeStyles(args, cache.registered);\n    insertWithoutScoping(cache, serialized);\n  };\n\n  var cx = function cx() {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    return merge(cache.registered, css, classnames(args));\n  };\n\n  return {\n    css: css,\n    cx: cx,\n    injectGlobal: injectGlobal,\n    keyframes: keyframes,\n    hydrate: function hydrate(ids) {\n      ids.forEach(function (key) {\n        cache.inserted[key] = true;\n      });\n    },\n    flush: function flush() {\n      cache.registered = {};\n      cache.inserted = {};\n      cache.sheet.flush();\n    },\n    // $FlowFixMe\n    sheet: cache.sheet,\n    cache: cache,\n    getRegisteredStyles: getRegisteredStyles.bind(null, cache.registered),\n    merge: merge.bind(null, cache.registered, css)\n  };\n};\n\nvar classnames = function classnames(args) {\n  var cls = '';\n\n  for (var i = 0; i < args.length; i++) {\n    var arg = args[i];\n    if (arg == null) continue;\n    var toAdd = void 0;\n\n    switch (typeof arg) {\n      case 'boolean':\n        break;\n\n      case 'object':\n        {\n          if (Array.isArray(arg)) {\n            toAdd = classnames(arg);\n          } else {\n            toAdd = '';\n\n            for (var k in arg) {\n              if (arg[k] && k) {\n                toAdd && (toAdd += ' ');\n                toAdd += k;\n              }\n            }\n          }\n\n          break;\n        }\n\n      default:\n        {\n          toAdd = arg;\n        }\n    }\n\n    if (toAdd) {\n      cls && (cls += ' ');\n      cls += toAdd;\n    }\n  }\n\n  return cls;\n};\n\nexport default createEmotion;\n", "import '@emotion/cache';\nimport '@emotion/serialize';\nimport '@emotion/utils';\nimport createEmotion from '../create-instance/dist/emotion-css-create-instance.esm.js';\n\nvar _createEmotion = createEmotion({\n  key: 'css'\n}),\n    flush = _createEmotion.flush,\n    hydrate = _createEmotion.hydrate,\n    cx = _createEmotion.cx,\n    merge = _createEmotion.merge,\n    getRegisteredStyles = _createEmotion.getRegisteredStyles,\n    injectGlobal = _createEmotion.injectGlobal,\n    keyframes = _createEmotion.keyframes,\n    css = _createEmotion.css,\n    sheet = _createEmotion.sheet,\n    cache = _createEmotion.cache;\n\nexport { cache, css, cx, flush, getRegisteredStyles, hydrate, injectGlobal, keyframes, merge, sheet };\n", "import {jsx} from \"@b9g/crank/standalone\";\nimport type {Context} from \"@b9g/crank\";\n\nfunction degreesFromRadians(r: number) {\n\treturn (r * 180) / Math.PI;\n}\n\nfunction radiansFromDegrees(d: number) {\n\treturn (d * Math.PI) / 180;\n}\n\nfunction rotate([x, y]: [number, number], a: number) {\n\treturn [x * Math.cos(a) - y * Math.sin(a), x * Math.sin(a) + y * Math.cos(a)];\n}\n\nfunction invAngle(radius: number, baseRadius: number) {\n\treturn Math.sqrt(radius ** 2 - baseRadius ** 2) / baseRadius;\n}\n\nfunction invPoint(angle: number, baseRadius: number) {\n\treturn [\n\t\tbaseRadius * (Math.cos(angle) + angle * Math.sin(angle)),\n\t\tbaseRadius * (Math.sin(angle) - angle * Math.cos(angle)),\n\t];\n}\n\nfunction invIntersectAngle(radius: number, baseRadius: number) {\n\tconst angle = Math.sqrt(radius ** 2 - baseRadius ** 2) / baseRadius;\n\tconst [x, y] = invPoint(angle, baseRadius);\n\treturn Math.atan2(y, x);\n}\n\nfunction calculateGear(mod: number, toothCount: number, pressureAngle: number) {\n\tconst pitchRadius = (mod * toothCount) / 2;\n\tconst baseRadius = pitchRadius * Math.cos(pressureAngle);\n\tconst dedRadius = pitchRadius - mod;\n\tconst addRadius = pitchRadius + mod;\n\tconst toothAngle = (2 * Math.PI) / toothCount;\n\tconst addAngle = invIntersectAngle(addRadius, baseRadius);\n\n\tlet points = [];\n\n\t// build a side of a tooth\n\tfor (\n\t\tlet i = 0, steps = 12, maxAngle = invAngle(addRadius, baseRadius);\n\t\ti <= steps;\n\t\ti++\n\t) {\n\t\tconst angle = (maxAngle * i) / steps;\n\t\tconst [x, y] = invPoint(angle, baseRadius);\n\t\tpoints.push([x, y]);\n\t}\n\n\t// TODO: I found this value by guess and check and I have no idea why it is correct\n\tconst mirrorAngle =\n\t\ttoothAngle / 2 + invIntersectAngle(pitchRadius, baseRadius) * 2;\n\t// build the reverse side of the tooth\n\t{\n\t\tconst points1 = points\n\t\t\t.map(([x, y]) => {\n\t\t\t\ty = -y;\n\t\t\t\t[x, y] = rotate([x, y], mirrorAngle);\n\t\t\t\treturn [x, y];\n\t\t\t})\n\t\t\t.reverse();\n\n\t\tpoints.push(...points1);\n\t}\n\n\t// rotate points so teeth tips aligned with x=0 and y=0\n\tpoints = points.map(([x, y]) => rotate([x, y], -mirrorAngle / 2));\n\n\tlet toothPoints = [];\n\tfor (let i = 0; i <= toothCount; i++) {\n\t\tconst points1 = points\n\t\t\t.slice()\n\t\t\t.map(([x, y]) => {\n\t\t\t\tconst a = toothAngle * i;\n\t\t\t\treturn rotate([x, y], a);\n\t\t\t})\n\t\t\t.map(([x, y]) => [Math.round(x * 100) / 100, Math.round(y * 100) / 100]);\n\n\t\ttoothPoints.push(points1);\n\t}\n\n\tconst path = toothPoints\n\t\t.map((points, i) => {\n\t\t\treturn points\n\t\t\t\t.map(([x, y], j) => {\n\t\t\t\t\tif (i === 0) {\n\t\t\t\t\t\treturn `M ${x} ${y}`;\n\t\t\t\t\t} else if (j === 0) {\n\t\t\t\t\t\tconst radius = toothCount / 2;\n\t\t\t\t\t\treturn `A ${radius} ${radius} 0 0 0 ${x} ${y}`;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn `L ${x} ${y}`;\n\t\t\t\t})\n\t\t\t\t.join(\" \");\n\t\t})\n\t\t.join(\" \");\n\n\treturn {\n\t\tpath,\n\t\tpitchRadius,\n\t\tbaseRadius,\n\t\tdedRadius,\n\t\taddRadius,\n\t\taddAngle,\n\t\ttoothAngle,\n\t\tmirrorAngle,\n\t};\n}\n\nexport function* Gear(\n\tthis: Context<typeof Gear>,\n\t{\n\t\tmod,\n\t\ttoothCount,\n\t\toffset,\n\t\tmask,\n\t\tstroke,\n\t\tstrokeWidth,\n\t\tfill,\n\t\tcircleRadius,\n\t}: {\n\t\tmod: number;\n\t\ttoothCount: number;\n\t\toffset: boolean | undefined;\n\t\tmask?: string;\n\t\tstroke?: string | number;\n\t\tstrokeWidth?: string | number;\n\t\tfill?: string | number;\n\t\tcircleRadius?: number;\n\t},\n): Generator<any> {\n\tconst pressureAngle = radiansFromDegrees(20);\n\tlet path!: string;\n\tlet dedRadius = 0;\n\tlet toothAngle = 0;\n\tlet oldMod: number | undefined;\n\tlet oldToothCount: number | undefined;\n\tfor ({\n\t\tmod,\n\t\ttoothCount,\n\t\toffset,\n\t\tmask,\n\t\tstroke,\n\t\tstrokeWidth,\n\t\tfill,\n\t\tcircleRadius,\n\t} of this) {\n\t\tif (oldMod !== mod || oldToothCount !== toothCount) {\n\t\t\t({path, dedRadius, toothAngle} = calculateGear(\n\t\t\t\tmod,\n\t\t\t\ttoothCount,\n\t\t\t\tpressureAngle,\n\t\t\t));\n\n\t\t\tcircleRadius = circleRadius == null ? dedRadius - 2 * mod : circleRadius;\n\t\t\t// add the inner circle\n\t\t\tpath += `\n\t\t\t  M ${-circleRadius} 0\n\t\t\t\ta ${circleRadius} ${circleRadius} 0 1 0 ${circleRadius * 2} 0\n\t\t\t\ta ${circleRadius} ${circleRadius} 0 1 0 ${-circleRadius * 2} 0\n\t\t\t`;\n\t\t}\n\n\t\tconst pathAngle = offset ? 0 : -toothAngle / 2;\n\t\tyield jsx`\n\t\t\t<path\n\t\t\t\ttransform=\"rotate(${pathAngle * (180 / Math.PI)})\"\n\t\t\t\td=${path}\n\t\t\t\tmask=${mask}\n\t\t\t\tstroke=${stroke}\n\t\t\t\tstroke-width=${strokeWidth}\n\t\t\t\tfill=${fill}\n\t\t\t/>\n\t\t`;\n\n\t\toldMod = mod;\n\t\toldToothCount = toothCount;\n\t}\n}\n\nfunction Rack({mod, height}: {mod: number; height: number}) {\n\tconst pressureAngle = radiansFromDegrees(20);\n\tconst points = [];\n\tconst toothWidth = mod * Math.PI;\n\tlet tipWidth = toothWidth / 4;\n\tconst count = Math.ceil(height / toothWidth) + 1;\n\tfor (let i = Math.floor(-count); i <= count; i++) {\n\t\tconst offset = i * toothWidth;\n\t\tpoints.push(\n\t\t\t...[\n\t\t\t\t[0, offset],\n\t\t\t\t[2 * mod, offset + 2 * mod * Math.tan(pressureAngle)],\n\t\t\t\t[2 * mod, offset + tipWidth + 2 * mod * Math.tan(pressureAngle)],\n\t\t\t\t[0, offset + tipWidth + 4 * mod * Math.tan(pressureAngle)],\n\t\t\t],\n\t\t);\n\t}\n\n\tconst path =\n\t\t`M${points[0][0]} ${points[0][1]}` +\n\t\tpoints\n\t\t\t.slice(1)\n\t\t\t.map(([x, y]) => `L ${x} ${y}`)\n\t\t\t.join(\" \");\n\treturn jsx`\n\t\t<path d=${path} />\n\t`;\n}\n\nexport function* GearInteractive(this: Context<typeof GearInteractive>, {}) {\n\tlet scrollTop = 0;\n\n\tconst measure = () => {\n\t\tif (typeof document !== \"undefined\") {\n\t\t\tconst el = document.scrollingElement;\n\t\t\tif (el) {\n\t\t\t\tscrollTop = Math.max(\n\t\t\t\t\t0,\n\t\t\t\t\tMath.min(el.scrollHeight - el.clientHeight, el.scrollTop),\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t};\n\n\tmeasure();\n\tif (typeof window !== \"undefined\") {\n\t\tconst onscroll = () => {\n\t\t\tmeasure();\n\t\t\tthis.refresh();\n\t\t};\n\n\t\twindow.addEventListener(\"scroll\", onscroll, {passive: true});\n\t\tthis.cleanup(() => {\n\t\t\twindow.removeEventListener(\"scroll\", onscroll);\n\t\t});\n\n\t\tonclick = () => {\n\t\t\t// TODO: advance the gears by a tiny amount every time the page is\n\t\t\t// clicked.\n\t\t};\n\n\t\twindow.addEventListener(\"click\", onclick);\n\t\tthis.cleanup(() => {\n\t\t\twindow.removeEventListener(\"click\", onclick as any);\n\t\t});\n\t}\n\n\tconst mod = 20;\n\tconst speed = 1 / 3;\n\n\tconst toothCount1 = 16;\n\tconst pitchRadius1 = (toothCount1 * mod) / 2;\n\n\tconst toothCount2 = 32;\n\tconst pitchRadius2 = (toothCount2 * mod) / 2;\n\n\tconst toothCount3 = 16;\n\tconst pitchRadius3 = (toothCount3 * mod) / 2;\n\n\tconst rackX = 20;\n\tconst rackY = 75;\n\tconst x1 = rackX + pitchRadius1 + mod;\n\tconst y1 = rackY + pitchRadius1 + mod;\n\n\tconst gearAngle2 = radiansFromDegrees(30);\n\tconst x2 = x1 + Math.cos(gearAngle2) * (pitchRadius1 + pitchRadius2);\n\tconst y2 = y1 + Math.sin(gearAngle2) * (pitchRadius1 + pitchRadius2);\n\n\tconst x3 = x2 + Math.cos(gearAngle2) * (pitchRadius2 + pitchRadius3);\n\tconst y3 = y2 + Math.sin(gearAngle2) * (pitchRadius2 + pitchRadius3);\n\tfor ({} of this) {\n\t\t// TODO: resize observer\n\t\tconst width = x2 * 2;\n\t\tconst height =\n\t\t\t(typeof document !== \"undefined\" &&\n\t\t\t\tdocument.scrollingElement?.clientHeight) ||\n\t\t\t1000;\n\t\tconst scrollAng = (-scrollTop * speed) / pitchRadius1;\n\t\tyield jsx`\n\t\t\t<div style=\"\n\t\t\t\tposition: fixed;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\twidth: 100vw;\n\t\t\t\theight: 100vh;\n\t\t\t\tz-index: -1;\n\t\t\t\">\n\t\t\t\t<svg\n\t\t\t\t\tstyle=\"\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\tmargin: 0 auto;\n\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\tleft: 1px;\n\t\t\t\t\t\"\n\t\t\t\t\tstroke=\"#aaa\"\n\t\t\t\t\tstroke-width=\"2\"\n\t\t\t\t\tfill=\"none\"\n\t\t\t\t\twidth=${width}\n\t\t\t\t>\n\t\t\t\t\t<g\n\t\t\t\t\t\tstyle=\"\n\t\t\t\t\t\t\ttransform: translate(\n\t\t\t\t\t\t\t\t${rackX}px,\n\t\t\t\t\t\t\t\t${rackY - ((scrollTop * speed) % (mod * Math.PI)) - (mod * Math.PI) / 2}px\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<${Rack} mod=${mod} height=${height} />\n\t\t\t\t\t</g>\n\t\t\t\t\t<g\n\t\t\t\t\t\tstroke=\"#9b7735\"\n\t\t\t\t\t\tstyle=\"\n\t\t\t\t\t\t\ttransform:\n\t\t\t\t\t\t\t\ttranslate(${x1}px, ${y1}px)\n\t\t\t\t\t\t\t\trotate(${-degreesFromRadians(scrollAng)}deg);\n\t\t\t\t\t\t\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<${Gear} mod=${mod} toothCount=${toothCount1} />\n\t\t\t\t\t</g>\n\t\t\t\t\t<g\n\t\t\t\t\t\tstyle=\"\n\t\t\t\t\t\t\ttransform:\n\t\t\t\t\t\t\t\ttranslate(${x2}px, ${y2}px)\n\t\t\t\t\t\t\t\trotate(${degreesFromRadians((scrollAng * toothCount1) / toothCount2)}deg);\n\t\t\t\t\t\t\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<${Gear} mod=${mod} toothCount=${toothCount2} offset />\n\t\t\t\t\t</g>\n\t\t\t\t\t<g\n\t\t\t\t\t\tstroke=\"#9b7735\"\n\t\t\t\t\t\tstyle=\"\n\t\t\t\t\t\t\ttransform: translate(${x3}px, ${y3}px)\n\t\t\t\t\t\t\trotate(${-degreesFromRadians((scrollAng * toothCount1) / toothCount3)}deg);\n\t\t\t\t\t\t\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<${Gear} mod=${mod} toothCount=${toothCount3} />\n\t\t\t\t\t</g>\n\t\t\t\t\t<!-- This last position is hard-coded because I just can\u2019t even -->\n\t\t\t\t\t<g\n\t\t\t\t\t\tstyle=\"\n\t\t\t\t\t\t\ttransform: translate(${x3 + pitchRadius3 - mod}px, ${\n\t\t\ty3 + 9 + ((scrollTop * speed) % (mod * Math.PI))\n\t\t}px);\n\t\t\t\t\t\t\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<${Rack} mod=${mod} height=${height} />\n\t\t\t\t\t</g>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t`;\n\t}\n}\n\nexport function GearLogo({width = 400, height = 400}) {\n\tconst r = 300;\n\tconst wa = (35 * Math.PI) / 180;\n\treturn jsx`\n\t\t<svg\n\t\t\tstyle=\"flex: none;\"\n\t\t\tfill=\"none\"\n\t\t\tviewBox=\"-200 -200 400 400\"\n\t\t\twidth=${width}\n\t\t\theight=${height}\n\t\t>\n\t\t\t<defs>\n\t\t\t\t<mask id=\"wedge-mask\">\n\t\t\t\t\t<rect x=\"-200\" y=\"-200\" width=\"400\" height=\"400\" fill=\"white\" />\n\t\t\t\t\t<path\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tfill=\"black\"\n\t\t\t\t\t\td=\"\n\t\t\t\t\t\t\tM 0 0\n\t\t\t\t\t\t\tL ${Math.cos(wa) * r} ${Math.sin(wa) * r}\n\t\t\t\t\t\t\tL ${Math.cos(wa) * r} ${-Math.sin(wa) * r}\n\t\t\t\t\t\t\tz\n\t\t\t\t\t\t\"\n\t\t\t\t\t/>\n\t\t\t\t</mask>\n\t\t\t</defs>\n\t\t\t<g\n\t\t\t\tstroke=\"none\"\n\t\t\t\tfill=\"#dbb368\"\n\t\t\t>\n\t\t\t\t<${Gear}\n\t\t\t\t\tmod=${20}\n\t\t\t\t\ttoothCount=${16}\n\t\t\t\t\toffset=${1}\n\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\tmask=\"url(#wedge-mask)\"\n\t\t\t\t\tcircleRadius=${110}\n\t\t\t\t/>\n\t\t\t\t<circle cx=\"0\" cy=\"0\" r=\"60\" stroke=\"none\" />\n\t\t\t\t<path\n\t\t\t\t\td=\"\n\t\t\t\t\t\tM 0 0\n\t\t\t\t\t\tL 0 40\n\t\t\t\t\t\tL 160 20\n\t\t\t\t\t\tA 0.2 1 0 0 0 160 -20\n\t\t\t\t\t\tL 0 -40\n\t\t\t\t\t\tz\n\t\t\t\t\t\"\n\t\t\t\t/>\n\t\t\t</g>\n\t\t</svg>\n\t`;\n}\n", "import {jsx} from \"@b9g/crank/standalone\";\nimport type {Context} from \"@b9g/crank/standalone\";\n\n// the website defaults to dark mode\nlet colorScheme: string | undefined;\nif (typeof window !== \"undefined\") {\n\tcolorScheme =\n\t\tsessionStorage.getItem(\"color-scheme\") ||\n\t\t(window.matchMedia(\"(prefers-color-scheme: dark)\").matches\n\t\t\t? \"dark\"\n\t\t\t: \"light\");\n\tif (colorScheme === \"dark\") {\n\t\tdocument.body.classList.remove(\"color-scheme-light\");\n\t} else {\n\t\tdocument.body.classList.add(\"color-scheme-light\");\n\t}\n}\n\n// This component would not work with multiple instances, insofar as clicking\n// on one instance would not update the state of others. Too lazy to fix this\n// though.\nexport function ColorSchemeToggle(this: Context) {\n\tconst onclick = () => {\n\t\tcolorScheme = colorScheme === \"dark\" ? \"light\" : \"dark\";\n\t\tsessionStorage.setItem(\"color-scheme\", colorScheme);\n\t\tthis.refresh();\n\t};\n\n\tif (typeof window !== \"undefined\") {\n\t\tif (colorScheme === \"dark\") {\n\t\t\tdocument.body.classList.remove(\"color-scheme-light\");\n\t\t\tfor (const iframe of Array.from(\n\t\t\t\tdocument.querySelectorAll(\".playground-iframe\"),\n\t\t\t)) {\n\t\t\t\t(\n\t\t\t\t\tiframe as HTMLIFrameElement\n\t\t\t\t).contentWindow?.document.body.classList.remove(\"color-scheme-light\");\n\t\t\t}\n\t\t} else {\n\t\t\tdocument.body.classList.add(\"color-scheme-light\");\n\t\t\tfor (const iframe of Array.from(\n\t\t\t\tdocument.querySelectorAll(\".playground-iframe\"),\n\t\t\t)) {\n\t\t\t\t(\n\t\t\t\t\tiframe as HTMLIFrameElement\n\t\t\t\t).contentWindow?.document.body.classList.add(\"color-scheme-light\");\n\t\t\t}\n\t\t}\n\t}\n\n\treturn jsx`\n\t\t<button\n\t\t\tonclick=${onclick}\n\t\t\trole=\"switch\"\n\t\t\taria-label=\"set dark mode\"\n\t\t\taria-checked=\"${(colorScheme === \"dark\").toString()}\"\n\t\t>\n\t\t\t${colorScheme == null ? \"\u2B1C\" : colorScheme === \"dark\" ? \"\uD83D\uDCA1\" : \"\uD83D\uDD76\"}\n\t\t</button>\n\t`;\n}\n", "import {jsx} from \"@b9g/crank/standalone\";\nimport {css} from \"@emotion/css\";\n\nimport {GearLogo} from \"./gear-interactive.js\";\nimport {ColorSchemeToggle} from \"./color-scheme-toggle.js\";\n\nconst positionFixed = css`\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\theight: 50px;\n\tz-index: 999;\n\tgap: 1em;\n`;\n\nconst navbarGroupLayout = css`\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: center;\n\talign-items: center;\n\tgap: 1em;\n`;\n\nexport function Navbar({url}: {url: string}) {\n\treturn jsx`\n\t\t<nav\n\t\t\tclass=\"\n\t\t\t\tblur-background\n\t\t\t\t${positionFixed}\n\t\t\t\t${css`\n\t\t\t\t\tborder-bottom: 1px solid var(--text-color);\n\t\t\t\t\toverflow-x: auto;\n\t\t\t\t\tbackground-color: inherit;\n\t\t\t\t\ta {\n\t\t\t\t\t\ttext-decoration: none;\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t}\n\n\t\t\t\t\t@media screen and (min-width: 800px) {\n\t\t\t\t\t\tpadding: 0 2em;\n\t\t\t\t\t}\n\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: row;\n\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\tgap: 1em;\n\t\t\t\t`}\n\t\t\t\"\n\t\t>\n\t\t\t<div class=${navbarGroupLayout}>\n\t\t\t\t<div>\n\t\t\t\t\t<a\n\t\t\t\t\t\tclass=${navbarGroupLayout}\n\t\t\t\t\t\taria-current=${url === \"/\" && \"page\"}\n\t\t\t\t\t\tstyle=\"gap: 0.3em\"\n\t\t\t\t\t\thref=\"/\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<${GearLogo} width=\"1.9em\" height=\"1.9em\" />\n\t\t\t\t\t\tCrank.js\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"/guides/getting-started\"\n\t\t\t\t\t\taria-current=${url.startsWith(\"/guides\") && \"page\"}\n\t\t\t\t\t>Guides</a>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"/blog/\"\n\t\t\t\t\t\taria-current=${url.startsWith(\"/blog\") && \"page\"}\n\t\t\t\t\t>Blog</a>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"/playground/\"\n\t\t\t\t\t\taria-current=${url.startsWith(\"/playground\") && \"page\"}\n\t\t\t\t\t>Playground</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=${navbarGroupLayout}>\n\t\t\t\t<div>\n\t\t\t\t\t<a href=\"https://github.com/bikeshaving/crank\">GitHub</a>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<a href=\"http://npm.im/@b9g/crank\">NPM</a>\n\t\t\t\t</div>\n\t\t\t\t<${ColorSchemeToggle} />\n\t\t\t</div>\n\t\t</nav>\n\t`;\n}\n", "import {\n\tChildren,\n\tContext,\n\tElementValue,\n\tHydrationData,\n\tPortal,\n\tRenderer,\n\tRendererImpl,\n} from \"./crank.js\";\n\nconst SVG_NAMESPACE = \"http://www.w3.org/2000/svg\";\n\nexport const impl: Partial<RendererImpl<Node, string>> = {\n\tscope(xmlns: string | undefined, tag: string | symbol): string | undefined {\n\t\t// TODO: Should we handle xmlns???\n\t\tswitch (tag) {\n\t\t\tcase Portal:\n\t\t\tcase \"foreignObject\":\n\t\t\t\txmlns = undefined;\n\t\t\t\tbreak;\n\t\t\tcase \"svg\":\n\t\t\t\txmlns = SVG_NAMESPACE;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn xmlns;\n\t},\n\n\tcreate(\n\t\ttag: string | symbol,\n\t\t_props: unknown,\n\t\txmlns: string | undefined,\n\t): Node {\n\t\tif (typeof tag !== \"string\") {\n\t\t\tthrow new Error(`Unknown tag: ${tag.toString()}`);\n\t\t} else if (tag.toLowerCase() === \"svg\") {\n\t\t\txmlns = SVG_NAMESPACE;\n\t\t}\n\n\t\treturn xmlns\n\t\t\t? document.createElementNS(xmlns, tag)\n\t\t\t: document.createElement(tag);\n\t},\n\n\thydrate(\n\t\ttag: string | symbol,\n\t\tnode: Element,\n\t\tprops: Record<string, unknown>,\n\t): HydrationData<Element> | undefined {\n\t\tif (typeof tag !== \"string\" && tag !== Portal) {\n\t\t\tthrow new Error(`Unknown tag: ${tag.toString()}`);\n\t\t}\n\n\t\tif (\n\t\t\ttypeof tag === \"string\" &&\n\t\t\ttag.toUpperCase() !== (node as Element).tagName\n\t\t) {\n\t\t\t// TODO: consider pros and cons of hydration warnings\n\t\t\t//console.error(`Expected <${tag}> while hydrating but found:`, node);\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst children: Array<string | Element> = [];\n\t\tfor (let i = 0; i < node.childNodes.length; i++) {\n\t\t\tconst child = node.childNodes[i];\n\t\t\tif (child.nodeType === Node.TEXT_NODE) {\n\t\t\t\tchildren.push((child as Text).data);\n\t\t\t} else if (child.nodeType === Node.ELEMENT_NODE) {\n\t\t\t\tchildren.push(child as Element);\n\t\t\t}\n\t\t}\n\n\t\t// TODO: extract props from nodes\n\t\treturn {props, children};\n\t},\n\n\tpatch(\n\t\t_tag: string | symbol,\n\t\t// TODO: Why does this assignment work?\n\t\tnode: HTMLElement | SVGElement,\n\t\tname: string,\n\t\t// TODO: Stricter typings?\n\t\tvalue: unknown,\n\t\toldValue: unknown,\n\t\txmlns: string | undefined,\n\t): void {\n\t\tconst isSVG = xmlns === SVG_NAMESPACE;\n\t\tswitch (name) {\n\t\t\tcase \"style\": {\n\t\t\t\tconst style: CSSStyleDeclaration = node.style;\n\t\t\t\tif (style == null) {\n\t\t\t\t\tnode.setAttribute(\"style\", value as string);\n\t\t\t\t} else if (value == null || value === false) {\n\t\t\t\t\tnode.removeAttribute(\"style\");\n\t\t\t\t} else if (value === true) {\n\t\t\t\t\tnode.setAttribute(\"style\", \"\");\n\t\t\t\t} else if (typeof value === \"string\") {\n\t\t\t\t\tif (style.cssText !== value) {\n\t\t\t\t\t\tstyle.cssText = value;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (typeof oldValue === \"string\") {\n\t\t\t\t\t\tstyle.cssText = \"\";\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (const styleName in {...(oldValue as {}), ...(value as {})}) {\n\t\t\t\t\t\tconst styleValue = value && (value as any)[styleName];\n\t\t\t\t\t\tif (styleValue == null) {\n\t\t\t\t\t\t\tstyle.removeProperty(styleName);\n\t\t\t\t\t\t} else if (style.getPropertyValue(styleName) !== styleValue) {\n\t\t\t\t\t\t\tstyle.setProperty(styleName, styleValue);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase \"class\":\n\t\t\tcase \"className\":\n\t\t\t\tif (value === true) {\n\t\t\t\t\tnode.setAttribute(\"class\", \"\");\n\t\t\t\t} else if (value == null) {\n\t\t\t\t\tnode.removeAttribute(\"class\");\n\t\t\t\t} else if (!isSVG) {\n\t\t\t\t\tif (node.className !== value) {\n\t\t\t\t\t\t(node as any)[\"className\"] = value;\n\t\t\t\t\t}\n\t\t\t\t} else if (node.getAttribute(\"class\") !== value) {\n\t\t\t\t\tnode.setAttribute(\"class\", value as string);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase \"innerHTML\":\n\t\t\t\tif (value !== oldValue) {\n\t\t\t\t\tnode.innerHTML = value as any;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\tdefault: {\n\t\t\t\tif (\n\t\t\t\t\tname in node &&\n\t\t\t\t\t// boolean properties will coerce strings, but sometimes they map to\n\t\t\t\t\t// enumerated attributes, where truthy strings (\"false\", \"no\") map to\n\t\t\t\t\t// falsy properties, so we use attributes in this case.\n\t\t\t\t\t!(\n\t\t\t\t\t\ttypeof value === \"string\" &&\n\t\t\t\t\t\ttypeof (node as any)[name] === \"boolean\"\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\t// walk up the object's prototype chain to find the owner of the\n\t\t\t\t\t// named property\n\t\t\t\t\tlet obj = node;\n\t\t\t\t\tdo {\n\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(obj, name)) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t} while ((obj = Object.getPrototypeOf(obj)));\n\n\t\t\t\t\t// get the descriptor for the named property and check whether it\n\t\t\t\t\t// implies that the property is writable\n\t\t\t\t\tconst descriptor = Object.getOwnPropertyDescriptor(obj, name);\n\t\t\t\t\tif (\n\t\t\t\t\t\tdescriptor != null &&\n\t\t\t\t\t\t(descriptor.writable === true || descriptor.set !== undefined)\n\t\t\t\t\t) {\n\t\t\t\t\t\tif ((node as any)[name] !== value) {\n\t\t\t\t\t\t\t(node as any)[name] = value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\t// if the property wasn't writable, fall through to the code below\n\t\t\t\t\t// which uses setAttribute() instead of assigning directly.\n\t\t\t\t}\n\n\t\t\t\tif (value === true) {\n\t\t\t\t\tvalue = \"\";\n\t\t\t\t} else if (value == null || value === false) {\n\t\t\t\t\tnode.removeAttribute(name);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (node.getAttribute(name) !== value) {\n\t\t\t\t\tnode.setAttribute(name, value as any);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tarrange(\n\t\ttag: string | symbol,\n\t\tnode: Node,\n\t\tprops: Record<string, any>,\n\t\tchildren: Array<Element | string>,\n\t\t_oldProps: Record<string, any> | undefined,\n\t\toldChildren: Array<Element | string> | undefined,\n\t): void {\n\t\tif (tag === Portal && (node == null || typeof node.nodeType !== \"number\")) {\n\t\t\tthrow new TypeError(\n\t\t\t\t`Portal root is not a node. Received: ${JSON.stringify(\n\t\t\t\t\tnode && node.toString(),\n\t\t\t\t)}`,\n\t\t\t);\n\t\t}\n\n\t\tif (\n\t\t\t!(\"innerHTML\" in props) &&\n\t\t\t// We don’t want to update elements without explicit children (<div/>),\n\t\t\t// because these elements sometimes have child nodes added via raw\n\t\t\t// DOM manipulations.\n\t\t\t// However, if an element has previously rendered children, we clear the\n\t\t\t// them because it would be surprising not to clear Crank managed\n\t\t\t// children, even if the new element does not have explicit children.\n\t\t\t(\"children\" in props || (oldChildren && oldChildren.length))\n\t\t) {\n\t\t\tif (children.length === 0) {\n\t\t\t\tnode.textContent = \"\";\n\t\t\t} else {\n\t\t\t\tlet oldChild = node.firstChild;\n\t\t\t\tlet i = 0;\n\t\t\t\twhile (oldChild !== null && i < children.length) {\n\t\t\t\t\tconst newChild = children[i];\n\t\t\t\t\tif (oldChild === newChild) {\n\t\t\t\t\t\toldChild = oldChild.nextSibling;\n\t\t\t\t\t\ti++;\n\t\t\t\t\t} else if (typeof newChild === \"string\") {\n\t\t\t\t\t\tif (oldChild.nodeType === Node.TEXT_NODE) {\n\t\t\t\t\t\t\tif ((oldChild as Text).data !== newChild) {\n\t\t\t\t\t\t\t\t(oldChild as Text).data = newChild;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\toldChild = oldChild.nextSibling;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnode.insertBefore(document.createTextNode(newChild), oldChild);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ti++;\n\t\t\t\t\t} else if (oldChild.nodeType === Node.TEXT_NODE) {\n\t\t\t\t\t\tconst nextSibling = oldChild.nextSibling;\n\t\t\t\t\t\tnode.removeChild(oldChild);\n\t\t\t\t\t\toldChild = nextSibling;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnode.insertBefore(newChild, oldChild);\n\t\t\t\t\t\ti++;\n\t\t\t\t\t\t// TODO: This is an optimization but we need to think a little more about other cases like prepending.\n\t\t\t\t\t\tif (oldChild !== children[i]) {\n\t\t\t\t\t\t\tconst nextSibling = oldChild.nextSibling;\n\t\t\t\t\t\t\tnode.removeChild(oldChild);\n\t\t\t\t\t\t\toldChild = nextSibling;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// remove excess DOM nodes\n\t\t\t\twhile (oldChild !== null) {\n\t\t\t\t\tconst nextSibling = oldChild.nextSibling;\n\t\t\t\t\tnode.removeChild(oldChild);\n\t\t\t\t\toldChild = nextSibling;\n\t\t\t\t}\n\n\t\t\t\t// append excess children\n\t\t\t\tfor (; i < children.length; i++) {\n\t\t\t\t\tconst newChild = children[i];\n\t\t\t\t\tnode.appendChild(\n\t\t\t\t\t\ttypeof newChild === \"string\"\n\t\t\t\t\t\t\t? document.createTextNode(newChild)\n\t\t\t\t\t\t\t: newChild,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\ttext(\n\t\ttext: string,\n\t\t_scope: string | undefined,\n\t\thydrationData: HydrationData<Element> | undefined,\n\t): string {\n\t\tif (hydrationData != null) {\n\t\t\tlet value = hydrationData.children.shift();\n\t\t\tif (typeof value !== \"string\" || !value.startsWith(text)) {\n\t\t\t\t// TODO: consider pros and cons of hydration warnings\n\t\t\t\t//console.error(`Expected \"${text}\" while hydrating but found:`, value);\n\t\t\t} else if (text.length < value.length) {\n\t\t\t\tvalue = value.slice(text.length);\n\t\t\t\thydrationData.children.unshift(value);\n\t\t\t}\n\t\t}\n\n\t\treturn text;\n\t},\n\n\traw(\n\t\tvalue: string | Node,\n\t\txmlns: string | undefined,\n\t\thydrationData: HydrationData<Element> | undefined,\n\t): ElementValue<Node> {\n\t\tlet result: ElementValue<Node>;\n\t\tif (typeof value === \"string\") {\n\t\t\tconst el =\n\t\t\t\txmlns == null\n\t\t\t\t\t? document.createElement(\"div\")\n\t\t\t\t\t: document.createElementNS(xmlns, \"svg\");\n\t\t\tel.innerHTML = value;\n\t\t\tif (el.childNodes.length === 0) {\n\t\t\t\tresult = undefined;\n\t\t\t} else if (el.childNodes.length === 1) {\n\t\t\t\tresult = el.childNodes[0];\n\t\t\t} else {\n\t\t\t\tresult = Array.from(el.childNodes);\n\t\t\t}\n\t\t} else {\n\t\t\tresult = value;\n\t\t}\n\n\t\tif (hydrationData != null) {\n\t\t\t// TODO: maybe we should warn on incorrect values\n\t\t\tif (Array.isArray(result)) {\n\t\t\t\tfor (let i = 0; i < result.length; i++) {\n\t\t\t\t\tconst node = result[i];\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof node !== \"string\" &&\n\t\t\t\t\t\t(node.nodeType === Node.ELEMENT_NODE ||\n\t\t\t\t\t\t\tnode.nodeType === Node.TEXT_NODE)\n\t\t\t\t\t) {\n\t\t\t\t\t\thydrationData.children.shift();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (result != null && typeof result !== \"string\") {\n\t\t\t\tif (\n\t\t\t\t\tresult.nodeType === Node.ELEMENT_NODE ||\n\t\t\t\t\tresult.nodeType === Node.TEXT_NODE\n\t\t\t\t) {\n\t\t\t\t\thydrationData.children.shift();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t},\n};\n\nexport class DOMRenderer extends Renderer<Node, string> {\n\tconstructor() {\n\t\tsuper(impl);\n\t}\n\n\trender(\n\t\tchildren: Children,\n\t\troot: Node,\n\t\tctx?: Context,\n\t): Promise<ElementValue<Node>> | ElementValue<Node> {\n\t\tvalidateRoot(root);\n\t\treturn super.render(children, root, ctx);\n\t}\n\n\thydrate(\n\t\tchildren: Children,\n\t\troot: Node,\n\t\tctx?: Context,\n\t): Promise<ElementValue<Node>> | ElementValue<Node> {\n\t\tvalidateRoot(root);\n\t\treturn super.hydrate(children, root, ctx);\n\t}\n}\n\nfunction validateRoot(root: unknown): asserts root is Node {\n\tif (\n\t\troot === null ||\n\t\t(typeof root === \"object\" && typeof (root as any).nodeType !== \"number\")\n\t) {\n\t\tthrow new TypeError(\n\t\t\t`Render root is not a node. Received: ${JSON.stringify(\n\t\t\t\troot && root.toString(),\n\t\t\t)}`,\n\t\t);\n\t}\n}\n\nexport const renderer = new DOMRenderer();\n\ndeclare global {\n\tmodule Crank {\n\t\tinterface EventMap extends GlobalEventHandlersEventMap {}\n\t}\n}\n", "import {Navbar} from \"../components/navbar.js\";\nimport {jsx} from \"@b9g/crank/standalone\";\nimport {renderer} from \"@b9g/crank/dom\";\n\nrenderer.hydrate(\n\tjsx`<${Navbar} url=${new URL(window.location).pathname} />`,\n\tdocument.getElementById(\"navbar-root\"),\n);\n"],
  "mappings": "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",
  "names": ["e", "length", "fill", "length", "compare", "i", "byteLength", "impl", "childValues", "renderer", "value", "record", "result", "iteration", "err", "match", "comment", "next", "equals", "i", "StyleSheet", "hydrate", "isImportRule", "sheet", "flush", "from", "length", "length", "copy", "slice", "alloc", "slice", "from", "parse", "alloc", "length", "character", "characters", "from", "length", "length", "cache", "identifierWithPointTracking", "character", "slice", "toRules", "from", "getRules", "alloc", "compat", "removeLabel", "isIgnoringComment", "createUnsafeSelectorsAlarm", "cache", "node", "isImportRule", "isPrependedWithRegularRules", "nullifyElement", "incorrectImportAlarm", "length", "prefixer", "copy", "createCache", "stylis", "sheet", "insert", "isCustomProperty", "isProcessableValue", "processStyleValue", "match", "next", "serializeStyles", "toString", "registerStyles", "cache", "insertStyles", "cache", "css", "createEmotion", "keyframes", "injectGlobal", "cx", "hydrate", "flush", "classnames", "flush", "merge", "getRegisteredStyles", "cache", "points", "fill", "onclick", "node"]
}
