{
  "version": 3,
  "sources": ["../node_modules/@esbuild-plugins/node-globals-polyfill/process.js", "../node_modules/@esbuild-plugins/node-globals-polyfill/Buffer.js", "../node_modules/@b9g/src/event-target.ts", "../node_modules/@b9g/src/_utils.ts", "../node_modules/@b9g/src/crank.ts", "../node_modules/@b9g/src/jsx-tag.ts", "../node_modules/@emotion/sheet/dist/emotion-sheet.esm.js", "../node_modules/stylis/src/Enum.js", "../node_modules/stylis/src/Utility.js", "../node_modules/stylis/src/Tokenizer.js", "../node_modules/stylis/src/Parser.js", "../node_modules/stylis/src/Serializer.js", "../node_modules/stylis/src/Middleware.js", "../node_modules/@emotion/memoize/dist/emotion-memoize.esm.js", "../node_modules/@emotion/cache/dist/emotion-cache.browser.esm.js", "../node_modules/@emotion/hash/dist/emotion-hash.esm.js", "../node_modules/@emotion/unitless/dist/emotion-unitless.esm.js", "../node_modules/@emotion/serialize/dist/emotion-serialize.esm.js", "../node_modules/@emotion/utils/dist/emotion-utils.browser.esm.js", "../node_modules/@emotion/css/create-instance/dist/emotion-css-create-instance.esm.js", "../node_modules/@emotion/css/dist/emotion-css.esm.js", "components/gear-interactive.ts", "utils/color-scheme.ts", "components/color-scheme-toggle.ts", "components/navbar.ts", "../node_modules/@b9g/src/_css.ts", "../node_modules/@b9g/src/dom.ts", "clients/navbar.ts"],
  "sourcesContent": ["// shim for using process in browser\n// based off https://github.com/defunctzombie/node-process/blob/master/browser.js\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined')\n}\nfunction defaultClearTimeout() {\n    throw new Error('clearTimeout has not been defined')\n}\nvar cachedSetTimeout = defaultSetTimout\nvar cachedClearTimeout = defaultClearTimeout\nif (typeof global.setTimeout === 'function') {\n    cachedSetTimeout = setTimeout\n}\nif (typeof global.clearTimeout === 'function') {\n    cachedClearTimeout = clearTimeout\n}\n\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0)\n    }\n    // if setTimeout wasn't available but was latter defined\n    if (\n        (cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) &&\n        setTimeout\n    ) {\n        cachedSetTimeout = setTimeout\n        return setTimeout(fun, 0)\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0)\n    } catch (e) {\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0)\n        } catch (e) {\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0)\n        }\n    }\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker)\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if (\n        (cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) &&\n        clearTimeout\n    ) {\n        cachedClearTimeout = clearTimeout\n        return clearTimeout(marker)\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker)\n    } catch (e) {\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker)\n        } catch (e) {\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker)\n        }\n    }\n}\nvar queue = []\nvar draining = false\nvar currentQueue\nvar queueIndex = -1\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return\n    }\n    draining = false\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue)\n    } else {\n        queueIndex = -1\n    }\n    if (queue.length) {\n        drainQueue()\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return\n    }\n    var timeout = runTimeout(cleanUpNextTick)\n    draining = true\n\n    var len = queue.length\n    while (len) {\n        currentQueue = queue\n        queue = []\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run()\n            }\n        }\n        queueIndex = -1\n        len = queue.length\n    }\n    currentQueue = null\n    draining = false\n    runClearTimeout(timeout)\n}\nfunction nextTick(fun) {\n    var args = new Array(arguments.length - 1)\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i]\n        }\n    }\n    queue.push(new Item(fun, args))\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue)\n    }\n}\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun\n    this.array = array\n}\nItem.prototype.run = function() {\n    this.fun.apply(null, this.array)\n}\nvar title = 'browser'\nvar platform = 'browser'\nvar browser = true\nvar env = {}\nvar argv = []\nvar version = '' // empty string to avoid regexp issues\nvar versions = {}\nvar release = {}\nvar config = {}\n\nfunction noop() {}\n\nvar on = noop\nvar addListener = noop\nvar once = noop\nvar off = noop\nvar removeListener = noop\nvar removeAllListeners = noop\nvar emit = noop\n\nfunction binding(name) {\n    throw new Error('process.binding is not supported')\n}\n\nfunction cwd() {\n    return '/'\n}\nfunction chdir(dir) {\n    throw new Error('process.chdir is not supported')\n}\nfunction umask() {\n    return 0\n}\n\n// from https://github.com/kumavis/browser-process-hrtime/blob/master/index.js\nvar performance = global.performance || {}\nvar performanceNow =\n    performance.now ||\n    performance.mozNow ||\n    performance.msNow ||\n    performance.oNow ||\n    performance.webkitNow ||\n    function() {\n        return new Date().getTime()\n    }\n\n// generate timestamp or delta\n// see http://nodejs.org/api/process.html#process_process_hrtime\nfunction hrtime(previousTimestamp) {\n    var clocktime = performanceNow.call(performance) * 1e-3\n    var seconds = Math.floor(clocktime)\n    var nanoseconds = Math.floor((clocktime % 1) * 1e9)\n    if (previousTimestamp) {\n        seconds = seconds - previousTimestamp[0]\n        nanoseconds = nanoseconds - previousTimestamp[1]\n        if (nanoseconds < 0) {\n            seconds--\n            nanoseconds += 1e9\n        }\n    }\n    return [seconds, nanoseconds]\n}\n\nvar startTime = new Date()\nfunction uptime() {\n    var currentTime = new Date()\n    var dif = currentTime - startTime\n    return dif / 1000\n}\n\nexport var process = {\n    nextTick: nextTick,\n    title: title,\n    browser: browser,\n    env: env,\n    argv: argv,\n    version: version,\n    versions: versions,\n    on: on,\n    addListener: addListener,\n    once: once,\n    off: off,\n    removeListener: removeListener,\n    removeAllListeners: removeAllListeners,\n    emit: emit,\n    binding: binding,\n    cwd: cwd,\n    chdir: chdir,\n    umask: umask,\n    hrtime: hrtime,\n    platform: platform,\n    release: release,\n    config: config,\n    uptime: uptime,\n}\n\n// replace process.env.VAR with define\n\nconst defines = {}\nObject.keys(defines).forEach((key) => {\n    const segs = key.split('.')\n    let target = process\n    for (let i = 0; i < segs.length; i++) {\n        const seg = segs[i]\n        if (i === segs.length - 1) {\n            target[seg] = defines[key]\n        } else {\n            target = target[seg] || (target[seg] = {})\n        }\n    }\n})\n", "// taken from https://github.com/calvinmetcalf/buffer-es6\n\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\nvar inited = false\nfunction init() {\n    inited = true\n    var code =\n        'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\n    for (var i = 0, len = code.length; i < len; ++i) {\n        lookup[i] = code[i]\n        revLookup[code.charCodeAt(i)] = i\n    }\n\n    revLookup['-'.charCodeAt(0)] = 62\n    revLookup['_'.charCodeAt(0)] = 63\n}\n\nfunction base64toByteArray(b64) {\n    if (!inited) {\n        init()\n    }\n    var i, j, l, tmp, placeHolders, arr\n    var len = b64.length\n\n    if (len % 4 > 0) {\n        throw new Error('Invalid string. Length must be a multiple of 4')\n    }\n\n    // the number of equal signs (place holders)\n    // if there are two placeholders, than the two characters before it\n    // represent one byte\n    // if there is only one, then the three characters before it represent 2 bytes\n    // this is just a cheap hack to not do indexOf twice\n    placeHolders = b64[len - 2] === '=' ? 2 : b64[len - 1] === '=' ? 1 : 0\n\n    // base64 is 4/3 + up to two characters of the original data\n    arr = new Arr((len * 3) / 4 - placeHolders)\n\n    // if there are placeholders, only get up to the last complete 4 chars\n    l = placeHolders > 0 ? len - 4 : len\n\n    var L = 0\n\n    for (i = 0, j = 0; i < l; i += 4, j += 3) {\n        tmp =\n            (revLookup[b64.charCodeAt(i)] << 18) |\n            (revLookup[b64.charCodeAt(i + 1)] << 12) |\n            (revLookup[b64.charCodeAt(i + 2)] << 6) |\n            revLookup[b64.charCodeAt(i + 3)]\n        arr[L++] = (tmp >> 16) & 0xff\n        arr[L++] = (tmp >> 8) & 0xff\n        arr[L++] = tmp & 0xff\n    }\n\n    if (placeHolders === 2) {\n        tmp =\n            (revLookup[b64.charCodeAt(i)] << 2) |\n            (revLookup[b64.charCodeAt(i + 1)] >> 4)\n        arr[L++] = tmp & 0xff\n    } else if (placeHolders === 1) {\n        tmp =\n            (revLookup[b64.charCodeAt(i)] << 10) |\n            (revLookup[b64.charCodeAt(i + 1)] << 4) |\n            (revLookup[b64.charCodeAt(i + 2)] >> 2)\n        arr[L++] = (tmp >> 8) & 0xff\n        arr[L++] = tmp & 0xff\n    }\n\n    return arr\n}\n\nfunction tripletToBase64(num) {\n    return (\n        lookup[(num >> 18) & 0x3f] +\n        lookup[(num >> 12) & 0x3f] +\n        lookup[(num >> 6) & 0x3f] +\n        lookup[num & 0x3f]\n    )\n}\n\nfunction encodeChunk(uint8, start, end) {\n    var tmp\n    var output = []\n    for (var i = start; i < end; i += 3) {\n        tmp = (uint8[i] << 16) + (uint8[i + 1] << 8) + uint8[i + 2]\n        output.push(tripletToBase64(tmp))\n    }\n    return output.join('')\n}\n\nfunction base64fromByteArray(uint8) {\n    if (!inited) {\n        init()\n    }\n    var tmp\n    var len = uint8.length\n    var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n    var output = ''\n    var parts = []\n    var maxChunkLength = 16383 // must be multiple of 3\n\n    // go through the array every three bytes, we'll deal with trailing stuff later\n    for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n        parts.push(\n            encodeChunk(\n                uint8,\n                i,\n                i + maxChunkLength > len2 ? len2 : i + maxChunkLength,\n            ),\n        )\n    }\n\n    // pad the end with zeros, but make sure to not forget the extra bytes\n    if (extraBytes === 1) {\n        tmp = uint8[len - 1]\n        output += lookup[tmp >> 2]\n        output += lookup[(tmp << 4) & 0x3f]\n        output += '=='\n    } else if (extraBytes === 2) {\n        tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n        output += lookup[tmp >> 10]\n        output += lookup[(tmp >> 4) & 0x3f]\n        output += lookup[(tmp << 2) & 0x3f]\n        output += '='\n    }\n\n    parts.push(output)\n\n    return parts.join('')\n}\n\nvar INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT =\n    global.TYPED_ARRAY_SUPPORT !== undefined ? global.TYPED_ARRAY_SUPPORT : true\n\nfunction kMaxLength() {\n    return Buffer.TYPED_ARRAY_SUPPORT ? 0x7fffffff : 0x3fffffff\n}\n\nfunction createBuffer(that, length) {\n    if (kMaxLength() < length) {\n        throw new RangeError('Invalid typed array length')\n    }\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        // Return an augmented `Uint8Array` instance, for best performance\n        that = new Uint8Array(length)\n        that.__proto__ = Buffer.prototype\n    } else {\n        // Fallback: Return an object instance of the Buffer class\n        if (that === null) {\n            that = new Buffer(length)\n        }\n        that.length = length\n    }\n\n    return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nexport function Buffer(arg, encodingOrOffset, length) {\n    if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n        return new Buffer(arg, encodingOrOffset, length)\n    }\n\n    // Common case.\n    if (typeof arg === 'number') {\n        if (typeof encodingOrOffset === 'string') {\n            throw new Error(\n                'If encoding is specified then the first argument must be a string',\n            )\n        }\n        return allocUnsafe(this, arg)\n    }\n    return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function(arr) {\n    arr.__proto__ = Buffer.prototype\n    return arr\n}\n\nfunction from(that, value, encodingOrOffset, length) {\n    if (typeof value === 'number') {\n        throw new TypeError('\"value\" argument must not be a number')\n    }\n\n    if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n        return fromArrayBuffer(that, value, encodingOrOffset, length)\n    }\n\n    if (typeof value === 'string') {\n        return fromString(that, value, encodingOrOffset)\n    }\n\n    return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function(value, encodingOrOffset, length) {\n    return from(null, value, encodingOrOffset, length)\n}\n\nBuffer.kMaxLength = kMaxLength()\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n    Buffer.prototype.__proto__ = Uint8Array.prototype\n    Buffer.__proto__ = Uint8Array\n    if (\n        typeof Symbol !== 'undefined' &&\n        Symbol.species &&\n        Buffer[Symbol.species] === Buffer\n    ) {\n        // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n        // Object.defineProperty(Buffer, Symbol.species, {\n        //   value: null,\n        //   configurable: true\n        // })\n    }\n}\n\nfunction assertSize(size) {\n    if (typeof size !== 'number') {\n        throw new TypeError('\"size\" argument must be a number')\n    } else if (size < 0) {\n        throw new RangeError('\"size\" argument must not be negative')\n    }\n}\n\nfunction alloc(that, size, fill, encoding) {\n    assertSize(size)\n    if (size <= 0) {\n        return createBuffer(that, size)\n    }\n    if (fill !== undefined) {\n        // Only pay attention to encoding if it's a string. This\n        // prevents accidentally sending in a number that would\n        // be interpretted as a start offset.\n        return typeof encoding === 'string'\n            ? createBuffer(that, size).fill(fill, encoding)\n            : createBuffer(that, size).fill(fill)\n    }\n    return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function(size, fill, encoding) {\n    return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe(that, size) {\n    assertSize(size)\n    that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n    if (!Buffer.TYPED_ARRAY_SUPPORT) {\n        for (var i = 0; i < size; ++i) {\n            that[i] = 0\n        }\n    }\n    return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function(size) {\n    return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function(size) {\n    return allocUnsafe(null, size)\n}\n\nfunction fromString(that, string, encoding) {\n    if (typeof encoding !== 'string' || encoding === '') {\n        encoding = 'utf8'\n    }\n\n    if (!Buffer.isEncoding(encoding)) {\n        throw new TypeError('\"encoding\" must be a valid string encoding')\n    }\n\n    var length = byteLength(string, encoding) | 0\n    that = createBuffer(that, length)\n\n    var actual = that.write(string, encoding)\n\n    if (actual !== length) {\n        // Writing a hex string, for example, that contains invalid characters will\n        // cause everything after the first invalid character to be ignored. (e.g.\n        // 'abxxcd' will be treated as 'ab')\n        that = that.slice(0, actual)\n    }\n\n    return that\n}\n\nfunction fromArrayLike(that, array) {\n    var length = array.length < 0 ? 0 : checked(array.length) | 0\n    that = createBuffer(that, length)\n    for (var i = 0; i < length; i += 1) {\n        that[i] = array[i] & 255\n    }\n    return that\n}\n\nfunction fromArrayBuffer(that, array, byteOffset, length) {\n    array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n    if (byteOffset < 0 || array.byteLength < byteOffset) {\n        throw new RangeError(\"'offset' is out of bounds\")\n    }\n\n    if (array.byteLength < byteOffset + (length || 0)) {\n        throw new RangeError(\"'length' is out of bounds\")\n    }\n\n    if (byteOffset === undefined && length === undefined) {\n        array = new Uint8Array(array)\n    } else if (length === undefined) {\n        array = new Uint8Array(array, byteOffset)\n    } else {\n        array = new Uint8Array(array, byteOffset, length)\n    }\n\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        // Return an augmented `Uint8Array` instance, for best performance\n        that = array\n        that.__proto__ = Buffer.prototype\n    } else {\n        // Fallback: Return an object instance of the Buffer class\n        that = fromArrayLike(that, array)\n    }\n    return that\n}\n\nfunction fromObject(that, obj) {\n    if (internalIsBuffer(obj)) {\n        var len = checked(obj.length) | 0\n        that = createBuffer(that, len)\n\n        if (that.length === 0) {\n            return that\n        }\n\n        obj.copy(that, 0, 0, len)\n        return that\n    }\n\n    if (obj) {\n        if (\n            (typeof ArrayBuffer !== 'undefined' &&\n                obj.buffer instanceof ArrayBuffer) ||\n            'length' in obj\n        ) {\n            if (typeof obj.length !== 'number' || isnan(obj.length)) {\n                return createBuffer(that, 0)\n            }\n            return fromArrayLike(that, obj)\n        }\n\n        if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n            return fromArrayLike(that, obj.data)\n        }\n    }\n\n    throw new TypeError(\n        'First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.',\n    )\n}\n\nfunction checked(length) {\n    // Note: cannot use `length < kMaxLength()` here because that fails when\n    // length is NaN (which is otherwise coerced to zero.)\n    if (length >= kMaxLength()) {\n        throw new RangeError(\n            'Attempt to allocate Buffer larger than maximum ' +\n                'size: 0x' +\n                kMaxLength().toString(16) +\n                ' bytes',\n        )\n    }\n    return length | 0\n}\n\nexport function SlowBuffer(length) {\n    if (+length != length) {\n        // eslint-disable-line eqeqeq\n        length = 0\n    }\n    return Buffer.alloc(+length)\n}\nBuffer.isBuffer = isBuffer\nfunction internalIsBuffer(b) {\n    return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare(a, b) {\n    if (!internalIsBuffer(a) || !internalIsBuffer(b)) {\n        throw new TypeError('Arguments must be Buffers')\n    }\n\n    if (a === b) return 0\n\n    var x = a.length\n    var y = b.length\n\n    for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n        if (a[i] !== b[i]) {\n            x = a[i]\n            y = b[i]\n            break\n        }\n    }\n\n    if (x < y) return -1\n    if (y < x) return 1\n    return 0\n}\n\nBuffer.isEncoding = function isEncoding(encoding) {\n    switch (String(encoding).toLowerCase()) {\n        case 'hex':\n        case 'utf8':\n        case 'utf-8':\n        case 'ascii':\n        case 'latin1':\n        case 'binary':\n        case 'base64':\n        case 'ucs2':\n        case 'ucs-2':\n        case 'utf16le':\n        case 'utf-16le':\n            return true\n        default:\n            return false\n    }\n}\n\nBuffer.concat = function concat(list, length) {\n    if (!Array.isArray(list)) {\n        throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n\n    if (list.length === 0) {\n        return Buffer.alloc(0)\n    }\n\n    var i\n    if (length === undefined) {\n        length = 0\n        for (i = 0; i < list.length; ++i) {\n            length += list[i].length\n        }\n    }\n\n    var buffer = Buffer.allocUnsafe(length)\n    var pos = 0\n    for (i = 0; i < list.length; ++i) {\n        var buf = list[i]\n        if (!internalIsBuffer(buf)) {\n            throw new TypeError('\"list\" argument must be an Array of Buffers')\n        }\n        buf.copy(buffer, pos)\n        pos += buf.length\n    }\n    return buffer\n}\n\nfunction byteLength(string, encoding) {\n    if (internalIsBuffer(string)) {\n        return string.length\n    }\n    if (\n        typeof ArrayBuffer !== 'undefined' &&\n        typeof ArrayBuffer.isView === 'function' &&\n        (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)\n    ) {\n        return string.byteLength\n    }\n    if (typeof string !== 'string') {\n        string = '' + string\n    }\n\n    var len = string.length\n    if (len === 0) return 0\n\n    // Use a for loop to avoid recursion\n    var loweredCase = false\n    for (;;) {\n        switch (encoding) {\n            case 'ascii':\n            case 'latin1':\n            case 'binary':\n                return len\n            case 'utf8':\n            case 'utf-8':\n            case undefined:\n                return utf8ToBytes(string).length\n            case 'ucs2':\n            case 'ucs-2':\n            case 'utf16le':\n            case 'utf-16le':\n                return len * 2\n            case 'hex':\n                return len >>> 1\n            case 'base64':\n                return base64ToBytes(string).length\n            default:\n                if (loweredCase) return utf8ToBytes(string).length // assume utf8\n                encoding = ('' + encoding).toLowerCase()\n                loweredCase = true\n        }\n    }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString(encoding, start, end) {\n    var loweredCase = false\n\n    // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n    // property of a typed array.\n\n    // This behaves neither like String nor Uint8Array in that we set start/end\n    // to their upper/lower bounds if the value passed is out of range.\n    // undefined is handled specially as per ECMA-262 6th Edition,\n    // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n    if (start === undefined || start < 0) {\n        start = 0\n    }\n    // Return early if start > this.length. Done here to prevent potential uint32\n    // coercion fail below.\n    if (start > this.length) {\n        return ''\n    }\n\n    if (end === undefined || end > this.length) {\n        end = this.length\n    }\n\n    if (end <= 0) {\n        return ''\n    }\n\n    // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n    end >>>= 0\n    start >>>= 0\n\n    if (end <= start) {\n        return ''\n    }\n\n    if (!encoding) encoding = 'utf8'\n\n    while (true) {\n        switch (encoding) {\n            case 'hex':\n                return hexSlice(this, start, end)\n\n            case 'utf8':\n            case 'utf-8':\n                return utf8Slice(this, start, end)\n\n            case 'ascii':\n                return asciiSlice(this, start, end)\n\n            case 'latin1':\n            case 'binary':\n                return latin1Slice(this, start, end)\n\n            case 'base64':\n                return base64Slice(this, start, end)\n\n            case 'ucs2':\n            case 'ucs-2':\n            case 'utf16le':\n            case 'utf-16le':\n                return utf16leSlice(this, start, end)\n\n            default:\n                if (loweredCase)\n                    throw new TypeError('Unknown encoding: ' + encoding)\n                encoding = (encoding + '').toLowerCase()\n                loweredCase = true\n        }\n    }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap(b, n, m) {\n    var i = b[n]\n    b[n] = b[m]\n    b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16() {\n    var len = this.length\n    if (len % 2 !== 0) {\n        throw new RangeError('Buffer size must be a multiple of 16-bits')\n    }\n    for (var i = 0; i < len; i += 2) {\n        swap(this, i, i + 1)\n    }\n    return this\n}\n\nBuffer.prototype.swap32 = function swap32() {\n    var len = this.length\n    if (len % 4 !== 0) {\n        throw new RangeError('Buffer size must be a multiple of 32-bits')\n    }\n    for (var i = 0; i < len; i += 4) {\n        swap(this, i, i + 3)\n        swap(this, i + 1, i + 2)\n    }\n    return this\n}\n\nBuffer.prototype.swap64 = function swap64() {\n    var len = this.length\n    if (len % 8 !== 0) {\n        throw new RangeError('Buffer size must be a multiple of 64-bits')\n    }\n    for (var i = 0; i < len; i += 8) {\n        swap(this, i, i + 7)\n        swap(this, i + 1, i + 6)\n        swap(this, i + 2, i + 5)\n        swap(this, i + 3, i + 4)\n    }\n    return this\n}\n\nBuffer.prototype.toString = function toString() {\n    var length = this.length | 0\n    if (length === 0) return ''\n    if (arguments.length === 0) return utf8Slice(this, 0, length)\n    return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals(b) {\n    if (!internalIsBuffer(b)) throw new TypeError('Argument must be a Buffer')\n    if (this === b) return true\n    return Buffer.compare(this, b) === 0\n}\n\n\nBuffer.prototype.compare = function compare(\n    target,\n    start,\n    end,\n    thisStart,\n    thisEnd,\n) {\n    if (!internalIsBuffer(target)) {\n        throw new TypeError('Argument must be a Buffer')\n    }\n\n    if (start === undefined) {\n        start = 0\n    }\n    if (end === undefined) {\n        end = target ? target.length : 0\n    }\n    if (thisStart === undefined) {\n        thisStart = 0\n    }\n    if (thisEnd === undefined) {\n        thisEnd = this.length\n    }\n\n    if (\n        start < 0 ||\n        end > target.length ||\n        thisStart < 0 ||\n        thisEnd > this.length\n    ) {\n        throw new RangeError('out of range index')\n    }\n\n    if (thisStart >= thisEnd && start >= end) {\n        return 0\n    }\n    if (thisStart >= thisEnd) {\n        return -1\n    }\n    if (start >= end) {\n        return 1\n    }\n\n    start >>>= 0\n    end >>>= 0\n    thisStart >>>= 0\n    thisEnd >>>= 0\n\n    if (this === target) return 0\n\n    var x = thisEnd - thisStart\n    var y = end - start\n    var len = Math.min(x, y)\n\n    var thisCopy = this.slice(thisStart, thisEnd)\n    var targetCopy = target.slice(start, end)\n\n    for (var i = 0; i < len; ++i) {\n        if (thisCopy[i] !== targetCopy[i]) {\n            x = thisCopy[i]\n            y = targetCopy[i]\n            break\n        }\n    }\n\n    if (x < y) return -1\n    if (y < x) return 1\n    return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf(buffer, val, byteOffset, encoding, dir) {\n    // Empty buffer means no match\n    if (buffer.length === 0) return -1\n\n    // Normalize byteOffset\n    if (typeof byteOffset === 'string') {\n        encoding = byteOffset\n        byteOffset = 0\n    } else if (byteOffset > 0x7fffffff) {\n        byteOffset = 0x7fffffff\n    } else if (byteOffset < -0x80000000) {\n        byteOffset = -0x80000000\n    }\n    byteOffset = +byteOffset // Coerce to Number.\n    if (isNaN(byteOffset)) {\n        // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n        byteOffset = dir ? 0 : buffer.length - 1\n    }\n\n    // Normalize byteOffset: negative offsets start from the end of the buffer\n    if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n    if (byteOffset >= buffer.length) {\n        if (dir) return -1\n        else byteOffset = buffer.length - 1\n    } else if (byteOffset < 0) {\n        if (dir) byteOffset = 0\n        else return -1\n    }\n\n    // Normalize val\n    if (typeof val === 'string') {\n        val = Buffer.from(val, encoding)\n    }\n\n    // Finally, search either indexOf (if dir is true) or lastIndexOf\n    if (internalIsBuffer(val)) {\n        // Special case: looking for empty string/buffer always fails\n        if (val.length === 0) {\n            return -1\n        }\n        return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n    } else if (typeof val === 'number') {\n        val = val & 0xff // Search for a byte value [0-255]\n        if (\n            Buffer.TYPED_ARRAY_SUPPORT &&\n            typeof Uint8Array.prototype.indexOf === 'function'\n        ) {\n            if (dir) {\n                return Uint8Array.prototype.indexOf.call(\n                    buffer,\n                    val,\n                    byteOffset,\n                )\n            } else {\n                return Uint8Array.prototype.lastIndexOf.call(\n                    buffer,\n                    val,\n                    byteOffset,\n                )\n            }\n        }\n        return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n    }\n\n    throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf(arr, val, byteOffset, encoding, dir) {\n    var indexSize = 1\n    var arrLength = arr.length\n    var valLength = val.length\n\n    if (encoding !== undefined) {\n        encoding = String(encoding).toLowerCase()\n        if (\n            encoding === 'ucs2' ||\n            encoding === 'ucs-2' ||\n            encoding === 'utf16le' ||\n            encoding === 'utf-16le'\n        ) {\n            if (arr.length < 2 || val.length < 2) {\n                return -1\n            }\n            indexSize = 2\n            arrLength /= 2\n            valLength /= 2\n            byteOffset /= 2\n        }\n    }\n\n    function read(buf, i) {\n        if (indexSize === 1) {\n            return buf[i]\n        } else {\n            return buf.readUInt16BE(i * indexSize)\n        }\n    }\n\n    var i\n    if (dir) {\n        var foundIndex = -1\n        for (i = byteOffset; i < arrLength; i++) {\n            if (\n                read(arr, i) ===\n                read(val, foundIndex === -1 ? 0 : i - foundIndex)\n            ) {\n                if (foundIndex === -1) foundIndex = i\n                if (i - foundIndex + 1 === valLength)\n                    return foundIndex * indexSize\n            } else {\n                if (foundIndex !== -1) i -= i - foundIndex\n                foundIndex = -1\n            }\n        }\n    } else {\n        if (byteOffset + valLength > arrLength)\n            byteOffset = arrLength - valLength\n        for (i = byteOffset; i >= 0; i--) {\n            var found = true\n            for (var j = 0; j < valLength; j++) {\n                if (read(arr, i + j) !== read(val, j)) {\n                    found = false\n                    break\n                }\n            }\n            if (found) return i\n        }\n    }\n\n    return -1\n}\n\nBuffer.prototype.includes = function includes(val, byteOffset, encoding) {\n    return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf(val, byteOffset, encoding) {\n    return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf(val, byteOffset, encoding) {\n    return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite(buf, string, offset, length) {\n    offset = Number(offset) || 0\n    var remaining = buf.length - offset\n    if (!length) {\n        length = remaining\n    } else {\n        length = Number(length)\n        if (length > remaining) {\n            length = remaining\n        }\n    }\n\n    // must be an even number of digits\n    var strLen = string.length\n    if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n    if (length > strLen / 2) {\n        length = strLen / 2\n    }\n    for (var i = 0; i < length; ++i) {\n        var parsed = parseInt(string.substr(i * 2, 2), 16)\n        if (isNaN(parsed)) return i\n        buf[offset + i] = parsed\n    }\n    return i\n}\n\nfunction utf8Write(buf, string, offset, length) {\n    return blitBuffer(\n        utf8ToBytes(string, buf.length - offset),\n        buf,\n        offset,\n        length,\n    )\n}\n\nfunction asciiWrite(buf, string, offset, length) {\n    return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write(buf, string, offset, length) {\n    return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write(buf, string, offset, length) {\n    return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write(buf, string, offset, length) {\n    return blitBuffer(\n        utf16leToBytes(string, buf.length - offset),\n        buf,\n        offset,\n        length,\n    )\n}\n\nBuffer.prototype.write = function write(string, offset, length, encoding) {\n    // Buffer#write(string)\n    if (offset === undefined) {\n        encoding = 'utf8'\n        length = this.length\n        offset = 0\n        // Buffer#write(string, encoding)\n    } else if (length === undefined && typeof offset === 'string') {\n        encoding = offset\n        length = this.length\n        offset = 0\n        // Buffer#write(string, offset[, length][, encoding])\n    } else if (isFinite(offset)) {\n        offset = offset | 0\n        if (isFinite(length)) {\n            length = length | 0\n            if (encoding === undefined) encoding = 'utf8'\n        } else {\n            encoding = length\n            length = undefined\n        }\n        // legacy write(string, encoding, offset, length) - remove in v0.13\n    } else {\n        throw new Error(\n            'Buffer.write(string, encoding, offset[, length]) is no longer supported',\n        )\n    }\n\n    var remaining = this.length - offset\n    if (length === undefined || length > remaining) length = remaining\n\n    if (\n        (string.length > 0 && (length < 0 || offset < 0)) ||\n        offset > this.length\n    ) {\n        throw new RangeError('Attempt to write outside buffer bounds')\n    }\n\n    if (!encoding) encoding = 'utf8'\n\n    var loweredCase = false\n    for (;;) {\n        switch (encoding) {\n            case 'hex':\n                return hexWrite(this, string, offset, length)\n\n            case 'utf8':\n            case 'utf-8':\n                return utf8Write(this, string, offset, length)\n\n            case 'ascii':\n                return asciiWrite(this, string, offset, length)\n\n            case 'latin1':\n            case 'binary':\n                return latin1Write(this, string, offset, length)\n\n            case 'base64':\n                // Warning: maxLength not taken into account in base64Write\n                return base64Write(this, string, offset, length)\n\n            case 'ucs2':\n            case 'ucs-2':\n            case 'utf16le':\n            case 'utf-16le':\n                return ucs2Write(this, string, offset, length)\n\n            default:\n                if (loweredCase)\n                    throw new TypeError('Unknown encoding: ' + encoding)\n                encoding = ('' + encoding).toLowerCase()\n                loweredCase = true\n        }\n    }\n}\n\nBuffer.prototype.toJSON = function toJSON() {\n    return {\n        type: 'Buffer',\n        data: Array.prototype.slice.call(this._arr || this, 0),\n    }\n}\n\nfunction base64Slice(buf, start, end) {\n    if (start === 0 && end === buf.length) {\n        return base64fromByteArray(buf)\n    } else {\n        return base64fromByteArray(buf.slice(start, end))\n    }\n}\n\nfunction utf8Slice(buf, start, end) {\n    end = Math.min(buf.length, end)\n    var res = []\n\n    var i = start\n    while (i < end) {\n        var firstByte = buf[i]\n        var codePoint = null\n        var bytesPerSequence =\n            firstByte > 0xef\n                ? 4\n                : firstByte > 0xdf\n                ? 3\n                : firstByte > 0xbf\n                ? 2\n                : 1\n\n        if (i + bytesPerSequence <= end) {\n            var secondByte, thirdByte, fourthByte, tempCodePoint\n\n            switch (bytesPerSequence) {\n                case 1:\n                    if (firstByte < 0x80) {\n                        codePoint = firstByte\n                    }\n                    break\n                case 2:\n                    secondByte = buf[i + 1]\n                    if ((secondByte & 0xc0) === 0x80) {\n                        tempCodePoint =\n                            ((firstByte & 0x1f) << 0x6) | (secondByte & 0x3f)\n                        if (tempCodePoint > 0x7f) {\n                            codePoint = tempCodePoint\n                        }\n                    }\n                    break\n                case 3:\n                    secondByte = buf[i + 1]\n                    thirdByte = buf[i + 2]\n                    if (\n                        (secondByte & 0xc0) === 0x80 &&\n                        (thirdByte & 0xc0) === 0x80\n                    ) {\n                        tempCodePoint =\n                            ((firstByte & 0xf) << 0xc) |\n                            ((secondByte & 0x3f) << 0x6) |\n                            (thirdByte & 0x3f)\n                        if (\n                            tempCodePoint > 0x7ff &&\n                            (tempCodePoint < 0xd800 || tempCodePoint > 0xdfff)\n                        ) {\n                            codePoint = tempCodePoint\n                        }\n                    }\n                    break\n                case 4:\n                    secondByte = buf[i + 1]\n                    thirdByte = buf[i + 2]\n                    fourthByte = buf[i + 3]\n                    if (\n                        (secondByte & 0xc0) === 0x80 &&\n                        (thirdByte & 0xc0) === 0x80 &&\n                        (fourthByte & 0xc0) === 0x80\n                    ) {\n                        tempCodePoint =\n                            ((firstByte & 0xf) << 0x12) |\n                            ((secondByte & 0x3f) << 0xc) |\n                            ((thirdByte & 0x3f) << 0x6) |\n                            (fourthByte & 0x3f)\n                        if (\n                            tempCodePoint > 0xffff &&\n                            tempCodePoint < 0x110000\n                        ) {\n                            codePoint = tempCodePoint\n                        }\n                    }\n            }\n        }\n\n        if (codePoint === null) {\n            // we did not generate a valid codePoint so insert a\n            // replacement char (U+FFFD) and advance only 1 byte\n            codePoint = 0xfffd\n            bytesPerSequence = 1\n        } else if (codePoint > 0xffff) {\n            // encode to utf16 (surrogate pair dance)\n            codePoint -= 0x10000\n            res.push(((codePoint >>> 10) & 0x3ff) | 0xd800)\n            codePoint = 0xdc00 | (codePoint & 0x3ff)\n        }\n\n        res.push(codePoint)\n        i += bytesPerSequence\n    }\n\n    return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray(codePoints) {\n    var len = codePoints.length\n    if (len <= MAX_ARGUMENTS_LENGTH) {\n        return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n    }\n\n    // Decode in chunks to avoid \"call stack size exceeded\".\n    var res = ''\n    var i = 0\n    while (i < len) {\n        res += String.fromCharCode.apply(\n            String,\n            codePoints.slice(i, (i += MAX_ARGUMENTS_LENGTH)),\n        )\n    }\n    return res\n}\n\nfunction asciiSlice(buf, start, end) {\n    var ret = ''\n    end = Math.min(buf.length, end)\n\n    for (var i = start; i < end; ++i) {\n        ret += String.fromCharCode(buf[i] & 0x7f)\n    }\n    return ret\n}\n\nfunction latin1Slice(buf, start, end) {\n    var ret = ''\n    end = Math.min(buf.length, end)\n\n    for (var i = start; i < end; ++i) {\n        ret += String.fromCharCode(buf[i])\n    }\n    return ret\n}\n\nfunction hexSlice(buf, start, end) {\n    var len = buf.length\n\n    if (!start || start < 0) start = 0\n    if (!end || end < 0 || end > len) end = len\n\n    var out = ''\n    for (var i = start; i < end; ++i) {\n        out += toHex(buf[i])\n    }\n    return out\n}\n\nfunction utf16leSlice(buf, start, end) {\n    var bytes = buf.slice(start, end)\n    var res = ''\n    for (var i = 0; i < bytes.length; i += 2) {\n        res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n    }\n    return res\n}\n\nBuffer.prototype.slice = function slice(start, end) {\n    var len = this.length\n    start = ~~start\n    end = end === undefined ? len : ~~end\n\n    if (start < 0) {\n        start += len\n        if (start < 0) start = 0\n    } else if (start > len) {\n        start = len\n    }\n\n    if (end < 0) {\n        end += len\n        if (end < 0) end = 0\n    } else if (end > len) {\n        end = len\n    }\n\n    if (end < start) end = start\n\n    var newBuf\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        newBuf = this.subarray(start, end)\n        newBuf.__proto__ = Buffer.prototype\n    } else {\n        var sliceLen = end - start\n        newBuf = new Buffer(sliceLen, undefined)\n        for (var i = 0; i < sliceLen; ++i) {\n            newBuf[i] = this[i + start]\n        }\n    }\n\n    return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset(offset, ext, length) {\n    if (offset % 1 !== 0 || offset < 0)\n        throw new RangeError('offset is not uint')\n    if (offset + ext > length)\n        throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE(\n    offset,\n    byteLength,\n    noAssert,\n) {\n    offset = offset | 0\n    byteLength = byteLength | 0\n    if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n    var val = this[offset]\n    var mul = 1\n    var i = 0\n    while (++i < byteLength && (mul *= 0x100)) {\n        val += this[offset + i] * mul\n    }\n\n    return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE(\n    offset,\n    byteLength,\n    noAssert,\n) {\n    offset = offset | 0\n    byteLength = byteLength | 0\n    if (!noAssert) {\n        checkOffset(offset, byteLength, this.length)\n    }\n\n    var val = this[offset + --byteLength]\n    var mul = 1\n    while (byteLength > 0 && (mul *= 0x100)) {\n        val += this[offset + --byteLength] * mul\n    }\n\n    return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 1, this.length)\n    return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 2, this.length)\n    return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 2, this.length)\n    return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 4, this.length)\n\n    return (\n        (this[offset] | (this[offset + 1] << 8) | (this[offset + 2] << 16)) +\n        this[offset + 3] * 0x1000000\n    )\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 4, this.length)\n\n    return (\n        this[offset] * 0x1000000 +\n        ((this[offset + 1] << 16) | (this[offset + 2] << 8) | this[offset + 3])\n    )\n}\n\nBuffer.prototype.readIntLE = function readIntLE(offset, byteLength, noAssert) {\n    offset = offset | 0\n    byteLength = byteLength | 0\n    if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n    var val = this[offset]\n    var mul = 1\n    var i = 0\n    while (++i < byteLength && (mul *= 0x100)) {\n        val += this[offset + i] * mul\n    }\n    mul *= 0x80\n\n    if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n    return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE(offset, byteLength, noAssert) {\n    offset = offset | 0\n    byteLength = byteLength | 0\n    if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n    var i = byteLength\n    var mul = 1\n    var val = this[offset + --i]\n    while (i > 0 && (mul *= 0x100)) {\n        val += this[offset + --i] * mul\n    }\n    mul *= 0x80\n\n    if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n    return val\n}\n\nBuffer.prototype.readInt8 = function readInt8(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 1, this.length)\n    if (!(this[offset] & 0x80)) return this[offset]\n    return (0xff - this[offset] + 1) * -1\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 2, this.length)\n    var val = this[offset] | (this[offset + 1] << 8)\n    return val & 0x8000 ? val | 0xffff0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 2, this.length)\n    var val = this[offset + 1] | (this[offset] << 8)\n    return val & 0x8000 ? val | 0xffff0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 4, this.length)\n\n    return (\n        this[offset] |\n        (this[offset + 1] << 8) |\n        (this[offset + 2] << 16) |\n        (this[offset + 3] << 24)\n    )\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 4, this.length)\n\n    return (\n        (this[offset] << 24) |\n        (this[offset + 1] << 16) |\n        (this[offset + 2] << 8) |\n        this[offset + 3]\n    )\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 4, this.length)\n    return ieee754read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 4, this.length)\n    return ieee754read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 8, this.length)\n    return ieee754read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {\n    if (!noAssert) checkOffset(offset, 8, this.length)\n    return ieee754read(this, offset, false, 52, 8)\n}\n\nfunction checkInt(buf, value, offset, ext, max, min) {\n    if (!internalIsBuffer(buf))\n        throw new TypeError('\"buffer\" argument must be a Buffer instance')\n    if (value > max || value < min)\n        throw new RangeError('\"value\" argument is out of bounds')\n    if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE(\n    value,\n    offset,\n    byteLength,\n    noAssert,\n) {\n    value = +value\n    offset = offset | 0\n    byteLength = byteLength | 0\n    if (!noAssert) {\n        var maxBytes = Math.pow(2, 8 * byteLength) - 1\n        checkInt(this, value, offset, byteLength, maxBytes, 0)\n    }\n\n    var mul = 1\n    var i = 0\n    this[offset] = value & 0xff\n    while (++i < byteLength && (mul *= 0x100)) {\n        this[offset + i] = (value / mul) & 0xff\n    }\n\n    return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE(\n    value,\n    offset,\n    byteLength,\n    noAssert,\n) {\n    value = +value\n    offset = offset | 0\n    byteLength = byteLength | 0\n    if (!noAssert) {\n        var maxBytes = Math.pow(2, 8 * byteLength) - 1\n        checkInt(this, value, offset, byteLength, maxBytes, 0)\n    }\n\n    var i = byteLength - 1\n    var mul = 1\n    this[offset + i] = value & 0xff\n    while (--i >= 0 && (mul *= 0x100)) {\n        this[offset + i] = (value / mul) & 0xff\n    }\n\n    return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n    if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n    this[offset] = value & 0xff\n    return offset + 1\n}\n\nfunction objectWriteUInt16(buf, value, offset, littleEndian) {\n    if (value < 0) value = 0xffff + value + 1\n    for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n        buf[offset + i] =\n            (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n            ((littleEndian ? i : 1 - i) * 8)\n    }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE(\n    value,\n    offset,\n    noAssert,\n) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value & 0xff\n        this[offset + 1] = value >>> 8\n    } else {\n        objectWriteUInt16(this, value, offset, true)\n    }\n    return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE(\n    value,\n    offset,\n    noAssert,\n) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value >>> 8\n        this[offset + 1] = value & 0xff\n    } else {\n        objectWriteUInt16(this, value, offset, false)\n    }\n    return offset + 2\n}\n\nfunction objectWriteUInt32(buf, value, offset, littleEndian) {\n    if (value < 0) value = 0xffffffff + value + 1\n    for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n        buf[offset + i] = (value >>> ((littleEndian ? i : 3 - i) * 8)) & 0xff\n    }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE(\n    value,\n    offset,\n    noAssert,\n) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset + 3] = value >>> 24\n        this[offset + 2] = value >>> 16\n        this[offset + 1] = value >>> 8\n        this[offset] = value & 0xff\n    } else {\n        objectWriteUInt32(this, value, offset, true)\n    }\n    return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE(\n    value,\n    offset,\n    noAssert,\n) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value >>> 24\n        this[offset + 1] = value >>> 16\n        this[offset + 2] = value >>> 8\n        this[offset + 3] = value & 0xff\n    } else {\n        objectWriteUInt32(this, value, offset, false)\n    }\n    return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE(\n    value,\n    offset,\n    byteLength,\n    noAssert,\n) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) {\n        var limit = Math.pow(2, 8 * byteLength - 1)\n\n        checkInt(this, value, offset, byteLength, limit - 1, -limit)\n    }\n\n    var i = 0\n    var mul = 1\n    var sub = 0\n    this[offset] = value & 0xff\n    while (++i < byteLength && (mul *= 0x100)) {\n        if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n            sub = 1\n        }\n        this[offset + i] = (((value / mul) >> 0) - sub) & 0xff\n    }\n\n    return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE(\n    value,\n    offset,\n    byteLength,\n    noAssert,\n) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) {\n        var limit = Math.pow(2, 8 * byteLength - 1)\n\n        checkInt(this, value, offset, byteLength, limit - 1, -limit)\n    }\n\n    var i = byteLength - 1\n    var mul = 1\n    var sub = 0\n    this[offset + i] = value & 0xff\n    while (--i >= 0 && (mul *= 0x100)) {\n        if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n            sub = 1\n        }\n        this[offset + i] = (((value / mul) >> 0) - sub) & 0xff\n    }\n\n    return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n    if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n    if (value < 0) value = 0xff + value + 1\n    this[offset] = value & 0xff\n    return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value & 0xff\n        this[offset + 1] = value >>> 8\n    } else {\n        objectWriteUInt16(this, value, offset, true)\n    }\n    return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value >>> 8\n        this[offset + 1] = value & 0xff\n    } else {\n        objectWriteUInt16(this, value, offset, false)\n    }\n    return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value & 0xff\n        this[offset + 1] = value >>> 8\n        this[offset + 2] = value >>> 16\n        this[offset + 3] = value >>> 24\n    } else {\n        objectWriteUInt32(this, value, offset, true)\n    }\n    return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {\n    value = +value\n    offset = offset | 0\n    if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n    if (value < 0) value = 0xffffffff + value + 1\n    if (Buffer.TYPED_ARRAY_SUPPORT) {\n        this[offset] = value >>> 24\n        this[offset + 1] = value >>> 16\n        this[offset + 2] = value >>> 8\n        this[offset + 3] = value & 0xff\n    } else {\n        objectWriteUInt32(this, value, offset, false)\n    }\n    return offset + 4\n}\n\nfunction checkIEEE754(buf, value, offset, ext, max, min) {\n    if (offset + ext > buf.length) throw new RangeError('Index out of range')\n    if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat(buf, value, offset, littleEndian, noAssert) {\n    if (!noAssert) {\n        checkIEEE754(\n            buf,\n            value,\n            offset,\n            4,\n            3.4028234663852886e38,\n            -3.4028234663852886e38,\n        )\n    }\n    ieee754write(buf, value, offset, littleEndian, 23, 4)\n    return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {\n    return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {\n    return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble(buf, value, offset, littleEndian, noAssert) {\n    if (!noAssert) {\n        checkIEEE754(\n            buf,\n            value,\n            offset,\n            8,\n            1.7976931348623157e308,\n            -1.7976931348623157e308,\n        )\n    }\n    ieee754write(buf, value, offset, littleEndian, 52, 8)\n    return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE(\n    value,\n    offset,\n    noAssert,\n) {\n    return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE(\n    value,\n    offset,\n    noAssert,\n) {\n    return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy(target, targetStart, start, end) {\n    if (!start) start = 0\n    if (!end && end !== 0) end = this.length\n    if (targetStart >= target.length) targetStart = target.length\n    if (!targetStart) targetStart = 0\n    if (end > 0 && end < start) end = start\n\n    // Copy 0 bytes; we're done\n    if (end === start) return 0\n    if (target.length === 0 || this.length === 0) return 0\n\n    // Fatal error conditions\n    if (targetStart < 0) {\n        throw new RangeError('targetStart out of bounds')\n    }\n    if (start < 0 || start >= this.length)\n        throw new RangeError('sourceStart out of bounds')\n    if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n    // Are we oob?\n    if (end > this.length) end = this.length\n    if (target.length - targetStart < end - start) {\n        end = target.length - targetStart + start\n    }\n\n    var len = end - start\n    var i\n\n    if (this === target && start < targetStart && targetStart < end) {\n        // descending copy from end\n        for (i = len - 1; i >= 0; --i) {\n            target[i + targetStart] = this[i + start]\n        }\n    } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n        // ascending copy from start\n        for (i = 0; i < len; ++i) {\n            target[i + targetStart] = this[i + start]\n        }\n    } else {\n        Uint8Array.prototype.set.call(\n            target,\n            this.subarray(start, start + len),\n            targetStart,\n        )\n    }\n\n    return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill(val, start, end, encoding) {\n    // Handle string cases:\n    if (typeof val === 'string') {\n        if (typeof start === 'string') {\n            encoding = start\n            start = 0\n            end = this.length\n        } else if (typeof end === 'string') {\n            encoding = end\n            end = this.length\n        }\n        if (val.length === 1) {\n            var code = val.charCodeAt(0)\n            if (code < 256) {\n                val = code\n            }\n        }\n        if (encoding !== undefined && typeof encoding !== 'string') {\n            throw new TypeError('encoding must be a string')\n        }\n        if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n            throw new TypeError('Unknown encoding: ' + encoding)\n        }\n    } else if (typeof val === 'number') {\n        val = val & 255\n    }\n\n    // Invalid ranges are not set to a default, so can range check early.\n    if (start < 0 || this.length < start || this.length < end) {\n        throw new RangeError('Out of range index')\n    }\n\n    if (end <= start) {\n        return this\n    }\n\n    start = start >>> 0\n    end = end === undefined ? this.length : end >>> 0\n\n    if (!val) val = 0\n\n    var i\n    if (typeof val === 'number') {\n        for (i = start; i < end; ++i) {\n            this[i] = val\n        }\n    } else {\n        var bytes = internalIsBuffer(val)\n            ? val\n            : utf8ToBytes(new Buffer(val, encoding).toString())\n        var len = bytes.length\n        for (i = 0; i < end - start; ++i) {\n            this[i + start] = bytes[i % len]\n        }\n    }\n\n    return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean(str) {\n    // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n    str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n    // Node converts strings with length < 2 to ''\n    if (str.length < 2) return ''\n    // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n    while (str.length % 4 !== 0) {\n        str = str + '='\n    }\n    return str\n}\n\nfunction stringtrim(str) {\n    if (str.trim) return str.trim()\n    return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex(n) {\n    if (n < 16) return '0' + n.toString(16)\n    return n.toString(16)\n}\n\nfunction utf8ToBytes(string, units) {\n    units = units || Infinity\n    var codePoint\n    var length = string.length\n    var leadSurrogate = null\n    var bytes = []\n\n    for (var i = 0; i < length; ++i) {\n        codePoint = string.charCodeAt(i)\n\n        // is surrogate component\n        if (codePoint > 0xd7ff && codePoint < 0xe000) {\n            // last char was a lead\n            if (!leadSurrogate) {\n                // no lead yet\n                if (codePoint > 0xdbff) {\n                    // unexpected trail\n                    if ((units -= 3) > -1) bytes.push(0xef, 0xbf, 0xbd)\n                    continue\n                } else if (i + 1 === length) {\n                    // unpaired lead\n                    if ((units -= 3) > -1) bytes.push(0xef, 0xbf, 0xbd)\n                    continue\n                }\n\n                // valid lead\n                leadSurrogate = codePoint\n\n                continue\n            }\n\n            // 2 leads in a row\n            if (codePoint < 0xdc00) {\n                if ((units -= 3) > -1) bytes.push(0xef, 0xbf, 0xbd)\n                leadSurrogate = codePoint\n                continue\n            }\n\n            // valid surrogate pair\n            codePoint =\n                (((leadSurrogate - 0xd800) << 10) | (codePoint - 0xdc00)) +\n                0x10000\n        } else if (leadSurrogate) {\n            // valid bmp char, but last char was a lead\n            if ((units -= 3) > -1) bytes.push(0xef, 0xbf, 0xbd)\n        }\n\n        leadSurrogate = null\n\n        // encode utf8\n        if (codePoint < 0x80) {\n            if ((units -= 1) < 0) break\n            bytes.push(codePoint)\n        } else if (codePoint < 0x800) {\n            if ((units -= 2) < 0) break\n            bytes.push((codePoint >> 0x6) | 0xc0, (codePoint & 0x3f) | 0x80)\n        } else if (codePoint < 0x10000) {\n            if ((units -= 3) < 0) break\n            bytes.push(\n                (codePoint >> 0xc) | 0xe0,\n                ((codePoint >> 0x6) & 0x3f) | 0x80,\n                (codePoint & 0x3f) | 0x80,\n            )\n        } else if (codePoint < 0x110000) {\n            if ((units -= 4) < 0) break\n            bytes.push(\n                (codePoint >> 0x12) | 0xf0,\n                ((codePoint >> 0xc) & 0x3f) | 0x80,\n                ((codePoint >> 0x6) & 0x3f) | 0x80,\n                (codePoint & 0x3f) | 0x80,\n            )\n        } else {\n            throw new Error('Invalid code point')\n        }\n    }\n\n    return bytes\n}\n\nfunction asciiToBytes(str) {\n    var byteArray = []\n    for (var i = 0; i < str.length; ++i) {\n        // Node's code seems to be doing this and not & 0x7F..\n        byteArray.push(str.charCodeAt(i) & 0xff)\n    }\n    return byteArray\n}\n\nfunction utf16leToBytes(str, units) {\n    var c, hi, lo\n    var byteArray = []\n    for (var i = 0; i < str.length; ++i) {\n        if ((units -= 2) < 0) break\n\n        c = str.charCodeAt(i)\n        hi = c >> 8\n        lo = c % 256\n        byteArray.push(lo)\n        byteArray.push(hi)\n    }\n\n    return byteArray\n}\n\nfunction base64ToBytes(str) {\n    return base64toByteArray(base64clean(str))\n}\n\nfunction blitBuffer(src, dst, offset, length) {\n    for (var i = 0; i < length; ++i) {\n        if (i + offset >= dst.length || i >= src.length) break\n        dst[i + offset] = src[i]\n    }\n    return i\n}\n\nfunction isnan(val) {\n    return val !== val // eslint-disable-line no-self-compare\n}\n\n// the following is from is-buffer, also by Feross Aboukhadijeh and with same lisence\n// The _isBuffer check is for Safari 5-7 support, because it's missing\n// Object.prototype.constructor. Remove this eventually\nfunction isBuffer(obj) {\n    return (\n        obj != null &&\n        (!!obj._isBuffer || isFastBuffer(obj) || isSlowBuffer(obj))\n    )\n}\n\nfunction isFastBuffer(obj) {\n    return (\n        !!obj.constructor &&\n        typeof obj.constructor.isBuffer === 'function' &&\n        obj.constructor.isBuffer(obj)\n    )\n}\n\n// For Node v0.10 support. Remove this eventually.\nfunction isSlowBuffer(obj) {\n    return (\n        typeof obj.readFloatLE === 'function' &&\n        typeof obj.slice === 'function' &&\n        isFastBuffer(obj.slice(0, 0))\n    )\n}\n\nfunction ieee754read(buffer, offset, isLE, mLen, nBytes) {\n    var e, m\n    var eLen = nBytes * 8 - mLen - 1\n    var eMax = (1 << eLen) - 1\n    var eBias = eMax >> 1\n    var nBits = -7\n    var i = isLE ? nBytes - 1 : 0\n    var d = isLE ? -1 : 1\n    var s = buffer[offset + i]\n\n    i += d\n\n    e = s & ((1 << -nBits) - 1)\n    s >>= -nBits\n    nBits += eLen\n    for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n    m = e & ((1 << -nBits) - 1)\n    e >>= -nBits\n    nBits += mLen\n    for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n    if (e === 0) {\n        e = 1 - eBias\n    } else if (e === eMax) {\n        return m ? NaN : (s ? -1 : 1) * Infinity\n    } else {\n        m = m + Math.pow(2, mLen)\n        e = e - eBias\n    }\n    return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nfunction ieee754write(buffer, value, offset, isLE, mLen, nBytes) {\n    var e, m, c\n    var eLen = nBytes * 8 - mLen - 1\n    var eMax = (1 << eLen) - 1\n    var eBias = eMax >> 1\n    var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0\n    var i = isLE ? 0 : nBytes - 1\n    var d = isLE ? 1 : -1\n    var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n    value = Math.abs(value)\n\n    if (isNaN(value) || value === Infinity) {\n        m = isNaN(value) ? 1 : 0\n        e = eMax\n    } else {\n        e = Math.floor(Math.log(value) / Math.LN2)\n        if (value * (c = Math.pow(2, -e)) < 1) {\n            e--\n            c *= 2\n        }\n        if (e + eBias >= 1) {\n            value += rt / c\n        } else {\n            value += rt * Math.pow(2, 1 - eBias)\n        }\n        if (value * c >= 2) {\n            e++\n            c /= 2\n        }\n\n        if (e + eBias >= eMax) {\n            m = 0\n            e = eMax\n        } else if (e + eBias >= 1) {\n            m = (value * c - 1) * Math.pow(2, mLen)\n            e = e + eBias\n        } else {\n            m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n            e = 0\n        }\n    }\n\n    for (\n        ;\n        mLen >= 8;\n        buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8\n    ) {}\n\n    e = (e << mLen) | m\n    eLen += mLen\n    for (\n        ;\n        eLen > 0;\n        buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8\n    ) {}\n\n    buffer[offset + i - d] |= s * 128\n}\n", "// EVENT PHASE CONSTANTS\n// https://developer.mozilla.org/en-US/docs/Web/API/Event/eventPhase\nconst NONE = 0;\nconst CAPTURING_PHASE = 1;\nconst AT_TARGET = 2;\nconst BUBBLING_PHASE = 3;\n\nexport function isEventTarget(value: any): value is EventTarget {\n\treturn (\n\t\tvalue != null &&\n\t\ttypeof value.addEventListener === \"function\" &&\n\t\ttypeof value.removeEventListener === \"function\" &&\n\t\ttypeof value.dispatchEvent === \"function\"\n\t);\n}\n\nfunction setEventProperty<T extends keyof Event>(\n\tev: Event,\n\tkey: T,\n\tvalue: Event[T],\n): void {\n\tObject.defineProperty(ev, key, {value, writable: false, configurable: true});\n}\n\nfunction isListenerOrListenerObject(\n\tvalue: unknown,\n): value is EventListenerOrEventListenerObject {\n\treturn (\n\t\ttypeof value === \"function\" ||\n\t\t(value !== null &&\n\t\t\ttypeof value === \"object\" &&\n\t\t\ttypeof (value as any).handleEvent === \"function\")\n\t);\n}\n\nfunction normalizeListenerOptions(\n\toptions: AddEventListenerOptions | boolean | null | undefined,\n): AddEventListenerOptions {\n\tif (typeof options === \"boolean\") {\n\t\treturn {capture: options};\n\t} else if (options == null) {\n\t\treturn {};\n\t}\n\n\treturn options;\n}\n\nconst _parent = Symbol.for(\"CustomEventTarget.parent\");\nconst _listeners = Symbol.for(\"CustomEventTarget.listeners\");\nconst _delegates = Symbol.for(\"CustomEventTarget.delegates\");\nconst _dispatchEventOnSelf = Symbol.for(\"CustomEventTarget.dispatchSelf\");\n\ninterface EventListenerRecord {\n\ttype: string;\n\t// listener is the original value passed to addEventListener, callback is the\n\t// actual function we call\n\tlistener: EventListenerOrEventListenerObject;\n\tcallback: EventListener;\n\toptions: AddEventListenerOptions;\n}\n\nexport class CustomEventTarget<TParent extends CustomEventTarget<TParent> = any>\n\timplements EventTarget\n{\n\tdeclare static dispatchEventOnSelf: typeof _dispatchEventOnSelf;\n\tdeclare [_parent]: TParent | null;\n\tdeclare [_listeners]: Array<EventListenerRecord>;\n\tdeclare [_delegates]: Set<EventTarget>;\n\tconstructor(parent: TParent | null = null) {\n\t\tthis[_parent] = parent;\n\t\tthis[_listeners] = [];\n\t\tthis[_delegates] = new Set<EventTarget>();\n\t}\n\n\taddEventListener(\n\t\ttype: string,\n\t\tlistener: EventListenerOrEventListenerObject | null,\n\t\toptions?: boolean | AddEventListenerOptions,\n\t): void {\n\t\tif (!isListenerOrListenerObject(listener)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst listeners = this[_listeners];\n\t\toptions = normalizeListenerOptions(options);\n\t\tlet callback: EventListener;\n\t\tif (typeof listener === \"function\") {\n\t\t\tcallback = listener;\n\t\t} else {\n\t\t\tcallback = (ev: Event) => listener.handleEvent(ev);\n\t\t}\n\t\tconst record: EventListenerRecord = {type, listener, callback, options};\n\n\t\tif (options.once) {\n\t\t\trecord.callback = function (this: any) {\n\t\t\t\tconst i = listeners.indexOf(record);\n\t\t\t\tif (i !== -1) {\n\t\t\t\t\tlisteners.splice(i, 1);\n\t\t\t\t}\n\n\t\t\t\treturn callback.apply(this, arguments as any);\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\tlisteners.some(\n\t\t\t\t(record1) =>\n\t\t\t\t\trecord.type === record1.type &&\n\t\t\t\t\trecord.listener === record1.listener &&\n\t\t\t\t\t!record.options.capture === !record1.options.capture,\n\t\t\t)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tlisteners.push(record);\n\n\t\tfor (const delegate of this[_delegates]) {\n\t\t\tdelegate.addEventListener(type, record.callback, record.options);\n\t\t}\n\t}\n\n\tremoveEventListener(\n\t\ttype: string,\n\t\tlistener: EventListenerOrEventListenerObject | null,\n\t\toptions?: EventListenerOptions | boolean,\n\t): void {\n\t\tconst listeners = this[_listeners];\n\t\tif (listeners == null || !isListenerOrListenerObject(listener)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst options1 = normalizeListenerOptions(options);\n\t\tconst i = listeners.findIndex(\n\t\t\t(record) =>\n\t\t\t\trecord.type === type &&\n\t\t\t\trecord.listener === listener &&\n\t\t\t\t!record.options.capture === !options1.capture,\n\t\t);\n\n\t\tif (i === -1) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst record = listeners[i];\n\t\tlisteners.splice(i, 1);\n\n\t\tfor (const delegate of this[_delegates]) {\n\t\t\tdelegate.removeEventListener(\n\t\t\t\trecord.type,\n\t\t\t\trecord.callback,\n\t\t\t\trecord.options,\n\t\t\t);\n\t\t}\n\t}\n\n\tdispatchEvent(ev: Event): boolean {\n\t\tconst path: Array<CustomEventTarget> = [];\n\t\tfor (let parent = this[_parent]; parent; parent = parent[_parent]) {\n\t\t\tpath.push(parent);\n\t\t}\n\n\t\tlet cancelBubble = false;\n\t\tlet immediateCancelBubble = false;\n\t\tconst stopPropagation = ev.stopPropagation;\n\t\tsetEventProperty(ev, \"stopPropagation\", () => {\n\t\t\tcancelBubble = true;\n\t\t\treturn stopPropagation.call(ev);\n\t\t});\n\n\t\tconst stopImmediatePropagation = ev.stopImmediatePropagation;\n\t\tsetEventProperty(ev, \"stopImmediatePropagation\", () => {\n\t\t\timmediateCancelBubble = true;\n\t\t\treturn stopImmediatePropagation.call(ev);\n\t\t});\n\t\tsetEventProperty(ev, \"target\", this);\n\n\t\t// The only possible errors in this block are errors thrown by callbacks,\n\t\t// and dispatchEvent will only log these errors rather than throwing them.\n\t\t// Therefore, we place all code in a try block, log errors in the catch\n\t\t// block, and use an unsafe return statement in the finally block.\n\t\t//\n\t\t// Each early return within the try block returns true because while the\n\t\t// return value is overridden in the finally block, TypeScript\n\t\t// (justifiably) does not recognize the unsafe return statement.\n\t\ttry {\n\t\t\tsetEventProperty(ev, \"eventPhase\", CAPTURING_PHASE);\n\t\t\tfor (let i = path.length - 1; i >= 0; i--) {\n\t\t\t\tconst target = path[i];\n\t\t\t\tconst listeners = target[_listeners];\n\t\t\t\tsetEventProperty(ev, \"currentTarget\", target);\n\t\t\t\tfor (let i = 0; i < listeners.length; i++) {\n\t\t\t\t\tconst record = listeners[i];\n\t\t\t\t\tif (record.type === ev.type && record.options.capture) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\trecord.callback.call(target, ev);\n\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (immediateCancelBubble) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (cancelBubble) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t{\n\t\t\t\tsetEventProperty(ev, \"eventPhase\", AT_TARGET);\n\t\t\t\tsetEventProperty(ev, \"currentTarget\", this);\n\n\t\t\t\tthis[_dispatchEventOnSelf](ev);\n\t\t\t\tif (immediateCancelBubble) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tconst listeners = this[_listeners];\n\t\t\t\tfor (let i = 0; i < listeners.length; i++) {\n\t\t\t\t\tconst record = listeners[i];\n\t\t\t\t\tif (record.type === ev.type) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\trecord.callback.call(this, ev);\n\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (immediateCancelBubble) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (cancelBubble) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (ev.bubbles) {\n\t\t\t\tsetEventProperty(ev, \"eventPhase\", BUBBLING_PHASE);\n\t\t\t\tfor (let i = 0; i < path.length; i++) {\n\t\t\t\t\tconst target = path[i];\n\t\t\t\t\tsetEventProperty(ev, \"currentTarget\", target);\n\t\t\t\t\tconst listeners = target[_listeners];\n\t\t\t\t\tfor (let i = 0; i < listeners.length; i++) {\n\t\t\t\t\t\tconst record = listeners[i];\n\t\t\t\t\t\tif (record.type === ev.type && !record.options.capture) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\trecord.callback.call(target, ev);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (immediateCancelBubble) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (cancelBubble) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} finally {\n\t\t\tsetEventProperty(ev, \"eventPhase\", NONE);\n\t\t\tsetEventProperty(ev, \"currentTarget\", null);\n\t\t\t// eslint-disable-next-line no-unsafe-finally\n\t\t\treturn !ev.defaultPrevented;\n\t\t}\n\t}\n\n\t[_dispatchEventOnSelf](_ev: Event): void {}\n}\n\nCustomEventTarget.dispatchEventOnSelf = _dispatchEventOnSelf;\n\nexport function addEventTargetDelegates<T extends CustomEventTarget>(\n\ttarget: T,\n\tdelegates: Array<unknown>,\n\tinclude: (target1: T) => boolean = (target1) => target === target1,\n): void {\n\tconst delegates1 = delegates.filter(isEventTarget);\n\tfor (\n\t\tlet target1: T | null = target;\n\t\ttarget1 && include(target1);\n\t\ttarget1 = target1[_parent]\n\t) {\n\t\tfor (let i = 0; i < delegates1.length; i++) {\n\t\t\tconst delegate = delegates1[i];\n\t\t\tif (target1[_delegates].has(delegate)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\ttarget1[_delegates].add(delegate);\n\t\t\tfor (const record of target1[_listeners]) {\n\t\t\t\tdelegate.addEventListener(record.type, record.callback, record.options);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function removeEventTargetDelegates<T extends CustomEventTarget>(\n\ttarget: T,\n\tdelegates: Array<unknown>,\n\tinclude: (target1: T) => boolean = (target1) => target === target1,\n): void {\n\tconst delegates1 = delegates.filter(isEventTarget);\n\tfor (\n\t\tlet target1: T | null = target;\n\t\ttarget1 && include(target1);\n\t\ttarget1 = target1[_parent]\n\t) {\n\t\tfor (let i = 0; i < delegates1.length; i++) {\n\t\t\tconst delegate = delegates1[i];\n\t\t\tif (!target1[_delegates].has(delegate)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\ttarget1[_delegates].delete(delegate);\n\t\t\tfor (const record of target1[_listeners]) {\n\t\t\t\tdelegate.removeEventListener(\n\t\t\t\t\trecord.type,\n\t\t\t\t\trecord.callback,\n\t\t\t\t\trecord.options,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function clearEventListeners(target: CustomEventTarget): void {\n\tconst listeners = target[_listeners];\n\tconst delegates = target[_delegates];\n\tfor (let i = 0; i < listeners.length; i++) {\n\t\tconst record = listeners[i];\n\t\tfor (const delegate of delegates) {\n\t\t\tdelegate.removeEventListener(\n\t\t\t\trecord.type,\n\t\t\t\trecord.callback,\n\t\t\t\trecord.options,\n\t\t\t);\n\t\t}\n\t}\n\n\tlisteners.length = 0;\n\tdelegates.clear();\n}\n", "export function wrap<T>(value: Array<T> | T | undefined): Array<T> {\n\treturn value === undefined ? [] : Array.isArray(value) ? value : [value];\n}\n\nexport function unwrap<T>(arr: Array<T>): Array<T> | T | undefined {\n\treturn arr.length === 0 ? undefined : arr.length === 1 ? arr[0] : arr;\n}\n\nexport type NonStringIterable<T> = Iterable<T> & object;\n\n/**\n * Ensures a value is an array.\n *\n * This function does the same thing as wrap() above except it handles nulls\n * and iterables, so it is appropriate for wrapping user-provided element\n * children.\n */\nexport function arrayify<T>(\n\tvalue: NonStringIterable<T> | T | null | undefined,\n): Array<T> {\n\treturn value == null\n\t\t? []\n\t\t: Array.isArray(value)\n\t\t\t? value\n\t\t\t: typeof value === \"string\" ||\n\t\t\t\t  typeof (value as any)[Symbol.iterator] !== \"function\"\n\t\t\t\t? [value as T]\n\t\t\t\t: [...(value as NonStringIterable<T>)];\n}\n\nexport function isIteratorLike(\n\tvalue: any,\n): value is Iterator<unknown> | AsyncIterator<unknown> {\n\treturn value != null && typeof value.next === \"function\";\n}\n\nexport function isPromiseLike(value: any): value is PromiseLike<unknown> {\n\treturn value != null && typeof value.then === \"function\";\n}\n\ntype Deferred<T = unknown> = {\n\tresolve: (value: T | PromiseLike<T>) => void;\n\treject: (reason?: unknown) => void;\n};\n\ntype RaceRecord = {\n\tdeferreds: Set<Deferred>;\n\tsettled: boolean;\n};\n\nfunction createRaceRecord(contender: PromiseLike<unknown>): RaceRecord {\n\tconst deferreds = new Set<Deferred>();\n\tconst record = {deferreds, settled: false};\n\n\t// This call to `then` happens once for the lifetime of the value.\n\tPromise.resolve(contender).then(\n\t\t(value) => {\n\t\t\tfor (const {resolve} of deferreds) {\n\t\t\t\tresolve(value);\n\t\t\t}\n\n\t\t\tdeferreds.clear();\n\t\t\trecord.settled = true;\n\t\t},\n\t\t(err) => {\n\t\t\tfor (const {reject} of deferreds) {\n\t\t\t\treject(err);\n\t\t\t}\n\n\t\t\tdeferreds.clear();\n\t\t\trecord.settled = true;\n\t\t},\n\t);\n\treturn record;\n}\n\n// Promise.race is memory unsafe. This is alternative which is. See:\n// https://github.com/nodejs/node/issues/17469#issuecomment-685235106\n// Keys are the values passed to race.\n// Values are a record of data containing a set of deferreds and whether the\n// value has settled.\nconst wm = new WeakMap<object, RaceRecord>();\nexport function safeRace<T>(\n\tcontenders: Iterable<T | PromiseLike<T>>,\n): Promise<Awaited<T>> {\n\tlet deferred: Deferred;\n\tconst result = new Promise((resolve, reject) => {\n\t\tdeferred = {resolve, reject};\n\t\tfor (const contender of contenders) {\n\t\t\tif (!isPromiseLike(contender)) {\n\t\t\t\t// If the contender is a not a then-able, attempting to use it as a key\n\t\t\t\t// in the weakmap would throw an error. Luckily, it is safe to call\n\t\t\t\t// `Promise.resolve(contender).then` on regular values multiple\n\t\t\t\t// times because the promise fulfills immediately.\n\t\t\t\tPromise.resolve(contender).then(resolve, reject);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet record = wm.get(contender);\n\t\t\tif (record === undefined) {\n\t\t\t\trecord = createRaceRecord(contender);\n\t\t\t\trecord.deferreds.add(deferred);\n\t\t\t\twm.set(contender, record);\n\t\t\t} else if (record.settled) {\n\t\t\t\t// If the value has settled, it is safe to call\n\t\t\t\t// `Promise.resolve(contender).then` on it.\n\t\t\t\tPromise.resolve(contender).then(resolve, reject);\n\t\t\t} else {\n\t\t\t\trecord.deferreds.add(deferred);\n\t\t\t}\n\t\t}\n\t});\n\n\t// The finally callback executes when any value settles, preventing any of\n\t// the unresolved values from retaining a reference to the resolved value.\n\treturn result.finally(() => {\n\t\tfor (const contender of contenders) {\n\t\t\tif (isPromiseLike(contender)) {\n\t\t\t\tconst record = wm.get(contender);\n\t\t\t\tif (record) {\n\t\t\t\t\trecord.deferreds.delete(deferred);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}) as Promise<Awaited<T>>;\n}\n", "import {\n\tCustomEventTarget,\n\taddEventTargetDelegates,\n\tclearEventListeners,\n\tremoveEventTargetDelegates,\n} from \"./event-target.js\";\nimport {\n\tarrayify,\n\tisIteratorLike,\n\tisPromiseLike,\n\tsafeRace,\n\tunwrap,\n\twrap,\n} from \"./_utils.js\";\n\nconst NOOP = (): undefined => {};\n\n/**\n * A type which represents all valid values for an element tag.\n */\nexport type Tag = string | symbol | Component;\n\nfunction getTagName(tag: Tag): string {\n\treturn typeof tag === \"function\"\n\t\t? tag.name || \"Anonymous\"\n\t\t: typeof tag === \"string\"\n\t\t\t? tag\n\t\t\t: // tag is symbol, using else branch to avoid typeof tag === \"symbol\"\n\t\t\t\ttag.description || \"Anonymous\";\n}\n\n/**\n * A helper type to map the tag of an element to its expected props.\n *\n * @template TTag - The tag associated with the props. Can be a string, symbol\n * or a component function.\n */\nexport type TagProps<TTag extends Tag> = TTag extends string\n\t? JSX.IntrinsicElements[TTag]\n\t: TTag extends Component<infer TProps>\n\t\t? TProps & JSX.IntrinsicAttributes\n\t\t: Record<string, unknown> & JSX.IntrinsicAttributes;\n\n/**\n * Describes all valid values of an element tree, excluding iterables.\n *\n * Arbitrary objects can also be safely rendered, but will be converted to a\n * string using the toString() method. We exclude them from this type to catch\n * potential mistakes.\n */\nexport type Child = Element | string | number | boolean | null | undefined;\n\n/**\n * An arbitrarily nested iterable of Child values.\n *\n * We use a recursive interface here rather than making the Children type\n * directly recursive because recursive type aliases were added in TypeScript\n * 3.7.\n *\n * You should avoid referencing this type directly, as it is mainly exported to\n * prevent TypeScript errors.\n */\nexport interface ChildIterable extends Iterable<Child | ChildIterable> {}\n\n/**\n * Describes all valid values for an element tree, including arbitrarily nested\n * iterables of such values.\n *\n * This type can be used to represent the type of the children prop for an\n * element or the return/yield type of a component.\n */\nexport type Children = Child | ChildIterable;\n\n/**\n * Represents all functions which can be used as a component.\n *\n * @template [TProps=*] - The expected props for the component.\n */\nexport type Component<TProps extends Record<string, unknown> = any> = (\n\tthis: Context<TProps>,\n\tprops: TProps,\n\tctx: Context<TProps>,\n) =>\n\t| Children\n\t| PromiseLike<Children>\n\t// The return type of iterators must include void because TypeScript will\n\t// infer generators which return implicitly as having a void return type.\n\t| Iterator<Children, Children | void, any>\n\t| AsyncIterator<Children, Children | void, any>;\n\n/*** SPECIAL TAGS ***/\n/**\n * A special tag for grouping multiple children within the same parent.\n *\n * All non-string iterables which appear in the element tree are implicitly\n * wrapped in a fragment element.\n *\n * This tag is just the empty string, and you can use the empty string in\n * createElement calls or transpiler options directly to avoid having to\n * reference this export.\n */\nexport const Fragment = \"\";\nexport type Fragment = typeof Fragment;\n\n// TODO: We assert the following symbol tags as Components because TypeScript\n// support for symbol tags in JSX doesn't exist yet.\n// https://github.com/microsoft/TypeScript/issues/38367\n\n/**\n * A special tag for rendering into a new root node via a root prop.\n *\n * This tag is useful for creating element trees with multiple roots, for\n * things like modals or tooltips.\n *\n * Renderer.prototype.render() implicitly wraps top-level in a Portal element\n * with the root set to the second argument passed in.\n */\nexport const Portal = Symbol.for(\"crank.Portal\") as unknown as Component<{\n\troot?: object;\n}> &\n\tsymbol;\nexport type Portal = typeof Portal;\n\n/**\n * A special tag which preserves whatever was previously rendered in the\n * element's position.\n *\n * Copy elements are useful for when you want to prevent a subtree from\n * rerendering as a performance optimization. Copy elements can also be keyed,\n * in which case the previously rendered keyed element will be copied.\n */\nexport const Copy = Symbol.for(\"crank.Copy\") as unknown as Component<{}> &\n\tsymbol;\nexport type Copy = typeof Copy;\n\n/**\n * A special tag for rendering text nodes.\n *\n * Strings in the element tree are implicitly wrapped in a Text element with\n * value set to the string.\n */\nexport const Text = Symbol.for(\"crank.Text\") as unknown as Component<{\n\tvalue: string;\n}> &\n\tsymbol;\nexport type Text = typeof Text;\n\n/** A special tag for injecting raw nodes or strings via a value prop. */\nexport const Raw = Symbol.for(\"crank.Raw\") as unknown as Component<{\n\tvalue: string | object;\n}> &\n\tsymbol;\nexport type Raw = typeof Raw;\n\n/**\n * A type to keep track of keys. Any value can be a key, though null and\n * undefined are ignored.\n */\ntype Key = unknown;\n\ntype ChildrenIteratorResult = IteratorResult<Children, Children | void>;\n\nconst ElementSymbol = Symbol.for(\"crank.Element\");\n\n// To maximize compatibility between Crank versions, starting with 0.2.0, any\n// changes to the Element properties will be considered a breaking change.\nexport interface Element<TTag extends Tag = Tag> {\n\t/**\n\t * @internal\n\t * A unique symbol to identify elements as elements across versions and\n\t * realms, and to protect against basic injection attacks.\n\t * https://overreacted.io/why-do-react-elements-have-typeof-property/\n\t *\n\t * This property is defined on the element prototype rather than per\n\t * instance, because it is the same for every Element.\n\t */\n\t$$typeof: typeof ElementSymbol;\n\n\t/**\n\t * The tag of the element. Can be a string, symbol or function.\n\t */\n\ttag: TTag;\n\n\t/**\n\t * An object containing the \"properties\" of an element. These correspond to\n\t * the attribute syntax from JSX.\n\t */\n\tprops: TagProps<TTag>;\n}\n\n/**\n * Elements are the basic building blocks of Crank applications. They are\n * JavaScript objects which are interpreted by special classes called renderers\n * to produce and manage stateful nodes.\n *\n * @template {Tag} [TTag=Tag] - The type of the tag of the element.\n *\n * @example\n * // specific element types\n * let div: Element<\"div\">;\n * let portal: Element<Portal>;\n * let myEl: Element<MyComponent>;\n *\n * // general element types\n * let host: Element<string | symbol>;\n * let component: Element<Component>;\n *\n * Typically, you use a helper function like createElement to create elements\n * rather than instatiating this class directly.\n */\nexport class Element<TTag extends Tag = Tag> {\n\tconstructor(tag: TTag, props: TagProps<TTag>) {\n\t\tthis.tag = tag;\n\t\tthis.props = props;\n\t}\n}\n\n// See Element interface\nElement.prototype.$$typeof = ElementSymbol;\n\nexport function isElement(value: any): value is Element {\n\treturn value != null && value.$$typeof === ElementSymbol;\n}\n\nconst DEPRECATED_PROP_PREFIXES = [\"crank-\", \"c-\", \"$\"];\n\nconst DEPRECATED_SPECIAL_PROP_BASES = [\"key\", \"ref\", \"static\", \"copy\"];\n/**\n * Creates an element with the specified tag, props and children.\n *\n * This function is usually used as a transpilation target for JSX transpilers,\n * but it can also be called directly. It additionally extracts special props so\n * they aren't accessible to renderer methods or components, and assigns the\n * children prop according to any additional arguments passed to the function.\n */\nexport function createElement<TTag extends Tag>(\n\ttag: TTag,\n\tprops?: TagProps<TTag> | null | undefined,\n\t...children: Array<unknown>\n): Element<TTag> {\n\tif (props == null) {\n\t\tprops = {} as TagProps<TTag>;\n\t}\n\n\tif (\"static\" in (props as TagProps<TTag>)) {\n\t\tconsole.error(`The \\`static\\` prop is deprecated. Use \\`copy\\` instead.`);\n\t\t(props as TagProps<TTag>)[\"copy\"] = (props as TagProps<TTag>)[\"static\"];\n\t\tdelete (props as any)[\"static\"];\n\t}\n\n\tfor (let i = 0; i < DEPRECATED_PROP_PREFIXES.length; i++) {\n\t\tconst propPrefix = DEPRECATED_PROP_PREFIXES[i];\n\t\tfor (let j = 0; j < DEPRECATED_SPECIAL_PROP_BASES.length; j++) {\n\t\t\tconst propBase = DEPRECATED_SPECIAL_PROP_BASES[j];\n\t\t\tconst deprecatedPropName = propPrefix + propBase;\n\t\t\tif (deprecatedPropName in (props as TagProps<TTag>)) {\n\t\t\t\tconst targetPropBase = propBase === \"static\" ? \"copy\" : propBase;\n\t\t\t\tconsole.error(\n\t\t\t\t\t`The \\`${deprecatedPropName}\\` prop is deprecated. Use \\`${targetPropBase}\\` instead.`,\n\t\t\t\t);\n\t\t\t\t(props as TagProps<TTag>)[targetPropBase] = (props as TagProps<TTag>)[\n\t\t\t\t\tdeprecatedPropName\n\t\t\t\t];\n\t\t\t\tdelete (props as any)[deprecatedPropName];\n\t\t\t}\n\t\t}\n\t}\n\n\tif (children.length > 1) {\n\t\t(props as TagProps<TTag>).children = children;\n\t} else if (children.length === 1) {\n\t\t(props as TagProps<TTag>).children = children[0];\n\t}\n\n\treturn new Element(tag, props as TagProps<TTag>);\n}\n\n/** Clones a given element, shallowly copying the props object. */\nexport function cloneElement<TTag extends Tag>(\n\tel: Element<TTag>,\n): Element<TTag> {\n\tif (!isElement(el)) {\n\t\tthrow new TypeError(`Cannot clone non-element: ${String(el)}`);\n\t}\n\n\treturn new Element(el.tag, {...el.props});\n}\n\n/*** ELEMENT UTILITIES ***/\n\n// WHAT ARE WE DOING TO THE CHILDREN???\n/**\n * All values in the element tree are narrowed from the union in Child to\n * NarrowedChild during rendering, to simplify element diffing.\n */\ntype NarrowedChild = Element | string | undefined;\n\nfunction narrow(value: Children): NarrowedChild {\n\tif (typeof value === \"boolean\" || value == null) {\n\t\treturn;\n\t} else if (typeof value === \"string\" || isElement(value)) {\n\t\treturn value;\n\t} else if (typeof (value as any)[Symbol.iterator] === \"function\") {\n\t\treturn createElement(Fragment, null, value);\n\t}\n\n\treturn value.toString();\n}\n\n/**\n * A helper type which repesents all possible rendered values of an element.\n *\n * @template TNode - The type of node produced by the associated renderer.\n *\n * When asking the question, what is the \"value\" of a specific element, the\n * answer varies depending on the tag:\n *\n * For intrinsic elements, the value is the node created for the element, e.g.\n * the DOM node in the case of the DOMRenderer.\n *\n * For portals, the value is undefined, because a Portal element's root and\n * children are opaque to its parent.\n *\n * For component or fragment elements the value can be a node or an array of\n * nodes, depending on how many children they have.\n */\nexport type ElementValue<TNode> = Array<TNode> | TNode | undefined;\n\n/*** RETAINER FLAGS ***/\nconst DidDiff = 1 << 0;\nconst DidCommit = 1 << 1;\nconst IsCopied = 1 << 2;\nconst IsUpdating = 1 << 3;\nconst IsExecuting = 1 << 4;\nconst IsRefreshing = 1 << 5;\nconst IsScheduling = 1 << 6;\nconst IsSchedulingFallback = 1 << 7;\nconst IsUnmounted = 1 << 8;\n// TODO: Is this flag still necessary or can we use IsUnmounted?\nconst IsErrored = 1 << 9;\nconst IsResurrecting = 1 << 10;\n// TODO: Maybe we can get rid of IsSyncGen and IsAsyncGen\nconst IsSyncGen = 1 << 11;\nconst IsAsyncGen = 1 << 12;\nconst IsInForOfLoop = 1 << 13;\nconst IsInForAwaitOfLoop = 1 << 14;\nconst NeedsToYield = 1 << 15;\nconst PropsAvailable = 1 << 16;\nconst IsSchedulingRefresh = 1 << 17;\n\nfunction getFlag(ret: Retainer<unknown>, flag: number): boolean {\n\treturn !!(ret.f & flag);\n}\n\nfunction setFlag(ret: Retainer<unknown>, flag: number, value = true): void {\n\tif (value) {\n\t\tret.f |= flag;\n\t} else {\n\t\tret.f &= ~flag;\n\t}\n}\n\n/**\n * @internal\n * Retainers are objects which act as the internal representation of elements,\n * mirroring the element tree.\n */\nclass Retainer<TNode, TScope = unknown> {\n\t/** A bitmask. See RETAINER FLAGS above. */\n\tdeclare f: number;\n\tdeclare el: Element;\n\tdeclare ctx: ContextState<TNode, TScope, any> | undefined;\n\tdeclare children:\n\t\t| Array<Retainer<TNode, TScope> | undefined>\n\t\t| Retainer<TNode, TScope>\n\t\t| undefined;\n\tdeclare fallback: Retainer<TNode, TScope> | undefined;\n\t// This is only assigned for host, text and raw elements.\n\tdeclare value: ElementValue<TNode> | undefined;\n\tdeclare scope: TScope | undefined;\n\t// This is only assigned for host and raw elements.\n\tdeclare oldProps: Record<string, any> | undefined;\n\tdeclare pendingDiff: Promise<undefined> | undefined;\n\tdeclare onNextDiff: Function | undefined;\n\tdeclare graveyard: Array<Retainer<TNode, TScope>> | undefined;\n\tdeclare lingerers:\n\t\t| Array<Set<Retainer<TNode, TScope>> | undefined>\n\t\t| undefined;\n\n\tconstructor(el: Element) {\n\t\tthis.f = 0;\n\t\tthis.el = el;\n\t\tthis.ctx = undefined;\n\t\tthis.children = undefined;\n\t\tthis.fallback = undefined;\n\t\tthis.value = undefined;\n\t\tthis.oldProps = undefined;\n\t\tthis.pendingDiff = undefined;\n\t\tthis.onNextDiff = undefined;\n\t\tthis.graveyard = undefined;\n\t\tthis.lingerers = undefined;\n\t}\n}\n\nfunction cloneRetainer<TNode, TScope>(\n\tret: Retainer<TNode, TScope>,\n): Retainer<TNode, TScope> {\n\tconst clone = new Retainer<TNode, TScope>(ret.el);\n\tclone.f = ret.f;\n\tclone.ctx = ret.ctx;\n\tclone.children = ret.children;\n\tclone.fallback = ret.fallback;\n\tclone.value = ret.value;\n\tclone.scope = ret.scope;\n\tclone.oldProps = ret.oldProps;\n\tclone.pendingDiff = ret.pendingDiff;\n\tclone.onNextDiff = ret.onNextDiff;\n\tclone.graveyard = ret.graveyard;\n\tclone.lingerers = ret.lingerers;\n\n\treturn clone;\n}\n\n/**\n * Finds the value of the element according to its type.\n *\n * @returns A node, an array of nodes or undefined.\n */\nfunction getValue<TNode>(\n\tret: Retainer<TNode>,\n\tisNested = false,\n\tindex?: number,\n): ElementValue<TNode> {\n\tif (getFlag(ret, IsScheduling) && isNested) {\n\t\treturn ret.fallback ? getValue(ret.fallback, isNested, index) : undefined;\n\t} else if (ret.fallback && !getFlag(ret, DidDiff)) {\n\t\treturn ret.fallback\n\t\t\t? getValue(ret.fallback, isNested, index)\n\t\t\t: ret.fallback;\n\t} else if (ret.el.tag === Portal) {\n\t\treturn;\n\t} else if (ret.el.tag === Fragment || typeof ret.el.tag === \"function\") {\n\t\tif (index != null && ret.ctx) {\n\t\t\tret.ctx.index = index;\n\t\t}\n\t\treturn unwrap(getChildValues(ret, index));\n\t}\n\n\treturn ret.value;\n}\n\n/**\n * Walks an element's children to find its child values.\n *\n * @param ret - The retainer whose child values we are reading.\n * @param startIndex - Starting index to thread through for context index updates.\n *\n * @returns An array of nodes.\n */\nfunction getChildValues<TNode>(\n\tret: Retainer<TNode>,\n\tstartIndex?: number,\n): Array<TNode> {\n\tconst values: Array<TNode> = [];\n\tconst lingerers = ret.lingerers;\n\tconst children = wrap(ret.children);\n\tlet currentIndex = startIndex;\n\n\tfor (let i = 0; i < children.length; i++) {\n\t\tif (lingerers != null && lingerers[i] != null) {\n\t\t\tconst rets = lingerers[i]!;\n\t\t\tfor (const ret of rets) {\n\t\t\t\tconst value = getValue(ret, true, currentIndex);\n\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\tfor (let j = 0; j < value.length; j++) {\n\t\t\t\t\t\tvalues.push(value[j]);\n\t\t\t\t\t}\n\t\t\t\t\tif (currentIndex != null) {\n\t\t\t\t\t\tcurrentIndex += value.length;\n\t\t\t\t\t}\n\t\t\t\t} else if (value) {\n\t\t\t\t\tvalues.push(value);\n\t\t\t\t\tif (currentIndex != null) {\n\t\t\t\t\t\tcurrentIndex++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst child = children[i];\n\t\tif (child) {\n\t\t\tconst value = getValue(child, true, currentIndex);\n\t\t\tif (Array.isArray(value)) {\n\t\t\t\tfor (let j = 0; j < value.length; j++) {\n\t\t\t\t\tvalues.push(value[j]);\n\t\t\t\t}\n\t\t\t\tif (currentIndex != null) {\n\t\t\t\t\tcurrentIndex += value.length;\n\t\t\t\t}\n\t\t\t} else if (value) {\n\t\t\t\tvalues.push(value);\n\t\t\t\tif (currentIndex != null) {\n\t\t\t\t\tcurrentIndex++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (lingerers != null && lingerers.length > children.length) {\n\t\tfor (let i = children.length; i < lingerers.length; i++) {\n\t\t\tconst rets = lingerers[i];\n\t\t\tif (rets != null) {\n\t\t\t\tfor (const ret of rets) {\n\t\t\t\t\tconst value = getValue(ret, true, currentIndex);\n\t\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\t\tfor (let j = 0; j < value.length; j++) {\n\t\t\t\t\t\t\tvalues.push(value[j]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (currentIndex != null) {\n\t\t\t\t\t\t\tcurrentIndex += value.length;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (value) {\n\t\t\t\t\t\tvalues.push(value);\n\t\t\t\t\t\tif (currentIndex != null) {\n\t\t\t\t\t\t\tcurrentIndex++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn values;\n}\n\nfunction stripSpecialProps(props: Record<string, any>): Record<string, any> {\n\tlet _: unknown;\n\tlet result: Record<string, any>;\n\t({key: _, ref: _, copy: _, hydrate: _, children: _, ...result} = props);\n\treturn result;\n}\n\n/**\n * Interface for adapting the rendering process to a specific target environment.\n *\n * The RenderAdapter defines how Crank elements are mapped to nodes in your target\n * rendering environment (DOM, Canvas, WebGL, Terminal, etc.). Each method handles\n * a specific part of the element lifecycle, from creation to removal.\n *\n * @template TNode - The type representing a node in your target environment\n * @template TScope - Additional context data passed down the component tree\n * @template TRoot - The type of the root container (defaults to TNode)\n * @template TResult - The type returned when reading element values (defaults to ElementValue<TNode>)\n *\n * @example\n * ```typescript\n * const adapter: RenderAdapter<MyNode, MyScope> = {\n *   create: ({ tag, props }) => new MyNode(tag, props),\n *   patch: ({ node, props }) => node.update(props),\n *   arrange: ({ node, children }) => node.replaceChildren(children),\n *   // ... other methods\n * };\n * ```\n */\nexport interface RenderAdapter<\n\tTNode,\n\tTScope,\n\tTRoot extends TNode | undefined = TNode,\n\tTResult = ElementValue<TNode>,\n> {\n\t/**\n\t * Creates a new node for the given element tag and props.\n\t *\n\t * This method is called when Crank encounters a new element that needs to be\n\t * rendered for the first time. You should create and return a node appropriate\n\t * for your target environment.\n\t *\n\t * @param data.tag - The element tag (e.g., \"div\", \"sprite\", or a symbol)\n\t * @param data.tagName - String representation of the tag for debugging\n\t * @param data.props - The element's props object\n\t * @param data.scope - Current scope context (can be undefined)\n\t * @returns A new node instance\n\t *\n\t * @example\n\t * ```typescript\n\t * create: ({ tag, props, scope }) => {\n\t *   if (tag === \"sprite\") {\n\t *     return new PIXI.Sprite(props.texture);\n\t *   }\n\t *   throw new Error(`Unknown tag: ${tag}`);\n\t * }\n\t * ```\n\t */\n\tcreate(data: {\n\t\ttag: string | symbol;\n\t\ttagName: string;\n\t\tprops: Record<string, any>;\n\t\tscope: TScope | undefined;\n\t}): TNode;\n\n\t/**\n\t * Adopts existing nodes during hydration.\n\t *\n\t * Called when hydrating server-rendered content or reusing existing nodes.\n\t * Should return an array of child nodes if the provided node matches the\n\t * expected tag, or undefined if hydration should fail.\n\t *\n\t * @param data.tag - The element tag being hydrated\n\t * @param data.tagName - String representation of the tag\n\t * @param data.props - The element's props\n\t * @param data.node - The existing node to potentially adopt\n\t * @param data.scope - Current scope context\n\t * @returns Array of child nodes to hydrate, or undefined if adoption fails\n\t *\n\t * @example\n\t * ```typescript\n\t * adopt: ({ tag, node }) => {\n\t *   if (node && node.tagName.toLowerCase() === tag) {\n\t *     return Array.from(node.children);\n\t *   }\n\t *   return undefined; // Hydration mismatch\n\t * }\n\t * ```\n\t */\n\tadopt(data: {\n\t\ttag: string | symbol;\n\t\ttagName: string;\n\t\tprops: Record<string, any>;\n\t\tnode: TNode | undefined;\n\t\tscope: TScope | undefined;\n\t}): Array<TNode> | undefined;\n\n\t/**\n\t * Creates or updates a text node.\n\t *\n\t * Called when rendering text content. Should create a new text node or\n\t * update an existing one with the provided value.\n\t *\n\t * @param data.value - The text content to render\n\t * @param data.scope - Current scope context\n\t * @param data.oldNode - Previous text node to potentially reuse\n\t * @param data.hydrationNodes - Nodes available during hydration\n\t * @returns A text node containing the given value\n\t *\n\t * @example\n\t * ```typescript\n\t * text: ({ value, oldNode }) => {\n\t *   if (oldNode && oldNode.text !== value) {\n\t *     oldNode.text = value;\n\t *     return oldNode;\n\t *   }\n\t *   return new TextNode(value);\n\t * }\n\t * ```\n\t */\n\ttext(data: {\n\t\tvalue: string;\n\t\tscope: TScope | undefined;\n\t\toldNode: TNode | undefined;\n\t\thydrationNodes: Array<TNode> | undefined;\n\t}): TNode;\n\n\t/**\n\t * Computes scope context for child elements.\n\t *\n\t * Called to determine what scope context should be passed to child elements.\n\t * The scope can be used to pass rendering context like theme, coordinate systems,\n\t * or namespaces down the component tree.\n\t *\n\t * @param data.tag - The element tag\n\t * @param data.tagName - String representation of the tag\n\t * @param data.props - The element's props\n\t * @param data.scope - Current scope context\n\t * @returns New scope for children, or undefined to inherit current scope\n\t *\n\t * @example\n\t * ```typescript\n\t * scope: ({ tag, props, scope }) => {\n\t *   if (tag === \"svg\") {\n\t *     return { ...scope, namespace: \"http://www.w3.org/2000/svg\" };\n\t *   }\n\t *   return scope;\n\t * }\n\t * ```\n\t */\n\tscope(data: {\n\t\ttag: string | symbol;\n\t\ttagName: string;\n\t\tprops: Record<string, any>;\n\t\tscope: TScope | undefined;\n\t}): TScope | undefined;\n\n\t/**\n\t * Handles raw values (strings or nodes) that bypass normal element processing.\n\t *\n\t * Called when rendering Raw elements or other direct node insertions.\n\t * Should convert string values to appropriate nodes for your environment.\n\t *\n\t * @param data.value - Raw string or node value to render\n\t * @param data.scope - Current scope context\n\t * @param data.hydrationNodes - Nodes available during hydration\n\t * @returns ElementValue that can be handled by arrange()\n\t *\n\t * @example\n\t * ```typescript\n\t * raw: ({ value, scope }) => {\n\t *   if (typeof value === \"string\") {\n\t *     const container = new Container();\n\t *     container.innerHTML = value;\n\t *     return Array.from(container.children);\n\t *   }\n\t *   return value;\n\t * }\n\t * ```\n\t */\n\traw(data: {\n\t\tvalue: string | TNode;\n\t\tscope: TScope | undefined;\n\t\thydrationNodes: Array<TNode> | undefined;\n\t}): ElementValue<TNode>;\n\n\t/**\n\t * Updates a node's properties.\n\t *\n\t * Called when element props change. Should efficiently update only the\n\t * properties that have changed. This is where you implement prop-to-attribute\n\t * mapping, event listener binding, and other property synchronization.\n\t *\n\t * @param data.tag - The element tag\n\t * @param data.tagName - String representation of the tag\n\t * @param data.node - The node to update\n\t * @param data.props - New props object\n\t * @param data.oldProps - Previous props object (undefined for initial render)\n\t * @param data.scope - Current scope context\n\t * @param data.copyProps - Props to skip (used for copying between renderers)\n\t * @param data.isHydrating - Whether currently hydrating\n\t * @param data.quietProps - Props to not warn about during hydration\n\t *\n\t * @example\n\t * ```typescript\n\t * patch: ({ node, props, oldProps }) => {\n\t *   for (const [key, value] of Object.entries(props)) {\n\t *     if (oldProps?.[key] !== value) {\n\t *       if (key.startsWith(\"on\")) {\n\t *         node.addEventListener(key.slice(2), value);\n\t *       } else {\n\t *         node[key] = value;\n\t *       }\n\t *     }\n\t *   }\n\t * }\n\t * ```\n\t */\n\tpatch(data: {\n\t\ttag: string | symbol;\n\t\ttagName: string;\n\t\tnode: TNode;\n\t\tprops: Record<string, any>;\n\t\toldProps: Record<string, any> | undefined;\n\t\tscope: TScope | undefined;\n\t\tcopyProps: Set<string> | undefined;\n\t\tisHydrating: boolean;\n\t\tquietProps: Set<string> | undefined;\n\t}): void;\n\n\t/**\n\t * Arranges child nodes within their parent.\n\t *\n\t * Called after child elements are rendered to organize them within their\n\t * parent node. Should efficiently insert, move, or remove child nodes to\n\t * match the provided children array.\n\t *\n\t * @param data.tag - The parent element tag\n\t * @param data.tagName - String representation of the tag\n\t * @param data.node - The parent node\n\t * @param data.props - The parent element's props\n\t * @param data.children - Array of child nodes in correct order\n\t * @param data.oldProps - Previous props (for reference)\n\t *\n\t * @example\n\t * ```typescript\n\t * arrange: ({ node, children }) => {\n\t *   // Remove existing children\n\t *   node.removeChildren();\n\t *   // Add new children in order\n\t *   for (const child of children) {\n\t *     node.addChild(child);\n\t *   }\n\t * }\n\t * ```\n\t */\n\tarrange(data: {\n\t\ttag: string | symbol;\n\t\ttagName: string;\n\t\tnode: TNode;\n\t\tprops: Record<string, any>;\n\t\tchildren: Array<TNode>;\n\t\toldProps: Record<string, any> | undefined;\n\t}): void;\n\n\t/**\n\t * Removes a node from its parent.\n\t *\n\t * Called when an element is being unmounted. Should clean up the node\n\t * and remove it from its parent if appropriate.\n\t *\n\t * @param data.node - The node to remove\n\t * @param data.parentNode - The parent node\n\t * @param data.isNested - Whether this is a nested removal (child of removed element)\n\t *\n\t * @example\n\t * ```typescript\n\t * remove: ({ node, parentNode, isNested }) => {\n\t *   // Clean up event listeners, resources, etc.\n\t *   node.cleanup?.();\n\t *   // Remove from parent unless it's a nested removal\n\t *   if (!isNested && parentNode.contains(node)) {\n\t *     parentNode.removeChild(node);\n\t *   }\n\t * }\n\t * ```\n\t */\n\tremove(data: {node: TNode; parentNode: TNode; isNested: boolean}): void;\n\n\t/**\n\t * Reads the final rendered value from an ElementValue.\n\t *\n\t * Called to extract the final result from rendered elements. This allows\n\t * you to transform the internal node representation into the public API\n\t * that users of your renderer will see.\n\t *\n\t * @param value - The ElementValue to read (array, single node, or undefined)\n\t * @returns The public representation of the rendered value\n\t *\n\t * @example\n\t * ```typescript\n\t * read: (value) => {\n\t *   if (Array.isArray(value)) {\n\t *     return value.map(node => node.publicAPI);\n\t *   }\n\t *   return value?.publicAPI;\n\t * }\n\t * ```\n\t */\n\tread(value: ElementValue<TNode>): TResult;\n\n\t/**\n\t * Performs final rendering to the root container.\n\t *\n\t * Called after the entire render cycle is complete. This is where you\n\t * trigger the actual rendering/presentation in your target environment\n\t * (e.g., calling render() on a canvas, flushing to the screen, etc.).\n\t *\n\t * @param root - The root container\n\t *\n\t * @example\n\t * ```typescript\n\t * finalize: (root) => {\n\t *   // Trigger actual rendering\n\t *   if (root instanceof PIXIApplication) {\n\t *     root.render();\n\t *   }\n\t * }\n\t * ```\n\t */\n\tfinalize(root: TRoot): void;\n}\n\nconst defaultAdapter: RenderAdapter<any, any, any, any> = {\n\tcreate() {\n\t\tthrow new Error(\"adapter must implement create\");\n\t},\n\tadopt() {\n\t\tthrow new Error(\"adapter must implement adopt() for hydration\");\n\t},\n\tscope: ({scope}) => scope,\n\tread: (value) => value,\n\ttext: ({value}) => value,\n\traw: ({value}) => value,\n\tpatch: NOOP,\n\tarrange: NOOP,\n\tremove: NOOP,\n\tfinalize: NOOP,\n};\n\n/**\n * An abstract class which is subclassed to render to different target\n * environments. Subclasses call super() with a custom RenderAdapter object.\n * This class is responsible for kicking off the rendering process and caching\n * previous trees by root.\n *\n * @template TNode - The type of the node for a rendering environment.\n * @template TScope - Data which is passed down the tree.\n * @template TRoot - The type of the root for a rendering environment.\n * @template TResult - The type of exposed values.\n */\nexport class Renderer<\n\tTNode extends object,\n\tTScope,\n\tTRoot extends TNode | undefined = TNode,\n\tTResult = ElementValue<TNode>,\n> {\n\t/**\n\t * @internal\n\t * A weakmap which stores element trees by root.\n\t */\n\tdeclare cache: WeakMap<object, Retainer<TNode, TScope>>;\n\tdeclare adapter: RenderAdapter<TNode, TScope, TRoot, TResult>;\n\tconstructor(adapter: Partial<RenderAdapter<TNode, TScope, TRoot, TResult>>) {\n\t\tthis.cache = new WeakMap();\n\t\tthis.adapter = {...defaultAdapter, ...adapter};\n\t}\n\n\t/**\n\t * Renders an element tree into a specific root.\n\t *\n\t * @param children - An element tree. Rendering null deletes cached renders.\n\t * @param root - The root to be rendered into. The renderer caches renders\n\t * per root.\n\t * @param bridge - An optional context that will be the ancestor context of\n\t * all elements in the tree. Useful for connecting different renderers so\n\t * that events/provisions/errors properly propagate. The context for a given\n\t * root must be the same between renders.\n\t *\n\t * @returns The result of rendering the children, or a possible promise of\n\t * the result if the element tree renders asynchronously.\n\t */\n\trender(\n\t\tchildren: Children,\n\t\troot?: TRoot | undefined,\n\t\tbridge?: Context | undefined,\n\t): Promise<TResult> | TResult {\n\t\tconst ret = getRootRetainer(this, bridge, {children, root});\n\t\treturn renderRoot(this.adapter, root, ret, children) as\n\t\t\t| Promise<TResult>\n\t\t\t| TResult;\n\t}\n\n\thydrate(\n\t\tchildren: Children,\n\t\troot: TRoot,\n\t\tbridge?: Context | undefined,\n\t): Promise<TResult> | TResult {\n\t\tconst ret = getRootRetainer(this, bridge, {\n\t\t\tchildren,\n\t\t\troot,\n\t\t\thydrate: true,\n\t\t});\n\t\treturn renderRoot(this.adapter, root, ret, children) as\n\t\t\t| Promise<TResult>\n\t\t\t| TResult;\n\t}\n}\n\n/*** PRIVATE RENDERER FUNCTIONS ***/\nfunction getRootRetainer<\n\tTNode extends object,\n\tTScope,\n\tTRoot extends TNode | undefined,\n>(\n\trenderer: Renderer<TNode, TScope, TRoot, unknown>,\n\tbridge: Context | undefined,\n\t{\n\t\tchildren,\n\t\troot,\n\t\thydrate,\n\t}: {\n\t\tchildren: Children;\n\t\troot: TRoot | undefined;\n\t\thydrate?: boolean;\n\t},\n): Retainer<TNode, TScope> {\n\tlet ret: Retainer<TNode, TScope> | undefined;\n\tconst bridgeCtx = bridge && bridge[_ContextState];\n\tif (typeof root === \"object\" && root !== null) {\n\t\tret = renderer.cache.get(root);\n\t}\n\n\tconst adapter = renderer.adapter;\n\tif (ret === undefined) {\n\t\tret = new Retainer(createElement(Portal, {children, root, hydrate}));\n\t\tret.value = root;\n\t\tret.ctx = bridgeCtx as ContextState<any, any> | undefined;\n\t\tret.scope = adapter.scope({\n\t\t\ttag: Portal,\n\t\t\ttagName: getTagName(Portal),\n\t\t\tprops: stripSpecialProps(ret.el.props),\n\t\t\tscope: undefined,\n\t\t});\n\t\t// remember that typeof null === \"object\"\n\t\tif (typeof root === \"object\" && root !== null && children != null) {\n\t\t\trenderer.cache.set(root, ret);\n\t\t}\n\t} else if (ret.ctx !== bridgeCtx) {\n\t\tthrow new Error(\n\t\t\t\"A previous call to render() was passed a different context\",\n\t\t);\n\t} else {\n\t\tret.el = createElement(Portal, {children, root, hydrate});\n\t\tif (typeof root === \"object\" && root !== null && children == null) {\n\t\t\trenderer.cache.delete(root);\n\t\t}\n\t}\n\n\treturn ret;\n}\n\nfunction renderRoot<TNode, TScope, TRoot extends TNode | undefined, TResult>(\n\tadapter: RenderAdapter<TNode, TScope, TRoot, TResult>,\n\troot: TRoot | undefined,\n\tret: Retainer<TNode, TScope>,\n\tchildren: Children,\n): Promise<TResult> | TResult {\n\tconst diff = diffChildren(\n\t\tadapter,\n\t\troot,\n\t\tret,\n\t\tret.ctx,\n\t\tret.scope,\n\t\tret,\n\t\tchildren,\n\t);\n\n\tconst schedulePromises: Array<PromiseLike<unknown>> = [];\n\tif (isPromiseLike(diff)) {\n\t\treturn diff.then(() => {\n\t\t\tcommit(\n\t\t\t\tadapter,\n\t\t\t\tret,\n\t\t\t\tret,\n\t\t\t\tret.ctx,\n\t\t\t\tret.scope,\n\t\t\t\t0,\n\t\t\t\tschedulePromises,\n\t\t\t\tundefined,\n\t\t\t);\n\t\t\tif (schedulePromises.length > 0) {\n\t\t\t\treturn Promise.all(schedulePromises).then(() => {\n\t\t\t\t\tif (typeof root !== \"object\" || root === null) {\n\t\t\t\t\t\tunmount(adapter, ret, ret.ctx, ret, false);\n\t\t\t\t\t}\n\t\t\t\t\treturn adapter.read(unwrap(getChildValues(ret)));\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (typeof root !== \"object\" || root === null) {\n\t\t\t\tunmount(adapter, ret, ret.ctx, ret, false);\n\t\t\t}\n\t\t\treturn adapter.read(unwrap(getChildValues(ret)));\n\t\t});\n\t}\n\n\tcommit(adapter, ret, ret, ret.ctx, ret.scope, 0, schedulePromises, undefined);\n\tif (schedulePromises.length > 0) {\n\t\treturn Promise.all(schedulePromises).then(() => {\n\t\t\tif (typeof root !== \"object\" || root === null) {\n\t\t\t\tunmount(adapter, ret, ret.ctx, ret, false);\n\t\t\t}\n\t\t\treturn adapter.read(unwrap(getChildValues(ret)));\n\t\t});\n\t}\n\n\tif (typeof root !== \"object\" || root === null) {\n\t\tunmount(adapter, ret, ret.ctx, ret, false);\n\t}\n\treturn adapter.read(unwrap(getChildValues(ret)));\n}\n\nfunction diffChildren<TNode, TScope, TRoot extends TNode | undefined, TResult>(\n\tadapter: RenderAdapter<TNode, TScope, TRoot, TResult>,\n\troot: TRoot | undefined,\n\thost: Retainer<TNode, TScope>,\n\tctx: ContextState<TNode, TScope, TRoot, TResult> | undefined,\n\tscope: TScope | undefined,\n\tparent: Retainer<TNode, TScope>,\n\tnewChildren: Children,\n): Promise<undefined> | undefined {\n\tconst oldRetained = wrap(parent.children);\n\tconst newRetained: typeof oldRetained = [];\n\tconst newChildren1 = arrayify(newChildren);\n\tconst diffs: Array<Promise<undefined> | undefined> = [];\n\tlet childrenByKey: Map<Key, Retainer<TNode, TScope>> | undefined;\n\tlet seenKeys: Set<Key> | undefined;\n\tlet isAsync = false;\n\tlet oi = 0;\n\tlet oldLength = oldRetained.length;\n\tlet graveyard: Array<Retainer<TNode, TScope>> | undefined;\n\tfor (let ni = 0, newLength = newChildren1.length; ni < newLength; ni++) {\n\t\t// length checks to prevent index out of bounds deoptimizations.\n\t\tlet ret = oi >= oldLength ? undefined : oldRetained[oi];\n\t\tlet child = narrow(newChildren1[ni]);\n\t\t{\n\t\t\t// aligning new children with old retainers\n\t\t\tlet oldKey = typeof ret === \"object\" ? ret.el.props.key : undefined;\n\t\t\tlet newKey = typeof child === \"object\" ? child.props.key : undefined;\n\t\t\tif (newKey !== undefined && seenKeys && seenKeys.has(newKey)) {\n\t\t\t\tconsole.error(\n\t\t\t\t\t`Duplicate key found in <${getTagName(parent.el.tag)}>`,\n\t\t\t\t\tnewKey,\n\t\t\t\t);\n\t\t\t\tchild = cloneElement(child as Element);\n\t\t\t\tnewKey = child.props.key = undefined;\n\t\t\t}\n\n\t\t\tif (oldKey === newKey) {\n\t\t\t\tif (childrenByKey !== undefined && newKey !== undefined) {\n\t\t\t\t\tchildrenByKey.delete(newKey);\n\t\t\t\t}\n\n\t\t\t\toi++;\n\t\t\t} else {\n\t\t\t\tchildrenByKey = childrenByKey || createChildrenByKey(oldRetained, oi);\n\t\t\t\tif (newKey === undefined) {\n\t\t\t\t\twhile (ret !== undefined && oldKey !== undefined) {\n\t\t\t\t\t\toi++;\n\t\t\t\t\t\tret = oldRetained[oi];\n\t\t\t\t\t\toldKey = typeof ret === \"object\" ? ret.el.props.key : undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\toi++;\n\t\t\t\t} else {\n\t\t\t\t\tret = childrenByKey.get(newKey);\n\t\t\t\t\tif (ret !== undefined) {\n\t\t\t\t\t\tchildrenByKey.delete(newKey);\n\t\t\t\t\t}\n\n\t\t\t\t\t(seenKeys = seenKeys || new Set()).add(newKey);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet diff: Promise<undefined> | undefined = undefined;\n\t\tif (typeof child === \"object\") {\n\t\t\tlet childCopied = false;\n\t\t\tif (child.tag === Copy) {\n\t\t\t\tchildCopied = true;\n\t\t\t} else if (\n\t\t\t\ttypeof ret === \"object\" &&\n\t\t\t\tret.el === child &&\n\t\t\t\tgetFlag(ret, DidCommit)\n\t\t\t) {\n\t\t\t\t// If the child is the same as the retained element, we skip\n\t\t\t\t// re-rendering.\n\t\t\t\tchildCopied = true;\n\t\t\t} else {\n\t\t\t\tif (ret && ret.el.tag === child.tag) {\n\t\t\t\t\tret.el = child;\n\t\t\t\t\tif (child.props.copy && typeof child.props.copy !== \"string\") {\n\t\t\t\t\t\tchildCopied = true;\n\t\t\t\t\t}\n\t\t\t\t} else if (ret) {\n\t\t\t\t\tlet candidateFound = false;\n\t\t\t\t\t// we do not need to add the retainer to the graveyard if it is the\n\t\t\t\t\t// fallback of another retainer\n\t\t\t\t\t// search for the tag in fallback chain\n\t\t\t\t\tfor (\n\t\t\t\t\t\tlet predecessor = ret, candidate = ret.fallback;\n\t\t\t\t\t\tcandidate;\n\t\t\t\t\t\tpredecessor = candidate, candidate = candidate.fallback\n\t\t\t\t\t) {\n\t\t\t\t\t\tif (candidate.el.tag === child.tag) {\n\t\t\t\t\t\t\t// If we find a retainer in the fallback chain with the same tag,\n\t\t\t\t\t\t\t// we reuse it rather than creating a new retainer to preserve\n\t\t\t\t\t\t\t// state. This behavior is useful for when a Suspense component\n\t\t\t\t\t\t\t// re-renders and the children are re-rendered quickly.\n\t\t\t\t\t\t\tconst clone = cloneRetainer(candidate);\n\t\t\t\t\t\t\tsetFlag(clone, IsResurrecting);\n\t\t\t\t\t\t\tpredecessor.fallback = clone;\n\t\t\t\t\t\t\tconst fallback = ret;\n\t\t\t\t\t\t\tret = candidate;\n\t\t\t\t\t\t\tret.el = child;\n\t\t\t\t\t\t\tret.fallback = fallback;\n\t\t\t\t\t\t\tsetFlag(ret, DidDiff, false);\n\t\t\t\t\t\t\tcandidateFound = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (!candidateFound) {\n\t\t\t\t\t\tconst fallback = ret;\n\t\t\t\t\t\tret = new Retainer<TNode, TScope>(child);\n\t\t\t\t\t\tret.fallback = fallback;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tret = new Retainer<TNode, TScope>(child);\n\t\t\t\t}\n\n\t\t\t\tif (childCopied && getFlag(ret, DidCommit)) {\n\t\t\t\t\t// pass\n\t\t\t\t} else if (child.tag === Raw || child.tag === Text) {\n\t\t\t\t\t// pass\n\t\t\t\t} else if (child.tag === Fragment) {\n\t\t\t\t\tdiff = diffChildren(\n\t\t\t\t\t\tadapter,\n\t\t\t\t\t\troot,\n\t\t\t\t\t\thost,\n\t\t\t\t\t\tctx,\n\t\t\t\t\t\tscope,\n\t\t\t\t\t\tret,\n\t\t\t\t\t\tret.el.props.children as Children,\n\t\t\t\t\t);\n\t\t\t\t} else if (typeof child.tag === \"function\") {\n\t\t\t\t\tdiff = diffComponent(adapter, root, host, ctx, scope, ret);\n\t\t\t\t} else {\n\t\t\t\t\tdiff = diffHost(adapter, root, ctx, scope, ret);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (typeof ret === \"object\") {\n\t\t\t\tif (childCopied) {\n\t\t\t\t\tsetFlag(ret, IsCopied);\n\t\t\t\t\tdiff = getInflightDiff(ret);\n\t\t\t\t} else {\n\t\t\t\t\tsetFlag(ret, IsCopied, false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (isPromiseLike(diff)) {\n\t\t\t\tisAsync = true;\n\t\t\t}\n\t\t} else if (typeof child === \"string\") {\n\t\t\tif (typeof ret === \"object\" && ret.el.tag === Text) {\n\t\t\t\tret.el.props.value = child;\n\t\t\t} else {\n\t\t\t\tif (typeof ret === \"object\") {\n\t\t\t\t\t(graveyard = graveyard || []).push(ret);\n\t\t\t\t}\n\n\t\t\t\tret = new Retainer<TNode, TScope>(createElement(Text, {value: child}));\n\t\t\t}\n\t\t} else {\n\t\t\tif (typeof ret === \"object\") {\n\t\t\t\t(graveyard = graveyard || []).push(ret);\n\t\t\t}\n\n\t\t\tret = undefined;\n\t\t}\n\n\t\tdiffs[ni] = diff;\n\t\tnewRetained[ni] = ret;\n\t}\n\n\t// cleanup remaining retainers\n\tfor (; oi < oldLength; oi++) {\n\t\tconst ret = oldRetained[oi];\n\t\tif (\n\t\t\ttypeof ret === \"object\" &&\n\t\t\t(typeof ret.el.props.key === \"undefined\" ||\n\t\t\t\t!seenKeys ||\n\t\t\t\t!seenKeys.has(ret.el.props.key))\n\t\t) {\n\t\t\t(graveyard = graveyard || []).push(ret);\n\t\t}\n\t}\n\n\tif (childrenByKey !== undefined && childrenByKey.size > 0) {\n\t\tgraveyard = graveyard || [];\n\t\tfor (const ret of childrenByKey.values()) {\n\t\t\tgraveyard.push(ret);\n\t\t}\n\t}\n\n\tparent.children = unwrap(newRetained);\n\tif (isAsync) {\n\t\tconst diffs1 = Promise.all(diffs)\n\t\t\t.then(() => undefined)\n\t\t\t.finally(() => {\n\t\t\t\tsetFlag(parent, DidDiff);\n\t\t\t\tif (graveyard) {\n\t\t\t\t\tif (parent.graveyard) {\n\t\t\t\t\t\tfor (let i = 0; i < graveyard.length; i++) {\n\t\t\t\t\t\t\tparent.graveyard.push(graveyard[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tparent.graveyard = graveyard;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\tlet onNextDiffs!: Function;\n\t\tconst diffs2 = (parent.pendingDiff = safeRace([\n\t\t\tdiffs1,\n\t\t\tnew Promise<any>((resolve) => (onNextDiffs = resolve)),\n\t\t]));\n\n\t\tif (parent.onNextDiff) {\n\t\t\tparent.onNextDiff(diffs2);\n\t\t}\n\n\t\tparent.onNextDiff = onNextDiffs;\n\t\treturn diffs2;\n\t} else {\n\t\tsetFlag(parent, DidDiff);\n\t\tif (graveyard) {\n\t\t\tif (parent.graveyard) {\n\t\t\t\tfor (let i = 0; i < graveyard.length; i++) {\n\t\t\t\t\tparent.graveyard.push(graveyard[i]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tparent.graveyard = graveyard;\n\t\t\t}\n\t\t}\n\n\t\tif (parent.onNextDiff) {\n\t\t\tparent.onNextDiff(diffs);\n\t\t\tparent.onNextDiff = undefined;\n\t\t}\n\n\t\tparent.pendingDiff = undefined;\n\t}\n}\n\nfunction getInflightDiff(\n\tret: Retainer<unknown>,\n): Promise<undefined> | undefined {\n\t// It is not enough to check pendingDiff because pendingDiff is the diff for\n\t// children, but not the diff of an async component retainer's current run.\n\t// For the latter we check ctx.inflight.\n\tif (ret.ctx && ret.ctx.inflight) {\n\t\treturn ret.ctx.inflight[1];\n\t} else if (ret.pendingDiff) {\n\t\treturn ret.pendingDiff;\n\t}\n}\n\nfunction createChildrenByKey<TNode, TScope>(\n\tchildren: Array<Retainer<TNode, TScope> | undefined>,\n\toffset: number,\n): Map<Key, Retainer<TNode, TScope>> {\n\tconst childrenByKey = new Map<Key, Retainer<TNode, TScope>>();\n\tfor (let i = offset; i < children.length; i++) {\n\t\tconst child = children[i];\n\t\tif (\n\t\t\ttypeof child === \"object\" &&\n\t\t\ttypeof child.el.props.key !== \"undefined\"\n\t\t) {\n\t\t\tchildrenByKey.set(child.el.props.key, child);\n\t\t}\n\t}\n\n\treturn childrenByKey;\n}\n\nfunction diffHost<TNode, TScope, TRoot extends TNode | undefined>(\n\tadapter: RenderAdapter<TNode, TScope, TRoot, unknown>,\n\troot: TRoot,\n\tctx: ContextState<TNode, TScope, TRoot> | undefined,\n\tscope: TScope | undefined,\n\tret: Retainer<TNode, TScope>,\n): Promise<undefined> | undefined {\n\tconst el = ret.el;\n\tconst tag = el.tag as string | symbol;\n\tif (el.tag === Portal) {\n\t\troot = ret.value = el.props.root;\n\t}\n\n\tif (getFlag(ret, DidCommit)) {\n\t\tscope = ret.scope;\n\t} else {\n\t\tscope = ret.scope = adapter.scope({\n\t\t\ttag,\n\t\t\ttagName: getTagName(tag),\n\t\t\tprops: el.props,\n\t\t\tscope,\n\t\t});\n\t}\n\n\treturn diffChildren(\n\t\tadapter,\n\t\troot,\n\t\tret,\n\t\tctx,\n\t\tscope,\n\t\tret,\n\t\tret.el.props.children,\n\t);\n}\n\nfunction commit<TNode, TScope, TRoot extends TNode | undefined, TResult>(\n\tadapter: RenderAdapter<TNode, TScope, TRoot, TResult>,\n\thost: Retainer<TNode, TScope>,\n\tret: Retainer<TNode, TScope>,\n\tctx: ContextState<TNode, TScope, TRoot, TResult> | undefined,\n\tscope: TScope | undefined,\n\tindex: number,\n\tschedulePromises: Array<PromiseLike<unknown>>,\n\thydrationNodes: Array<TNode> | undefined,\n): ElementValue<TNode> {\n\tif (getFlag(ret, IsCopied) && getFlag(ret, DidCommit)) {\n\t\treturn getValue(ret);\n\t}\n\n\tconst el = ret.el;\n\tconst tag = el.tag;\n\tif (\n\t\ttypeof tag === \"function\" ||\n\t\ttag === Fragment ||\n\t\ttag === Portal ||\n\t\ttag === Raw ||\n\t\ttag === Text\n\t) {\n\t\tif (typeof el.props.copy === \"string\") {\n\t\t\tconsole.error(\n\t\t\t\t`String copy prop ignored for <${getTagName(tag)}>. Use booleans instead.`,\n\t\t\t);\n\t\t}\n\t\tif (typeof el.props.hydrate === \"string\") {\n\t\t\tconsole.error(\n\t\t\t\t`String hydrate prop ignored for <${getTagName(tag)}>. Use booleans instead.`,\n\t\t\t);\n\t\t}\n\t}\n\n\tlet value: ElementValue<TNode>;\n\tlet skippedHydrationNodes: Array<TNode> | undefined;\n\tif (\n\t\thydrationNodes &&\n\t\tel.props.hydrate != null &&\n\t\t!el.props.hydrate &&\n\t\ttypeof el.props.hydrate !== \"string\"\n\t) {\n\t\tskippedHydrationNodes = hydrationNodes;\n\t\thydrationNodes = undefined;\n\t}\n\n\tif (typeof tag === \"function\") {\n\t\tret.ctx!.index = index;\n\t\tvalue = commitComponent(ret.ctx!, schedulePromises, hydrationNodes);\n\t} else {\n\t\tif (tag === Fragment) {\n\t\t\tvalue = commitChildren(\n\t\t\t\tadapter,\n\t\t\t\thost,\n\t\t\t\tctx,\n\t\t\t\tscope,\n\t\t\t\tret,\n\t\t\t\tindex,\n\t\t\t\tschedulePromises,\n\t\t\t\thydrationNodes,\n\t\t\t);\n\t\t} else if (tag === Text) {\n\t\t\tvalue = commitText(\n\t\t\t\tadapter,\n\t\t\t\tret,\n\t\t\t\tel as Element<Text>,\n\t\t\t\tscope,\n\t\t\t\thydrationNodes,\n\t\t\t);\n\t\t} else if (tag === Raw) {\n\t\t\tvalue = commitRaw(adapter, host, ret, scope, hydrationNodes);\n\t\t} else {\n\t\t\tvalue = commitHost(adapter, ret, ctx, schedulePromises, hydrationNodes);\n\t\t}\n\n\t\tif (ret.fallback) {\n\t\t\tunmount(adapter, host, ctx, ret.fallback, false);\n\t\t\tret.fallback = undefined;\n\t\t}\n\t}\n\n\tif (skippedHydrationNodes) {\n\t\tskippedHydrationNodes.splice(0, wrap(value).length);\n\t}\n\n\tif (!getFlag(ret, DidCommit)) {\n\t\tsetFlag(ret, DidCommit);\n\t\tif (\n\t\t\ttypeof tag !== \"function\" &&\n\t\t\ttag !== Fragment &&\n\t\t\ttag !== Portal &&\n\t\t\ttypeof el.props.ref === \"function\"\n\t\t) {\n\t\t\tel.props.ref(adapter.read(value));\n\t\t}\n\t}\n\n\treturn value;\n}\n\nfunction commitChildren<\n\tTNode,\n\tTScope,\n\tTRoot extends TNode | undefined,\n\tTResult,\n>(\n\tadapter: RenderAdapter<TNode, unknown, TRoot, TResult>,\n\thost: Retainer<TNode, TScope>,\n\tctx: ContextState<TNode, TScope, TRoot, TResult> | undefined,\n\tscope: TScope | undefined,\n\tparent: Retainer<TNode, TScope>,\n\tindex: number,\n\tschedulePromises: Array<PromiseLike<unknown>>,\n\thydrationNodes: Array<TNode> | undefined,\n): Array<TNode> {\n\tlet values: Array<TNode> = [];\n\tfor (let i = 0, children = wrap(parent.children); i < children.length; i++) {\n\t\tlet child = children[i];\n\t\tlet schedulePromises1: Array<unknown> | undefined;\n\t\tlet isSchedulingFallback = false;\n\t\twhile (\n\t\t\tchild &&\n\t\t\t((!getFlag(child, DidDiff) && child.fallback) ||\n\t\t\t\tgetFlag(child, IsScheduling))\n\t\t) {\n\t\t\t// If the child is scheduling, it is a component retainer so ctx will be\n\t\t\t// defined.\n\t\t\tif (getFlag(child, IsScheduling) && child.ctx!.schedule) {\n\t\t\t\t(schedulePromises1 = schedulePromises1 || []).push(\n\t\t\t\t\tchild.ctx!.schedule.promise,\n\t\t\t\t);\n\t\t\t\tisSchedulingFallback = true;\n\t\t\t}\n\n\t\t\tif (!getFlag(child, DidDiff) && getFlag(child, DidCommit)) {\n\t\t\t\t// If this child has not diffed but has committed, it means it is a\n\t\t\t\t// fallback that is being resurrected.\n\t\t\t\tfor (const node of getChildValues(child)) {\n\t\t\t\t\tadapter.remove({\n\t\t\t\t\t\tnode,\n\t\t\t\t\t\tparentNode: host.value as TNode,\n\t\t\t\t\t\tisNested: false,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tchild = child.fallback;\n\t\t\t// When a scheduling component is mounting asynchronously but diffs\n\t\t\t// immediately, it will cause previous async diffs to settle due to the\n\t\t\t// chasing mechanism. This would cause earlier renders to resolve sooner\n\t\t\t// than expected, because the render would be missing both its usual\n\t\t\t// children and the children of the scheduling render. Therefore, we need\n\t\t\t// to defer the settling of previous renders until either that render\n\t\t\t// settles, or the scheduling component finally finishes scheduling.\n\t\t\t//\n\t\t\t// To do this, we take advantage of the fact that commits for aborted\n\t\t\t// renders will still fire and walk the tree. During that commit walk,\n\t\t\t// when we encounter a scheduling element, we push a race of the\n\t\t\t// scheduling promise with the inflight diff of the async fallback\n\t\t\t// fallback to schedulePromises to delay the initiator.\n\t\t\t//\n\t\t\t// However, we need to make sure we only use the inflight diffs for the\n\t\t\t// fallback which we are trying to delay, in the case of multiple renders\n\t\t\t// and fallbacks. To do this, we take advantage of the fact that when\n\t\t\t// multiple renders race (e.g., render1->render2->render3->scheduling\n\t\t\t// component), the chasing mechanism will call stale commits in reverse\n\t\t\t// order.\n\t\t\t//\n\t\t\t// We can use this ordering to delay to find which fallbacks we need to\n\t\t\t// add to the race. Each commit call progressively marks an additional\n\t\t\t// fallback as a scheduling fallback, and does not contribute to the\n\t\t\t// scheduling promises if it is further than the last seen level.\n\t\t\t//\n\t\t\t// This prevents promise contamination where newer renders settle early\n\t\t\t// due to diffs from older renders.\n\t\t\tif (schedulePromises1 && isSchedulingFallback && child) {\n\t\t\t\tif (!getFlag(child, DidDiff)) {\n\t\t\t\t\tconst inflightDiff = getInflightDiff(child);\n\t\t\t\t\tschedulePromises1.push(inflightDiff);\n\t\t\t\t} else {\n\t\t\t\t\t// If a scheduling component's fallback has already diffed, we do not\n\t\t\t\t\t// need delay the render.\n\t\t\t\t\tschedulePromises1 = undefined;\n\t\t\t\t}\n\n\t\t\t\tif (getFlag(child, IsSchedulingFallback)) {\n\t\t\t\t\t// This fallback was marked by a more recent commit - keep processing\n\t\t\t\t\t// deeper levels\n\t\t\t\t\tisSchedulingFallback = true;\n\t\t\t\t} else {\n\t\t\t\t\t// First unmarked fallback we've encountered - mark it and stop\n\t\t\t\t\t// contributing to schedulePromises1 for deeper levels.\n\t\t\t\t\tsetFlag(child, IsSchedulingFallback, true);\n\t\t\t\t\tisSchedulingFallback = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (schedulePromises1 && schedulePromises1.length > 1) {\n\t\t\tschedulePromises.push(safeRace(schedulePromises1));\n\t\t}\n\n\t\tif (child) {\n\t\t\tconst value = commit(\n\t\t\t\tadapter,\n\t\t\t\thost,\n\t\t\t\tchild,\n\t\t\t\tctx,\n\t\t\t\tscope,\n\t\t\t\tindex,\n\t\t\t\tschedulePromises,\n\t\t\t\thydrationNodes,\n\t\t\t);\n\n\t\t\tif (Array.isArray(value)) {\n\t\t\t\tfor (let j = 0; j < value.length; j++) {\n\t\t\t\t\tvalues.push(value[j]);\n\t\t\t\t}\n\t\t\t\tindex += value.length;\n\t\t\t} else if (value) {\n\t\t\t\tvalues.push(value);\n\t\t\t\tindex++;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (parent.graveyard) {\n\t\tfor (let i = 0; i < parent.graveyard.length; i++) {\n\t\t\tconst child = parent.graveyard[i];\n\t\t\tunmount(adapter, host, ctx, child, false);\n\t\t}\n\n\t\tparent.graveyard = undefined;\n\t}\n\n\tif (parent.lingerers) {\n\t\t// if parent.lingerers is set, a descendant component is unmounting\n\t\t// asynchronously, so we overwrite values to include lingerering DOM nodes.\n\t\tvalues = getChildValues(parent);\n\t}\n\n\treturn values;\n}\n\nfunction commitText<TNode, TScope>(\n\tadapter: RenderAdapter<TNode, TScope, TNode | undefined, unknown>,\n\tret: Retainer<TNode, TScope>,\n\tel: Element<Text>,\n\tscope: TScope | undefined,\n\thydrationNodes: Array<TNode> | undefined,\n): TNode {\n\tconst value = adapter.text({\n\t\tvalue: el.props.value,\n\t\tscope,\n\t\toldNode: ret.value as TNode,\n\t\thydrationNodes,\n\t});\n\n\tret.value = value;\n\treturn value;\n}\n\nfunction commitRaw<TNode, TScope>(\n\tadapter: RenderAdapter<TNode, TScope, TNode | undefined, unknown>,\n\thost: Retainer<TNode>,\n\tret: Retainer<TNode>,\n\tscope: TScope | undefined,\n\thydrationNodes: Array<TNode> | undefined,\n): ElementValue<TNode> {\n\tif (!ret.oldProps || ret.oldProps.value !== ret.el.props.value) {\n\t\tconst oldNodes = wrap(ret.value);\n\t\tfor (let i = 0; i < oldNodes.length; i++) {\n\t\t\tconst oldNode = oldNodes[i];\n\t\t\tadapter.remove({\n\t\t\t\tnode: oldNode,\n\t\t\t\tparentNode: host.value as TNode,\n\t\t\t\tisNested: false,\n\t\t\t});\n\t\t}\n\t\tret.value = adapter.raw({\n\t\t\tvalue: ret.el.props.value as any,\n\t\t\tscope,\n\t\t\thydrationNodes,\n\t\t});\n\t}\n\n\tret.oldProps = stripSpecialProps(ret.el.props);\n\treturn ret.value;\n}\n\nfunction commitHost<TNode, TScope, TRoot extends TNode | undefined>(\n\tadapter: RenderAdapter<TNode, TScope, TRoot, unknown>,\n\tret: Retainer<TNode, TScope>,\n\tctx: ContextState<TNode, TScope, TRoot, unknown> | undefined,\n\tschedulePromises: Array<PromiseLike<unknown>>,\n\thydrationNodes: Array<TNode> | undefined,\n): ElementValue<TNode> {\n\tif (getFlag(ret, IsCopied) && getFlag(ret, DidCommit)) {\n\t\treturn getValue(ret);\n\t}\n\n\tconst tag = ret.el.tag as string | symbol;\n\tconst props = stripSpecialProps(ret.el.props);\n\tconst oldProps = ret.oldProps;\n\tlet node = ret.value as TNode;\n\n\tlet copyProps: Set<string> | undefined;\n\tlet copyChildren = false;\n\tif (oldProps) {\n\t\tfor (const propName in props) {\n\t\t\tif (props[propName] === Copy) {\n\t\t\t\t// The Copy tag can be used to skip the patching of a prop.\n\t\t\t\t//   <div class={shouldPatchClass ? \"class-name\" : Copy} />\n\t\t\t\tprops[propName] = oldProps[propName];\n\t\t\t\t(copyProps = copyProps || new Set()).add(propName);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof ret.el.props.copy === \"string\") {\n\t\t\tconst copyMetaProp = new MetaProp(\"copy\", ret.el.props.copy);\n\t\t\tif (copyMetaProp.include) {\n\t\t\t\tfor (const propName of copyMetaProp.props) {\n\t\t\t\t\tif (propName in oldProps) {\n\t\t\t\t\t\tprops[propName] = oldProps[propName];\n\t\t\t\t\t\t(copyProps = copyProps || new Set()).add(propName);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tfor (const propName in oldProps) {\n\t\t\t\t\tif (!copyMetaProp.props.has(propName)) {\n\t\t\t\t\t\tprops[propName] = oldProps[propName];\n\t\t\t\t\t\t(copyProps = copyProps || new Set()).add(propName);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcopyChildren = copyMetaProp.includes(\"children\");\n\t\t}\n\t}\n\n\tconst scope = ret.scope;\n\tlet childHydrationNodes: Array<TNode> | undefined;\n\tlet quietProps: Set<string> | undefined;\n\tlet hydrationMetaProp: MetaProp | undefined;\n\tif (!getFlag(ret, DidCommit)) {\n\t\tif (tag === Portal) {\n\t\t\tif (ret.el.props.hydrate && typeof ret.el.props.hydrate !== \"string\") {\n\t\t\t\tchildHydrationNodes = adapter.adopt({\n\t\t\t\t\ttag,\n\t\t\t\t\ttagName: getTagName(tag),\n\t\t\t\t\tnode,\n\t\t\t\t\tprops,\n\t\t\t\t\tscope,\n\t\t\t\t});\n\n\t\t\t\tif (childHydrationNodes) {\n\t\t\t\t\tfor (let i = 0; i < childHydrationNodes.length; i++) {\n\t\t\t\t\t\tadapter.remove({\n\t\t\t\t\t\t\tnode: childHydrationNodes[i],\n\t\t\t\t\t\t\tparentNode: node,\n\t\t\t\t\t\t\tisNested: false,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (!node && hydrationNodes) {\n\t\t\t\tconst nextChild = hydrationNodes.shift();\n\t\t\t\tif (typeof ret.el.props.hydrate === \"string\") {\n\t\t\t\t\thydrationMetaProp = new MetaProp(\"hydration\", ret.el.props.hydrate);\n\t\t\t\t\tif (hydrationMetaProp.include) {\n\t\t\t\t\t\t// if we're in inclusive mode, we add all props to quietProps and\n\t\t\t\t\t\t// remove props specified in the metaprop\n\t\t\t\t\t\tquietProps = new Set(Object.keys(props));\n\t\t\t\t\t\tfor (const propName of hydrationMetaProp.props) {\n\t\t\t\t\t\t\tquietProps.delete(propName);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tquietProps = hydrationMetaProp.props;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tchildHydrationNodes = adapter.adopt({\n\t\t\t\t\ttag,\n\t\t\t\t\ttagName: getTagName(tag),\n\t\t\t\t\tnode: nextChild!,\n\t\t\t\t\tprops,\n\t\t\t\t\tscope,\n\t\t\t\t});\n\n\t\t\t\tif (childHydrationNodes) {\n\t\t\t\t\tnode = nextChild!;\n\t\t\t\t\tfor (let i = 0; i < childHydrationNodes.length; i++) {\n\t\t\t\t\t\tadapter.remove({\n\t\t\t\t\t\t\tnode: childHydrationNodes[i],\n\t\t\t\t\t\t\tparentNode: node,\n\t\t\t\t\t\t\tisNested: false,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// TODO: For some reason, there are cases where the node is already set\n\t\t\t// and the DidCommit flag is false. Not checking for node fails a test\n\t\t\t// where a child dispatches an event in a schedule callback, the parent\n\t\t\t// listens for this event and refreshes.\n\t\t\tif (!node) {\n\t\t\t\tnode = adapter.create({\n\t\t\t\t\ttag,\n\t\t\t\t\ttagName: getTagName(tag),\n\t\t\t\t\tprops,\n\t\t\t\t\tscope,\n\t\t\t\t});\n\t\t\t}\n\t\t\tret.value = node;\n\t\t}\n\t}\n\n\tif (tag !== Portal) {\n\t\tadapter.patch({\n\t\t\ttag,\n\t\t\ttagName: getTagName(tag),\n\t\t\tnode,\n\t\t\tprops,\n\t\t\toldProps,\n\t\t\tscope,\n\t\t\tcopyProps,\n\t\t\tisHydrating: !!childHydrationNodes,\n\t\t\tquietProps,\n\t\t});\n\t}\n\n\tif (!copyChildren) {\n\t\tconst children = commitChildren(\n\t\t\tadapter,\n\t\t\tret,\n\t\t\tctx,\n\t\t\tscope,\n\t\t\tret,\n\t\t\t0,\n\t\t\tschedulePromises,\n\t\t\thydrationMetaProp && !hydrationMetaProp.includes(\"children\")\n\t\t\t\t? undefined\n\t\t\t\t: childHydrationNodes,\n\t\t);\n\n\t\tadapter.arrange({\n\t\t\ttag,\n\t\t\ttagName: getTagName(tag),\n\t\t\tnode: node,\n\t\t\tprops,\n\t\t\tchildren,\n\t\t\toldProps,\n\t\t});\n\t}\n\n\tret.oldProps = props;\n\tif (tag === Portal) {\n\t\tflush(adapter, ret.value as TRoot);\n\t\t// The root passed to Portal elements are opaque to parents so we return\n\t\t// undefined here.\n\t\treturn;\n\t}\n\n\treturn node;\n}\n\nclass MetaProp {\n\tdeclare include: boolean;\n\tdeclare props: Set<string>;\n\n\tconstructor(propName: string, propValue: string) {\n\t\tthis.include = true;\n\t\tthis.props = new Set<string>();\n\t\tlet noBangs = true;\n\t\tlet allBangs = true;\n\t\tconst tokens = propValue.split(/[,\\s]+/);\n\t\tfor (let i = 0; i < tokens.length; i++) {\n\t\t\tconst token = tokens[i].trim();\n\t\t\tif (!token) {\n\t\t\t\tcontinue;\n\t\t\t} else if (token.startsWith(\"!\")) {\n\t\t\t\tnoBangs = false;\n\t\t\t\tthis.props.add(token.slice(1));\n\t\t\t} else {\n\t\t\t\tallBangs = false;\n\t\t\t\tthis.props.add(token);\n\t\t\t}\n\t\t}\n\n\t\tif (!allBangs && !noBangs) {\n\t\t\tconsole.error(\n\t\t\t\t`Invalid ${propName} prop \"${propValue}\".\\nUse prop or !prop but not both.`,\n\t\t\t);\n\t\t\tthis.include = true;\n\t\t\tthis.props.clear();\n\t\t} else {\n\t\t\tthis.include = noBangs;\n\t\t}\n\t}\n\n\tincludes(propName: string): boolean {\n\t\tif (this.include) {\n\t\t\treturn this.props.has(propName);\n\t\t} else {\n\t\t\treturn !this.props.has(propName);\n\t\t}\n\t}\n}\n\nfunction contextContains(parent: ContextState, child: ContextState): boolean {\n\tfor (\n\t\tlet current: ContextState | undefined = child;\n\t\tcurrent !== undefined;\n\t\tcurrent = current.parent\n\t) {\n\t\tif (current === parent) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\treturn false;\n}\n\n// When rendering is done without a root, we use this special anonymous root to\n// make sure after callbacks are still called.\nconst ANONYMOUS_ROOT: any = {};\nfunction flush<TRoot>(\n\tadapter: RenderAdapter<unknown, unknown, TRoot>,\n\troot: TRoot | undefined,\n\tinitiator?: ContextState,\n) {\n\tif (root != null) {\n\t\tadapter.finalize(root);\n\t}\n\n\tif (typeof root !== \"object\" || root === null) {\n\t\troot = ANONYMOUS_ROOT;\n\t}\n\n\t// The initiator is the context which initiated the rendering process. If\n\t// initiator is defined we call and clear all flush callbacks which are\n\t// registered with the initiator or with a child context of the initiator,\n\t// because they are fully rendered.\n\t//\n\t// If no initiator is provided, we can call and clear all flush callbacks\n\t// which are not scheduling.\n\tconst afterMap = afterMapByRoot.get(root as any);\n\tif (afterMap) {\n\t\tconst afterMap1 = new Map<ContextState, Set<Function>>();\n\t\tfor (const [ctx, callbacks] of afterMap) {\n\t\t\tif (\n\t\t\t\tgetFlag(ctx.ret, IsScheduling) ||\n\t\t\t\t(initiator && !contextContains(initiator, ctx))\n\t\t\t) {\n\t\t\t\t// copy over callbacks to the new map (defer them)\n\t\t\t\tafterMap.delete(ctx);\n\t\t\t\tafterMap1.set(ctx, callbacks);\n\t\t\t}\n\t\t}\n\n\t\tif (afterMap1.size) {\n\t\t\tafterMapByRoot.set(root as any, afterMap1);\n\t\t} else {\n\t\t\tafterMapByRoot.delete(root as any);\n\t\t}\n\n\t\tfor (const [ctx, callbacks] of afterMap) {\n\t\t\tconst value = adapter.read(getValue(ctx.ret));\n\t\t\tfor (const callback of callbacks) {\n\t\t\t\tcallback(value);\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction unmount<TNode, TScope, TRoot extends TNode | undefined, TResult>(\n\tadapter: RenderAdapter<TNode, TScope, TRoot, TResult>,\n\thost: Retainer<TNode>,\n\tctx: ContextState<TNode, TScope, TRoot, TResult> | undefined,\n\tret: Retainer<TNode>,\n\tisNested: boolean,\n): void {\n\t// TODO: set the IsUnmounted flag consistently for all retainers\n\tif (ret.fallback) {\n\t\tunmount(adapter, host, ctx, ret.fallback, isNested);\n\t\tret.fallback = undefined;\n\t}\n\n\tif (getFlag(ret, IsResurrecting)) {\n\t\treturn;\n\t}\n\n\tif (ret.lingerers) {\n\t\tfor (let i = 0; i < ret.lingerers.length; i++) {\n\t\t\tconst lingerers = ret.lingerers[i];\n\t\t\tif (lingerers) {\n\t\t\t\tfor (const lingerer of lingerers) {\n\t\t\t\t\tunmount(adapter, host, ctx, lingerer, isNested);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tret.lingerers = undefined;\n\t}\n\n\tif (typeof ret.el.tag === \"function\") {\n\t\tunmountComponent(ret.ctx!, isNested);\n\t} else if (ret.el.tag === Fragment) {\n\t\tunmountChildren(adapter, host, ctx, ret, isNested);\n\t} else if (ret.el.tag === Portal) {\n\t\tunmountChildren(adapter, ret, ctx, ret, false);\n\t\tif (ret.value != null) {\n\t\t\tadapter.finalize(ret.value as TRoot);\n\t\t}\n\t} else {\n\t\tunmountChildren(adapter, ret, ctx, ret, true);\n\n\t\tif (getFlag(ret, DidCommit)) {\n\t\t\tif (ctx) {\n\t\t\t\t// Remove the value from every context which shares the same host.\n\t\t\t\tremoveEventTargetDelegates(\n\t\t\t\t\tctx.ctx,\n\t\t\t\t\t[ret.value],\n\t\t\t\t\t(ctx1) => ctx1[_ContextState].host === host,\n\t\t\t\t);\n\t\t\t}\n\t\t\tadapter.remove({\n\t\t\t\tnode: ret.value as TNode,\n\t\t\t\tparentNode: host.value as TNode,\n\t\t\t\tisNested,\n\t\t\t});\n\t\t}\n\t}\n}\n\nfunction unmountChildren<\n\tTNode,\n\tTScope,\n\tTRoot extends TNode | undefined,\n\tTResult,\n>(\n\tadapter: RenderAdapter<TNode, TScope, TRoot, TResult>,\n\thost: Retainer<TNode>,\n\tctx: ContextState<TNode, TScope, TRoot, TResult> | undefined,\n\tret: Retainer<TNode>,\n\tisNested: boolean,\n): void {\n\tif (ret.graveyard) {\n\t\tfor (let i = 0; i < ret.graveyard.length; i++) {\n\t\t\tconst child = ret.graveyard[i];\n\t\t\tunmount(adapter, host, ctx, child, isNested);\n\t\t}\n\n\t\tret.graveyard = undefined;\n\t}\n\n\tfor (let i = 0, children = wrap(ret.children); i < children.length; i++) {\n\t\tconst child = children[i];\n\t\tif (typeof child === \"object\") {\n\t\t\tunmount(adapter, host, ctx, child, isNested);\n\t\t}\n\t}\n}\nconst provisionMaps = new WeakMap<ContextState, Map<unknown, unknown>>();\n\nconst scheduleMap = new WeakMap<ContextState, Set<Function>>();\n\nconst cleanupMap = new WeakMap<ContextState, Set<Function>>();\n\n// keys are roots\nconst afterMapByRoot = new WeakMap<object, Map<ContextState, Set<Function>>>();\n\ninterface PullController {\n\titerationP: Promise<ChildrenIteratorResult> | undefined;\n\tdiff: Promise<undefined> | undefined;\n\tonChildError: ((err: unknown) => void) | undefined;\n}\n\ninterface ScheduleController {\n\tpromise: Promise<unknown>;\n\tonAbort: () => void;\n}\n\n// TODO: allow ContextState to be initialized for testing purposes\n/**\n * @internal\n * The internal class which holds context data.\n */\nclass ContextState<\n\tTNode = unknown,\n\tTScope = unknown,\n\tTRoot extends TNode | undefined = TNode | undefined,\n\tTResult = unknown,\n> {\n\t/** The adapter of the renderer which created this context. */\n\tdeclare adapter: RenderAdapter<TNode, TScope, TRoot, TResult>;\n\n\t/** The root node as set by the nearest ancestor portal. */\n\tdeclare root: TRoot | undefined;\n\n\t/**\n\t * The nearest ancestor host or portal retainer.\n\t *\n\t * When refresh is called, the host element will be arranged as the last step\n\t * of the commit, to make sure the parent's children properly reflects the\n\t * components's childrenk\n\t */\n\tdeclare host: Retainer<TNode>;\n\n\t/** The parent context state. */\n\tdeclare parent: ContextState | undefined;\n\n\t/** The actual context associated with this state. */\n\tdeclare ctx: Context<unknown, TResult>;\n\n\t/** The value of the scope at the point of element's creation. */\n\tdeclare scope: TScope | undefined;\n\n\t/** The internal node associated with this context. */\n\tdeclare ret: Retainer<TNode>;\n\n\t/**\n\t * Any iterator returned by a component function.\n\t *\n\t * Existence of this property implies that the component is a generator\n\t * component. It is deleted when a component is returned.\n\t */\n\tdeclare iterator:\n\t\t| Iterator<Children, Children | void, unknown>\n\t\t| AsyncIterator<Children, Children | void, unknown>\n\t\t| undefined;\n\n\t// See runComponent() for a description of these properties.\n\tdeclare inflight: [Promise<undefined>, Promise<undefined>] | undefined;\n\tdeclare enqueued: [Promise<undefined>, Promise<undefined>] | undefined;\n\n\tdeclare pull: PullController | undefined;\n\n\t// The onPropsProvided callback is set when a component requests props via\n\t// the for await...of loop and props are not available. It is called when\n\t// the component is updated or refreshed.\n\tdeclare onPropsProvided: ((props: unknown) => unknown) | undefined;\n\t// The onPropsRequested callback is set when a component is updated or\n\t// refreshed but the new props are not consumed. It is called when the new\n\t// props are requested.\n\tdeclare onPropsRequested: (() => unknown) | undefined;\n\n\t// The last known index of the component's children, relative to its nearest\n\t// ancestor host or portal.\n\tdeclare index: number;\n\n\tdeclare schedule: ScheduleController | undefined;\n\n\tconstructor(\n\t\tadapter: RenderAdapter<TNode, TScope, TRoot, TResult>,\n\t\troot: TRoot,\n\t\thost: Retainer<TNode>,\n\t\tparent: ContextState | undefined,\n\t\tscope: TScope | undefined,\n\t\tret: Retainer<TNode>,\n\t) {\n\t\tthis.adapter = adapter;\n\t\tthis.root = root;\n\t\tthis.host = host;\n\t\tthis.parent = parent;\n\t\t// This property must be set after this.parent is set because the Context\n\t\t// constructor reads this.parent.\n\t\tthis.ctx = new Context(this);\n\t\tthis.scope = scope;\n\t\tthis.ret = ret;\n\n\t\tthis.iterator = undefined;\n\t\tthis.inflight = undefined;\n\t\tthis.enqueued = undefined;\n\n\t\tthis.onPropsProvided = undefined;\n\t\tthis.onPropsRequested = undefined;\n\n\t\tthis.pull = undefined;\n\t\tthis.index = 0;\n\t\tthis.schedule = undefined;\n\t}\n}\n\n// Public type that only extracts props from component functions\nexport type ComponentProps<T> = T extends () => unknown\n\t? {}\n\t: T extends (props: infer U) => unknown\n\t\t? U\n\t\t: never;\n\n// Public helper type that handles both component functions and regular objects\nexport type ComponentPropsOrProps<T> = T extends Function\n\t? ComponentProps<T>\n\t: T;\n\nconst _ContextState = Symbol.for(\"crank.ContextState\");\n\n/**\n * A class which is instantiated and passed to every component as its this\n * value/second parameter. Contexts form a tree just like elements and all\n * components in the element tree are connected via contexts. Components can\n * use this tree to communicate data upwards via events and downwards via\n * provisions.\n *\n * @template [T=*] - The expected shape of the props passed to the component,\n * or a component function. Used to strongly type the Context iterator methods.\n * @template [TResult=*] - The readable element value type. It is used in\n * places such as the return value of refresh and the argument passed to\n * schedule and cleanup callbacks.\n */\nexport class Context<\n\tT = any,\n\tTResult = any,\n> extends CustomEventTarget<Context> {\n\t/**\n\t * @internal\n\t * DO NOT USE READ THIS PROPERTY.\n\t */\n\tdeclare [_ContextState]: ContextState<unknown, unknown, unknown, TResult>;\n\n\t// TODO: If we could make the constructor function take a nicer value, it\n\t// would be useful for testing purposes.\n\tconstructor(state: ContextState<unknown, unknown, unknown, TResult>) {\n\t\tsuper(state.parent ? state.parent.ctx : null);\n\t\tthis[_ContextState] = state;\n\t}\n\n\t/**\n\t * The current props of the associated element.\n\t */\n\tget props(): ComponentPropsOrProps<T> {\n\t\treturn this[_ContextState].ret.el.props as ComponentPropsOrProps<T>;\n\t}\n\n\t/**\n\t * The current value of the associated element.\n\t *\n\t * @deprecated\n\t */\n\tget value(): TResult {\n\t\tconsole.warn(\"Context.value is deprecated.\");\n\t\treturn this[_ContextState].adapter.read(getValue(this[_ContextState].ret));\n\t}\n\n\tget isExecuting(): boolean {\n\t\treturn getFlag(this[_ContextState].ret, IsExecuting);\n\t}\n\n\tget isUnmounted(): boolean {\n\t\treturn getFlag(this[_ContextState].ret, IsUnmounted);\n\t}\n\n\t*[Symbol.iterator](): Generator<ComponentPropsOrProps<T>, undefined> {\n\t\tconst ctx = this[_ContextState];\n\t\tsetFlag(ctx.ret, IsInForOfLoop);\n\t\ttry {\n\t\t\twhile (!getFlag(ctx.ret, IsUnmounted) && !getFlag(ctx.ret, IsErrored)) {\n\t\t\t\tif (getFlag(ctx.ret, NeedsToYield)) {\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t`<${getTagName(ctx.ret.el.tag)}> context iterated twice without a yield`,\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tsetFlag(ctx.ret, NeedsToYield);\n\t\t\t\t}\n\n\t\t\t\tyield ctx.ret.el.props as ComponentPropsOrProps<T>;\n\t\t\t}\n\t\t} finally {\n\t\t\tsetFlag(ctx.ret, IsInForOfLoop, false);\n\t\t}\n\t}\n\n\tasync *[Symbol.asyncIterator](): AsyncGenerator<\n\t\tComponentPropsOrProps<T>,\n\t\tundefined\n\t> {\n\t\tconst ctx = this[_ContextState];\n\t\tsetFlag(ctx.ret, IsInForAwaitOfLoop);\n\t\ttry {\n\t\t\twhile (!getFlag(ctx.ret, IsUnmounted) && !getFlag(ctx.ret, IsErrored)) {\n\t\t\t\tif (getFlag(ctx.ret, NeedsToYield)) {\n\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t`<${getTagName(ctx.ret.el.tag)}> context iterated twice without a yield`,\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tsetFlag(ctx.ret, NeedsToYield);\n\t\t\t\t}\n\n\t\t\t\tif (getFlag(ctx.ret, PropsAvailable)) {\n\t\t\t\t\tsetFlag(ctx.ret, PropsAvailable, false);\n\t\t\t\t\tyield ctx.ret.el.props;\n\t\t\t\t} else {\n\t\t\t\t\tconst props = await new Promise<ComponentPropsOrProps<T>>(\n\t\t\t\t\t\t(resolve) =>\n\t\t\t\t\t\t\t(ctx.onPropsProvided = resolve as (props: unknown) => unknown),\n\t\t\t\t\t);\n\t\t\t\t\tif (getFlag(ctx.ret, IsUnmounted) || getFlag(ctx.ret, IsErrored)) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tyield props;\n\t\t\t\t}\n\n\t\t\t\tif (ctx.onPropsRequested) {\n\t\t\t\t\tctx.onPropsRequested();\n\t\t\t\t\tctx.onPropsRequested = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t} finally {\n\t\t\tsetFlag(ctx.ret, IsInForAwaitOfLoop, false);\n\t\t\tif (ctx.onPropsRequested) {\n\t\t\t\tctx.onPropsRequested();\n\t\t\t\tctx.onPropsRequested = undefined;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Re-executes a component.\n\t *\n\t * @param callback - Optional callback to execute before refresh\n\t * @returns The rendered result of the component or a promise thereof if the\n\t * component or its children execute asynchronously.\n\t */\n\trefresh(callback?: () => unknown): Promise<TResult> | TResult {\n\t\tconst ctx = this[_ContextState];\n\t\tif (getFlag(ctx.ret, IsUnmounted)) {\n\t\t\tconsole.error(\n\t\t\t\t`Component <${getTagName(ctx.ret.el.tag)}> is unmounted. Check the isUnmounted property if necessary.`,\n\t\t\t);\n\t\t\treturn ctx.adapter.read(getValue(ctx.ret));\n\t\t} else if (getFlag(ctx.ret, IsExecuting)) {\n\t\t\tconsole.error(\n\t\t\t\t`Component <${getTagName(ctx.ret.el.tag)}> is already executing Check the isExecuting property if necessary.`,\n\t\t\t);\n\t\t\treturn ctx.adapter.read(getValue(ctx.ret));\n\t\t}\n\n\t\tif (callback) {\n\t\t\tconst result = callback();\n\t\t\tif (isPromiseLike(result)) {\n\t\t\t\treturn Promise.resolve(result).then(() => {\n\t\t\t\t\tif (!getFlag(ctx.ret, IsUnmounted)) {\n\t\t\t\t\t\treturn this.refresh();\n\t\t\t\t\t}\n\t\t\t\t\treturn ctx.adapter.read(getValue(ctx.ret));\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (getFlag(ctx.ret, IsScheduling)) {\n\t\t\tsetFlag(ctx.ret, IsSchedulingRefresh);\n\t\t}\n\n\t\tlet diff: Promise<undefined> | undefined;\n\t\tconst schedulePromises: Array<PromiseLike<unknown>> = [];\n\t\ttry {\n\t\t\tsetFlag(ctx.ret, IsRefreshing);\n\t\t\tdiff = enqueueComponent(ctx);\n\t\t\tif (isPromiseLike(diff)) {\n\t\t\t\treturn diff\n\t\t\t\t\t.then(() => ctx.adapter.read(commitComponent(ctx, schedulePromises)))\n\t\t\t\t\t.then((result) => {\n\t\t\t\t\t\tif (schedulePromises.length) {\n\t\t\t\t\t\t\treturn Promise.all(schedulePromises).then(() => {\n\t\t\t\t\t\t\t\treturn ctx.adapter.read(getValue(ctx.ret));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t})\n\t\t\t\t\t.catch((err) => {\n\t\t\t\t\t\tconst diff = propagateError(ctx, err, schedulePromises);\n\t\t\t\t\t\tif (diff) {\n\t\t\t\t\t\t\treturn diff.then(() => {\n\t\t\t\t\t\t\t\tif (schedulePromises.length) {\n\t\t\t\t\t\t\t\t\treturn Promise.all(schedulePromises).then(() => {\n\t\t\t\t\t\t\t\t\t\treturn ctx.adapter.read(getValue(ctx.ret));\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn ctx.adapter.read(getValue(ctx.ret));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (schedulePromises.length) {\n\t\t\t\t\t\t\treturn Promise.all(schedulePromises).then(() => {\n\t\t\t\t\t\t\t\treturn ctx.adapter.read(getValue(ctx.ret));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn ctx.adapter.read(getValue(ctx.ret));\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => setFlag(ctx.ret, IsRefreshing, false));\n\t\t\t}\n\n\t\t\tconst result = ctx.adapter.read(commitComponent(ctx, schedulePromises));\n\t\t\tif (schedulePromises.length) {\n\t\t\t\treturn Promise.all(schedulePromises).then(() => {\n\t\t\t\t\treturn ctx.adapter.read(getValue(ctx.ret));\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn result;\n\t\t} catch (err) {\n\t\t\t// TODO: await schedulePromises\n\t\t\tconst diff = propagateError(ctx, err, schedulePromises);\n\t\t\tif (diff) {\n\t\t\t\treturn diff\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tif (schedulePromises.length) {\n\t\t\t\t\t\t\treturn Promise.all(schedulePromises).then(() => {\n\t\t\t\t\t\t\t\treturn ctx.adapter.read(getValue(ctx.ret));\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.then(() => ctx.adapter.read(getValue(ctx.ret)));\n\t\t\t}\n\n\t\t\tif (schedulePromises.length) {\n\t\t\t\treturn Promise.all(schedulePromises).then(() => {\n\t\t\t\t\treturn ctx.adapter.read(getValue(ctx.ret));\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn ctx.adapter.read(getValue(ctx.ret));\n\t\t} finally {\n\t\t\tif (!isPromiseLike(diff)) {\n\t\t\t\tsetFlag(ctx.ret, IsRefreshing, false);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Registers a callback which fires when the component's children are\n\t * created. Will only fire once per callback and update.\n\t */\n\tschedule(): Promise<TResult>;\n\tschedule(callback: (value: TResult) => unknown): void;\n\tschedule(callback?: (value: TResult) => unknown): Promise<TResult> | void {\n\t\tif (!callback) {\n\t\t\treturn new Promise<TResult>((resolve) => this.schedule(resolve));\n\t\t}\n\n\t\tconst ctx = this[_ContextState];\n\t\tlet callbacks = scheduleMap.get(ctx);\n\t\tif (!callbacks) {\n\t\t\tcallbacks = new Set<Function>();\n\t\t\tscheduleMap.set(ctx, callbacks);\n\t\t}\n\n\t\tcallbacks.add(callback);\n\t}\n\n\t/**\n\t * Registers a callback which fires when the component's children are fully\n\t * rendered. Will only fire once per callback and update.\n\t */\n\tafter(): Promise<TResult>;\n\tafter(callback: (value: TResult) => unknown): void;\n\tafter(callback?: (value: TResult) => unknown): Promise<TResult> | void {\n\t\tif (!callback) {\n\t\t\treturn new Promise<TResult>((resolve) => this.after(resolve));\n\t\t}\n\t\tconst ctx = this[_ContextState];\n\t\tconst root = ctx.root || ANONYMOUS_ROOT;\n\t\tlet afterMap = afterMapByRoot.get(root);\n\t\tif (!afterMap) {\n\t\t\tafterMap = new Map<ContextState, Set<Function>>();\n\t\t\tafterMapByRoot.set(root, afterMap);\n\t\t}\n\n\t\tlet callbacks = afterMap.get(ctx);\n\t\tif (!callbacks) {\n\t\t\tcallbacks = new Set<Function>();\n\t\t\tafterMap.set(ctx, callbacks);\n\t\t}\n\n\t\tcallbacks.add(callback);\n\t}\n\n\t/**\n\t * @deprecated the flush() method has been renamed to after().\n\t */\n\tflush(): Promise<TResult>;\n\tflush(callback: (value: TResult) => unknown): void;\n\tflush(callback?: (value: TResult) => unknown): Promise<TResult> | void {\n\t\tconsole.error(\"Context.flush() method has been renamed to after()\");\n\t\tthis.after(callback!);\n\t}\n\n\t/**\n\t * Registers a callback which fires when the component unmounts.\n\t *\n\t * The callback can be async to defer the unmounting of a component's children.\n\t */\n\tcleanup(): Promise<TResult>;\n\tcleanup(callback: (value: TResult) => unknown): void;\n\tcleanup(callback?: (value: TResult) => unknown): Promise<TResult> | void {\n\t\tif (!callback) {\n\t\t\treturn new Promise<TResult>((resolve) => this.cleanup(resolve));\n\t\t}\n\t\tconst ctx = this[_ContextState];\n\n\t\tif (getFlag(ctx.ret, IsUnmounted)) {\n\t\t\tconst value = ctx.adapter.read(getValue(ctx.ret));\n\t\t\tcallback(value);\n\t\t\treturn;\n\t\t}\n\n\t\tlet callbacks = cleanupMap.get(ctx);\n\t\tif (!callbacks) {\n\t\t\tcallbacks = new Set<Function>();\n\t\t\tcleanupMap.set(ctx, callbacks);\n\t\t}\n\n\t\tcallbacks.add(callback);\n\t}\n\n\tconsume<TKey extends keyof ProvisionMap>(key: TKey): ProvisionMap[TKey];\n\tconsume(key: unknown): any;\n\tconsume(key: unknown): any {\n\t\tfor (\n\t\t\tlet ctx = this[_ContextState].parent;\n\t\t\tctx !== undefined;\n\t\t\tctx = ctx.parent\n\t\t) {\n\t\t\tconst provisions = provisionMaps.get(ctx);\n\t\t\tif (provisions && provisions.has(key)) {\n\t\t\t\treturn provisions.get(key)!;\n\t\t\t}\n\t\t}\n\t}\n\n\tprovide<TKey extends keyof ProvisionMap>(\n\t\tkey: TKey,\n\t\tvalue: ProvisionMap[TKey],\n\t): void;\n\tprovide(key: unknown, value: any): void;\n\tprovide(key: unknown, value: any): void {\n\t\tconst ctx = this[_ContextState];\n\t\tlet provisions = provisionMaps.get(ctx);\n\t\tif (!provisions) {\n\t\t\tprovisions = new Map();\n\t\t\tprovisionMaps.set(ctx, provisions);\n\t\t}\n\n\t\tprovisions.set(key, value);\n\t}\n\n\t[CustomEventTarget.dispatchEventOnSelf](ev: Event): void {\n\t\tconst ctx = this[_ContextState];\n\t\t// dispatchEvent calls the prop callback if it exists\n\t\tlet propCallback = ctx.ret.el.props[\"on\" + ev.type] as unknown;\n\t\tif (typeof propCallback === \"function\") {\n\t\t\tpropCallback(ev);\n\t\t} else {\n\t\t\tfor (const propName in ctx.ret.el.props) {\n\t\t\t\tif (propName.toLowerCase() === \"on\" + ev.type.toLowerCase()) {\n\t\t\t\t\tpropCallback = ctx.ret.el.props[propName] as unknown;\n\t\t\t\t\tif (typeof propCallback === \"function\") {\n\t\t\t\t\t\tpropCallback(ev);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction diffComponent<TNode, TScope, TRoot extends TNode | undefined, TResult>(\n\tadapter: RenderAdapter<TNode, TScope, TRoot, TResult>,\n\troot: TRoot | undefined,\n\thost: Retainer<TNode, TScope>,\n\tparent: ContextState | undefined,\n\tscope: TScope | undefined,\n\tret: Retainer<TNode>,\n): Promise<undefined> | undefined {\n\tlet ctx: ContextState<TNode>;\n\tif (ret.ctx) {\n\t\tctx = ret.ctx;\n\t\tif (getFlag(ctx.ret, IsExecuting)) {\n\t\t\tconsole.error(\n\t\t\t\t`Component <${getTagName(ctx.ret.el.tag)}> is already executing`,\n\t\t\t);\n\t\t\treturn;\n\t\t} else if (ctx.schedule) {\n\t\t\treturn ctx.schedule.promise.then(() => {\n\t\t\t\treturn diffComponent(adapter, root, host, parent, scope, ret);\n\t\t\t});\n\t\t}\n\t} else {\n\t\tctx = ret.ctx = new ContextState(adapter, root, host, parent, scope, ret);\n\t}\n\n\tsetFlag(ctx.ret, IsUpdating);\n\treturn enqueueComponent(ctx);\n}\n\nfunction diffComponentChildren<TNode, TResult>(\n\tctx: ContextState<TNode, unknown, TNode | undefined, TResult>,\n\tchildren: Children,\n\tisYield: boolean,\n): Promise<undefined> | undefined {\n\tif (getFlag(ctx.ret, IsUnmounted) || getFlag(ctx.ret, IsErrored)) {\n\t\treturn;\n\t} else if (children === undefined) {\n\t\tconsole.error(\n\t\t\t`Component <${getTagName(ctx.ret.el.tag)}> has ${isYield ? \"yielded\" : \"returned\"} undefined. If this was intentional, ${isYield ? \"yield\" : \"return\"} null instead.`,\n\t\t);\n\t}\n\n\tlet diff: Promise<undefined> | undefined;\n\ttry {\n\t\t// TODO: Use a different flag here to indicate the component is\n\t\t// synchronously rendering children\n\n\t\t// We set the isExecuting flag in case a child component dispatches an event\n\t\t// which bubbles to this component and causes a synchronous refresh().\n\t\tsetFlag(ctx.ret, IsExecuting);\n\t\tdiff = diffChildren(\n\t\t\tctx.adapter,\n\t\t\tctx.root,\n\t\t\tctx.host,\n\t\t\tctx,\n\t\t\tctx.scope,\n\t\t\tctx.ret,\n\t\t\tnarrow(children),\n\t\t);\n\t\tif (diff) {\n\t\t\tdiff = diff.catch((err) => handleChildError(ctx, err));\n\t\t}\n\t} catch (err) {\n\t\tdiff = handleChildError(ctx, err);\n\t} finally {\n\t\tsetFlag(ctx.ret, IsExecuting, false);\n\t}\n\n\treturn diff;\n}\n\n/** Enqueues and executes the component associated with the context. */\nfunction enqueueComponent<TNode, TResult>(\n\tctx: ContextState<TNode, unknown, TNode | undefined, TResult>,\n): Promise<undefined> | undefined {\n\tif (!ctx.inflight) {\n\t\tconst [block, diff] = runComponent<TNode, TResult>(ctx);\n\t\tif (block) {\n\t\t\t// if block is a promise, diff is a promise\n\t\t\tctx.inflight = [block.finally(() => advanceComponent(ctx)), diff!];\n\t\t}\n\n\t\treturn diff;\n\t} else if (!ctx.enqueued) {\n\t\t// The enqueuedBlock and enqueuedDiff properties must be set\n\t\t// simultaneously, hence the usage of the Promise constructor.\n\t\tlet resolve: Function;\n\t\tctx.enqueued = [\n\t\t\tnew Promise<undefined>((resolve1) => (resolve = resolve1)).finally(() =>\n\t\t\t\tadvanceComponent(ctx),\n\t\t\t),\n\t\t\tctx.inflight[0]!.finally(() => {\n\t\t\t\tconst [block, diff] = runComponent<TNode, TResult>(ctx);\n\t\t\t\tresolve(block);\n\t\t\t\treturn diff;\n\t\t\t}),\n\t\t];\n\t}\n\n\treturn ctx.enqueued[1];\n}\n\n/** Called when the inflight block promise settles. */\nfunction advanceComponent(ctx: ContextState): void {\n\tctx.inflight = ctx.enqueued;\n\tctx.enqueued = undefined;\n}\n\n/**\n * This function is responsible for executing components, and handling the\n * different component types.\n *\n * @returns {[block, diff]} A tuple where:\n * - block is a promise or undefined which represents the duration during which\n *   the component is blocked.\n * - diff is a promise or undefined which represents the duration for diffing\n *   of children.\n *\n * While a component is blocked, further updates to the component are enqueued.\n *\n * Each component type blocks according to its implementation:\n * - Sync function components never block; when props or state change,\n *   updates are immediately passed to children.\n * - Async function components block only while awaiting their own async work\n *   (e.g., during an await), but do not block while their async children are rendering.\n * - Sync generator components block while their children are rendering;\n *   they only resume once their children have finished.\n * - Async generator components can block in two different ways:\n *   - By default, they behave like sync generator components, blocking while\n *     the component or its children are rendering.\n *   - Within a for await...of loop, they block only while waiting for new\n *     props to be requested, and not while children are rendering.\n */\nfunction runComponent<TNode, TResult>(\n\tctx: ContextState<TNode, unknown, TNode | undefined, TResult>,\n): [Promise<undefined> | undefined, Promise<undefined> | undefined] {\n\tif (getFlag(ctx.ret, IsUnmounted)) {\n\t\treturn [undefined, undefined];\n\t}\n\n\tconst ret = ctx.ret;\n\tconst initial = !ctx.iterator;\n\tif (initial) {\n\t\tsetFlag(ctx.ret, IsExecuting);\n\t\tclearEventListeners(ctx.ctx);\n\t\tlet returned: ReturnType<Component>;\n\t\ttry {\n\t\t\treturned = (ret.el.tag as Component).call(ctx.ctx, ret.el.props, ctx.ctx);\n\t\t} catch (err) {\n\t\t\tsetFlag(ctx.ret, IsErrored);\n\t\t\tthrow err;\n\t\t} finally {\n\t\t\tsetFlag(ctx.ret, IsExecuting, false);\n\t\t}\n\n\t\tif (isIteratorLike(returned)) {\n\t\t\tctx.iterator = returned;\n\t\t} else if (!isPromiseLike(returned)) {\n\t\t\t// sync function component\n\t\t\treturn [\n\t\t\t\tundefined,\n\t\t\t\tdiffComponentChildren<TNode, TResult>(ctx, returned, false),\n\t\t\t];\n\t\t} else {\n\t\t\t// async function component\n\t\t\tconst returned1 =\n\t\t\t\treturned instanceof Promise ? returned : Promise.resolve(returned);\n\t\t\treturn [\n\t\t\t\treturned1.catch(NOOP),\n\t\t\t\treturned1.then(\n\t\t\t\t\t(returned) =>\n\t\t\t\t\t\tdiffComponentChildren<TNode, TResult>(ctx, returned, false),\n\t\t\t\t\t(err) => {\n\t\t\t\t\t\tsetFlag(ctx.ret, IsErrored);\n\t\t\t\t\t\tthrow err;\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t];\n\t\t}\n\t}\n\n\tlet iteration!: Promise<ChildrenIteratorResult> | ChildrenIteratorResult;\n\tif (initial) {\n\t\ttry {\n\t\t\tsetFlag(ctx.ret, IsExecuting);\n\t\t\titeration = ctx.iterator!.next();\n\t\t} catch (err) {\n\t\t\tsetFlag(ctx.ret, IsErrored);\n\t\t\tthrow err;\n\t\t} finally {\n\t\t\tsetFlag(ctx.ret, IsExecuting, false);\n\t\t}\n\n\t\tif (isPromiseLike(iteration)) {\n\t\t\tsetFlag(ctx.ret, IsAsyncGen);\n\t\t} else {\n\t\t\tsetFlag(ctx.ret, IsSyncGen);\n\t\t}\n\t}\n\n\tif (getFlag(ctx.ret, IsSyncGen)) {\n\t\t// sync generator component\n\t\tif (!initial) {\n\t\t\ttry {\n\t\t\t\tsetFlag(ctx.ret, IsExecuting);\n\t\t\t\tconst oldResult = ctx.adapter.read(getValue(ctx.ret));\n\t\t\t\titeration = ctx.iterator!.next(oldResult);\n\t\t\t} catch (err) {\n\t\t\t\tsetFlag(ctx.ret, IsErrored);\n\t\t\t\tthrow err;\n\t\t\t} finally {\n\t\t\t\tsetFlag(ctx.ret, IsExecuting, false);\n\t\t\t}\n\t\t}\n\n\t\tif (isPromiseLike(iteration)) {\n\t\t\tthrow new Error(\"Mixed generator component\");\n\t\t}\n\n\t\tif (\n\t\t\tgetFlag(ctx.ret, IsInForOfLoop) &&\n\t\t\t!getFlag(ctx.ret, NeedsToYield) &&\n\t\t\t!getFlag(ctx.ret, IsUnmounted) &&\n\t\t\t!getFlag(ctx.ret, IsSchedulingRefresh)\n\t\t) {\n\t\t\tconsole.error(\n\t\t\t\t`Component <${getTagName(ctx.ret.el.tag)}> yielded/returned more than once in for...of loop`,\n\t\t\t);\n\t\t}\n\n\t\tsetFlag(ctx.ret, NeedsToYield, false);\n\t\tsetFlag(ctx.ret, IsSchedulingRefresh, false);\n\t\tif (iteration.done) {\n\t\t\tsetFlag(ctx.ret, IsSyncGen, false);\n\t\t\tctx.iterator = undefined;\n\t\t}\n\n\t\tconst diff = diffComponentChildren<TNode, TResult>(\n\t\t\tctx,\n\t\t\titeration.value as Children,\n\t\t\t!iteration.done,\n\t\t);\n\t\tconst block = isPromiseLike(diff) ? diff.catch(NOOP) : undefined;\n\t\treturn [block, diff];\n\t} else {\n\t\tif (getFlag(ctx.ret, IsInForAwaitOfLoop)) {\n\t\t\t// initializes the async generator loop\n\t\t\tpullComponent(ctx, iteration);\n\t\t\tconst block = resumePropsAsyncIterator(ctx);\n\t\t\treturn [block, ctx.pull && ctx.pull.diff];\n\t\t} else {\n\t\t\t// We call resumePropsAsyncIterator in case the component exits the\n\t\t\t// for...of loop\n\t\t\tresumePropsAsyncIterator(ctx);\n\t\t\tif (!initial) {\n\t\t\t\ttry {\n\t\t\t\t\tsetFlag(ctx.ret, IsExecuting);\n\t\t\t\t\tconst oldResult = ctx.adapter.read(getValue(ctx.ret));\n\t\t\t\t\titeration = ctx.iterator!.next(oldResult);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tsetFlag(ctx.ret, IsErrored);\n\t\t\t\t\tthrow err;\n\t\t\t\t} finally {\n\t\t\t\t\tsetFlag(ctx.ret, IsExecuting, false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!isPromiseLike(iteration)) {\n\t\t\t\tthrow new Error(\"Mixed generator component\");\n\t\t\t}\n\n\t\t\tconst diff = iteration.then(\n\t\t\t\t(iteration) => {\n\t\t\t\t\tif (getFlag(ctx.ret, IsInForAwaitOfLoop)) {\n\t\t\t\t\t\t// We have entered a for await...of loop, so we start pulling\n\t\t\t\t\t\tpullComponent(ctx, iteration);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tgetFlag(ctx.ret, IsInForOfLoop) &&\n\t\t\t\t\t\t\t!getFlag(ctx.ret, NeedsToYield) &&\n\t\t\t\t\t\t\t!getFlag(ctx.ret, IsUnmounted) &&\n\t\t\t\t\t\t\t!getFlag(ctx.ret, IsSchedulingRefresh)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t\t\t`Component <${getTagName(ctx.ret.el.tag)}> yielded/returned more than once in for...of loop`,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tsetFlag(ctx.ret, NeedsToYield, false);\n\t\t\t\t\tsetFlag(ctx.ret, IsSchedulingRefresh, false);\n\t\t\t\t\tif (iteration.done) {\n\t\t\t\t\t\tsetFlag(ctx.ret, IsAsyncGen, false);\n\t\t\t\t\t\tctx.iterator = undefined;\n\t\t\t\t\t}\n\t\t\t\t\treturn diffComponentChildren<TNode, TResult>(\n\t\t\t\t\t\tctx,\n\t\t\t\t\t\t// Children can be void so we eliminate that here\n\t\t\t\t\t\titeration.value as Children,\n\t\t\t\t\t\t!iteration.done,\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\t(err) => {\n\t\t\t\t\tsetFlag(ctx.ret, IsErrored);\n\t\t\t\t\tthrow err;\n\t\t\t\t},\n\t\t\t);\n\n\t\t\treturn [diff.catch(NOOP), diff];\n\t\t}\n\t}\n}\n\n/**\n * Called to resume the props async iterator for async generator components.\n *\n * @returns {Promise<undefined> | undefined} A possible promise which\n * represents the duration during which the component is blocked.\n */\nfunction resumePropsAsyncIterator(\n\tctx: ContextState,\n): Promise<undefined> | undefined {\n\tif (ctx.onPropsProvided) {\n\t\tctx.onPropsProvided(ctx.ret.el.props);\n\t\tctx.onPropsProvided = undefined;\n\t\tsetFlag(ctx.ret, PropsAvailable, false);\n\t} else {\n\t\tsetFlag(ctx.ret, PropsAvailable);\n\t\tif (getFlag(ctx.ret, IsInForAwaitOfLoop)) {\n\t\t\treturn new Promise<undefined>(\n\t\t\t\t(resolve) => (ctx.onPropsRequested = resolve as () => unknown),\n\t\t\t);\n\t\t}\n\t}\n\n\treturn (\n\t\tctx.pull && ctx.pull.iterationP && ctx.pull.iterationP.then(NOOP, NOOP)\n\t);\n}\n\n/**\n * The logic for pulling from async generator components when they are in a for\n * await...of loop is implemented here.\n *\n * It makes sense to group this logic in a single async loop to prevent race\n * conditions caused by calling next(), throw() and return() concurrently.\n */\nasync function pullComponent<TNode, TResult>(\n\tctx: ContextState<TNode, unknown, TNode, TResult>,\n\titerationP:\n\t\t| Promise<ChildrenIteratorResult>\n\t\t| ChildrenIteratorResult\n\t\t| undefined,\n): Promise<void> {\n\tif (!iterationP || ctx.pull) {\n\t\treturn;\n\t}\n\n\tctx.pull = {iterationP: undefined, diff: undefined, onChildError: undefined};\n\n\t// TODO: replace done with iteration\n\t//let iteration: ChildrenIteratorResult | undefined;\n\tlet done = false;\n\ttry {\n\t\tlet childError: any;\n\t\twhile (!done) {\n\t\t\tif (isPromiseLike(iterationP)) {\n\t\t\t\tctx.pull.iterationP = iterationP;\n\t\t\t}\n\n\t\t\tlet onDiff!: Function;\n\t\t\tctx.pull.diff = new Promise((resolve) => (onDiff = resolve)).then(\n\t\t\t\t(): undefined => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t!(getFlag(ctx.ret, IsUpdating) || getFlag(ctx.ret, IsRefreshing))\n\t\t\t\t\t) {\n\t\t\t\t\t\tcommitComponent(ctx, []);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t(err) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t!(getFlag(ctx.ret, IsUpdating) || getFlag(ctx.ret, IsRefreshing)) ||\n\t\t\t\t\t\t// TODO: is this flag necessary?\n\t\t\t\t\t\t!getFlag(ctx.ret, NeedsToYield)\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn propagateError(ctx, err, []);\n\t\t\t\t\t}\n\n\t\t\t\t\tthrow err;\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tlet iteration: ChildrenIteratorResult;\n\t\t\ttry {\n\t\t\t\titeration = await iterationP;\n\t\t\t} catch (err) {\n\t\t\t\tdone = true;\n\t\t\t\tsetFlag(ctx.ret, IsErrored);\n\t\t\t\tsetFlag(ctx.ret, NeedsToYield, false);\n\t\t\t\tonDiff(Promise.reject(err));\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\t// this must be set after iterationP is awaited\n\t\t\tlet oldResult: Promise<TResult>;\n\t\t\t{\n\t\t\t\t// The 'floating' flag tracks whether the promise passed to the generator\n\t\t\t\t// is handled (via await, then, or catch). If handled, we reject the\n\t\t\t\t// promise so the user can catch errors. If not, we inject the error back\n\t\t\t\t// into the generator using throw, like for sync generator components.\n\t\t\t\tlet floating = true;\n\t\t\t\tconst oldResult1 = new Promise<TResult>((resolve, reject) => {\n\t\t\t\t\tctx.ctx.schedule(resolve);\n\t\t\t\t\tctx.pull!.onChildError = (err: any) => {\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t\tif (floating) {\n\t\t\t\t\t\t\tchildError = err;\n\t\t\t\t\t\t\tresumePropsAsyncIterator(ctx);\n\t\t\t\t\t\t\treturn ctx.pull!.diff;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t});\n\n\t\t\t\toldResult1.catch(NOOP);\n\t\t\t\t// We use Object.create() to clone the promise for float detection\n\t\t\t\t// because modern JS engines skip calling .then() on promises awaited\n\t\t\t\t// with await.\n\t\t\t\toldResult = Object.create(oldResult1);\n\t\t\t\toldResult.then = function (\n\t\t\t\t\tonfulfilled?: ((value: TResult) => any) | null,\n\t\t\t\t\tonrejected?: ((reason: any) => any) | null,\n\t\t\t\t): Promise<any> {\n\t\t\t\t\tfloating = false;\n\t\t\t\t\treturn oldResult1.then(onfulfilled, onrejected);\n\t\t\t\t};\n\n\t\t\t\toldResult.catch = function (\n\t\t\t\t\tonrejected?: ((reason: any) => any) | null,\n\t\t\t\t): Promise<any> {\n\t\t\t\t\tfloating = false;\n\t\t\t\t\treturn oldResult1.catch(onrejected);\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (childError != null) {\n\t\t\t\ttry {\n\t\t\t\t\tsetFlag(ctx.ret, IsExecuting);\n\t\t\t\t\tif (typeof ctx.iterator!.throw !== \"function\") {\n\t\t\t\t\t\tthrow childError;\n\t\t\t\t\t}\n\t\t\t\t\titeration = await ctx.iterator!.throw(childError);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tdone = true;\n\t\t\t\t\tsetFlag(ctx.ret, IsErrored);\n\t\t\t\t\tsetFlag(ctx.ret, NeedsToYield, false);\n\t\t\t\t\tonDiff(Promise.reject(err));\n\t\t\t\t\tbreak;\n\t\t\t\t} finally {\n\t\t\t\t\tchildError = undefined;\n\t\t\t\t\tsetFlag(ctx.ret, IsExecuting, false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// this makes sure we pause before entering a loop if we yield before it\n\t\t\tif (!getFlag(ctx.ret, IsInForAwaitOfLoop)) {\n\t\t\t\tsetFlag(ctx.ret, PropsAvailable, false);\n\t\t\t}\n\n\t\t\tdone = !!iteration.done;\n\n\t\t\tlet diff: Promise<undefined> | undefined;\n\t\t\ttry {\n\t\t\t\tif (!isPromiseLike(iterationP)) {\n\t\t\t\t\t// if iterationP is an iteration and not a promise, the component was\n\t\t\t\t\t// not in a for await...of loop when the iteration started, so we can\n\t\t\t\t\t// skip the diffing of children as it is handled elsewhere.\n\t\t\t\t\tdiff = undefined;\n\t\t\t\t} else if (\n\t\t\t\t\t!getFlag(ctx.ret, NeedsToYield) &&\n\t\t\t\t\tgetFlag(ctx.ret, PropsAvailable) &&\n\t\t\t\t\tgetFlag(ctx.ret, IsInForAwaitOfLoop)\n\t\t\t\t) {\n\t\t\t\t\t// logic to skip yielded children in a stale for await of iteration.\n\t\t\t\t\tdiff = undefined;\n\t\t\t\t} else {\n\t\t\t\t\tdiff = diffComponentChildren<TNode, TResult>(\n\t\t\t\t\t\tctx,\n\t\t\t\t\t\titeration.value!,\n\t\t\t\t\t\t!iteration.done,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tonDiff(Promise.reject(err));\n\t\t\t} finally {\n\t\t\t\tonDiff(diff);\n\t\t\t\tsetFlag(ctx.ret, NeedsToYield, false);\n\t\t\t}\n\n\t\t\tif (getFlag(ctx.ret, IsUnmounted)) {\n\t\t\t\t// TODO: move this unmounted branch outside the loop\n\t\t\t\twhile (\n\t\t\t\t\t(!iteration || !iteration.done) &&\n\t\t\t\t\tctx.iterator &&\n\t\t\t\t\tgetFlag(ctx.ret, IsInForAwaitOfLoop)\n\t\t\t\t) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tsetFlag(ctx.ret, IsExecuting);\n\t\t\t\t\t\titeration = await ctx.iterator.next(oldResult);\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tsetFlag(ctx.ret, IsErrored);\n\t\t\t\t\t\t// we throw the error here to cause an unhandled rejection because\n\t\t\t\t\t\t// the promise returned from pullComponent is never awaited\n\t\t\t\t\t\tthrow err;\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tsetFlag(ctx.ret, IsExecuting, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t(!iteration || !iteration.done) &&\n\t\t\t\t\tctx.iterator &&\n\t\t\t\t\ttypeof ctx.iterator.return === \"function\"\n\t\t\t\t) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tsetFlag(ctx.ret, IsExecuting);\n\t\t\t\t\t\tawait ctx.iterator.return();\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tsetFlag(ctx.ret, IsErrored);\n\t\t\t\t\t\tthrow err;\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tsetFlag(ctx.ret, IsExecuting, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t} else if (!getFlag(ctx.ret, IsInForAwaitOfLoop)) {\n\t\t\t\t// we have exited the for...await of, so updates will be handled by the\n\t\t\t\t// regular runComponent/enqueueComponent logic.\n\t\t\t\tbreak;\n\t\t\t} else if (!iteration.done) {\n\t\t\t\ttry {\n\t\t\t\t\tsetFlag(ctx.ret, IsExecuting);\n\t\t\t\t\titerationP = ctx.iterator!.next(\n\t\t\t\t\t\toldResult,\n\t\t\t\t\t) as Promise<ChildrenIteratorResult>;\n\t\t\t\t} finally {\n\t\t\t\t\tsetFlag(ctx.ret, IsExecuting, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} finally {\n\t\tif (done) {\n\t\t\tsetFlag(ctx.ret, IsAsyncGen, false);\n\t\t\tctx.iterator = undefined;\n\t\t}\n\n\t\tctx.pull = undefined;\n\t}\n}\n\nfunction commitComponent<TNode>(\n\tctx: ContextState<TNode>,\n\tschedulePromises: Array<PromiseLike<unknown>>,\n\thydrationNodes?: Array<TNode> | undefined,\n): ElementValue<TNode> {\n\tif (ctx.schedule) {\n\t\tctx.schedule.promise.then(() => {\n\t\t\tcommitComponent(ctx, []);\n\t\t\tpropagateComponent(ctx);\n\t\t});\n\t\treturn getValue(ctx.ret);\n\t}\n\n\tconst values = commitChildren(\n\t\tctx.adapter,\n\t\tctx.host,\n\t\tctx,\n\t\tctx.scope,\n\t\tctx.ret,\n\t\tctx.index,\n\t\tschedulePromises,\n\t\thydrationNodes,\n\t);\n\n\tif (getFlag(ctx.ret, IsUnmounted)) {\n\t\treturn;\n\t}\n\n\taddEventTargetDelegates(ctx.ctx, values);\n\n\t// Execute schedule callbacks early to check for async deferral\n\tconst wasScheduling = getFlag(ctx.ret, IsScheduling);\n\tlet schedulePromises1: Array<PromiseLike<unknown>> | undefined;\n\tconst callbacks = scheduleMap.get(ctx);\n\tif (callbacks) {\n\t\tscheduleMap.delete(ctx);\n\t\tsetFlag(ctx.ret, IsScheduling);\n\t\tconst result = ctx.adapter.read(unwrap(values));\n\t\tfor (const callback of callbacks) {\n\t\t\tconst scheduleResult = callback(result);\n\t\t\tif (isPromiseLike(scheduleResult)) {\n\t\t\t\t(schedulePromises1 = schedulePromises1 || []).push(scheduleResult);\n\t\t\t}\n\t\t}\n\n\t\tif (schedulePromises1 && !getFlag(ctx.ret, DidCommit)) {\n\t\t\tconst scheduleCallbacksP = Promise.all(schedulePromises1).then(() => {\n\t\t\t\tsetFlag(ctx.ret, IsScheduling, wasScheduling);\n\t\t\t\tpropagateComponent(ctx);\n\t\t\t\tif (ctx.ret.fallback) {\n\t\t\t\t\tunmount(ctx.adapter, ctx.host, ctx.parent, ctx.ret.fallback, false);\n\t\t\t\t}\n\n\t\t\t\tctx.ret.fallback = undefined;\n\t\t\t});\n\n\t\t\tlet onAbort!: () => void;\n\t\t\tconst scheduleP = safeRace([\n\t\t\t\tscheduleCallbacksP,\n\t\t\t\tnew Promise<void>((resolve) => (onAbort = resolve)),\n\t\t\t]).finally(() => {\n\t\t\t\tctx.schedule = undefined;\n\t\t\t});\n\n\t\t\tctx.schedule = {promise: scheduleP, onAbort};\n\t\t\tschedulePromises.push(scheduleP);\n\t\t} else {\n\t\t\tsetFlag(ctx.ret, IsScheduling, wasScheduling);\n\t\t}\n\t} else {\n\t\tsetFlag(ctx.ret, IsScheduling, wasScheduling);\n\t}\n\n\tif (!getFlag(ctx.ret, IsScheduling)) {\n\t\tif (!getFlag(ctx.ret, IsUpdating)) {\n\t\t\tpropagateComponent(ctx);\n\t\t}\n\n\t\tif (ctx.ret.fallback) {\n\t\t\tunmount(ctx.adapter, ctx.host, ctx.parent, ctx.ret.fallback, false);\n\t\t}\n\n\t\tctx.ret.fallback = undefined;\n\t\tsetFlag(ctx.ret, IsUpdating, false);\n\t}\n\n\tsetFlag(ctx.ret, DidCommit);\n\t// We always use getValue() instead of the unwrapping values because there\n\t// are various ways in which the values could have been updated, especially\n\t// if schedule callbacks call refresh() or async mounting is happening.\n\treturn getValue(ctx.ret, true);\n}\n\n/**\n * Checks if a target retainer is active (contributing) in the host's retainer tree.\n * Performs a downward traversal from host to find if target is in the active path.\n */\nfunction isRetainerActive<TNode>(\n\ttarget: Retainer<TNode>,\n\thost: Retainer<TNode>,\n): boolean {\n\tconst stack: Retainer<TNode>[] = [host];\n\n\twhile (stack.length > 0) {\n\t\tconst current = stack.pop()!;\n\n\t\tif (current === target) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Add direct children to stack (skip if this is a host boundary)\n\t\t// Host boundaries are: DOM elements (string tags) or Portal, but NOT Fragment\n\t\tconst isHostBoundary =\n\t\t\tcurrent !== host &&\n\t\t\t((typeof current.el.tag === \"string\" && current.el.tag !== Fragment) ||\n\t\t\t\tcurrent.el.tag === Portal);\n\t\tif (current.children && !isHostBoundary) {\n\t\t\tconst children = wrap(current.children);\n\t\t\tfor (const child of children) {\n\t\t\t\tif (child) {\n\t\t\t\t\tstack.push(child);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Add fallback chains (only if current retainer is using fallback)\n\t\tif (current.fallback && !getFlag(current, DidDiff)) {\n\t\t\tstack.push(current.fallback);\n\t\t}\n\t}\n\n\treturn false;\n}\n\n/**\n * Propagates component changes up to ancestors when rendering starts from a\n * component via refresh() or multiple for await...of renders. This handles\n * event listeners and DOM arrangement that would normally happen during\n * top-down rendering.\n */\nfunction propagateComponent<TNode>(ctx: ContextState<TNode>): void {\n\tconst values = getChildValues(ctx.ret, ctx.index);\n\taddEventTargetDelegates(\n\t\tctx.ctx,\n\t\tvalues,\n\t\t(ctx1) => ctx1[_ContextState].host === ctx.host,\n\t);\n\tconst host = ctx.host;\n\tconst initiator = ctx.ret;\n\n\t// Check if initiator is active in the host's tree\n\tif (!isRetainerActive(initiator, host)) {\n\t\treturn;\n\t}\n\n\tconst props = stripSpecialProps(host.el.props);\n\tconst hostChildren = getChildValues(host, 0);\n\n\tctx.adapter.arrange({\n\t\ttag: host.el.tag as string | symbol,\n\t\ttagName: getTagName(host.el.tag),\n\t\tnode: host.value as TNode,\n\t\tprops,\n\t\toldProps: props,\n\t\tchildren: hostChildren,\n\t});\n\n\tflush(ctx.adapter, ctx.root, ctx);\n}\n\nasync function unmountComponent(\n\tctx: ContextState,\n\tisNested: boolean,\n): Promise<undefined> {\n\tif (getFlag(ctx.ret, IsUnmounted)) {\n\t\treturn;\n\t}\n\n\tlet cleanupPromises: Array<PromiseLike<unknown>> | undefined;\n\t// TODO: think about errror handling for callbacks\n\tconst callbacks = cleanupMap.get(ctx);\n\tif (callbacks) {\n\t\tconst oldResult = ctx.adapter.read(getValue(ctx.ret));\n\t\tcleanupMap.delete(ctx);\n\t\tfor (const callback of callbacks) {\n\t\t\tconst cleanup = callback(oldResult);\n\t\t\tif (isPromiseLike(cleanup)) {\n\t\t\t\t(cleanupPromises = cleanupPromises || []).push(cleanup);\n\t\t\t}\n\t\t}\n\t}\n\n\tlet didLinger = false;\n\tif (!isNested && cleanupPromises && getChildValues(ctx.ret).length > 0) {\n\t\tdidLinger = true;\n\t\tconst index = ctx.index;\n\t\tconst lingerers = ctx.host.lingerers || (ctx.host.lingerers = []);\n\t\tlet set = lingerers[index];\n\t\tif (set == null) {\n\t\t\tset = new Set<Retainer<unknown>>();\n\t\t\tlingerers[index] = set;\n\t\t}\n\n\t\tset.add(ctx.ret);\n\t\tawait Promise.all(cleanupPromises);\n\t\tset!.delete(ctx.ret);\n\t\tif (set!.size === 0) {\n\t\t\tlingerers[index] = undefined;\n\t\t}\n\n\t\tif (!lingerers.some(Boolean)) {\n\t\t\t// If there are no lingerers remaining, we can remove the lingerers array\n\t\t\tctx.host.lingerers = undefined;\n\t\t}\n\t}\n\n\tif (getFlag(ctx.ret, IsUnmounted)) {\n\t\t// If the component was unmounted while awaiting the cleanup callbacks,\n\t\t// we do not need to continue unmounting.\n\t\treturn;\n\t}\n\n\tsetFlag(ctx.ret, IsUnmounted);\n\n\t// If component has pending schedule promises, resolve them since component\n\t// is unmounting\n\tif (ctx.schedule) {\n\t\tctx.schedule.onAbort();\n\t\tctx.schedule = undefined;\n\t}\n\n\tclearEventListeners(ctx.ctx);\n\tunmountChildren(ctx.adapter, ctx.host, ctx, ctx.ret, isNested);\n\tif (didLinger) {\n\t\t// If we lingered, we call finalize to ensure rendering is finalized\n\t\tif (ctx.root != null) {\n\t\t\tctx.adapter.finalize(ctx.root);\n\t\t}\n\t}\n\n\tif (ctx.iterator) {\n\t\tif (ctx.pull) {\n\t\t\t// we let pullComponent handle unmounting\n\t\t\tresumePropsAsyncIterator(ctx);\n\t\t\treturn;\n\t\t}\n\n\t\t// we wait for inflight value so yields resume with the most up to date\n\t\t// props\n\t\tif (ctx.inflight) {\n\t\t\tawait ctx.inflight[1];\n\t\t}\n\n\t\tlet iteration: ChildrenIteratorResult | undefined;\n\t\tif (getFlag(ctx.ret, IsInForOfLoop)) {\n\t\t\ttry {\n\t\t\t\tsetFlag(ctx.ret, IsExecuting);\n\t\t\t\tconst oldResult = ctx.adapter.read(getValue(ctx.ret));\n\t\t\t\tconst iterationP = ctx.iterator!.next(oldResult);\n\t\t\t\tif (isPromiseLike(iterationP)) {\n\t\t\t\t\tif (!getFlag(ctx.ret, IsAsyncGen)) {\n\t\t\t\t\t\tthrow new Error(\"Mixed generator component\");\n\t\t\t\t\t}\n\n\t\t\t\t\titeration = await iterationP;\n\t\t\t\t} else {\n\t\t\t\t\tif (!getFlag(ctx.ret, IsSyncGen)) {\n\t\t\t\t\t\tthrow new Error(\"Mixed generator component\");\n\t\t\t\t\t}\n\n\t\t\t\t\titeration = iterationP;\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tsetFlag(ctx.ret, IsErrored);\n\t\t\t\tthrow err;\n\t\t\t} finally {\n\t\t\t\tsetFlag(ctx.ret, IsExecuting, false);\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\t(!iteration || !iteration.done) &&\n\t\t\tctx.iterator &&\n\t\t\ttypeof ctx.iterator.return === \"function\"\n\t\t) {\n\t\t\ttry {\n\t\t\t\tsetFlag(ctx.ret, IsExecuting);\n\t\t\t\tconst iterationP = ctx.iterator.return();\n\t\t\t\tif (isPromiseLike(iterationP)) {\n\t\t\t\t\tif (!getFlag(ctx.ret, IsAsyncGen)) {\n\t\t\t\t\t\tthrow new Error(\"Mixed generator component\");\n\t\t\t\t\t}\n\n\t\t\t\t\titeration = await iterationP;\n\t\t\t\t} else {\n\t\t\t\t\tif (!getFlag(ctx.ret, IsSyncGen)) {\n\t\t\t\t\t\tthrow new Error(\"Mixed generator component\");\n\t\t\t\t\t}\n\n\t\t\t\t\titeration = iterationP;\n\t\t\t\t}\n\t\t\t} catch (err) {\n\t\t\t\tsetFlag(ctx.ret, IsErrored);\n\t\t\t\tthrow err;\n\t\t\t} finally {\n\t\t\t\tsetFlag(ctx.ret, IsExecuting, false);\n\t\t\t}\n\t\t}\n\t}\n}\n\n/*** ERROR HANDLING UTILITIES ***/\nfunction handleChildError<TNode>(\n\tctx: ContextState<TNode, unknown, TNode>,\n\terr: unknown,\n): Promise<undefined> | undefined {\n\tif (!ctx.iterator) {\n\t\tthrow err;\n\t}\n\n\tif (ctx.pull) {\n\t\t// we let pullComponent handle child errors\n\t\tctx.pull.onChildError!(err);\n\t\treturn ctx.pull.diff;\n\t}\n\n\tif (!ctx.iterator.throw) {\n\t\tthrow err;\n\t}\n\n\tresumePropsAsyncIterator(ctx);\n\tlet iteration: ChildrenIteratorResult | Promise<ChildrenIteratorResult>;\n\ttry {\n\t\tsetFlag(ctx.ret, IsExecuting);\n\t\titeration = ctx.iterator.throw(err);\n\t} catch (err) {\n\t\tsetFlag(ctx.ret, IsErrored);\n\t\tthrow err;\n\t} finally {\n\t\tsetFlag(ctx.ret, IsExecuting, false);\n\t}\n\n\tif (isPromiseLike(iteration)) {\n\t\treturn iteration.then(\n\t\t\t(iteration) => {\n\t\t\t\tif (iteration.done) {\n\t\t\t\t\tsetFlag(ctx.ret, IsSyncGen, false);\n\t\t\t\t\tsetFlag(ctx.ret, IsAsyncGen, false);\n\t\t\t\t\tctx.iterator = undefined;\n\t\t\t\t}\n\n\t\t\t\treturn diffComponentChildren(\n\t\t\t\t\tctx,\n\t\t\t\t\titeration.value as Children,\n\t\t\t\t\t!iteration.done,\n\t\t\t\t);\n\t\t\t},\n\t\t\t(err) => {\n\t\t\t\tsetFlag(ctx.ret, IsErrored);\n\t\t\t\tthrow err;\n\t\t\t},\n\t\t);\n\t}\n\n\tif (iteration.done) {\n\t\tsetFlag(ctx.ret, IsSyncGen, false);\n\t\tsetFlag(ctx.ret, IsAsyncGen, false);\n\t\tctx.iterator = undefined;\n\t}\n\n\treturn diffComponentChildren(\n\t\tctx,\n\t\titeration.value as Children,\n\t\t!iteration.done,\n\t);\n}\n\n/**\n * Propagates an error up the context tree by calling handleChildError with\n * each parent.\n *\n * @returns A promise which resolves to undefined when the error has been\n * handled, or undefined if the error was handled synchronously.\n */\nfunction propagateError<TNode>(\n\tctx: ContextState<TNode>,\n\terr: unknown,\n\tschedulePromises: Array<PromiseLike<unknown>>,\n): Promise<undefined> | undefined {\n\tconst parent = ctx.parent;\n\tif (!parent) {\n\t\tthrow err;\n\t}\n\n\tlet diff: Promise<undefined> | undefined;\n\ttry {\n\t\tdiff = handleChildError(parent, err);\n\t} catch (err) {\n\t\treturn propagateError(parent, err, schedulePromises);\n\t}\n\n\tif (isPromiseLike(diff)) {\n\t\treturn diff.then(\n\t\t\t() => void commitComponent(parent, schedulePromises),\n\t\t\t(err) => propagateError(parent, err, schedulePromises),\n\t\t);\n\t}\n\n\tcommitComponent(parent, schedulePromises);\n}\n\n/**\n * An interface which can be extended to provide strongly typed provisions.\n * See Context.prototype.consume and Context.prototype.provide.\n */\nexport interface ProvisionMap extends Crank.ProvisionMap {}\n\nexport interface EventMap extends Crank.EventMap {}\n\ntype MappedEventListener<T extends string> = (ev: Crank.EventMap[T]) => unknown;\n\ntype MappedEventListenerOrEventListenerObject<T extends string> =\n\t| MappedEventListener<T>\n\t| {handleEvent: MappedEventListener<T>};\n\nexport interface Context extends Crank.Context {\n\taddEventListener<T extends string>(\n\t\ttype: T,\n\t\tlistener: MappedEventListenerOrEventListenerObject<T> | null,\n\t\toptions?: boolean | AddEventListenerOptions,\n\t): void;\n\n\tremoveEventListener<T extends string>(\n\t\ttype: T,\n\t\tlistener: MappedEventListenerOrEventListenerObject<T> | null,\n\t\toptions?: EventListenerOptions | boolean,\n\t): void;\n\n\tdispatchEvent<T extends string>(ev: EventMap[T] | Event): boolean;\n}\n\n// TODO: uncomment and use in the Element interface below\n// type CrankElement = Element;\ndeclare global {\n\tnamespace Crank {\n\t\texport interface EventMap {\n\t\t\t[tag: string]: Event;\n\t\t}\n\n\t\texport interface ProvisionMap {}\n\n\t\texport interface Context {}\n\t}\n\n\tnamespace JSX {\n\t\t// TODO: JSX Element type (the result of JSX expressions) don't work\n\t\t// because TypeScript demands that all Components return JSX elements for\n\t\t// some reason.\n\t\t// interface Element extends CrankElement {}\n\n\t\texport interface IntrinsicElements {\n\t\t\t[tag: string]: any;\n\t\t}\n\n\t\texport interface IntrinsicAttributes {\n\t\t\tchildren?: unknown;\n\t\t\tkey?: unknown;\n\t\t\tref?: unknown;\n\t\t\tcopy?: unknown;\n\t\t\thydrate?: unknown;\n\t\t}\n\n\t\texport interface ElementChildrenAttribute {\n\t\t\tchildren: {};\n\t\t}\n\t}\n}\n\n/**\n * A re-export of some Crank exports as the default export.\n *\n * Some JSX tools expect things like createElement/Fragment to be defined on\n * the default export. Prefer using the named exports directly.\n */\nexport default {createElement, Fragment};\n", "import {createElement} from \"./crank.js\";\nimport type {Element} from \"./crank.js\";\n\nconst cache = new Map<string, ParseResult>();\nexport function jsx(\n\tspans: TemplateStringsArray,\n\t...expressions: Array<unknown>\n): Element {\n\tconst key = JSON.stringify(spans.raw);\n\tlet parseResult = cache.get(key);\n\tif (parseResult == null) {\n\t\tparseResult = parse(spans.raw);\n\t\tcache.set(key, parseResult);\n\t}\n\n\tconst {element, targets} = parseResult;\n\tfor (let i = 0; i < expressions.length; i++) {\n\t\tconst exp = expressions[i];\n\t\tconst target = targets[i];\n\t\tif (target) {\n\t\t\tif (target.type === \"error\") {\n\t\t\t\tthrow new SyntaxError(\n\t\t\t\t\ttarget.message.replace(\"${}\", formatTagForError(exp)),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\ttarget.value = exp;\n\t\t}\n\t}\n\n\treturn build(element);\n}\n\n/** Alias for `jsx` template tag. */\nexport const html = jsx;\n\n// Type definitions for a bare-bones AST\ninterface ParseElement {\n\ttype: \"element\";\n\topen: ParseTag;\n\tclose: ParseTag | null;\n\t// ParseValue is used to represent spread props.\n\tprops: Array<ParseProp | ParseValue>;\n\tchildren: Array<ParseElement | ParseValue>;\n}\n\ninterface ParseValue {\n\ttype: \"value\";\n\tvalue: any;\n}\n\ninterface ParseTag {\n\ttype: \"tag\";\n\tslash: string;\n\tvalue: any;\n}\n\ninterface ParseProp {\n\ttype: \"prop\";\n\tname: string;\n\tvalue: ParseValue | ParsePropString;\n}\n\ninterface ParsePropString {\n\ttype: \"propString\";\n\tparts: Array<string | ParseValue>;\n}\n\ninterface ParseError {\n\ttype: \"error\";\n\tmessage: string;\n\tvalue: any;\n}\n\n// The parse result includes an array of targets, references to objects in the\n// parse tree whose `value` property is overwritten with expressions when the\n// template function is called. By separating the logic of parsing static\n// template spans from the handling of dynamic expressions, we can cache parse\n// results for successive calls.\ntype ExpressionTarget = ParseValue | ParseTag | ParseProp | ParseError;\n\ninterface ParseResult {\n\telement: ParseElement;\n\ttargets: Array<ExpressionTarget | null>;\n}\n\n/**\n * Matches first significant character in children mode.\n *\n * Group 1: newline\n * Group 2: comment\n * Group 3: tag\n * Group 4: closing slash\n * Group 5: tag name\n *\n * The comment group must appear first because the tag group can potentially\n * match a comment, so that we can handle tag expressions where we've reached\n * the end of a span.\n */\nconst CHILDREN_RE =\n\t/((?:\\r|\\n|\\r\\n)\\s*)|(<!--[\\S\\s]*?(?:-->|$))|(<\\s*(\\/{0,2})\\s*([-_$\\w]*))/g;\n\n/**\n * Matches props after element tags.\n *\n * Group 1: tag end\n * Group 2: spread props\n * Group 3: prop name\n * Group 4: equals\n * Group 5: prop value string\n */\nconst PROPS_RE =\n\t/\\s*(?:(\\/?\\s*>)|(\\.\\.\\.\\s*)|(?:([-_$\\w]+)\\s*(=)?\\s*(?:(\"(\\\\\"|[\\S\\s])*?(?:\"|$)|'(?:\\\\'|[\\S\\s])*?(?:'|$)))?))/g;\n\nconst CLOSING_BRACKET_RE = />/g;\n\nconst CLOSING_SINGLE_QUOTE_RE = /[^\\\\]?'/g;\n\nconst CLOSING_DOUBLE_QUOTE_RE = /[^\\\\]?\"/g;\n\nconst CLOSING_COMMENT_RE = /-->/g;\n\nfunction parse(spans: ArrayLike<string>): ParseResult {\n\tlet matcher = CHILDREN_RE;\n\tconst stack: Array<ParseElement> = [];\n\tlet element: ParseElement = {\n\t\ttype: \"element\",\n\t\topen: {type: \"tag\", slash: \"\", value: \"\"},\n\t\tclose: null,\n\t\tprops: [],\n\t\tchildren: [],\n\t};\n\n\tconst targets: Array<ExpressionTarget | null> = [];\n\tlet lineStart = true;\n\tfor (let s = 0; s < spans.length; s++) {\n\t\tconst span = spans[s];\n\t\t// Whether or not an expression is upcoming. Used to provide better errors.\n\t\tconst expressing = s < spans.length - 1;\n\t\tlet expressionTarget: ExpressionTarget | null = null;\n\t\tfor (let i = 0, end = i; i < span.length; i = end) {\n\t\t\tmatcher.lastIndex = i;\n\t\t\tconst match = matcher.exec(span);\n\t\t\tend = match ? match.index + match[0].length : span.length;\n\t\t\tswitch (matcher) {\n\t\t\t\tcase CHILDREN_RE: {\n\t\t\t\t\tif (match) {\n\t\t\t\t\t\tconst [, newline, comment, tag, closingSlash, tagName] = match;\n\t\t\t\t\t\tif (i < match.index) {\n\t\t\t\t\t\t\tlet before = span.slice(i, match.index);\n\t\t\t\t\t\t\tif (lineStart) {\n\t\t\t\t\t\t\t\tbefore = before.replace(/^\\s*/, \"\");\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (newline) {\n\t\t\t\t\t\t\t\tif (span[Math.max(0, match.index - 1)] === \"\\\\\") {\n\t\t\t\t\t\t\t\t\t// We preserve whitespace before escaped newlines and have to\n\t\t\t\t\t\t\t\t\t// remove the backslash.\n\t\t\t\t\t\t\t\t\t//   jsx` \\\n\t\t\t\t\t\t\t\t\t//   `\n\t\t\t\t\t\t\t\t\tbefore = before.slice(0, -1);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tbefore = before.replace(/\\s*$/, \"\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (before) {\n\t\t\t\t\t\t\t\telement.children.push({type: \"value\", value: before});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlineStart = !!newline;\n\t\t\t\t\t\tif (comment) {\n\t\t\t\t\t\t\tif (end === span.length) {\n\t\t\t\t\t\t\t\t// Expression in a comment:\n\t\t\t\t\t\t\t\t//   jsx`<!-- ${exp} -->`\n\t\t\t\t\t\t\t\tmatcher = CLOSING_COMMENT_RE;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (tag) {\n\t\t\t\t\t\t\tif (closingSlash) {\n\t\t\t\t\t\t\t\telement.close = {\n\t\t\t\t\t\t\t\t\ttype: \"tag\",\n\t\t\t\t\t\t\t\t\tslash: closingSlash,\n\t\t\t\t\t\t\t\t\tvalue: tagName,\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\tif (!stack.length) {\n\t\t\t\t\t\t\t\t\tif (end !== span.length) {\n\t\t\t\t\t\t\t\t\t\tthrow new SyntaxError(`Unmatched closing tag \"${tagName}\"`);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// ERROR EXPRESSION\n\t\t\t\t\t\t\t\t\texpressionTarget = {\n\t\t\t\t\t\t\t\t\t\ttype: \"error\",\n\t\t\t\t\t\t\t\t\t\tmessage: \"Unmatched closing tag ${}\",\n\t\t\t\t\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif (end === span.length) {\n\t\t\t\t\t\t\t\t\t\t// TAG EXPRESSION\n\t\t\t\t\t\t\t\t\t\texpressionTarget = element.close;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\telement = stack.pop()!;\n\t\t\t\t\t\t\t\t\tmatcher = CLOSING_BRACKET_RE;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst next: ParseElement = {\n\t\t\t\t\t\t\t\t\ttype: \"element\",\n\t\t\t\t\t\t\t\t\topen: {\n\t\t\t\t\t\t\t\t\t\ttype: \"tag\",\n\t\t\t\t\t\t\t\t\t\tslash: \"\",\n\t\t\t\t\t\t\t\t\t\tvalue: tagName,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tclose: null,\n\t\t\t\t\t\t\t\t\tprops: [],\n\t\t\t\t\t\t\t\t\tchildren: [],\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\telement.children.push(next);\n\t\t\t\t\t\t\t\tstack.push(element);\n\t\t\t\t\t\t\t\telement = next;\n\t\t\t\t\t\t\t\tmatcher = PROPS_RE;\n\t\t\t\t\t\t\t\tif (end === span.length) {\n\t\t\t\t\t\t\t\t\t// TAG EXPRESSION\n\t\t\t\t\t\t\t\t\texpressionTarget = element.open;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (i < span.length) {\n\t\t\t\t\t\t\tlet after = span.slice(i);\n\t\t\t\t\t\t\tif (!expressing) {\n\t\t\t\t\t\t\t\t// trim trailing whitespace\n\t\t\t\t\t\t\t\tafter = after.replace(/\\s*$/, \"\");\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (after) {\n\t\t\t\t\t\t\t\telement.children.push({type: \"value\", value: after});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase PROPS_RE: {\n\t\t\t\t\tif (match) {\n\t\t\t\t\t\tconst [, tagEnd, spread, name, equals, string] = match;\n\t\t\t\t\t\tif (i < match.index) {\n\t\t\t\t\t\t\tthrow new SyntaxError(\n\t\t\t\t\t\t\t\t`Unexpected text \\`${span.slice(i, match.index).trim()}\\``,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (tagEnd) {\n\t\t\t\t\t\t\tif (tagEnd[0] === \"/\") {\n\t\t\t\t\t\t\t\t// This is a self-closing element, so there will always be a\n\t\t\t\t\t\t\t\t// result on the stack.\n\t\t\t\t\t\t\t\telement = stack.pop()!;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tmatcher = CHILDREN_RE;\n\t\t\t\t\t\t} else if (spread) {\n\t\t\t\t\t\t\tconst value = {\n\t\t\t\t\t\t\t\ttype: \"value\" as const,\n\t\t\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\telement.props.push(value);\n\t\t\t\t\t\t\t// SPREAD PROP EXPRESSION\n\t\t\t\t\t\t\texpressionTarget = value;\n\t\t\t\t\t\t\tif (!(expressing && end === span.length)) {\n\t\t\t\t\t\t\t\tthrow new SyntaxError('Expression expected after \"...\"');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (name) {\n\t\t\t\t\t\t\tlet value: ParseValue | ParsePropString;\n\t\t\t\t\t\t\tif (string == null) {\n\t\t\t\t\t\t\t\tif (!equals) {\n\t\t\t\t\t\t\t\t\tvalue = {type: \"value\", value: true};\n\t\t\t\t\t\t\t\t} else if (end < span.length) {\n\t\t\t\t\t\t\t\t\tthrow new SyntaxError(\n\t\t\t\t\t\t\t\t\t\t`Unexpected text \\`${span.slice(end, end + 20)}\\``,\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tvalue = {type: \"value\" as const, value: null};\n\t\t\t\t\t\t\t\t\t// PROP EXPRESSION\n\t\t\t\t\t\t\t\t\texpressionTarget = value;\n\t\t\t\t\t\t\t\t\tif (!(expressing && end === span.length)) {\n\t\t\t\t\t\t\t\t\t\tthrow new SyntaxError(\n\t\t\t\t\t\t\t\t\t\t\t`Expression expected for prop \"${name}\"`,\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst quote = string[0];\n\t\t\t\t\t\t\t\tvalue = {type: \"propString\", parts: []};\n\t\t\t\t\t\t\t\tvalue.parts.push(string);\n\t\t\t\t\t\t\t\tif (end === span.length) {\n\t\t\t\t\t\t\t\t\tmatcher =\n\t\t\t\t\t\t\t\t\t\tquote === \"'\"\n\t\t\t\t\t\t\t\t\t\t\t? CLOSING_SINGLE_QUOTE_RE\n\t\t\t\t\t\t\t\t\t\t\t: CLOSING_DOUBLE_QUOTE_RE;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst prop = {\n\t\t\t\t\t\t\t\ttype: \"prop\" as const,\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\telement.props.push(prop);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!expressing) {\n\t\t\t\t\t\t\tif (i === span.length) {\n\t\t\t\t\t\t\t\tthrow new SyntaxError(\n\t\t\t\t\t\t\t\t\t`Expected props but reached end of document`,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tthrow new SyntaxError(\n\t\t\t\t\t\t\t\t\t`Unexpected text \\`${span.slice(i, i + 20).trim()}\\``,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Unexpected expression errors are handled in the outer loop.\n\t\t\t\t\t\t//\n\t\t\t\t\t\t// This would most likely be the starting point for the logic of\n\t\t\t\t\t\t// prop name expressions.\n\t\t\t\t\t\t//   jsx`<p ${name}=${value}>`\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase CLOSING_BRACKET_RE: {\n\t\t\t\t\t// We're in a closing tag and looking for the >.\n\t\t\t\t\tif (match) {\n\t\t\t\t\t\tif (i < match.index) {\n\t\t\t\t\t\t\tthrow new SyntaxError(\n\t\t\t\t\t\t\t\t`Unexpected text \\`${span.slice(i, match.index).trim()}\\``,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmatcher = CHILDREN_RE;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!expressing) {\n\t\t\t\t\t\t\tthrow new SyntaxError(\n\t\t\t\t\t\t\t\t`Unexpected text \\`${span.slice(i, i + 20).trim()}\\``,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase CLOSING_SINGLE_QUOTE_RE:\n\t\t\t\tcase CLOSING_DOUBLE_QUOTE_RE: {\n\t\t\t\t\tconst string = span.slice(i, end);\n\t\t\t\t\tconst prop = element.props[element.props.length - 1] as ParseProp;\n\t\t\t\t\tconst propString = prop.value as ParsePropString;\n\t\t\t\t\tpropString.parts.push(string);\n\t\t\t\t\tif (match) {\n\t\t\t\t\t\tmatcher = PROPS_RE;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!expressing) {\n\t\t\t\t\t\t\tthrow new SyntaxError(\n\t\t\t\t\t\t\t\t`Missing \\`${\n\t\t\t\t\t\t\t\t\tmatcher === CLOSING_SINGLE_QUOTE_RE ? \"'\" : '\"'\n\t\t\t\t\t\t\t\t}\\``,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase CLOSING_COMMENT_RE: {\n\t\t\t\t\tif (match) {\n\t\t\t\t\t\tmatcher = CHILDREN_RE;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!expressing) {\n\t\t\t\t\t\t\tthrow new SyntaxError(\n\t\t\t\t\t\t\t\t\"Expected `-->` but reached end of template\",\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (expressing) {\n\t\t\tif (expressionTarget) {\n\t\t\t\ttargets.push(expressionTarget);\n\t\t\t\tif (expressionTarget.type === \"error\") {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tswitch (matcher) {\n\t\t\t\tcase CHILDREN_RE: {\n\t\t\t\t\tconst target = {type: \"value\" as const, value: null};\n\t\t\t\t\telement.children.push(target);\n\t\t\t\t\ttargets.push(target);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase CLOSING_SINGLE_QUOTE_RE:\n\t\t\t\tcase CLOSING_DOUBLE_QUOTE_RE: {\n\t\t\t\t\tconst prop = element.props[element.props.length - 1] as ParseProp;\n\t\t\t\t\tconst target = {type: \"value\" as const, value: null};\n\t\t\t\t\t(prop.value as ParsePropString).parts.push(target);\n\t\t\t\t\ttargets.push(target);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase CLOSING_COMMENT_RE:\n\t\t\t\t\ttargets.push(null);\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new SyntaxError(\"Unexpected expression\");\n\t\t\t}\n\t\t} else if (expressionTarget) {\n\t\t\tthrow new SyntaxError(\"Expression expected\");\n\t\t}\n\n\t\tlineStart = false;\n\t}\n\n\tif (stack.length) {\n\t\tconst ti = targets.indexOf(element.open);\n\t\tif (ti === -1) {\n\t\t\tthrow new SyntaxError(`Unmatched opening tag \"${element.open.value}\"`);\n\t\t}\n\n\t\ttargets[ti] = {\n\t\t\ttype: \"error\",\n\t\t\tmessage: \"Unmatched opening tag ${}\",\n\t\t\tvalue: null,\n\t\t};\n\t}\n\n\tif (element.children.length === 1 && element.children[0].type === \"element\") {\n\t\telement = element.children[0];\n\t}\n\n\treturn {element, targets};\n}\n\nfunction build(parsed: ParseElement): Element {\n\tif (\n\t\tparsed.close !== null &&\n\t\tparsed.close.slash !== \"//\" &&\n\t\tparsed.open.value !== parsed.close.value\n\t) {\n\t\tthrow new SyntaxError(\n\t\t\t`Unmatched closing tag ${formatTagForError(\n\t\t\t\tparsed.close.value,\n\t\t\t)}, expected ${formatTagForError(parsed.open.value)}`,\n\t\t);\n\t}\n\n\tconst children: Array<unknown> = [];\n\tfor (let i = 0; i < parsed.children.length; i++) {\n\t\tconst child = parsed.children[i];\n\t\tchildren.push(child.type === \"element\" ? build(child) : child.value);\n\t}\n\n\tlet props = parsed.props.length ? ({} as Record<string, unknown>) : null;\n\tfor (let i = 0; i < parsed.props.length; i++) {\n\t\tconst prop = parsed.props[i];\n\t\tif (prop.type === \"prop\") {\n\t\t\tlet value: any;\n\t\t\tif (prop.value.type === \"value\") {\n\t\t\t\tvalue = prop.value.value;\n\t\t\t} else {\n\t\t\t\tlet string = \"\";\n\t\t\t\tfor (let i = 0; i < prop.value.parts.length; i++) {\n\t\t\t\t\tconst part = prop.value.parts[i];\n\t\t\t\t\tif (typeof part === \"string\") {\n\t\t\t\t\t\tstring += part;\n\t\t\t\t\t} else if (typeof part.value !== \"boolean\" && part.value != null) {\n\t\t\t\t\t\tstring +=\n\t\t\t\t\t\t\ttypeof part.value === \"string\" ? part.value : String(part.value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvalue = string\n\t\t\t\t\t// remove quotes\n\t\t\t\t\t.slice(1, -1)\n\t\t\t\t\t// unescape things\n\t\t\t\t\t// adapted from https://stackoverflow.com/a/57330383/1825413\n\t\t\t\t\t.replace(\n\t\t\t\t\t\t/\\\\x[0-9a-f]{2}|\\\\u[0-9a-f]{4}|\\\\u\\{[0-9a-f]+\\}|\\\\./gi,\n\t\t\t\t\t\t(match) => {\n\t\t\t\t\t\t\tswitch (match[1]) {\n\t\t\t\t\t\t\t\tcase \"b\":\n\t\t\t\t\t\t\t\t\treturn \"\\b\";\n\t\t\t\t\t\t\t\tcase \"f\":\n\t\t\t\t\t\t\t\t\treturn \"\\f\";\n\t\t\t\t\t\t\t\tcase \"n\":\n\t\t\t\t\t\t\t\t\treturn \"\\n\";\n\t\t\t\t\t\t\t\tcase \"r\":\n\t\t\t\t\t\t\t\t\treturn \"\\r\";\n\t\t\t\t\t\t\t\tcase \"t\":\n\t\t\t\t\t\t\t\t\treturn \"\\t\";\n\t\t\t\t\t\t\t\tcase \"v\":\n\t\t\t\t\t\t\t\t\treturn \"\\v\";\n\t\t\t\t\t\t\t\tcase \"x\":\n\t\t\t\t\t\t\t\t\treturn String.fromCharCode(parseInt(match.slice(2), 16));\n\t\t\t\t\t\t\t\tcase \"u\":\n\t\t\t\t\t\t\t\t\tif (match[2] === \"{\") {\n\t\t\t\t\t\t\t\t\t\treturn String.fromCodePoint(\n\t\t\t\t\t\t\t\t\t\t\tparseInt(match.slice(3, -1), 16),\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\treturn String.fromCharCode(parseInt(match.slice(2), 16));\n\t\t\t\t\t\t\t\tcase \"0\":\n\t\t\t\t\t\t\t\t\treturn \"\\0\";\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\treturn match.slice(1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t}\n\n\t\t\tprops![prop.name] = value;\n\t\t} else {\n\t\t\t// spread prop\n\t\t\tprops = {...props, ...(prop.value as any)};\n\t\t}\n\t}\n\n\treturn createElement(parsed.open.value, props, ...children);\n}\n\nfunction formatTagForError(tag: unknown): string {\n\treturn typeof tag === \"function\"\n\t\t? tag.name + \"()\"\n\t\t: typeof tag === \"string\"\n\t\t\t? `\"${tag}\"`\n\t\t\t: JSON.stringify(tag);\n}\n", "var isDevelopment = false;\n\n/*\n\nBased off glamor's StyleSheet, thanks Sunil \u2764\uFE0F\n\nhigh performance StyleSheet for css-in-js systems\n\n- uses multiple style tags behind the scenes for millions of rules\n- uses `insertRule` for appending in production for *much* faster performance\n\n// usage\n\nimport { StyleSheet } from '@emotion/sheet'\n\nlet styleSheet = new StyleSheet({ key: '', container: document.head })\n\nstyleSheet.insert('#box { border: 1px solid red; }')\n- appends a css rule into the stylesheet\n\nstyleSheet.flush()\n- empties the stylesheet of all its contents\n\n*/\n\nfunction sheetForTag(tag) {\n  if (tag.sheet) {\n    return tag.sheet;\n  } // this weirdness brought to you by firefox\n\n  /* istanbul ignore next */\n\n\n  for (var i = 0; i < document.styleSheets.length; i++) {\n    if (document.styleSheets[i].ownerNode === tag) {\n      return document.styleSheets[i];\n    }\n  } // this function should always return with a value\n  // TS can't understand it though so we make it stop complaining here\n\n\n  return undefined;\n}\n\nfunction createStyleElement(options) {\n  var tag = document.createElement('style');\n  tag.setAttribute('data-emotion', options.key);\n\n  if (options.nonce !== undefined) {\n    tag.setAttribute('nonce', options.nonce);\n  }\n\n  tag.appendChild(document.createTextNode(''));\n  tag.setAttribute('data-s', '');\n  return tag;\n}\n\nvar StyleSheet = /*#__PURE__*/function () {\n  // Using Node instead of HTMLElement since container may be a ShadowRoot\n  function StyleSheet(options) {\n    var _this = this;\n\n    this._insertTag = function (tag) {\n      var before;\n\n      if (_this.tags.length === 0) {\n        if (_this.insertionPoint) {\n          before = _this.insertionPoint.nextSibling;\n        } else if (_this.prepend) {\n          before = _this.container.firstChild;\n        } else {\n          before = _this.before;\n        }\n      } else {\n        before = _this.tags[_this.tags.length - 1].nextSibling;\n      }\n\n      _this.container.insertBefore(tag, before);\n\n      _this.tags.push(tag);\n    };\n\n    this.isSpeedy = options.speedy === undefined ? !isDevelopment : options.speedy;\n    this.tags = [];\n    this.ctr = 0;\n    this.nonce = options.nonce; // key is the value of the data-emotion attribute, it's used to identify different sheets\n\n    this.key = options.key;\n    this.container = options.container;\n    this.prepend = options.prepend;\n    this.insertionPoint = options.insertionPoint;\n    this.before = null;\n  }\n\n  var _proto = StyleSheet.prototype;\n\n  _proto.hydrate = function hydrate(nodes) {\n    nodes.forEach(this._insertTag);\n  };\n\n  _proto.insert = function insert(rule) {\n    // the max length is how many rules we have per style tag, it's 65000 in speedy mode\n    // it's 1 in dev because we insert source maps that map a single rule to a location\n    // and you can only have one source map per style tag\n    if (this.ctr % (this.isSpeedy ? 65000 : 1) === 0) {\n      this._insertTag(createStyleElement(this));\n    }\n\n    var tag = this.tags[this.tags.length - 1];\n\n    if (this.isSpeedy) {\n      var sheet = sheetForTag(tag);\n\n      try {\n        // this is the ultrafast version, works across browsers\n        // the big drawback is that the css won't be editable in devtools\n        sheet.insertRule(rule, sheet.cssRules.length);\n      } catch (e) {\n      }\n    } else {\n      tag.appendChild(document.createTextNode(rule));\n    }\n\n    this.ctr++;\n  };\n\n  _proto.flush = function flush() {\n    this.tags.forEach(function (tag) {\n      var _tag$parentNode;\n\n      return (_tag$parentNode = tag.parentNode) == null ? void 0 : _tag$parentNode.removeChild(tag);\n    });\n    this.tags = [];\n    this.ctr = 0;\n  };\n\n  return StyleSheet;\n}();\n\nexport { StyleSheet };\n", "export var MS = '-ms-'\nexport var MOZ = '-moz-'\nexport var WEBKIT = '-webkit-'\n\nexport var COMMENT = 'comm'\nexport var RULESET = 'rule'\nexport var DECLARATION = 'decl'\n\nexport var PAGE = '@page'\nexport var MEDIA = '@media'\nexport var IMPORT = '@import'\nexport var CHARSET = '@charset'\nexport var VIEWPORT = '@viewport'\nexport var SUPPORTS = '@supports'\nexport var DOCUMENT = '@document'\nexport var NAMESPACE = '@namespace'\nexport var KEYFRAMES = '@keyframes'\nexport var FONT_FACE = '@font-face'\nexport var COUNTER_STYLE = '@counter-style'\nexport var FONT_FEATURE_VALUES = '@font-feature-values'\nexport var LAYER = '@layer'\n", "/**\n * @param {number}\n * @return {number}\n */\nexport var abs = Math.abs\n\n/**\n * @param {number}\n * @return {string}\n */\nexport var from = String.fromCharCode\n\n/**\n * @param {object}\n * @return {object}\n */\nexport var assign = Object.assign\n\n/**\n * @param {string} value\n * @param {number} length\n * @return {number}\n */\nexport function hash (value, length) {\n\treturn charat(value, 0) ^ 45 ? (((((((length << 2) ^ charat(value, 0)) << 2) ^ charat(value, 1)) << 2) ^ charat(value, 2)) << 2) ^ charat(value, 3) : 0\n}\n\n/**\n * @param {string} value\n * @return {string}\n */\nexport function trim (value) {\n\treturn value.trim()\n}\n\n/**\n * @param {string} value\n * @param {RegExp} pattern\n * @return {string?}\n */\nexport function match (value, pattern) {\n\treturn (value = pattern.exec(value)) ? value[0] : value\n}\n\n/**\n * @param {string} value\n * @param {(string|RegExp)} pattern\n * @param {string} replacement\n * @return {string}\n */\nexport function replace (value, pattern, replacement) {\n\treturn value.replace(pattern, replacement)\n}\n\n/**\n * @param {string} value\n * @param {string} search\n * @return {number}\n */\nexport function indexof (value, search) {\n\treturn value.indexOf(search)\n}\n\n/**\n * @param {string} value\n * @param {number} index\n * @return {number}\n */\nexport function charat (value, index) {\n\treturn value.charCodeAt(index) | 0\n}\n\n/**\n * @param {string} value\n * @param {number} begin\n * @param {number} end\n * @return {string}\n */\nexport function substr (value, begin, end) {\n\treturn value.slice(begin, end)\n}\n\n/**\n * @param {string} value\n * @return {number}\n */\nexport function strlen (value) {\n\treturn value.length\n}\n\n/**\n * @param {any[]} value\n * @return {number}\n */\nexport function sizeof (value) {\n\treturn value.length\n}\n\n/**\n * @param {any} value\n * @param {any[]} array\n * @return {any}\n */\nexport function append (value, array) {\n\treturn array.push(value), value\n}\n\n/**\n * @param {string[]} array\n * @param {function} callback\n * @return {string}\n */\nexport function combine (array, callback) {\n\treturn array.map(callback).join('')\n}\n", "import {from, trim, charat, strlen, substr, append, assign} from './Utility.js'\n\nexport var line = 1\nexport var column = 1\nexport var length = 0\nexport var position = 0\nexport var character = 0\nexport var characters = ''\n\n/**\n * @param {string} value\n * @param {object | null} root\n * @param {object | null} parent\n * @param {string} type\n * @param {string[] | string} props\n * @param {object[] | string} children\n * @param {number} length\n */\nexport function node (value, root, parent, type, props, children, length) {\n\treturn {value: value, root: root, parent: parent, type: type, props: props, children: children, line: line, column: column, length: length, return: ''}\n}\n\n/**\n * @param {object} root\n * @param {object} props\n * @return {object}\n */\nexport function copy (root, props) {\n\treturn assign(node('', null, null, '', null, null, 0), root, {length: -root.length}, props)\n}\n\n/**\n * @return {number}\n */\nexport function char () {\n\treturn character\n}\n\n/**\n * @return {number}\n */\nexport function prev () {\n\tcharacter = position > 0 ? charat(characters, --position) : 0\n\n\tif (column--, character === 10)\n\t\tcolumn = 1, line--\n\n\treturn character\n}\n\n/**\n * @return {number}\n */\nexport function next () {\n\tcharacter = position < length ? charat(characters, position++) : 0\n\n\tif (column++, character === 10)\n\t\tcolumn = 1, line++\n\n\treturn character\n}\n\n/**\n * @return {number}\n */\nexport function peek () {\n\treturn charat(characters, position)\n}\n\n/**\n * @return {number}\n */\nexport function caret () {\n\treturn position\n}\n\n/**\n * @param {number} begin\n * @param {number} end\n * @return {string}\n */\nexport function slice (begin, end) {\n\treturn substr(characters, begin, end)\n}\n\n/**\n * @param {number} type\n * @return {number}\n */\nexport function token (type) {\n\tswitch (type) {\n\t\t// \\0 \\t \\n \\r \\s whitespace token\n\t\tcase 0: case 9: case 10: case 13: case 32:\n\t\t\treturn 5\n\t\t// ! + , / > @ ~ isolate token\n\t\tcase 33: case 43: case 44: case 47: case 62: case 64: case 126:\n\t\t// ; { } breakpoint token\n\t\tcase 59: case 123: case 125:\n\t\t\treturn 4\n\t\t// : accompanied token\n\t\tcase 58:\n\t\t\treturn 3\n\t\t// \" ' ( [ opening delimit token\n\t\tcase 34: case 39: case 40: case 91:\n\t\t\treturn 2\n\t\t// ) ] closing delimit token\n\t\tcase 41: case 93:\n\t\t\treturn 1\n\t}\n\n\treturn 0\n}\n\n/**\n * @param {string} value\n * @return {any[]}\n */\nexport function alloc (value) {\n\treturn line = column = 1, length = strlen(characters = value), position = 0, []\n}\n\n/**\n * @param {any} value\n * @return {any}\n */\nexport function dealloc (value) {\n\treturn characters = '', value\n}\n\n/**\n * @param {number} type\n * @return {string}\n */\nexport function delimit (type) {\n\treturn trim(slice(position - 1, delimiter(type === 91 ? type + 2 : type === 40 ? type + 1 : type)))\n}\n\n/**\n * @param {string} value\n * @return {string[]}\n */\nexport function tokenize (value) {\n\treturn dealloc(tokenizer(alloc(value)))\n}\n\n/**\n * @param {number} type\n * @return {string}\n */\nexport function whitespace (type) {\n\twhile (character = peek())\n\t\tif (character < 33)\n\t\t\tnext()\n\t\telse\n\t\t\tbreak\n\n\treturn token(type) > 2 || token(character) > 3 ? '' : ' '\n}\n\n/**\n * @param {string[]} children\n * @return {string[]}\n */\nexport function tokenizer (children) {\n\twhile (next())\n\t\tswitch (token(character)) {\n\t\t\tcase 0: append(identifier(position - 1), children)\n\t\t\t\tbreak\n\t\t\tcase 2: append(delimit(character), children)\n\t\t\t\tbreak\n\t\t\tdefault: append(from(character), children)\n\t\t}\n\n\treturn children\n}\n\n/**\n * @param {number} index\n * @param {number} count\n * @return {string}\n */\nexport function escaping (index, count) {\n\twhile (--count && next())\n\t\t// not 0-9 A-F a-f\n\t\tif (character < 48 || character > 102 || (character > 57 && character < 65) || (character > 70 && character < 97))\n\t\t\tbreak\n\n\treturn slice(index, caret() + (count < 6 && peek() == 32 && next() == 32))\n}\n\n/**\n * @param {number} type\n * @return {number}\n */\nexport function delimiter (type) {\n\twhile (next())\n\t\tswitch (character) {\n\t\t\t// ] ) \" '\n\t\t\tcase type:\n\t\t\t\treturn position\n\t\t\t// \" '\n\t\t\tcase 34: case 39:\n\t\t\t\tif (type !== 34 && type !== 39)\n\t\t\t\t\tdelimiter(character)\n\t\t\t\tbreak\n\t\t\t// (\n\t\t\tcase 40:\n\t\t\t\tif (type === 41)\n\t\t\t\t\tdelimiter(type)\n\t\t\t\tbreak\n\t\t\t// \\\n\t\t\tcase 92:\n\t\t\t\tnext()\n\t\t\t\tbreak\n\t\t}\n\n\treturn position\n}\n\n/**\n * @param {number} type\n * @param {number} index\n * @return {number}\n */\nexport function commenter (type, index) {\n\twhile (next())\n\t\t// //\n\t\tif (type + character === 47 + 10)\n\t\t\tbreak\n\t\t// /*\n\t\telse if (type + character === 42 + 42 && peek() === 47)\n\t\t\tbreak\n\n\treturn '/*' + slice(index, position - 1) + '*' + from(type === 47 ? type : next())\n}\n\n/**\n * @param {number} index\n * @return {string}\n */\nexport function identifier (index) {\n\twhile (!token(peek()))\n\t\tnext()\n\n\treturn slice(index, position)\n}\n", "import {COMMENT, RULESET, DECLARATION} from './Enum.js'\nimport {abs, charat, trim, from, sizeof, strlen, substr, append, replace, indexof} from './Utility.js'\nimport {node, char, prev, next, peek, caret, alloc, dealloc, delimit, whitespace, escaping, identifier, commenter} from './Tokenizer.js'\n\n/**\n * @param {string} value\n * @return {object[]}\n */\nexport function compile (value) {\n\treturn dealloc(parse('', null, null, null, [''], value = alloc(value), 0, [0], value))\n}\n\n/**\n * @param {string} value\n * @param {object} root\n * @param {object?} parent\n * @param {string[]} rule\n * @param {string[]} rules\n * @param {string[]} rulesets\n * @param {number[]} pseudo\n * @param {number[]} points\n * @param {string[]} declarations\n * @return {object}\n */\nexport function parse (value, root, parent, rule, rules, rulesets, pseudo, points, declarations) {\n\tvar index = 0\n\tvar offset = 0\n\tvar length = pseudo\n\tvar atrule = 0\n\tvar property = 0\n\tvar previous = 0\n\tvar variable = 1\n\tvar scanning = 1\n\tvar ampersand = 1\n\tvar character = 0\n\tvar type = ''\n\tvar props = rules\n\tvar children = rulesets\n\tvar reference = rule\n\tvar characters = type\n\n\twhile (scanning)\n\t\tswitch (previous = character, character = next()) {\n\t\t\t// (\n\t\t\tcase 40:\n\t\t\t\tif (previous != 108 && charat(characters, length - 1) == 58) {\n\t\t\t\t\tif (indexof(characters += replace(delimit(character), '&', '&\\f'), '&\\f') != -1)\n\t\t\t\t\t\tampersand = -1\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t// \" ' [\n\t\t\tcase 34: case 39: case 91:\n\t\t\t\tcharacters += delimit(character)\n\t\t\t\tbreak\n\t\t\t// \\t \\n \\r \\s\n\t\t\tcase 9: case 10: case 13: case 32:\n\t\t\t\tcharacters += whitespace(previous)\n\t\t\t\tbreak\n\t\t\t// \\\n\t\t\tcase 92:\n\t\t\t\tcharacters += escaping(caret() - 1, 7)\n\t\t\t\tcontinue\n\t\t\t// /\n\t\t\tcase 47:\n\t\t\t\tswitch (peek()) {\n\t\t\t\t\tcase 42: case 47:\n\t\t\t\t\t\tappend(comment(commenter(next(), caret()), root, parent), declarations)\n\t\t\t\t\t\tbreak\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tcharacters += '/'\n\t\t\t\t}\n\t\t\t\tbreak\n\t\t\t// {\n\t\t\tcase 123 * variable:\n\t\t\t\tpoints[index++] = strlen(characters) * ampersand\n\t\t\t// } ; \\0\n\t\t\tcase 125 * variable: case 59: case 0:\n\t\t\t\tswitch (character) {\n\t\t\t\t\t// \\0 }\n\t\t\t\t\tcase 0: case 125: scanning = 0\n\t\t\t\t\t// ;\n\t\t\t\t\tcase 59 + offset: if (ampersand == -1) characters = replace(characters, /\\f/g, '')\n\t\t\t\t\t\tif (property > 0 && (strlen(characters) - length))\n\t\t\t\t\t\t\tappend(property > 32 ? declaration(characters + ';', rule, parent, length - 1) : declaration(replace(characters, ' ', '') + ';', rule, parent, length - 2), declarations)\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// @ ;\n\t\t\t\t\tcase 59: characters += ';'\n\t\t\t\t\t// { rule/at-rule\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tappend(reference = ruleset(characters, root, parent, index, offset, rules, points, type, props = [], children = [], length), rulesets)\n\n\t\t\t\t\t\tif (character === 123)\n\t\t\t\t\t\t\tif (offset === 0)\n\t\t\t\t\t\t\t\tparse(characters, root, reference, reference, props, rulesets, length, points, children)\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tswitch (atrule === 99 && charat(characters, 3) === 110 ? 100 : atrule) {\n\t\t\t\t\t\t\t\t\t// d l m s\n\t\t\t\t\t\t\t\t\tcase 100: case 108: case 109: case 115:\n\t\t\t\t\t\t\t\t\t\tparse(value, reference, reference, rule && append(ruleset(value, reference, reference, 0, 0, rules, points, type, rules, props = [], length), children), rules, children, length, points, rule ? props : children)\n\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\t\tparse(characters, reference, reference, reference, [''], children, 0, points, children)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tindex = offset = property = 0, variable = ampersand = 1, type = characters = '', length = pseudo\n\t\t\t\tbreak\n\t\t\t// :\n\t\t\tcase 58:\n\t\t\t\tlength = 1 + strlen(characters), property = previous\n\t\t\tdefault:\n\t\t\t\tif (variable < 1)\n\t\t\t\t\tif (character == 123)\n\t\t\t\t\t\t--variable\n\t\t\t\t\telse if (character == 125 && variable++ == 0 && prev() == 125)\n\t\t\t\t\t\tcontinue\n\n\t\t\t\tswitch (characters += from(character), character * variable) {\n\t\t\t\t\t// &\n\t\t\t\t\tcase 38:\n\t\t\t\t\t\tampersand = offset > 0 ? 1 : (characters += '\\f', -1)\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// ,\n\t\t\t\t\tcase 44:\n\t\t\t\t\t\tpoints[index++] = (strlen(characters) - 1) * ampersand, ampersand = 1\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// @\n\t\t\t\t\tcase 64:\n\t\t\t\t\t\t// -\n\t\t\t\t\t\tif (peek() === 45)\n\t\t\t\t\t\t\tcharacters += delimit(next())\n\n\t\t\t\t\t\tatrule = peek(), offset = length = strlen(type = characters += identifier(caret())), character++\n\t\t\t\t\t\tbreak\n\t\t\t\t\t// -\n\t\t\t\t\tcase 45:\n\t\t\t\t\t\tif (previous === 45 && strlen(characters) == 2)\n\t\t\t\t\t\t\tvariable = 0\n\t\t\t\t}\n\t\t}\n\n\treturn rulesets\n}\n\n/**\n * @param {string} value\n * @param {object} root\n * @param {object?} parent\n * @param {number} index\n * @param {number} offset\n * @param {string[]} rules\n * @param {number[]} points\n * @param {string} type\n * @param {string[]} props\n * @param {string[]} children\n * @param {number} length\n * @return {object}\n */\nexport function ruleset (value, root, parent, index, offset, rules, points, type, props, children, length) {\n\tvar post = offset - 1\n\tvar rule = offset === 0 ? rules : ['']\n\tvar size = sizeof(rule)\n\n\tfor (var i = 0, j = 0, k = 0; i < index; ++i)\n\t\tfor (var x = 0, y = substr(value, post + 1, post = abs(j = points[i])), z = value; x < size; ++x)\n\t\t\tif (z = trim(j > 0 ? rule[x] + ' ' + y : replace(y, /&\\f/g, rule[x])))\n\t\t\t\tprops[k++] = z\n\n\treturn node(value, root, parent, offset === 0 ? RULESET : type, props, children, length)\n}\n\n/**\n * @param {number} value\n * @param {object} root\n * @param {object?} parent\n * @return {object}\n */\nexport function comment (value, root, parent) {\n\treturn node(value, root, parent, COMMENT, from(char()), substr(value, 2, -2), 0)\n}\n\n/**\n * @param {string} value\n * @param {object} root\n * @param {object?} parent\n * @param {number} length\n * @return {object}\n */\nexport function declaration (value, root, parent, length) {\n\treturn node(value, root, parent, DECLARATION, substr(value, 0, length), substr(value, length + 1, -1), length)\n}\n", "import {IMPORT, LAYER, COMMENT, RULESET, DECLARATION, KEYFRAMES} from './Enum.js'\nimport {strlen, sizeof} from './Utility.js'\n\n/**\n * @param {object[]} children\n * @param {function} callback\n * @return {string}\n */\nexport function serialize (children, callback) {\n\tvar output = ''\n\tvar length = sizeof(children)\n\n\tfor (var i = 0; i < length; i++)\n\t\toutput += callback(children[i], i, children, callback) || ''\n\n\treturn output\n}\n\n/**\n * @param {object} element\n * @param {number} index\n * @param {object[]} children\n * @param {function} callback\n * @return {string}\n */\nexport function stringify (element, index, children, callback) {\n\tswitch (element.type) {\n\t\tcase LAYER: if (element.children.length) break\n\t\tcase IMPORT: case DECLARATION: return element.return = element.return || element.value\n\t\tcase COMMENT: return ''\n\t\tcase KEYFRAMES: return element.return = element.value + '{' + serialize(element.children, callback) + '}'\n\t\tcase RULESET: element.value = element.props.join(',')\n\t}\n\n\treturn strlen(children = serialize(element.children, callback)) ? element.return = element.value + '{' + children + '}' : ''\n}\n", "import {MS, MOZ, WEBKIT, RULESET, KEYFRAMES, DECLARATION} from './Enum.js'\nimport {match, charat, substr, strlen, sizeof, replace, combine} from './Utility.js'\nimport {copy, tokenize} from './Tokenizer.js'\nimport {serialize} from './Serializer.js'\nimport {prefix} from './Prefixer.js'\n\n/**\n * @param {function[]} collection\n * @return {function}\n */\nexport function middleware (collection) {\n\tvar length = sizeof(collection)\n\n\treturn function (element, index, children, callback) {\n\t\tvar output = ''\n\n\t\tfor (var i = 0; i < length; i++)\n\t\t\toutput += collection[i](element, index, children, callback) || ''\n\n\t\treturn output\n\t}\n}\n\n/**\n * @param {function} callback\n * @return {function}\n */\nexport function rulesheet (callback) {\n\treturn function (element) {\n\t\tif (!element.root)\n\t\t\tif (element = element.return)\n\t\t\t\tcallback(element)\n\t}\n}\n\n/**\n * @param {object} element\n * @param {number} index\n * @param {object[]} children\n * @param {function} callback\n */\nexport function prefixer (element, index, children, callback) {\n\tif (element.length > -1)\n\t\tif (!element.return)\n\t\t\tswitch (element.type) {\n\t\t\t\tcase DECLARATION: element.return = prefix(element.value, element.length, children)\n\t\t\t\t\treturn\n\t\t\t\tcase KEYFRAMES:\n\t\t\t\t\treturn serialize([copy(element, {value: replace(element.value, '@', '@' + WEBKIT)})], callback)\n\t\t\t\tcase RULESET:\n\t\t\t\t\tif (element.length)\n\t\t\t\t\t\treturn combine(element.props, function (value) {\n\t\t\t\t\t\t\tswitch (match(value, /(::plac\\w+|:read-\\w+)/)) {\n\t\t\t\t\t\t\t\t// :read-(only|write)\n\t\t\t\t\t\t\t\tcase ':read-only': case ':read-write':\n\t\t\t\t\t\t\t\t\treturn serialize([copy(element, {props: [replace(value, /:(read-\\w+)/, ':' + MOZ + '$1')]})], callback)\n\t\t\t\t\t\t\t\t// :placeholder\n\t\t\t\t\t\t\t\tcase '::placeholder':\n\t\t\t\t\t\t\t\t\treturn serialize([\n\t\t\t\t\t\t\t\t\t\tcopy(element, {props: [replace(value, /:(plac\\w+)/, ':' + WEBKIT + 'input-$1')]}),\n\t\t\t\t\t\t\t\t\t\tcopy(element, {props: [replace(value, /:(plac\\w+)/, ':' + MOZ + '$1')]}),\n\t\t\t\t\t\t\t\t\t\tcopy(element, {props: [replace(value, /:(plac\\w+)/, MS + 'input-$1')]})\n\t\t\t\t\t\t\t\t\t], callback)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn ''\n\t\t\t\t\t\t})\n\t\t\t}\n}\n\n/**\n * @param {object} element\n * @param {number} index\n * @param {object[]} children\n */\nexport function namespace (element) {\n\tswitch (element.type) {\n\t\tcase RULESET:\n\t\t\telement.props = element.props.map(function (value) {\n\t\t\t\treturn combine(tokenize(value), function (value, index, children) {\n\t\t\t\t\tswitch (charat(value, 0)) {\n\t\t\t\t\t\t// \\f\n\t\t\t\t\t\tcase 12:\n\t\t\t\t\t\t\treturn substr(value, 1, strlen(value))\n\t\t\t\t\t\t// \\0 ( + > ~\n\t\t\t\t\t\tcase 0: case 40: case 43: case 62: case 126:\n\t\t\t\t\t\t\treturn value\n\t\t\t\t\t\t// :\n\t\t\t\t\t\tcase 58:\n\t\t\t\t\t\t\tif (children[++index] === 'global')\n\t\t\t\t\t\t\t\tchildren[index] = '', children[++index] = '\\f' + substr(children[index], index = 1, -1)\n\t\t\t\t\t\t// \\s\n\t\t\t\t\t\tcase 32:\n\t\t\t\t\t\t\treturn index === 1 ? '' : value\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tswitch (index) {\n\t\t\t\t\t\t\t\tcase 0: element = value\n\t\t\t\t\t\t\t\t\treturn sizeof(children) > 1 ? '' : value\n\t\t\t\t\t\t\t\tcase index = sizeof(children) - 1: case 2:\n\t\t\t\t\t\t\t\t\treturn index === 2 ? value + element + element : value + element\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\treturn value\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t}\n}\n", "function memoize(fn) {\n  var cache = Object.create(null);\n  return function (arg) {\n    if (cache[arg] === undefined) cache[arg] = fn(arg);\n    return cache[arg];\n  };\n}\n\nexport { memoize as default };\n", "import { StyleSheet } from '@emotion/sheet';\nimport { dealloc, alloc, next, token, from, peek, delimit, slice, position, RULESET, combine, match, serialize, copy, replace, WEBKIT, MOZ, MS, KEYFRAMES, DECLARATION, hash, charat, strlen, indexof, stringify, rulesheet, middleware, compile } from 'stylis';\nimport '@emotion/weak-memoize';\nimport '@emotion/memoize';\n\nvar identifierWithPointTracking = function identifierWithPointTracking(begin, points, index) {\n  var previous = 0;\n  var character = 0;\n\n  while (true) {\n    previous = character;\n    character = peek(); // &\\f\n\n    if (previous === 38 && character === 12) {\n      points[index] = 1;\n    }\n\n    if (token(character)) {\n      break;\n    }\n\n    next();\n  }\n\n  return slice(begin, position);\n};\n\nvar toRules = function toRules(parsed, points) {\n  // pretend we've started with a comma\n  var index = -1;\n  var character = 44;\n\n  do {\n    switch (token(character)) {\n      case 0:\n        // &\\f\n        if (character === 38 && peek() === 12) {\n          // this is not 100% correct, we don't account for literal sequences here - like for example quoted strings\n          // stylis inserts \\f after & to know when & where it should replace this sequence with the context selector\n          // and when it should just concatenate the outer and inner selectors\n          // it's very unlikely for this sequence to actually appear in a different context, so we just leverage this fact here\n          points[index] = 1;\n        }\n\n        parsed[index] += identifierWithPointTracking(position - 1, points, index);\n        break;\n\n      case 2:\n        parsed[index] += delimit(character);\n        break;\n\n      case 4:\n        // comma\n        if (character === 44) {\n          // colon\n          parsed[++index] = peek() === 58 ? '&\\f' : '';\n          points[index] = parsed[index].length;\n          break;\n        }\n\n      // fallthrough\n\n      default:\n        parsed[index] += from(character);\n    }\n  } while (character = next());\n\n  return parsed;\n};\n\nvar getRules = function getRules(value, points) {\n  return dealloc(toRules(alloc(value), points));\n}; // WeakSet would be more appropriate, but only WeakMap is supported in IE11\n\n\nvar fixedElements = /* #__PURE__ */new WeakMap();\nvar compat = function compat(element) {\n  if (element.type !== 'rule' || !element.parent || // positive .length indicates that this rule contains pseudo\n  // negative .length indicates that this rule has been already prefixed\n  element.length < 1) {\n    return;\n  }\n\n  var value = element.value;\n  var parent = element.parent;\n  var isImplicitRule = element.column === parent.column && element.line === parent.line;\n\n  while (parent.type !== 'rule') {\n    parent = parent.parent;\n    if (!parent) return;\n  } // short-circuit for the simplest case\n\n\n  if (element.props.length === 1 && value.charCodeAt(0) !== 58\n  /* colon */\n  && !fixedElements.get(parent)) {\n    return;\n  } // if this is an implicitly inserted rule (the one eagerly inserted at the each new nested level)\n  // then the props has already been manipulated beforehand as they that array is shared between it and its \"rule parent\"\n\n\n  if (isImplicitRule) {\n    return;\n  }\n\n  fixedElements.set(element, true);\n  var points = [];\n  var rules = getRules(value, points);\n  var parentRules = parent.props;\n\n  for (var i = 0, k = 0; i < rules.length; i++) {\n    for (var j = 0; j < parentRules.length; j++, k++) {\n      element.props[k] = points[i] ? rules[i].replace(/&\\f/g, parentRules[j]) : parentRules[j] + \" \" + rules[i];\n    }\n  }\n};\nvar removeLabel = function removeLabel(element) {\n  if (element.type === 'decl') {\n    var value = element.value;\n\n    if ( // charcode for l\n    value.charCodeAt(0) === 108 && // charcode for b\n    value.charCodeAt(2) === 98) {\n      // this ignores label\n      element[\"return\"] = '';\n      element.value = '';\n    }\n  }\n};\n\n/* eslint-disable no-fallthrough */\n\nfunction prefix(value, length) {\n  switch (hash(value, length)) {\n    // color-adjust\n    case 5103:\n      return WEBKIT + 'print-' + value + value;\n    // animation, animation-(delay|direction|duration|fill-mode|iteration-count|name|play-state|timing-function)\n\n    case 5737:\n    case 4201:\n    case 3177:\n    case 3433:\n    case 1641:\n    case 4457:\n    case 2921: // text-decoration, filter, clip-path, backface-visibility, column, box-decoration-break\n\n    case 5572:\n    case 6356:\n    case 5844:\n    case 3191:\n    case 6645:\n    case 3005: // mask, mask-image, mask-(mode|clip|size), mask-(repeat|origin), mask-position, mask-composite,\n\n    case 6391:\n    case 5879:\n    case 5623:\n    case 6135:\n    case 4599:\n    case 4855: // background-clip, columns, column-(count|fill|gap|rule|rule-color|rule-style|rule-width|span|width)\n\n    case 4215:\n    case 6389:\n    case 5109:\n    case 5365:\n    case 5621:\n    case 3829:\n      return WEBKIT + value + value;\n    // appearance, user-select, transform, hyphens, text-size-adjust\n\n    case 5349:\n    case 4246:\n    case 4810:\n    case 6968:\n    case 2756:\n      return WEBKIT + value + MOZ + value + MS + value + value;\n    // flex, flex-direction\n\n    case 6828:\n    case 4268:\n      return WEBKIT + value + MS + value + value;\n    // order\n\n    case 6165:\n      return WEBKIT + value + MS + 'flex-' + value + value;\n    // align-items\n\n    case 5187:\n      return WEBKIT + value + replace(value, /(\\w+).+(:[^]+)/, WEBKIT + 'box-$1$2' + MS + 'flex-$1$2') + value;\n    // align-self\n\n    case 5443:\n      return WEBKIT + value + MS + 'flex-item-' + replace(value, /flex-|-self/, '') + value;\n    // align-content\n\n    case 4675:\n      return WEBKIT + value + MS + 'flex-line-pack' + replace(value, /align-content|flex-|-self/, '') + value;\n    // flex-shrink\n\n    case 5548:\n      return WEBKIT + value + MS + replace(value, 'shrink', 'negative') + value;\n    // flex-basis\n\n    case 5292:\n      return WEBKIT + value + MS + replace(value, 'basis', 'preferred-size') + value;\n    // flex-grow\n\n    case 6060:\n      return WEBKIT + 'box-' + replace(value, '-grow', '') + WEBKIT + value + MS + replace(value, 'grow', 'positive') + value;\n    // transition\n\n    case 4554:\n      return WEBKIT + replace(value, /([^-])(transform)/g, '$1' + WEBKIT + '$2') + value;\n    // cursor\n\n    case 6187:\n      return replace(replace(replace(value, /(zoom-|grab)/, WEBKIT + '$1'), /(image-set)/, WEBKIT + '$1'), value, '') + value;\n    // background, background-image\n\n    case 5495:\n    case 3959:\n      return replace(value, /(image-set\\([^]*)/, WEBKIT + '$1' + '$`$1');\n    // justify-content\n\n    case 4968:\n      return replace(replace(value, /(.+:)(flex-)?(.*)/, WEBKIT + 'box-pack:$3' + MS + 'flex-pack:$3'), /s.+-b[^;]+/, 'justify') + WEBKIT + value + value;\n    // (margin|padding)-inline-(start|end)\n\n    case 4095:\n    case 3583:\n    case 4068:\n    case 2532:\n      return replace(value, /(.+)-inline(.+)/, WEBKIT + '$1$2') + value;\n    // (min|max)?(width|height|inline-size|block-size)\n\n    case 8116:\n    case 7059:\n    case 5753:\n    case 5535:\n    case 5445:\n    case 5701:\n    case 4933:\n    case 4677:\n    case 5533:\n    case 5789:\n    case 5021:\n    case 4765:\n      // stretch, max-content, min-content, fill-available\n      if (strlen(value) - 1 - length > 6) switch (charat(value, length + 1)) {\n        // (m)ax-content, (m)in-content\n        case 109:\n          // -\n          if (charat(value, length + 4) !== 45) break;\n        // (f)ill-available, (f)it-content\n\n        case 102:\n          return replace(value, /(.+:)(.+)-([^]+)/, '$1' + WEBKIT + '$2-$3' + '$1' + MOZ + (charat(value, length + 3) == 108 ? '$3' : '$2-$3')) + value;\n        // (s)tretch\n\n        case 115:\n          return ~indexof(value, 'stretch') ? prefix(replace(value, 'stretch', 'fill-available'), length) + value : value;\n      }\n      break;\n    // position: sticky\n\n    case 4949:\n      // (s)ticky?\n      if (charat(value, length + 1) !== 115) break;\n    // display: (flex|inline-flex)\n\n    case 6444:\n      switch (charat(value, strlen(value) - 3 - (~indexof(value, '!important') && 10))) {\n        // stic(k)y\n        case 107:\n          return replace(value, ':', ':' + WEBKIT) + value;\n        // (inline-)?fl(e)x\n\n        case 101:\n          return replace(value, /(.+:)([^;!]+)(;|!.+)?/, '$1' + WEBKIT + (charat(value, 14) === 45 ? 'inline-' : '') + 'box$3' + '$1' + WEBKIT + '$2$3' + '$1' + MS + '$2box$3') + value;\n      }\n\n      break;\n    // writing-mode\n\n    case 5936:\n      switch (charat(value, length + 11)) {\n        // vertical-l(r)\n        case 114:\n          return WEBKIT + value + MS + replace(value, /[svh]\\w+-[tblr]{2}/, 'tb') + value;\n        // vertical-r(l)\n\n        case 108:\n          return WEBKIT + value + MS + replace(value, /[svh]\\w+-[tblr]{2}/, 'tb-rl') + value;\n        // horizontal(-)tb\n\n        case 45:\n          return WEBKIT + value + MS + replace(value, /[svh]\\w+-[tblr]{2}/, 'lr') + value;\n      }\n\n      return WEBKIT + value + MS + value + value;\n  }\n\n  return value;\n}\n\nvar prefixer = function prefixer(element, index, children, callback) {\n  if (element.length > -1) if (!element[\"return\"]) switch (element.type) {\n    case DECLARATION:\n      element[\"return\"] = prefix(element.value, element.length);\n      break;\n\n    case KEYFRAMES:\n      return serialize([copy(element, {\n        value: replace(element.value, '@', '@' + WEBKIT)\n      })], callback);\n\n    case RULESET:\n      if (element.length) return combine(element.props, function (value) {\n        switch (match(value, /(::plac\\w+|:read-\\w+)/)) {\n          // :read-(only|write)\n          case ':read-only':\n          case ':read-write':\n            return serialize([copy(element, {\n              props: [replace(value, /:(read-\\w+)/, ':' + MOZ + '$1')]\n            })], callback);\n          // :placeholder\n\n          case '::placeholder':\n            return serialize([copy(element, {\n              props: [replace(value, /:(plac\\w+)/, ':' + WEBKIT + 'input-$1')]\n            }), copy(element, {\n              props: [replace(value, /:(plac\\w+)/, ':' + MOZ + '$1')]\n            }), copy(element, {\n              props: [replace(value, /:(plac\\w+)/, MS + 'input-$1')]\n            })], callback);\n        }\n\n        return '';\n      });\n  }\n};\n\nvar defaultStylisPlugins = [prefixer];\n\nvar createCache = function createCache(options) {\n  var key = options.key;\n\n  if (key === 'css') {\n    var ssrStyles = document.querySelectorAll(\"style[data-emotion]:not([data-s])\"); // get SSRed styles out of the way of React's hydration\n    // document.head is a safe place to move them to(though note document.head is not necessarily the last place they will be)\n    // note this very very intentionally targets all style elements regardless of the key to ensure\n    // that creating a cache works inside of render of a React component\n\n    Array.prototype.forEach.call(ssrStyles, function (node) {\n      // we want to only move elements which have a space in the data-emotion attribute value\n      // because that indicates that it is an Emotion 11 server-side rendered style elements\n      // while we will already ignore Emotion 11 client-side inserted styles because of the :not([data-s]) part in the selector\n      // Emotion 10 client-side inserted styles did not have data-s (but importantly did not have a space in their data-emotion attributes)\n      // so checking for the space ensures that loading Emotion 11 after Emotion 10 has inserted some styles\n      // will not result in the Emotion 10 styles being destroyed\n      var dataEmotionAttribute = node.getAttribute('data-emotion');\n\n      if (dataEmotionAttribute.indexOf(' ') === -1) {\n        return;\n      }\n\n      document.head.appendChild(node);\n      node.setAttribute('data-s', '');\n    });\n  }\n\n  var stylisPlugins = options.stylisPlugins || defaultStylisPlugins;\n\n  var inserted = {};\n  var container;\n  var nodesToHydrate = [];\n\n  {\n    container = options.container || document.head;\n    Array.prototype.forEach.call( // this means we will ignore elements which don't have a space in them which\n    // means that the style elements we're looking at are only Emotion 11 server-rendered style elements\n    document.querySelectorAll(\"style[data-emotion^=\\\"\" + key + \" \\\"]\"), function (node) {\n      var attrib = node.getAttribute(\"data-emotion\").split(' ');\n\n      for (var i = 1; i < attrib.length; i++) {\n        inserted[attrib[i]] = true;\n      }\n\n      nodesToHydrate.push(node);\n    });\n  }\n\n  var _insert;\n\n  var omnipresentPlugins = [compat, removeLabel];\n\n  {\n    var currentSheet;\n    var finalizingPlugins = [stringify, rulesheet(function (rule) {\n      currentSheet.insert(rule);\n    })];\n    var serializer = middleware(omnipresentPlugins.concat(stylisPlugins, finalizingPlugins));\n\n    var stylis = function stylis(styles) {\n      return serialize(compile(styles), serializer);\n    };\n\n    _insert = function insert(selector, serialized, sheet, shouldCache) {\n      currentSheet = sheet;\n\n      stylis(selector ? selector + \"{\" + serialized.styles + \"}\" : serialized.styles);\n\n      if (shouldCache) {\n        cache.inserted[serialized.name] = true;\n      }\n    };\n  }\n\n  var cache = {\n    key: key,\n    sheet: new StyleSheet({\n      key: key,\n      container: container,\n      nonce: options.nonce,\n      speedy: options.speedy,\n      prepend: options.prepend,\n      insertionPoint: options.insertionPoint\n    }),\n    nonce: options.nonce,\n    inserted: inserted,\n    registered: {},\n    insert: _insert\n  };\n  cache.sheet.hydrate(nodesToHydrate);\n  return cache;\n};\n\nexport { createCache as default };\n", "/* eslint-disable */\n// Inspired by https://github.com/garycourt/murmurhash-js\n// Ported from https://github.com/aappleby/smhasher/blob/61a0530f28277f2e850bfc39600ce61d02b518de/src/MurmurHash2.cpp#L37-L86\nfunction murmur2(str) {\n  // 'm' and 'r' are mixing constants generated offline.\n  // They're not really 'magic', they just happen to work well.\n  // const m = 0x5bd1e995;\n  // const r = 24;\n  // Initialize the hash\n  var h = 0; // Mix 4 bytes at a time into the hash\n\n  var k,\n      i = 0,\n      len = str.length;\n\n  for (; len >= 4; ++i, len -= 4) {\n    k = str.charCodeAt(i) & 0xff | (str.charCodeAt(++i) & 0xff) << 8 | (str.charCodeAt(++i) & 0xff) << 16 | (str.charCodeAt(++i) & 0xff) << 24;\n    k =\n    /* Math.imul(k, m): */\n    (k & 0xffff) * 0x5bd1e995 + ((k >>> 16) * 0xe995 << 16);\n    k ^=\n    /* k >>> r: */\n    k >>> 24;\n    h =\n    /* Math.imul(k, m): */\n    (k & 0xffff) * 0x5bd1e995 + ((k >>> 16) * 0xe995 << 16) ^\n    /* Math.imul(h, m): */\n    (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  } // Handle the last few bytes of the input array\n\n\n  switch (len) {\n    case 3:\n      h ^= (str.charCodeAt(i + 2) & 0xff) << 16;\n\n    case 2:\n      h ^= (str.charCodeAt(i + 1) & 0xff) << 8;\n\n    case 1:\n      h ^= str.charCodeAt(i) & 0xff;\n      h =\n      /* Math.imul(h, m): */\n      (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  } // Do a few final mixes of the hash to ensure the last few\n  // bytes are well-incorporated.\n\n\n  h ^= h >>> 13;\n  h =\n  /* Math.imul(h, m): */\n  (h & 0xffff) * 0x5bd1e995 + ((h >>> 16) * 0xe995 << 16);\n  return ((h ^ h >>> 15) >>> 0).toString(36);\n}\n\nexport { murmur2 as default };\n", "var unitlessKeys = {\n  animationIterationCount: 1,\n  aspectRatio: 1,\n  borderImageOutset: 1,\n  borderImageSlice: 1,\n  borderImageWidth: 1,\n  boxFlex: 1,\n  boxFlexGroup: 1,\n  boxOrdinalGroup: 1,\n  columnCount: 1,\n  columns: 1,\n  flex: 1,\n  flexGrow: 1,\n  flexPositive: 1,\n  flexShrink: 1,\n  flexNegative: 1,\n  flexOrder: 1,\n  gridRow: 1,\n  gridRowEnd: 1,\n  gridRowSpan: 1,\n  gridRowStart: 1,\n  gridColumn: 1,\n  gridColumnEnd: 1,\n  gridColumnSpan: 1,\n  gridColumnStart: 1,\n  msGridRow: 1,\n  msGridRowSpan: 1,\n  msGridColumn: 1,\n  msGridColumnSpan: 1,\n  fontWeight: 1,\n  lineHeight: 1,\n  opacity: 1,\n  order: 1,\n  orphans: 1,\n  scale: 1,\n  tabSize: 1,\n  widows: 1,\n  zIndex: 1,\n  zoom: 1,\n  WebkitLineClamp: 1,\n  // SVG-related properties\n  fillOpacity: 1,\n  floodOpacity: 1,\n  stopOpacity: 1,\n  strokeDasharray: 1,\n  strokeDashoffset: 1,\n  strokeMiterlimit: 1,\n  strokeOpacity: 1,\n  strokeWidth: 1\n};\n\nexport { unitlessKeys as default };\n", "import hashString from '@emotion/hash';\nimport unitless from '@emotion/unitless';\nimport memoize from '@emotion/memoize';\n\nvar isDevelopment = false;\n\nvar hyphenateRegex = /[A-Z]|^ms/g;\nvar animationRegex = /_EMO_([^_]+?)_([^]*?)_EMO_/g;\n\nvar isCustomProperty = function isCustomProperty(property) {\n  return property.charCodeAt(1) === 45;\n};\n\nvar isProcessableValue = function isProcessableValue(value) {\n  return value != null && typeof value !== 'boolean';\n};\n\nvar processStyleName = /* #__PURE__ */memoize(function (styleName) {\n  return isCustomProperty(styleName) ? styleName : styleName.replace(hyphenateRegex, '-$&').toLowerCase();\n});\n\nvar processStyleValue = function processStyleValue(key, value) {\n  switch (key) {\n    case 'animation':\n    case 'animationName':\n      {\n        if (typeof value === 'string') {\n          return value.replace(animationRegex, function (match, p1, p2) {\n            cursor = {\n              name: p1,\n              styles: p2,\n              next: cursor\n            };\n            return p1;\n          });\n        }\n      }\n  }\n\n  if (unitless[key] !== 1 && !isCustomProperty(key) && typeof value === 'number' && value !== 0) {\n    return value + 'px';\n  }\n\n  return value;\n};\n\nvar noComponentSelectorMessage = 'Component selectors can only be used in conjunction with ' + '@emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware ' + 'compiler transform.';\n\nfunction handleInterpolation(mergedProps, registered, interpolation) {\n  if (interpolation == null) {\n    return '';\n  }\n\n  var componentSelector = interpolation;\n\n  if (componentSelector.__emotion_styles !== undefined) {\n\n    return componentSelector;\n  }\n\n  switch (typeof interpolation) {\n    case 'boolean':\n      {\n        return '';\n      }\n\n    case 'object':\n      {\n        var keyframes = interpolation;\n\n        if (keyframes.anim === 1) {\n          cursor = {\n            name: keyframes.name,\n            styles: keyframes.styles,\n            next: cursor\n          };\n          return keyframes.name;\n        }\n\n        var serializedStyles = interpolation;\n\n        if (serializedStyles.styles !== undefined) {\n          var next = serializedStyles.next;\n\n          if (next !== undefined) {\n            // not the most efficient thing ever but this is a pretty rare case\n            // and there will be very few iterations of this generally\n            while (next !== undefined) {\n              cursor = {\n                name: next.name,\n                styles: next.styles,\n                next: cursor\n              };\n              next = next.next;\n            }\n          }\n\n          var styles = serializedStyles.styles + \";\";\n          return styles;\n        }\n\n        return createStringFromObject(mergedProps, registered, interpolation);\n      }\n\n    case 'function':\n      {\n        if (mergedProps !== undefined) {\n          var previousCursor = cursor;\n          var result = interpolation(mergedProps);\n          cursor = previousCursor;\n          return handleInterpolation(mergedProps, registered, result);\n        }\n\n        break;\n      }\n  } // finalize string values (regular strings and functions interpolated into css calls)\n\n\n  var asString = interpolation;\n\n  if (registered == null) {\n    return asString;\n  }\n\n  var cached = registered[asString];\n  return cached !== undefined ? cached : asString;\n}\n\nfunction createStringFromObject(mergedProps, registered, obj) {\n  var string = '';\n\n  if (Array.isArray(obj)) {\n    for (var i = 0; i < obj.length; i++) {\n      string += handleInterpolation(mergedProps, registered, obj[i]) + \";\";\n    }\n  } else {\n    for (var key in obj) {\n      var value = obj[key];\n\n      if (typeof value !== 'object') {\n        var asString = value;\n\n        if (registered != null && registered[asString] !== undefined) {\n          string += key + \"{\" + registered[asString] + \"}\";\n        } else if (isProcessableValue(asString)) {\n          string += processStyleName(key) + \":\" + processStyleValue(key, asString) + \";\";\n        }\n      } else {\n        if (key === 'NO_COMPONENT_SELECTOR' && isDevelopment) {\n          throw new Error(noComponentSelectorMessage);\n        }\n\n        if (Array.isArray(value) && typeof value[0] === 'string' && (registered == null || registered[value[0]] === undefined)) {\n          for (var _i = 0; _i < value.length; _i++) {\n            if (isProcessableValue(value[_i])) {\n              string += processStyleName(key) + \":\" + processStyleValue(key, value[_i]) + \";\";\n            }\n          }\n        } else {\n          var interpolated = handleInterpolation(mergedProps, registered, value);\n\n          switch (key) {\n            case 'animation':\n            case 'animationName':\n              {\n                string += processStyleName(key) + \":\" + interpolated + \";\";\n                break;\n              }\n\n            default:\n              {\n\n                string += key + \"{\" + interpolated + \"}\";\n              }\n          }\n        }\n      }\n    }\n  }\n\n  return string;\n}\n\nvar labelPattern = /label:\\s*([^\\s;{]+)\\s*(;|$)/g; // this is the cursor for keyframes\n// keyframes are stored on the SerializedStyles object as a linked list\n\nvar cursor;\nfunction serializeStyles(args, registered, mergedProps) {\n  if (args.length === 1 && typeof args[0] === 'object' && args[0] !== null && args[0].styles !== undefined) {\n    return args[0];\n  }\n\n  var stringMode = true;\n  var styles = '';\n  cursor = undefined;\n  var strings = args[0];\n\n  if (strings == null || strings.raw === undefined) {\n    stringMode = false;\n    styles += handleInterpolation(mergedProps, registered, strings);\n  } else {\n    var asTemplateStringsArr = strings;\n\n    styles += asTemplateStringsArr[0];\n  } // we start at 1 since we've already handled the first arg\n\n\n  for (var i = 1; i < args.length; i++) {\n    styles += handleInterpolation(mergedProps, registered, args[i]);\n\n    if (stringMode) {\n      var templateStringsArr = strings;\n\n      styles += templateStringsArr[i];\n    }\n  } // using a global regex with .exec is stateful so lastIndex has to be reset each time\n\n\n  labelPattern.lastIndex = 0;\n  var identifierName = '';\n  var match; // https://esbench.com/bench/5b809c2cf2949800a0f61fb5\n\n  while ((match = labelPattern.exec(styles)) !== null) {\n    identifierName += '-' + match[1];\n  }\n\n  var name = hashString(styles) + identifierName;\n\n  return {\n    name: name,\n    styles: styles,\n    next: cursor\n  };\n}\n\nexport { serializeStyles };\n", "var isBrowser = true;\n\nfunction getRegisteredStyles(registered, registeredStyles, classNames) {\n  var rawClassName = '';\n  classNames.split(' ').forEach(function (className) {\n    if (registered[className] !== undefined) {\n      registeredStyles.push(registered[className] + \";\");\n    } else if (className) {\n      rawClassName += className + \" \";\n    }\n  });\n  return rawClassName;\n}\nvar registerStyles = function registerStyles(cache, serialized, isStringTag) {\n  var className = cache.key + \"-\" + serialized.name;\n\n  if ( // we only need to add the styles to the registered cache if the\n  // class name could be used further down\n  // the tree but if it's a string tag, we know it won't\n  // so we don't have to add it to registered cache.\n  // this improves memory usage since we can avoid storing the whole style string\n  (isStringTag === false || // we need to always store it if we're in compat mode and\n  // in node since emotion-server relies on whether a style is in\n  // the registered cache to know whether a style is global or not\n  // also, note that this check will be dead code eliminated in the browser\n  isBrowser === false ) && cache.registered[className] === undefined) {\n    cache.registered[className] = serialized.styles;\n  }\n};\nvar insertStyles = function insertStyles(cache, serialized, isStringTag) {\n  registerStyles(cache, serialized, isStringTag);\n  var className = cache.key + \"-\" + serialized.name;\n\n  if (cache.inserted[serialized.name] === undefined) {\n    var current = serialized;\n\n    do {\n      cache.insert(serialized === current ? \".\" + className : '', current, cache.sheet, true);\n\n      current = current.next;\n    } while (current !== undefined);\n  }\n};\n\nexport { getRegisteredStyles, insertStyles, registerStyles };\n", "import createCache from '@emotion/cache';\nimport { serializeStyles } from '@emotion/serialize';\nimport { getRegisteredStyles, insertStyles } from '@emotion/utils';\n\nfunction insertWithoutScoping(cache, serialized) {\n  if (cache.inserted[serialized.name] === undefined) {\n    return cache.insert('', serialized, cache.sheet, true);\n  }\n}\n\nfunction merge(registered, css, className) {\n  var registeredStyles = [];\n  var rawClassName = getRegisteredStyles(registered, registeredStyles, className);\n\n  if (registeredStyles.length < 2) {\n    return className;\n  }\n\n  return rawClassName + css(registeredStyles);\n}\n\nvar createEmotion = function createEmotion(options) {\n  var cache = createCache(options);\n\n  cache.sheet.speedy = function (value) {\n\n    this.isSpeedy = value;\n  };\n\n  cache.compat = true;\n\n  var css = function css() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var serialized = serializeStyles(args, cache.registered, undefined);\n    insertStyles(cache, serialized, false);\n    return cache.key + \"-\" + serialized.name;\n  };\n\n  var keyframes = function keyframes() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    var serialized = serializeStyles(args, cache.registered);\n    var animation = \"animation-\" + serialized.name;\n    insertWithoutScoping(cache, {\n      name: serialized.name,\n      styles: \"@keyframes \" + animation + \"{\" + serialized.styles + \"}\"\n    });\n    return animation;\n  };\n\n  var injectGlobal = function injectGlobal() {\n    for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      args[_key3] = arguments[_key3];\n    }\n\n    var serialized = serializeStyles(args, cache.registered);\n    insertWithoutScoping(cache, serialized);\n  };\n\n  var cx = function cx() {\n    for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n      args[_key4] = arguments[_key4];\n    }\n\n    return merge(cache.registered, css, classnames(args));\n  };\n\n  return {\n    css: css,\n    cx: cx,\n    injectGlobal: injectGlobal,\n    keyframes: keyframes,\n    hydrate: function hydrate(ids) {\n      ids.forEach(function (key) {\n        cache.inserted[key] = true;\n      });\n    },\n    flush: function flush() {\n      cache.registered = {};\n      cache.inserted = {};\n      cache.sheet.flush();\n    },\n    sheet: cache.sheet,\n    cache: cache,\n    getRegisteredStyles: getRegisteredStyles.bind(null, cache.registered),\n    merge: merge.bind(null, cache.registered, css)\n  };\n};\n\nvar classnames = function classnames(args) {\n  var cls = '';\n\n  for (var i = 0; i < args.length; i++) {\n    var arg = args[i];\n    if (arg == null) continue;\n    var toAdd = void 0;\n\n    switch (typeof arg) {\n      case 'boolean':\n        break;\n\n      case 'object':\n        {\n          if (Array.isArray(arg)) {\n            toAdd = classnames(arg);\n          } else {\n            toAdd = '';\n\n            for (var k in arg) {\n              if (arg[k] && k) {\n                toAdd && (toAdd += ' ');\n                toAdd += k;\n              }\n            }\n          }\n\n          break;\n        }\n\n      default:\n        {\n          toAdd = arg;\n        }\n    }\n\n    if (toAdd) {\n      cls && (cls += ' ');\n      cls += toAdd;\n    }\n  }\n\n  return cls;\n};\n\nexport { createEmotion as default };\n", "import createEmotion from '../create-instance/dist/emotion-css-create-instance.esm.js';\nimport '@emotion/cache';\nimport '@emotion/serialize';\nimport '@emotion/utils';\n\nvar _createEmotion = createEmotion({\n  key: 'css'\n}),\n    flush = _createEmotion.flush,\n    hydrate = _createEmotion.hydrate,\n    cx = _createEmotion.cx,\n    merge = _createEmotion.merge,\n    getRegisteredStyles = _createEmotion.getRegisteredStyles,\n    injectGlobal = _createEmotion.injectGlobal,\n    keyframes = _createEmotion.keyframes,\n    css = _createEmotion.css,\n    sheet = _createEmotion.sheet,\n    cache = _createEmotion.cache;\n\nexport { cache, css, cx, flush, getRegisteredStyles, hydrate, injectGlobal, keyframes, merge, sheet };\n", "import {jsx} from \"@b9g/crank/standalone\";\nimport type {Context} from \"@b9g/crank\";\n\nfunction degreesFromRadians(r: number) {\n\treturn (r * 180) / Math.PI;\n}\n\nfunction radiansFromDegrees(d: number) {\n\treturn (d * Math.PI) / 180;\n}\n\nfunction rotate([x, y]: [number, number], a: number) {\n\treturn [x * Math.cos(a) - y * Math.sin(a), x * Math.sin(a) + y * Math.cos(a)];\n}\n\nfunction invAngle(radius: number, baseRadius: number) {\n\treturn Math.sqrt(radius ** 2 - baseRadius ** 2) / baseRadius;\n}\n\nfunction invPoint(angle: number, baseRadius: number) {\n\treturn [\n\t\tbaseRadius * (Math.cos(angle) + angle * Math.sin(angle)),\n\t\tbaseRadius * (Math.sin(angle) - angle * Math.cos(angle)),\n\t];\n}\n\nfunction invIntersectAngle(radius: number, baseRadius: number) {\n\tconst angle = Math.sqrt(radius ** 2 - baseRadius ** 2) / baseRadius;\n\tconst [x, y] = invPoint(angle, baseRadius);\n\treturn Math.atan2(y, x);\n}\n\nfunction calculateGear(mod: number, toothCount: number, pressureAngle: number) {\n\tconst pitchRadius = (mod * toothCount) / 2;\n\tconst baseRadius = pitchRadius * Math.cos(pressureAngle);\n\tconst dedRadius = pitchRadius - mod;\n\tconst addRadius = pitchRadius + mod;\n\tconst toothAngle = (2 * Math.PI) / toothCount;\n\tconst addAngle = invIntersectAngle(addRadius, baseRadius);\n\n\tlet points = [];\n\n\t// build a side of a tooth\n\tfor (\n\t\tlet i = 0, steps = 12, maxAngle = invAngle(addRadius, baseRadius);\n\t\ti <= steps;\n\t\ti++\n\t) {\n\t\tconst angle = (maxAngle * i) / steps;\n\t\tconst [x, y] = invPoint(angle, baseRadius);\n\t\tpoints.push([x, y]);\n\t}\n\n\t// TODO: I found this value by guess and check and I have no idea why it is correct\n\tconst mirrorAngle =\n\t\ttoothAngle / 2 + invIntersectAngle(pitchRadius, baseRadius) * 2;\n\t// build the reverse side of the tooth\n\t{\n\t\tconst points1 = points\n\t\t\t.map(([x, y]) => {\n\t\t\t\ty = -y;\n\t\t\t\t[x, y] = rotate([x, y], mirrorAngle);\n\t\t\t\treturn [x, y];\n\t\t\t})\n\t\t\t.reverse();\n\n\t\tpoints.push(...points1);\n\t}\n\n\t// rotate points so teeth tips aligned with x=0 and y=0\n\tpoints = points.map(([x, y]) => rotate([x, y], -mirrorAngle / 2));\n\n\tlet toothPoints = [];\n\tfor (let i = 0; i <= toothCount; i++) {\n\t\tconst points1 = points\n\t\t\t.slice()\n\t\t\t.map(([x, y]) => {\n\t\t\t\tconst a = toothAngle * i;\n\t\t\t\treturn rotate([x, y], a);\n\t\t\t})\n\t\t\t.map(([x, y]) => [Math.round(x * 100) / 100, Math.round(y * 100) / 100]);\n\n\t\ttoothPoints.push(points1);\n\t}\n\n\tconst path = toothPoints\n\t\t.map((points, i) => {\n\t\t\treturn points\n\t\t\t\t.map(([x, y], j) => {\n\t\t\t\t\tif (i === 0) {\n\t\t\t\t\t\treturn `M ${x} ${y}`;\n\t\t\t\t\t} else if (j === 0) {\n\t\t\t\t\t\tconst radius = toothCount / 2;\n\t\t\t\t\t\treturn `A ${radius} ${radius} 0 0 0 ${x} ${y}`;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn `L ${x} ${y}`;\n\t\t\t\t})\n\t\t\t\t.join(\" \");\n\t\t})\n\t\t.join(\" \");\n\n\treturn {\n\t\tpath,\n\t\tpitchRadius,\n\t\tbaseRadius,\n\t\tdedRadius,\n\t\taddRadius,\n\t\taddAngle,\n\t\ttoothAngle,\n\t\tmirrorAngle,\n\t};\n}\n\nexport function* Gear(\n\tthis: Context<typeof Gear>,\n\t{\n\t\tmod,\n\t\ttoothCount,\n\t\toffset,\n\t\tmask,\n\t\tstroke,\n\t\tstrokeWidth,\n\t\tfill,\n\t\tcircleRadius,\n\t}: {\n\t\tmod: number;\n\t\ttoothCount: number;\n\t\toffset: boolean | undefined;\n\t\tmask?: string;\n\t\tstroke?: string | number;\n\t\tstrokeWidth?: string | number;\n\t\tfill?: string | number;\n\t\tcircleRadius?: number;\n\t},\n): Generator<any> {\n\tconst pressureAngle = radiansFromDegrees(20);\n\tlet path!: string;\n\tlet dedRadius = 0;\n\tlet toothAngle = 0;\n\tlet oldMod: number | undefined;\n\tlet oldToothCount: number | undefined;\n\tfor ({\n\t\tmod,\n\t\ttoothCount,\n\t\toffset,\n\t\tmask,\n\t\tstroke,\n\t\tstrokeWidth,\n\t\tfill,\n\t\tcircleRadius,\n\t} of this) {\n\t\tif (oldMod !== mod || oldToothCount !== toothCount) {\n\t\t\t({path, dedRadius, toothAngle} = calculateGear(\n\t\t\t\tmod,\n\t\t\t\ttoothCount,\n\t\t\t\tpressureAngle,\n\t\t\t));\n\n\t\t\tcircleRadius = circleRadius == null ? dedRadius - 2 * mod : circleRadius;\n\t\t\t// add the inner circle\n\t\t\tpath += `\n\t\t\t  M ${-circleRadius} 0\n\t\t\t\ta ${circleRadius} ${circleRadius} 0 1 0 ${circleRadius * 2} 0\n\t\t\t\ta ${circleRadius} ${circleRadius} 0 1 0 ${-circleRadius * 2} 0\n\t\t\t`;\n\t\t}\n\n\t\tconst pathAngle = offset ? 0 : -toothAngle / 2;\n\t\tyield jsx`\n\t\t\t<path\n\t\t\t\ttransform=\"rotate(${pathAngle * (180 / Math.PI)})\"\n\t\t\t\td=${path}\n\t\t\t\tmask=${mask}\n\t\t\t\tstroke=${stroke}\n\t\t\t\tstroke-width=${strokeWidth}\n\t\t\t\tfill=${fill}\n\t\t\t/>\n\t\t`;\n\n\t\toldMod = mod;\n\t\toldToothCount = toothCount;\n\t}\n}\n\nfunction Rack({mod, height}: {mod: number; height: number}) {\n\tconst pressureAngle = radiansFromDegrees(20);\n\tconst points = [];\n\tconst toothWidth = mod * Math.PI;\n\tlet tipWidth = toothWidth / 4;\n\tconst count = Math.ceil(height / toothWidth) + 1;\n\tfor (let i = Math.floor(-count); i <= count; i++) {\n\t\tconst offset = i * toothWidth;\n\t\tpoints.push(\n\t\t\t...[\n\t\t\t\t[0, offset],\n\t\t\t\t[2 * mod, offset + 2 * mod * Math.tan(pressureAngle)],\n\t\t\t\t[2 * mod, offset + tipWidth + 2 * mod * Math.tan(pressureAngle)],\n\t\t\t\t[0, offset + tipWidth + 4 * mod * Math.tan(pressureAngle)],\n\t\t\t],\n\t\t);\n\t}\n\n\tconst path =\n\t\t`M${points[0][0]} ${points[0][1]}` +\n\t\tpoints\n\t\t\t.slice(1)\n\t\t\t.map(([x, y]) => `L ${x} ${y}`)\n\t\t\t.join(\" \");\n\treturn jsx`\n\t\t<path d=${path} />\n\t`;\n}\n\nexport function* GearInteractive(this: Context<typeof GearInteractive>, {}) {\n\tlet scrollTop = 0;\n\n\tconst measure = () => {\n\t\tif (typeof document !== \"undefined\") {\n\t\t\tconst el = document.scrollingElement;\n\t\t\tif (el) {\n\t\t\t\tscrollTop = Math.max(\n\t\t\t\t\t0,\n\t\t\t\t\tMath.min(el.scrollHeight - el.clientHeight, el.scrollTop),\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t};\n\n\tmeasure();\n\tif (typeof window !== \"undefined\") {\n\t\tconst onscroll = () => {\n\t\t\tmeasure();\n\t\t\tthis.refresh();\n\t\t};\n\n\t\twindow.addEventListener(\"scroll\", onscroll, {passive: true});\n\t\tthis.cleanup(() => {\n\t\t\twindow.removeEventListener(\"scroll\", onscroll);\n\t\t});\n\n\t\tonclick = () => {\n\t\t\t// TODO: advance the gears by a tiny amount every time the page is\n\t\t\t// clicked.\n\t\t};\n\n\t\twindow.addEventListener(\"click\", onclick);\n\t\tthis.cleanup(() => {\n\t\t\twindow.removeEventListener(\"click\", onclick as any);\n\t\t});\n\t}\n\n\tconst mod = 20;\n\tconst speed = 1 / 3;\n\n\tconst toothCount1 = 16;\n\tconst pitchRadius1 = (toothCount1 * mod) / 2;\n\n\tconst toothCount2 = 32;\n\tconst pitchRadius2 = (toothCount2 * mod) / 2;\n\n\tconst toothCount3 = 16;\n\tconst pitchRadius3 = (toothCount3 * mod) / 2;\n\n\tconst rackX = 20;\n\tconst rackY = 75;\n\tconst x1 = rackX + pitchRadius1 + mod;\n\tconst y1 = rackY + pitchRadius1 + mod;\n\n\tconst gearAngle2 = radiansFromDegrees(30);\n\tconst x2 = x1 + Math.cos(gearAngle2) * (pitchRadius1 + pitchRadius2);\n\tconst y2 = y1 + Math.sin(gearAngle2) * (pitchRadius1 + pitchRadius2);\n\n\tconst x3 = x2 + Math.cos(gearAngle2) * (pitchRadius2 + pitchRadius3);\n\tconst y3 = y2 + Math.sin(gearAngle2) * (pitchRadius2 + pitchRadius3);\n\tfor ({} of this) {\n\t\t// TODO: resize observer\n\t\tconst width = x2 * 2;\n\t\tconst height =\n\t\t\t(typeof document !== \"undefined\" &&\n\t\t\t\tdocument.scrollingElement?.clientHeight) ||\n\t\t\t1000;\n\t\tconst scrollAng = (-scrollTop * speed) / pitchRadius1;\n\t\tyield jsx`\n\t\t\t<div style=\"\n\t\t\t\tposition: fixed;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\twidth: 100vw;\n\t\t\t\theight: 100vh;\n\t\t\t\tz-index: -1;\n\t\t\t\">\n\t\t\t\t<svg\n\t\t\t\t\tstyle=\"\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\tmargin: 0 auto;\n\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\tleft: 1px;\n\t\t\t\t\t\"\n\t\t\t\t\tstroke=\"#aaa\"\n\t\t\t\t\tstroke-width=\"2\"\n\t\t\t\t\tfill=\"none\"\n\t\t\t\t\twidth=${width}\n\t\t\t\t>\n\t\t\t\t\t<g\n\t\t\t\t\t\tstyle=\"\n\t\t\t\t\t\t\ttransform: translate(\n\t\t\t\t\t\t\t\t${rackX}px,\n\t\t\t\t\t\t\t\t${rackY - ((scrollTop * speed) % (mod * Math.PI)) - (mod * Math.PI) / 2}px\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<${Rack} mod=${mod} height=${height} />\n\t\t\t\t\t</g>\n\t\t\t\t\t<g\n\t\t\t\t\t\tstroke=\"#9b7735\"\n\t\t\t\t\t\tstyle=\"\n\t\t\t\t\t\t\ttransform:\n\t\t\t\t\t\t\t\ttranslate(${x1}px, ${y1}px)\n\t\t\t\t\t\t\t\trotate(${-degreesFromRadians(scrollAng)}deg);\n\t\t\t\t\t\t\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<${Gear} mod=${mod} toothCount=${toothCount1} />\n\t\t\t\t\t</g>\n\t\t\t\t\t<g\n\t\t\t\t\t\tstyle=\"\n\t\t\t\t\t\t\ttransform:\n\t\t\t\t\t\t\t\ttranslate(${x2}px, ${y2}px)\n\t\t\t\t\t\t\t\trotate(${degreesFromRadians((scrollAng * toothCount1) / toothCount2)}deg);\n\t\t\t\t\t\t\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<${Gear} mod=${mod} toothCount=${toothCount2} offset />\n\t\t\t\t\t</g>\n\t\t\t\t\t<g\n\t\t\t\t\t\tstroke=\"#9b7735\"\n\t\t\t\t\t\tstyle=\"\n\t\t\t\t\t\t\ttransform: translate(${x3}px, ${y3}px)\n\t\t\t\t\t\t\trotate(${-degreesFromRadians((scrollAng * toothCount1) / toothCount3)}deg);\n\t\t\t\t\t\t\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<${Gear} mod=${mod} toothCount=${toothCount3} />\n\t\t\t\t\t</g>\n\t\t\t\t\t<!-- This last position is hard-coded because I just can\u2019t even -->\n\t\t\t\t\t<g\n\t\t\t\t\t\tstyle=\"\n\t\t\t\t\t\t\ttransform: translate(${x3 + pitchRadius3 - mod}px, ${\n\t\t\t\t\t\t\t\ty3 + 9 + ((scrollTop * speed) % (mod * Math.PI))\n\t\t\t\t\t\t\t}px);\n\t\t\t\t\t\t\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<${Rack} mod=${mod} height=${height} />\n\t\t\t\t\t</g>\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t`;\n\t}\n}\n\nexport function GearLogo({width = 400, height = 400}) {\n\tconst r = 300;\n\tconst wa = (35 * Math.PI) / 180;\n\treturn jsx`\n\t\t<svg\n\t\t\tstyle=\"flex: none;\"\n\t\t\tfill=\"none\"\n\t\t\tviewBox=\"-200 -200 400 400\"\n\t\t\twidth=${width}\n\t\t\theight=${height}\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t>\n\t\t\t<defs>\n\t\t\t\t<mask id=\"wedge-mask\">\n\t\t\t\t\t<rect x=\"-200\" y=\"-200\" width=\"400\" height=\"400\" fill=\"white\" />\n\t\t\t\t\t<path\n\t\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\t\tfill=\"black\"\n\t\t\t\t\t\td=\"\n\t\t\t\t\t\t\tM 0 0\n\t\t\t\t\t\t\tL ${Math.cos(wa) * r} ${Math.sin(wa) * r}\n\t\t\t\t\t\t\tL ${Math.cos(wa) * r} ${-Math.sin(wa) * r}\n\t\t\t\t\t\t\tz\n\t\t\t\t\t\t\"\n\t\t\t\t\t/>\n\t\t\t\t</mask>\n\t\t\t</defs>\n\t\t\t<g\n\t\t\t\tstroke=\"none\"\n\t\t\t\tfill=\"var(--highlight-color)\"\n\t\t\t>\n\t\t\t\t<${Gear}\n\t\t\t\t\tmod=${20}\n\t\t\t\t\ttoothCount=${16}\n\t\t\t\t\toffset=${1}\n\t\t\t\t\tstroke=\"none\"\n\t\t\t\t\tstrokeWidth=\"4\"\n\t\t\t\t\tmask=\"url(#wedge-mask)\"\n\t\t\t\t\tcircleRadius=${110}\n\t\t\t\t/>\n\t\t\t\t<circle cx=\"0\" cy=\"0\" r=\"60\" stroke=\"none\" />\n\t\t\t\t<path\n\t\t\t\t\td=\"\n\t\t\t\t\t\tM 0 -28\n\t\t\t\t\t\tL 160 -14\n\t\t\t\t\t\tL 160 14\n\t\t\t\t\t\tL 0 28\n\t\t\t\t\t\tZ\n\t\t\t\t\t\"\n\t\t\t\t/>\n\t\t\t</g>\n\t\t</svg>\n\t`;\n}\n", "import type {Context} from \"@b9g/crank/standalone\";\n\nexport type ColorScheme = \"dark\" | \"light\";\n\nconst BG_DARK = \"#0a0e1f\";\nconst BG_LIGHT = \"#e7f4f5\";\nconst TEXT_DARK = \"#f5f9ff\";\nconst TEXT_LIGHT = \"#0a0e1f\";\n\n/**\n * Reactive color scheme hook for Crank components\n */\nexport function useColorScheme(ctx: Context) {\n\t// SSR: return static object, hydration will set up reactivity\n\tif (typeof window === \"undefined\") {\n\t\treturn {\n\t\t\tget: (): ColorScheme => \"dark\",\n\t\t\ttoggle: () => {},\n\t\t\tset: () => {},\n\t\t};\n\t}\n\n\tlet current: ColorScheme = getColorScheme();\n\tapplyColorScheme(current);\n\n\tconst mediaQuery = window.matchMedia(\"(prefers-color-scheme: dark)\");\n\tconst onMediaChange = (e: MediaQueryListEvent) => {\n\t\tif (!sessionStorage.getItem(\"color-scheme\")) {\n\t\t\tcurrent = e.matches ? \"dark\" : \"light\";\n\t\t\tapplyColorScheme(current);\n\t\t\tctx.refresh();\n\t\t}\n\t};\n\tmediaQuery.addEventListener(\"change\", onMediaChange);\n\tctx.cleanup(() => mediaQuery.removeEventListener(\"change\", onMediaChange));\n\n\tconst onStorage = (e: StorageEvent) => {\n\t\tif (\n\t\t\te.key === \"color-scheme\" &&\n\t\t\te.storageArea === sessionStorage &&\n\t\t\t(e.newValue === \"dark\" || e.newValue === \"light\")\n\t\t) {\n\t\t\tcurrent = e.newValue;\n\t\t\tapplyColorScheme(current);\n\t\t\tctx.refresh();\n\t\t}\n\t};\n\twindow.addEventListener(\"storage\", onStorage);\n\tctx.cleanup(() => window.removeEventListener(\"storage\", onStorage));\n\n\treturn {\n\t\tget(): ColorScheme {\n\t\t\treturn current;\n\t\t},\n\t\ttoggle(): void {\n\t\t\tcurrent = current === \"dark\" ? \"light\" : \"dark\";\n\t\t\tsessionStorage.setItem(\"color-scheme\", current);\n\t\t\tapplyColorScheme(current);\n\t\t\tctx.refresh();\n\t\t},\n\t\tset(scheme: ColorScheme): void {\n\t\t\tcurrent = scheme;\n\t\t\tsessionStorage.setItem(\"color-scheme\", current);\n\t\t\tapplyColorScheme(current);\n\t\t\tctx.refresh();\n\t\t},\n\t};\n}\n\nfunction getColorScheme(): ColorScheme {\n\tconst stored = sessionStorage.getItem(\"color-scheme\");\n\tif (stored === \"dark\" || stored === \"light\") {\n\t\treturn stored;\n\t}\n\treturn window.matchMedia(\"(prefers-color-scheme: dark)\").matches\n\t\t? \"dark\"\n\t\t: \"light\";\n}\n\nfunction applyColorScheme(scheme: ColorScheme): void {\n\tconst isDark = scheme === \"dark\";\n\tdocument.documentElement.dataset.theme = scheme;\n\tdocument.documentElement.style.setProperty(\n\t\t\"--bg-color\",\n\t\tisDark ? BG_DARK : BG_LIGHT,\n\t);\n\tdocument.documentElement.style.setProperty(\n\t\t\"--text-color\",\n\t\tisDark ? TEXT_DARK : TEXT_LIGHT,\n\t);\n\t// Toggle class for CSS that uses .color-scheme-light\n\tdocument.documentElement.classList.toggle(\"color-scheme-light\", !isDark);\n}\n\n/**\n * Inline script for FOUC prevention in SSR\n */\nexport function getColorSchemeScript(): string {\n\treturn `\n\t\tconst s = sessionStorage.getItem(\"color-scheme\");\n\t\tconst scheme = s === \"dark\" || s === \"light\" ? s :\n\t\t\t(window.matchMedia(\"(prefers-color-scheme: dark)\").matches ? \"dark\" : \"light\");\n\t\tconst isDark = scheme === \"dark\";\n\t\tdocument.documentElement.dataset.theme = scheme;\n\t\tdocument.documentElement.style.setProperty(\"--bg-color\", isDark ? \"${BG_DARK}\" : \"${BG_LIGHT}\");\n\t\tdocument.documentElement.style.setProperty(\"--text-color\", isDark ? \"${TEXT_DARK}\" : \"${TEXT_LIGHT}\");\n\t\tif (!isDark) document.documentElement.classList.add(\"color-scheme-light\");\n\t`.trim();\n}\n", "import {jsx} from \"@b9g/crank/standalone\";\nimport type {Context} from \"@b9g/crank/standalone\";\nimport {useColorScheme} from \"../utils/color-scheme.js\";\n\n/**\n * Color scheme toggle component\n *\n * Uses the reactive useColorScheme hook which automatically:\n * - Syncs with all iframes via storage events\n * - Responds to system preference changes\n * - Persists user choice in sessionStorage\n */\nexport function* ColorSchemeToggle(this: Context) {\n\tconst colorScheme = useColorScheme(this);\n\n\tfor ({} of this) {\n\t\tconst scheme = colorScheme.get();\n\t\tconst onclick = () => colorScheme.toggle();\n\n\t\tyield jsx`\n\t\t\t<button\n\t\t\t\tonclick=${onclick}\n\t\t\t\trole=\"switch\"\n\t\t\t\taria-label=\"toggle color scheme\"\n\t\t\t\taria-checked=\"${(scheme === \"dark\").toString()}\"\n\t\t\t\thydrate=\"!aria-checked !children\"\n\t\t\t>\n\t\t\t\t${scheme === \"dark\" ? \"\uD83D\uDCA1\" : \"\uD83D\uDD76\"}\n\t\t\t</button>\n\t\t`;\n\t}\n}\n", "import {jsx} from \"@b9g/crank/standalone\";\nimport {css} from \"@emotion/css\";\n\nimport {GearLogo} from \"./gear-interactive.js\";\nimport {ColorSchemeToggle} from \"./color-scheme-toggle.js\";\n\nconst positionFixed = css`\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\theight: 50px;\n\tz-index: 999;\n\tgap: 1em;\n`;\n\nconst navbarGroupLayout = css`\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: center;\n\talign-items: center;\n\tgap: 1em;\n`;\n\n// TODO: url should be named pathname\nexport function Navbar({url}: {url: string}) {\n\treturn jsx`\n\t\t<nav\n\t\t\tclass=\"\n\t\t\t\tblur-background\n\t\t\t\t${positionFixed}\n\t\t\t\t${css`\n\t\t\t\t\tborder-bottom: 1px solid var(--text-color);\n\t\t\t\t\toverflow-x: auto;\n\t\t\t\t\tbackground-color: inherit;\n\t\t\t\t\ta {\n\t\t\t\t\t\ttext-decoration: none;\n\t\t\t\t\t\tfont-weight: bold;\n\t\t\t\t\t}\n\n\t\t\t\t\t@media screen and (min-width: 800px) {\n\t\t\t\t\t\tpadding: 0 2em;\n\t\t\t\t\t}\n\n\t\t\t\t\tdisplay: flex;\n\t\t\t\t\tflex-direction: row;\n\t\t\t\t\tjustify-content: space-between;\n\t\t\t\t\tgap: 1em;\n\t\t\t\t`}\n\t\t\t\"\n\t\t>\n\t\t\t<div class=${navbarGroupLayout}>\n\t\t\t\t<div>\n\t\t\t\t\t<a\n\t\t\t\t\t\tclass=${navbarGroupLayout}\n\t\t\t\t\t\taria-current=${url === \"/\" && \"page\"}\n\t\t\t\t\t\tstyle=\"gap: 0.3em\"\n\t\t\t\t\t\thref=\"/\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<${GearLogo} width=\"1.9em\" height=\"1.9em\" />\n\t\t\t\t\t\tCrank.js\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"/guides/getting-started\"\n\t\t\t\t\t\taria-current=${url.startsWith(\"/guides\") && \"page\"}\n\t\t\t\t\t>Guides</a>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"/blog/\"\n\t\t\t\t\t\taria-current=${url.startsWith(\"/blog\") && \"page\"}\n\t\t\t\t\t>Blog</a>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<a\n\t\t\t\t\t\thref=\"/playground/\"\n\t\t\t\t\t\taria-current=${url.startsWith(\"/playground\") && \"page\"}\n\t\t\t\t\t>Playground</a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=${navbarGroupLayout}>\n\t\t\t\t<div>\n\t\t\t\t\t<a href=\"https://github.com/bikeshaving/crank\">GitHub</a>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<a href=\"http://npm.im/@b9g/crank\">NPM</a>\n\t\t\t\t</div>\n\t\t\t\t<${ColorSchemeToggle} />\n\t\t\t</div>\n\t\t</nav>\n\t`;\n}\n", "/**\n * CSS utility functions for style property transformation.\n *\n * This module handles camelCase to kebab-case conversion and automatic\n * px unit conversion for numeric CSS values, making Crank more React-compatible.\n */\n\n/**\n * Converts camelCase CSS property names to kebab-case.\n * Handles vendor prefixes correctly (WebkitTransform -> -webkit-transform).\n */\nexport function camelToKebabCase(str: string): string {\n\t// Handle vendor prefixes that start with capital letters (WebkitTransform -> -webkit-transform)\n\tif (/^[A-Z]/.test(str)) {\n\t\treturn `-${str.replace(/[A-Z]/g, (match) => `-${match.toLowerCase()}`).slice(1)}`;\n\t}\n\t// Handle normal camelCase (fontSize -> font-size)\n\treturn str.replace(/[A-Z]/g, (match) => `-${match.toLowerCase()}`);\n}\n\n/**\n * CSS properties that should remain unitless when given numeric values.\n * Based on React's list of unitless properties.\n */\nexport const UNITLESS_PROPERTIES = new Set([\n\t\"animation-iteration-count\",\n\t\"aspect-ratio\",\n\t\"border-image-outset\",\n\t\"border-image-slice\",\n\t\"border-image-width\",\n\t\"box-flex\",\n\t\"box-flex-group\",\n\t\"box-ordinal-group\",\n\t\"column-count\",\n\t\"columns\",\n\t\"flex\",\n\t\"flex-grow\",\n\t\"flex-positive\",\n\t\"flex-shrink\",\n\t\"flex-negative\",\n\t\"flex-order\",\n\t\"font-weight\",\n\t\"grid-area\",\n\t\"grid-column\",\n\t\"grid-column-end\",\n\t\"grid-column-span\",\n\t\"grid-column-start\",\n\t\"grid-row\",\n\t\"grid-row-end\",\n\t\"grid-row-span\",\n\t\"grid-row-start\",\n\t\"line-height\",\n\t\"opacity\",\n\t\"order\",\n\t\"orphans\",\n\t\"tab-size\",\n\t\"widows\",\n\t\"z-index\",\n\t\"zoom\",\n]);\n\n/**\n * Formats CSS property values, automatically adding \"px\" to numeric values\n * for properties that are not unitless.\n */\nexport function formatStyleValue(name: string, value: unknown): string {\n\tif (typeof value === \"number\") {\n\t\t// If the property should remain unitless, keep the number as-is\n\t\tif (UNITLESS_PROPERTIES.has(name)) {\n\t\t\treturn String(value);\n\t\t}\n\t\t// Otherwise, append \"px\" for numeric values\n\t\treturn `${value}px`;\n\t}\n\treturn String(value);\n}\n", "import {\n\tChildren,\n\tContext,\n\tElementValue,\n\tPortal,\n\tRenderer,\n\tRenderAdapter,\n} from \"./crank.js\";\nimport {camelToKebabCase, formatStyleValue} from \"./_css.js\";\n\nconst SVG_NAMESPACE = \"http://www.w3.org/2000/svg\";\nconst MATHML_NAMESPACE = \"http://www.w3.org/1998/Math/MathML\";\n\nfunction isWritableProperty(element: Element, name: string): boolean {\n\t// walk up the object's prototype chain to find the owner\n\tlet propOwner = element;\n\tdo {\n\t\tif (Object.prototype.hasOwnProperty.call(propOwner, name)) {\n\t\t\tbreak;\n\t\t}\n\t} while ((propOwner = Object.getPrototypeOf(propOwner)));\n\n\tif (propOwner === null) {\n\t\treturn false;\n\t}\n\n\t// get the descriptor for the named property and check whether it implies\n\t// that the property is writable\n\tconst descriptor = Object.getOwnPropertyDescriptor(propOwner, name);\n\tif (\n\t\tdescriptor != null &&\n\t\t(descriptor.writable === true || descriptor.set !== undefined)\n\t) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\nfunction emitHydrationWarning(\n\tpropName: string,\n\tquietProps: Set<string> | undefined,\n\texpectedValue: any,\n\tactualValue: any,\n\telement: Element,\n\tdisplayName?: string,\n) {\n\tconst checkName = propName;\n\tconst showName = displayName || propName;\n\tif (!quietProps || !quietProps.has(checkName)) {\n\t\tif (expectedValue === null || expectedValue === false) {\n\t\t\tconsole.warn(\n\t\t\t\t`Expected \"${showName}\" to be missing but found ${String(actualValue)} while hydrating:`,\n\t\t\t\telement,\n\t\t\t);\n\t\t} else if (expectedValue === true || expectedValue === \"\") {\n\t\t\tconsole.warn(\n\t\t\t\t`Expected \"${showName}\" to be ${expectedValue === true ? \"present\" : '\"\"'} but found ${String(actualValue)} while hydrating:`,\n\t\t\t\telement,\n\t\t\t);\n\t\t} else if (\n\t\t\ttypeof window !== \"undefined\" &&\n\t\t\twindow.location &&\n\t\t\tnew URL(expectedValue, window.location.origin).href ===\n\t\t\t\tnew URL(actualValue, window.location.origin).href\n\t\t) {\n\t\t\t// attrs which are URLs will often be resolved to their full\n\t\t\t// href in the DOM, so we squash these errors\n\t\t} else {\n\t\t\tconsole.warn(\n\t\t\t\t`Expected \"${showName}\" to be \"${String(expectedValue)}\" but found ${String(actualValue)} while hydrating:`,\n\t\t\t\telement,\n\t\t\t);\n\t\t}\n\t}\n}\n\nexport const adapter: Partial<RenderAdapter<Node, string, Element>> = {\n\tscope({\n\t\tscope: xmlns,\n\t\ttag,\n\t\tprops,\n\t}: {\n\t\tscope: string | undefined;\n\t\ttag: string | symbol;\n\t\tprops: Record<string, any>;\n\t}): string | undefined {\n\t\tswitch (tag) {\n\t\t\tcase Portal:\n\t\t\t\t// TODO: read the namespace from the portal root element\n\t\t\t\txmlns = undefined;\n\t\t\t\tbreak;\n\t\t\tcase \"svg\":\n\t\t\t\txmlns = SVG_NAMESPACE;\n\t\t\t\tbreak;\n\t\t\tcase \"math\":\n\t\t\t\txmlns = MATHML_NAMESPACE;\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn props.xmlns || xmlns;\n\t},\n\n\tcreate({\n\t\ttag,\n\t\ttagName,\n\t\tscope: xmlns,\n\t}: {\n\t\ttag: string | symbol;\n\t\ttagName: string;\n\t\tscope: string | undefined;\n\t}): Node {\n\t\tif (typeof tag !== \"string\") {\n\t\t\tthrow new Error(`Unknown tag: ${tagName}`);\n\t\t} else if (tag.toLowerCase() === \"svg\") {\n\t\t\txmlns = SVG_NAMESPACE;\n\t\t} else if (tag.toLowerCase() === \"math\") {\n\t\t\txmlns = MATHML_NAMESPACE;\n\t\t}\n\n\t\treturn xmlns\n\t\t\t? document.createElementNS(xmlns, tag)\n\t\t\t: document.createElement(tag);\n\t},\n\n\tadopt({\n\t\ttag,\n\t\ttagName,\n\t\tnode,\n\t}: {\n\t\ttag: string | symbol;\n\t\ttagName: string;\n\t\tnode: Node | undefined;\n\t}): Array<Node> | undefined {\n\t\tif (typeof tag !== \"string\" && tag !== Portal) {\n\t\t\tthrow new Error(`Unknown tag: ${tagName}`);\n\t\t}\n\n\t\tif (\n\t\t\tnode === document.body ||\n\t\t\tnode === document.head ||\n\t\t\tnode === document.documentElement ||\n\t\t\tnode === document\n\t\t) {\n\t\t\tconsole.warn(\n\t\t\t\t`Hydrating ${node.nodeName.toLowerCase()} is discouraged as it is destructive and may remove unknown nodes.`,\n\t\t\t);\n\t\t}\n\n\t\tif (\n\t\t\tnode == null ||\n\t\t\t(typeof tag === \"string\" &&\n\t\t\t\t(node.nodeType !== Node.ELEMENT_NODE ||\n\t\t\t\t\ttag.toLowerCase() !== (node as Element).tagName.toLowerCase()))\n\t\t) {\n\t\t\tconsole.warn(`Expected <${tagName}> while hydrating but found: `, node);\n\t\t\treturn;\n\t\t}\n\n\t\treturn Array.from(node.childNodes);\n\t},\n\n\tpatch({\n\t\ttagName,\n\t\tnode,\n\t\tprops,\n\t\toldProps,\n\t\tscope: xmlns,\n\t\tcopyProps,\n\t\tquietProps,\n\t\tisHydrating,\n\t}: {\n\t\tnode: Node;\n\t\ttagName: string;\n\t\tprops: Record<string, any>;\n\t\toldProps: Record<string, any> | undefined;\n\t\tscope: string | undefined;\n\t\tcopyProps: Set<string> | undefined;\n\t\tquietProps: Set<string> | undefined;\n\t\tisHydrating: boolean;\n\t}): void {\n\t\tif (node.nodeType !== Node.ELEMENT_NODE) {\n\t\t\tthrow new TypeError(`Cannot patch node: ${String(node)}`);\n\t\t} else if (props.class && props.className) {\n\t\t\tconsole.error(\n\t\t\t\t`Both \"class\" and \"className\" set in props for <${tagName}>. Use one or the other.`,\n\t\t\t);\n\t\t}\n\n\t\tconst element = node as Element;\n\t\tconst isSVG = xmlns === SVG_NAMESPACE;\n\t\tconst isMathML = xmlns === MATHML_NAMESPACE;\n\t\tfor (let name in {...oldProps, ...props}) {\n\t\t\tlet value = props[name];\n\t\t\tconst oldValue = oldProps ? oldProps[name] : undefined;\n\t\t\t{\n\t\t\t\tif (copyProps != null && copyProps.has(name)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\t// handle prop:name or attr:name properties\n\t\t\t\tconst colonIndex = name.indexOf(\":\");\n\t\t\t\tif (colonIndex !== -1) {\n\t\t\t\t\tconst [ns, name1] = [\n\t\t\t\t\t\tname.slice(0, colonIndex),\n\t\t\t\t\t\tname.slice(colonIndex + 1),\n\t\t\t\t\t];\n\t\t\t\t\tswitch (ns) {\n\t\t\t\t\t\tcase \"prop\":\n\t\t\t\t\t\t\t(node as any)[name1] = value;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\tcase \"attr\":\n\t\t\t\t\t\t\tif (value == null || value === false) {\n\t\t\t\t\t\t\t\tif (isHydrating && element.hasAttribute(name1)) {\n\t\t\t\t\t\t\t\t\temitHydrationWarning(\n\t\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\t\tquietProps,\n\t\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\t\telement.getAttribute(name1),\n\t\t\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telement.removeAttribute(name1);\n\t\t\t\t\t\t\t} else if (value === true) {\n\t\t\t\t\t\t\t\tif (isHydrating && !element.hasAttribute(name1)) {\n\t\t\t\t\t\t\t\t\temitHydrationWarning(name, quietProps, value, null, element);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telement.setAttribute(name1, \"\");\n\t\t\t\t\t\t\t} else if (typeof value !== \"string\") {\n\t\t\t\t\t\t\t\tvalue = String(value);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (isHydrating && element.getAttribute(name1) !== value) {\n\t\t\t\t\t\t\t\temitHydrationWarning(\n\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\tquietProps,\n\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\telement.getAttribute(name1),\n\t\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\telement.setAttribute(name1, String(value));\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tswitch (name) {\n\t\t\t\t// TODO: fix hydration warnings for the style prop\n\t\t\t\tcase \"style\": {\n\t\t\t\t\tconst style = (element as HTMLElement | SVGElement).style;\n\t\t\t\t\tif (value == null || value === false) {\n\t\t\t\t\t\tif (isHydrating && style.cssText !== \"\") {\n\t\t\t\t\t\t\temitHydrationWarning(\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tquietProps,\n\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\tstyle.cssText,\n\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telement.removeAttribute(\"style\");\n\t\t\t\t\t} else if (value === true) {\n\t\t\t\t\t\tif (isHydrating && style.cssText !== \"\") {\n\t\t\t\t\t\t\temitHydrationWarning(\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tquietProps,\n\t\t\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\t\tstyle.cssText,\n\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telement.setAttribute(\"style\", \"\");\n\t\t\t\t\t} else if (typeof value === \"string\") {\n\t\t\t\t\t\tif (style.cssText !== value) {\n\t\t\t\t\t\t\t// TODO: Fix hydration warnings for styles\n\t\t\t\t\t\t\t//if (isHydrating) {\n\t\t\t\t\t\t\t//\temitHydrationWarning(\n\t\t\t\t\t\t\t//\t\tname,\n\t\t\t\t\t\t\t//\t\tquietProps,\n\t\t\t\t\t\t\t//\t\tvalue,\n\t\t\t\t\t\t\t//\t\tstyle.cssText,\n\t\t\t\t\t\t\t//\t\telement,\n\t\t\t\t\t\t\t//\t);\n\t\t\t\t\t\t\t//}\n\n\t\t\t\t\t\t\tstyle.cssText = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (typeof oldValue === \"string\") {\n\t\t\t\t\t\t\t// if the old value was a string, we need to clear the style\n\t\t\t\t\t\t\t// TODO: only clear the styles enumerated in the old value\n\t\t\t\t\t\t\tstyle.cssText = \"\";\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (const styleName in {...oldValue, ...value}) {\n\t\t\t\t\t\t\tconst cssName = camelToKebabCase(styleName);\n\t\t\t\t\t\t\tconst styleValue = value && (value as any)[styleName];\n\t\t\t\t\t\t\tif (styleValue == null) {\n\t\t\t\t\t\t\t\tif (isHydrating && style.getPropertyValue(cssName) !== \"\") {\n\t\t\t\t\t\t\t\t\temitHydrationWarning(\n\t\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\t\tquietProps,\n\t\t\t\t\t\t\t\t\t\tnull,\n\t\t\t\t\t\t\t\t\t\tstyle.getPropertyValue(cssName),\n\t\t\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t\t\t\t`style.${styleName}`,\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tstyle.removeProperty(cssName);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst formattedValue = formatStyleValue(cssName, styleValue);\n\t\t\t\t\t\t\t\tif (style.getPropertyValue(cssName) !== formattedValue) {\n\t\t\t\t\t\t\t\t\t// TODO: hydration warnings for style props\n\t\t\t\t\t\t\t\t\t//if (isHydrating) {\n\t\t\t\t\t\t\t\t\t//\temitHydrationWarning(\n\t\t\t\t\t\t\t\t\t//\t\tname,\n\t\t\t\t\t\t\t\t\t//\t\tquietProps,\n\t\t\t\t\t\t\t\t\t//\t\tformattedValue,\n\t\t\t\t\t\t\t\t\t//\t\tstyle.getPropertyValue(cssName),\n\t\t\t\t\t\t\t\t\t//\t\telement,\n\t\t\t\t\t\t\t\t\t//\t\t`style.${styleName}`,\n\t\t\t\t\t\t\t\t\t//\t);\n\t\t\t\t\t\t\t\t\t//}\n\t\t\t\t\t\t\t\t\tstyle.setProperty(cssName, formattedValue);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"class\":\n\t\t\t\tcase \"className\":\n\t\t\t\t\tif (value === true) {\n\t\t\t\t\t\tif (isHydrating && element.getAttribute(\"class\") !== \"\") {\n\t\t\t\t\t\t\temitHydrationWarning(\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tquietProps,\n\t\t\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\t\telement.getAttribute(\"class\"),\n\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telement.setAttribute(\"class\", \"\");\n\t\t\t\t\t} else if (value == null) {\n\t\t\t\t\t\tif (isHydrating && element.hasAttribute(\"class\")) {\n\t\t\t\t\t\t\temitHydrationWarning(\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tquietProps,\n\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\telement.getAttribute(\"class\"),\n\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\telement.removeAttribute(\"class\");\n\t\t\t\t\t} else if (typeof value === \"object\") {\n\t\t\t\t\t\t// class={{\"included-class\": true, \"excluded-class\": false}} syntax\n\t\t\t\t\t\tif (typeof oldValue === \"string\") {\n\t\t\t\t\t\t\t// if the old value was a string, we need to clear all classes\n\t\t\t\t\t\t\telement.setAttribute(\"class\", \"\");\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet shouldIssueWarning = false;\n\t\t\t\t\t\tconst hydratingClasses = isHydrating\n\t\t\t\t\t\t\t? new Set(Array.from(element.classList))\n\t\t\t\t\t\t\t: undefined;\n\t\t\t\t\t\tconst hydratingClassName = isHydrating\n\t\t\t\t\t\t\t? element.getAttribute(\"class\")\n\t\t\t\t\t\t\t: undefined;\n\n\t\t\t\t\t\tfor (const className in {...oldValue, ...value}) {\n\t\t\t\t\t\t\tconst classValue = value && value[className];\n\t\t\t\t\t\t\tif (classValue) {\n\t\t\t\t\t\t\t\telement.classList.add(className);\n\t\t\t\t\t\t\t\tif (hydratingClasses && hydratingClasses.has(className)) {\n\t\t\t\t\t\t\t\t\thydratingClasses.delete(className);\n\t\t\t\t\t\t\t\t} else if (isHydrating) {\n\t\t\t\t\t\t\t\t\tshouldIssueWarning = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\telement.classList.remove(className);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tshouldIssueWarning ||\n\t\t\t\t\t\t\t(hydratingClasses && hydratingClasses.size > 0)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\temitHydrationWarning(\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tquietProps,\n\t\t\t\t\t\t\t\tObject.keys(value)\n\t\t\t\t\t\t\t\t\t.filter((k) => value[k])\n\t\t\t\t\t\t\t\t\t.join(\" \"),\n\t\t\t\t\t\t\t\thydratingClassName || \"\",\n\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (!isSVG && !isMathML) {\n\t\t\t\t\t\tif (element.className !== value) {\n\t\t\t\t\t\t\tif (isHydrating) {\n\t\t\t\t\t\t\t\temitHydrationWarning(\n\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\tquietProps,\n\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\telement.className,\n\t\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telement.className = value;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (element.getAttribute(\"class\") !== value) {\n\t\t\t\t\t\tif (isHydrating) {\n\t\t\t\t\t\t\temitHydrationWarning(\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tquietProps,\n\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\telement.getAttribute(\"class\"),\n\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telement.setAttribute(\"class\", value as string);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"innerHTML\":\n\t\t\t\t\tif (value !== oldValue) {\n\t\t\t\t\t\tif (isHydrating) {\n\t\t\t\t\t\t\temitHydrationWarning(\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tquietProps,\n\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\telement.innerHTML,\n\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telement.innerHTML = value as any;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\tdefault: {\n\t\t\t\t\tif (\n\t\t\t\t\t\tname[0] === \"o\" &&\n\t\t\t\t\t\tname[1] === \"n\" &&\n\t\t\t\t\t\tname[2] === name[2].toUpperCase() &&\n\t\t\t\t\t\ttypeof value === \"function\"\n\t\t\t\t\t) {\n\t\t\t\t\t\t// Support React-style event names (onClick, onChange, etc.)\n\t\t\t\t\t\tname = name.toLowerCase();\n\t\t\t\t\t}\n\n\t\t\t\t\t// try to set the property directly\n\t\t\t\t\tif (\n\t\t\t\t\t\tname in element &&\n\t\t\t\t\t\t// boolean properties will coerce strings, but sometimes they map to\n\t\t\t\t\t\t// enumerated attributes, where truthy strings (\"false\", \"no\") map to\n\t\t\t\t\t\t// falsy properties, so we force using setAttribute.\n\t\t\t\t\t\t!(\n\t\t\t\t\t\t\ttypeof value === \"string\" &&\n\t\t\t\t\t\t\ttypeof (element as any)[name] === \"boolean\"\n\t\t\t\t\t\t) &&\n\t\t\t\t\t\tisWritableProperty(element, name)\n\t\t\t\t\t) {\n\t\t\t\t\t\t// For URL properties like src and href, the DOM property returns the\n\t\t\t\t\t\t// resolved absolute URL. We need to resolve the prop value the same way\n\t\t\t\t\t\t// to compare correctly.\n\t\t\t\t\t\tlet domValue = (element as any)[name];\n\t\t\t\t\t\tlet propValue = value;\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t(name === \"src\" || name === \"href\") &&\n\t\t\t\t\t\t\ttypeof value === \"string\" &&\n\t\t\t\t\t\t\ttypeof domValue === \"string\"\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tpropValue = new URL(value, element.baseURI).href;\n\t\t\t\t\t\t\t} catch {\n\t\t\t\t\t\t\t\t// Invalid URL, use original value for comparison\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (propValue !== domValue || oldValue === undefined) {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tisHydrating &&\n\t\t\t\t\t\t\t\ttypeof (element as any)[name] === \"string\" &&\n\t\t\t\t\t\t\t\t(element as any)[name] !== value\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\temitHydrationWarning(\n\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\tquietProps,\n\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\t(element as any)[name],\n\t\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// if the property is writable, assign it directly\n\t\t\t\t\t\t\t(element as any)[name] = value;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (value === true) {\n\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t} else if (value == null || value === false) {\n\t\t\t\t\t\tif (isHydrating && element.hasAttribute(name)) {\n\t\t\t\t\t\t\temitHydrationWarning(\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tquietProps,\n\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\telement.getAttribute(name),\n\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\telement.removeAttribute(name);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else if (typeof value !== \"string\") {\n\t\t\t\t\t\tvalue = String(value);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (element.getAttribute(name) !== value) {\n\t\t\t\t\t\tif (isHydrating) {\n\t\t\t\t\t\t\temitHydrationWarning(\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\tquietProps,\n\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\telement.getAttribute(name),\n\t\t\t\t\t\t\t\telement,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\telement.setAttribute(name, value as any);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tarrange({\n\t\ttag,\n\t\tnode,\n\t\tprops,\n\t\tchildren,\n\t}: {\n\t\ttag: string | symbol;\n\t\tnode: Node;\n\t\tprops: Record<string, any>;\n\t\tchildren: Array<Node>;\n\t}): void {\n\t\tif (tag === Portal && (node == null || typeof node.nodeType !== \"number\")) {\n\t\t\tthrow new TypeError(\n\t\t\t\t`<Portal> root is not a node. Received: ${String(node)}`,\n\t\t\t);\n\t\t}\n\n\t\tif (!(\"innerHTML\" in props)) {\n\t\t\tlet oldChild = node.firstChild;\n\t\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\t\tconst newChild = children[i];\n\t\t\t\tif (oldChild === newChild) {\n\t\t\t\t\t// the child is already in the right place, so we can skip it\n\t\t\t\t\toldChild = oldChild.nextSibling;\n\t\t\t\t} else {\n\t\t\t\t\tnode.insertBefore(newChild, oldChild);\n\t\t\t\t\tif (\n\t\t\t\t\t\ttag !== Portal &&\n\t\t\t\t\t\toldChild &&\n\t\t\t\t\t\ti + 1 < children.length &&\n\t\t\t\t\t\toldChild !== children[i + 1]\n\t\t\t\t\t) {\n\t\t\t\t\t\toldChild = oldChild.nextSibling;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tremove({\n\t\tnode,\n\t\tparentNode,\n\t\tisNested,\n\t}: {\n\t\tnode: Node;\n\t\tparentNode: Node;\n\t\tisNested: boolean;\n\t}): void {\n\t\tif (!isNested && node.parentNode === parentNode) {\n\t\t\tparentNode.removeChild(node);\n\t\t}\n\t},\n\n\ttext({\n\t\tvalue,\n\t\toldNode,\n\t\thydrationNodes,\n\t}: {\n\t\tvalue: string;\n\t\thydrationNodes: Array<Node> | undefined;\n\t\toldNode: Node | undefined;\n\t}): Node {\n\t\tif (hydrationNodes != null) {\n\t\t\tlet node = hydrationNodes.shift();\n\t\t\tif (!node || node.nodeType !== Node.TEXT_NODE) {\n\t\t\t\tconsole.warn(`Expected \"${value}\" while hydrating but found:`, node);\n\t\t\t} else {\n\t\t\t\t// value is a text node, check if it matches the expected text\n\t\t\t\tconst textData = (node as Text).data;\n\t\t\t\tif (textData.length > value.length) {\n\t\t\t\t\tif (textData.startsWith(value)) {\n\t\t\t\t\t\t// the text node is longer than the expected text, so we\n\t\t\t\t\t\t// reuse the existing text node, but truncate it and unshift the rest\n\t\t\t\t\t\t(node as Text).data = value;\n\t\t\t\t\t\thydrationNodes.unshift(\n\t\t\t\t\t\t\tdocument.createTextNode(textData.slice(value.length)),\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\treturn node;\n\t\t\t\t\t}\n\t\t\t\t} else if (textData === value) {\n\t\t\t\t\treturn node;\n\t\t\t\t}\n\n\t\t\t\t// We log textData and not node because node will be mutated\n\t\t\t\tconsole.warn(\n\t\t\t\t\t`Expected \"${value}\" while hydrating but found:`,\n\t\t\t\t\ttextData,\n\t\t\t\t);\n\t\t\t\toldNode = node;\n\t\t\t}\n\t\t}\n\n\t\tif (oldNode != null) {\n\t\t\tif ((oldNode as Text).data !== value) {\n\t\t\t\t(oldNode as Text).data = value;\n\t\t\t}\n\n\t\t\treturn oldNode;\n\t\t}\n\n\t\treturn document.createTextNode(value);\n\t},\n\n\traw({\n\t\tvalue,\n\t\tscope: xmlns,\n\t\thydrationNodes,\n\t}: {\n\t\tvalue: string | Node;\n\t\tscope: string | undefined;\n\t\thydrationNodes: Array<Node> | undefined;\n\t}): ElementValue<Node> {\n\t\tlet nodes: Array<Node>;\n\t\tif (typeof value === \"string\") {\n\t\t\tconst el =\n\t\t\t\txmlns == null\n\t\t\t\t\t? document.createElement(\"div\")\n\t\t\t\t\t: xmlns === SVG_NAMESPACE\n\t\t\t\t\t\t? document.createElementNS(xmlns, \"svg\")\n\t\t\t\t\t\t: document.createElementNS(xmlns, \"math\");\n\t\t\tel.innerHTML = value;\n\t\t\tnodes = Array.from(el.childNodes);\n\t\t} else {\n\t\t\tnodes = value == null ? [] : Array.isArray(value) ? [...value] : [value];\n\t\t}\n\n\t\tif (hydrationNodes != null) {\n\t\t\tfor (let i = 0; i < nodes.length; i++) {\n\t\t\t\tconst node = nodes[i];\n\t\t\t\t// check if node is equal to the next node in the hydration array\n\t\t\t\tconst hydrationNode = hydrationNodes.shift();\n\t\t\t\tif (\n\t\t\t\t\thydrationNode &&\n\t\t\t\t\ttypeof hydrationNode === \"object\" &&\n\t\t\t\t\ttypeof hydrationNode.nodeType === \"number\" &&\n\t\t\t\t\tnode.isEqualNode(hydrationNode as Node)\n\t\t\t\t) {\n\t\t\t\t\tnodes[i] = hydrationNode as Node;\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t`Expected <Raw value=\"${String(value)}\"> while hydrating but found:`,\n\t\t\t\t\t\thydrationNode,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn nodes.length === 0\n\t\t\t? undefined\n\t\t\t: nodes.length === 1\n\t\t\t\t? nodes[0]\n\t\t\t\t: nodes;\n\t},\n};\n\nexport class DOMRenderer extends Renderer<Node, string, Element> {\n\tconstructor() {\n\t\tsuper(adapter);\n\t}\n\n\trender(\n\t\tchildren: Children,\n\t\troot: Element,\n\t\tctx?: Context,\n\t): Promise<ElementValue<Node>> | ElementValue<Node> {\n\t\tvalidateRoot(root);\n\t\treturn super.render(children, root, ctx);\n\t}\n\n\thydrate(\n\t\tchildren: Children,\n\t\troot: Element,\n\t\tctx?: Context,\n\t): Promise<ElementValue<Node>> | ElementValue<Node> {\n\t\tvalidateRoot(root);\n\t\treturn super.hydrate(children, root, ctx);\n\t}\n}\n\nfunction validateRoot(root: unknown): asserts root is Element {\n\tif (\n\t\troot == null ||\n\t\t(typeof root === \"object\" && typeof (root as any).nodeType !== \"number\")\n\t) {\n\t\tthrow new TypeError(`Render root is not a node. Received: ${String(root)}`);\n\t} else if ((root as Node).nodeType !== Node.ELEMENT_NODE) {\n\t\tthrow new TypeError(\n\t\t\t`Render root must be an element node. Received: ${String(root)}`,\n\t\t);\n\t}\n}\n\nexport const renderer = new DOMRenderer();\n\ndeclare global {\n\tmodule Crank {\n\t\tinterface EventMap extends GlobalEventHandlersEventMap {}\n\t}\n}\n", "import {Navbar} from \"../components/navbar.js\";\nimport {jsx} from \"@b9g/crank/standalone\";\nimport {renderer} from \"@b9g/crank/dom\";\n\nrenderer.hydrate(\n\tjsx`<${Navbar} url=${new URL(window.location.href).pathname} />`,\n\tdocument.getElementById(\"navbar-root\")!,\n);\n"],
  "mappings": "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",
  "names": ["e", "length", "fill", "length", "compare", "i", "byteLength", "record", "i", "ret", "adapter", "renderer", "hydrate", "node", "token", "result", "diff", "returned", "iteration", "err", "match", "comment", "next", "equals", "i", "StyleSheet", "hydrate", "sheet", "flush", "from", "length", "length", "copy", "slice", "alloc", "slice", "from", "parse", "alloc", "length", "character", "characters", "from", "length", "length", "cache", "identifierWithPointTracking", "character", "slice", "toRules", "from", "getRules", "alloc", "compat", "removeLabel", "length", "prefixer", "copy", "createCache", "node", "stylis", "sheet", "cache", "isDevelopment", "isCustomProperty", "isProcessableValue", "processStyleValue", "match", "keyframes", "next", "registerStyles", "cache", "insertStyles", "cache", "css", "createEmotion", "keyframes", "injectGlobal", "cx", "hydrate", "flush", "classnames", "flush", "merge", "getRegisteredStyles", "cache", "points", "fill", "onclick", "match", "node"]
}
