function q(){throw new Error("setTimeout has not been defined")}function Z(){throw new Error("clearTimeout has not been defined")}var _=q,I=Z;typeof globalThis.setTimeout=="function"&&(_=setTimeout);typeof globalThis.clearTimeout=="function"&&(I=clearTimeout);function K(n){if(_===setTimeout)return setTimeout(n,0);if((_===q||!_)&&setTimeout)return _=setTimeout,setTimeout(n,0);try{return _(n,0)}catch{try{return _.call(null,n,0)}catch{return _.call(this,n,0)}}}function Ar(n){if(I===clearTimeout)return clearTimeout(n);if((I===Z||!I)&&clearTimeout)return I=clearTimeout,clearTimeout(n);try{return I(n)}catch{try{return I.call(null,n)}catch{return I.call(this,n)}}}var T=[],k=!1,U,D=-1;function Tr(){!k||!U||(k=!1,U.length?T=U.concat(T):D=-1,T.length&&$())}function $(){if(!k){var n=K(Tr);k=!0;for(var r=T.length;r;){for(U=T,T=[];++D<r;)U&&U[D].run();D=-1,r=T.length}U=null,k=!1,Ar(n)}}function dr(n){var r=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)r[e-1]=arguments[e];T.push(new j(n,r)),T.length===1&&!k&&K($)}function j(n,r){this.fun=n,this.array=r}j.prototype.run=function(){this.fun.apply(null,this.array)};var Rr="browser",_r="browser",Ir=!0,vr={},Ur=[],Br="",Pr={},Sr={},Yr={};function B(){}var kr=B,Cr=B,Dr=B,Mr=B,Lr=B,Nr=B,br=B;function Fr(n){throw new Error("process.binding is not supported")}function Or(){return"/"}function Gr(n){throw new Error("process.chdir is not supported")}function Wr(){return 0}var Y=globalThis.performance||{},Hr=Y.now||Y.mozNow||Y.msNow||Y.oNow||Y.webkitNow||function(){return new Date().getTime()};function zr(n){var r=Hr.call(Y)*.001,e=Math.floor(r),t=Math.floor(r%1*1e9);return n&&(e=e-n[0],t=t-n[1],t<0&&(e--,t+=1e9)),[e,t]}var Vr=new Date;function Jr(){var n=new Date,r=n-Vr;return r/1e3}var M={nextTick:dr,title:Rr,browser:Ir,env:vr,argv:Ur,version:Br,versions:Pr,on:kr,addListener:Cr,once:Dr,off:Mr,removeListener:Lr,removeAllListeners:Nr,emit:br,binding:Fr,cwd:Or,chdir:Gr,umask:Wr,hrtime:zr,platform:_r,release:Sr,config:Yr,uptime:Jr},X={};Object.keys(X).forEach(n=>{let r=n.split("."),e=M;for(let t=0;t<r.length;t++){let i=r[t];t===r.length-1?e[i]=X[n]:e=e[i]||(e[i]={})}});var y=[],m=[],Qr=typeof Uint8Array<"u"?Uint8Array:Array,H=!1;function tr(){H=!0;for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,e=n.length;r<e;++r)y[r]=n[r],m[n.charCodeAt(r)]=r;m[45]=62,m[95]=63}function Xr(n){H||tr();var r,e,t,i,f,o,a=n.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");f=n[a-2]==="="?2:n[a-1]==="="?1:0,o=new Qr(a*3/4-f),t=f>0?a-4:a;var c=0;for(r=0,e=0;r<t;r+=4,e+=3)i=m[n.charCodeAt(r)]<<18|m[n.charCodeAt(r+1)]<<12|m[n.charCodeAt(r+2)]<<6|m[n.charCodeAt(r+3)],o[c++]=i>>16&255,o[c++]=i>>8&255,o[c++]=i&255;return f===2?(i=m[n.charCodeAt(r)]<<2|m[n.charCodeAt(r+1)]>>4,o[c++]=i&255):f===1&&(i=m[n.charCodeAt(r)]<<10|m[n.charCodeAt(r+1)]<<4|m[n.charCodeAt(r+2)]>>2,o[c++]=i>>8&255,o[c++]=i&255),o}function qr(n){return y[n>>18&63]+y[n>>12&63]+y[n>>6&63]+y[n&63]}function Zr(n,r,e){for(var t,i=[],f=r;f<e;f+=3)t=(n[f]<<16)+(n[f+1]<<8)+n[f+2],i.push(qr(t));return i.join("")}function rr(n){H||tr();for(var r,e=n.length,t=e%3,i="",f=[],o=16383,a=0,c=e-t;a<c;a+=o)f.push(Zr(n,a,a+o>c?c:a+o));return t===1?(r=n[e-1],i+=y[r>>2],i+=y[r<<4&63],i+="=="):t===2&&(r=(n[e-2]<<8)+n[e-1],i+=y[r>>10],i+=y[r>>4&63],i+=y[r<<2&63],i+="="),f.push(i),f.join("")}u.TYPED_ARRAY_SUPPORT=globalThis.TYPED_ARRAY_SUPPORT!==void 0?globalThis.TYPED_ARRAY_SUPPORT:!0;function L(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function d(n,r){if(L()<r)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(n=new Uint8Array(r),n.__proto__=u.prototype):(n===null&&(n=new u(r)),n.length=r),n}function u(n,r,e){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(n,r,e);if(typeof n=="number"){if(typeof r=="string")throw new Error("If encoding is specified then the first argument must be a string");return z(this,n)}return ir(this,n,r,e)}u.poolSize=8192;u._augment=function(n){return n.__proto__=u.prototype,n};function ir(n,r,e,t){if(typeof r=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer?jr(n,r,e,t):typeof r=="string"?$r(n,r,e):re(n,r)}u.from=function(n,r,e){return ir(null,n,r,e)};u.kMaxLength=L();u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&u[Symbol.species]);function or(n){if(typeof n!="number")throw new TypeError('"size" argument must be a number');if(n<0)throw new RangeError('"size" argument must not be negative')}function Kr(n,r,e,t){return or(r),r<=0?d(n,r):e!==void 0?typeof t=="string"?d(n,r).fill(e,t):d(n,r).fill(e):d(n,r)}u.alloc=function(n,r,e){return Kr(null,n,r,e)};function z(n,r){if(or(r),n=d(n,r<0?0:V(r)|0),!u.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)n[e]=0;return n}u.allocUnsafe=function(n){return z(null,n)};u.allocUnsafeSlow=function(n){return z(null,n)};function $r(n,r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!u.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var t=fr(r,e)|0;n=d(n,t);var i=n.write(r,e);return i!==t&&(n=n.slice(0,i)),n}function W(n,r){var e=r.length<0?0:V(r.length)|0;n=d(n,e);for(var t=0;t<e;t+=1)n[t]=r[t]&255;return n}function jr(n,r,e,t){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(t||0))throw new RangeError("'length' is out of bounds");return e===void 0&&t===void 0?r=new Uint8Array(r):t===void 0?r=new Uint8Array(r,e):r=new Uint8Array(r,e,t),u.TYPED_ARRAY_SUPPORT?(n=r,n.__proto__=u.prototype):n=W(n,r),n}function re(n,r){if(A(r)){var e=V(r.length)|0;return n=d(n,e),n.length===0||r.copy(n,0,0,e),n}if(r){if(typeof ArrayBuffer<"u"&&r.buffer instanceof ArrayBuffer||"length"in r)return typeof r.length!="number"||ye(r.length)?d(n,0):W(n,r);if(r.type==="Buffer"&&Array.isArray(r.data))return W(n,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function V(n){if(n>=L())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+L().toString(16)+" bytes");return n|0}u.isBuffer=Ae;function A(n){return!!(n!=null&&n._isBuffer)}u.compare=function(r,e){if(!A(r)||!A(e))throw new TypeError("Arguments must be Buffers");if(r===e)return 0;for(var t=r.length,i=e.length,f=0,o=Math.min(t,i);f<o;++f)if(r[f]!==e[f]){t=r[f],i=e[f];break}return t<i?-1:i<t?1:0};u.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};u.concat=function(r,e){if(!Array.isArray(r))throw new TypeError('"list" argument must be an Array of Buffers');if(r.length===0)return u.alloc(0);var t;if(e===void 0)for(e=0,t=0;t<r.length;++t)e+=r[t].length;var i=u.allocUnsafe(e),f=0;for(t=0;t<r.length;++t){var o=r[t];if(!A(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(i,f),f+=o.length}return i};function fr(n,r){if(A(n))return n.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(n)||n instanceof ArrayBuffer))return n.byteLength;typeof n!="string"&&(n=""+n);var e=n.length;if(e===0)return 0;for(var t=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return N(n).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return e*2;case"hex":return e>>>1;case"base64":return pr(n).length;default:if(t)return N(n).length;r=(""+r).toLowerCase(),t=!0}}u.byteLength=fr;function ee(n,r,e){var t=!1;if((r===void 0||r<0)&&(r=0),r>this.length||((e===void 0||e>this.length)&&(e=this.length),e<=0)||(e>>>=0,r>>>=0,e<=r))return"";for(n||(n="utf8");;)switch(n){case"hex":return se(this,r,e);case"utf8":case"utf-8":return cr(this,r,e);case"ascii":return ce(this,r,e);case"latin1":case"binary":return he(this,r,e);case"base64":return ue(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return le(this,r,e);default:if(t)throw new TypeError("Unknown encoding: "+n);n=(n+"").toLowerCase(),t=!0}}u.prototype._isBuffer=!0;function P(n,r,e){var t=n[r];n[r]=n[e],n[e]=t}u.prototype.swap16=function(){var r=this.length;if(r%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<r;e+=2)P(this,e,e+1);return this};u.prototype.swap32=function(){var r=this.length;if(r%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<r;e+=4)P(this,e,e+3),P(this,e+1,e+2);return this};u.prototype.swap64=function(){var r=this.length;if(r%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<r;e+=8)P(this,e,e+7),P(this,e+1,e+6),P(this,e+2,e+5),P(this,e+3,e+4);return this};u.prototype.toString=function(){var r=this.length|0;return r===0?"":arguments.length===0?cr(this,0,r):ee.apply(this,arguments)};u.prototype.equals=function(r){if(!A(r))throw new TypeError("Argument must be a Buffer");return this===r?!0:u.compare(this,r)===0};u.prototype.compare=function(r,e,t,i,f){if(!A(r))throw new TypeError("Argument must be a Buffer");if(e===void 0&&(e=0),t===void 0&&(t=r?r.length:0),i===void 0&&(i=0),f===void 0&&(f=this.length),e<0||t>r.length||i<0||f>this.length)throw new RangeError("out of range index");if(i>=f&&e>=t)return 0;if(i>=f)return-1;if(e>=t)return 1;if(e>>>=0,t>>>=0,i>>>=0,f>>>=0,this===r)return 0;for(var o=f-i,a=t-e,c=Math.min(o,a),l=this.slice(i,f),s=r.slice(e,t),h=0;h<c;++h)if(l[h]!==s[h]){o=l[h],a=s[h];break}return o<a?-1:a<o?1:0};function ur(n,r,e,t,i){if(n.length===0)return-1;if(typeof e=="string"?(t=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:n.length-1),e<0&&(e=n.length+e),e>=n.length){if(i)return-1;e=n.length-1}else if(e<0)if(i)e=0;else return-1;if(typeof r=="string"&&(r=u.from(r,t)),A(r))return r.length===0?-1:er(n,r,e,t,i);if(typeof r=="number")return r=r&255,u.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(n,r,e):Uint8Array.prototype.lastIndexOf.call(n,r,e):er(n,[r],e,t,i);throw new TypeError("val must be string, number or Buffer")}function er(n,r,e,t,i){var f=1,o=n.length,a=r.length;if(t!==void 0&&(t=String(t).toLowerCase(),t==="ucs2"||t==="ucs-2"||t==="utf16le"||t==="utf-16le")){if(n.length<2||r.length<2)return-1;f=2,o/=2,a/=2,e/=2}function c(E,S){return f===1?E[S]:E.readUInt16BE(S*f)}var l;if(i){var s=-1;for(l=e;l<o;l++)if(c(n,l)===c(r,s===-1?0:l-s)){if(s===-1&&(s=l),l-s+1===a)return s*f}else s!==-1&&(l-=l-s),s=-1}else for(e+a>o&&(e=o-a),l=e;l>=0;l--){for(var h=!0,w=0;w<a;w++)if(c(n,l+w)!==c(r,w)){h=!1;break}if(h)return l}return-1}u.prototype.includes=function(r,e,t){return this.indexOf(r,e,t)!==-1};u.prototype.indexOf=function(r,e,t){return ur(this,r,e,t,!0)};u.prototype.lastIndexOf=function(r,e,t){return ur(this,r,e,t,!1)};function ne(n,r,e,t){e=Number(e)||0;var i=n.length-e;t?(t=Number(t),t>i&&(t=i)):t=i;var f=r.length;if(f%2!==0)throw new TypeError("Invalid hex string");t>f/2&&(t=f/2);for(var o=0;o<t;++o){var a=parseInt(r.substr(o*2,2),16);if(isNaN(a))return o;n[e+o]=a}return o}function te(n,r,e,t){return O(N(r,n.length-e),n,e,t)}function ar(n,r,e,t){return O(me(r),n,e,t)}function ie(n,r,e,t){return ar(n,r,e,t)}function oe(n,r,e,t){return O(pr(r),n,e,t)}function fe(n,r,e,t){return O(ge(r,n.length-e),n,e,t)}u.prototype.write=function(r,e,t,i){if(e===void 0)i="utf8",t=this.length,e=0;else if(t===void 0&&typeof e=="string")i=e,t=this.length,e=0;else if(isFinite(e))e=e|0,isFinite(t)?(t=t|0,i===void 0&&(i="utf8")):(i=t,t=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var f=this.length-e;if((t===void 0||t>f)&&(t=f),r.length>0&&(t<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return ne(this,r,e,t);case"utf8":case"utf-8":return te(this,r,e,t);case"ascii":return ar(this,r,e,t);case"latin1":case"binary":return ie(this,r,e,t);case"base64":return oe(this,r,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return fe(this,r,e,t);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}};u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function ue(n,r,e){return r===0&&e===n.length?rr(n):rr(n.slice(r,e))}function cr(n,r,e){e=Math.min(n.length,e);for(var t=[],i=r;i<e;){var f=n[i],o=null,a=f>239?4:f>223?3:f>191?2:1;if(i+a<=e){var c,l,s,h;switch(a){case 1:f<128&&(o=f);break;case 2:c=n[i+1],(c&192)===128&&(h=(f&31)<<6|c&63,h>127&&(o=h));break;case 3:c=n[i+1],l=n[i+2],(c&192)===128&&(l&192)===128&&(h=(f&15)<<12|(c&63)<<6|l&63,h>2047&&(h<55296||h>57343)&&(o=h));break;case 4:c=n[i+1],l=n[i+2],s=n[i+3],(c&192)===128&&(l&192)===128&&(s&192)===128&&(h=(f&15)<<18|(c&63)<<12|(l&63)<<6|s&63,h>65535&&h<1114112&&(o=h))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,t.push(o>>>10&1023|55296),o=56320|o&1023),t.push(o),i+=a}return ae(t)}var nr=4096;function ae(n){var r=n.length;if(r<=nr)return String.fromCharCode.apply(String,n);for(var e="",t=0;t<r;)e+=String.fromCharCode.apply(String,n.slice(t,t+=nr));return e}function ce(n,r,e){var t="";e=Math.min(n.length,e);for(var i=r;i<e;++i)t+=String.fromCharCode(n[i]&127);return t}function he(n,r,e){var t="";e=Math.min(n.length,e);for(var i=r;i<e;++i)t+=String.fromCharCode(n[i]);return t}function se(n,r,e){var t=n.length;(!r||r<0)&&(r=0),(!e||e<0||e>t)&&(e=t);for(var i="",f=r;f<e;++f)i+=Ee(n[f]);return i}function le(n,r,e){for(var t=n.slice(r,e),i="",f=0;f<t.length;f+=2)i+=String.fromCharCode(t[f]+t[f+1]*256);return i}u.prototype.slice=function(r,e){var t=this.length;r=~~r,e=e===void 0?t:~~e,r<0?(r+=t,r<0&&(r=0)):r>t&&(r=t),e<0?(e+=t,e<0&&(e=0)):e>t&&(e=t),e<r&&(e=r);var i;if(u.TYPED_ARRAY_SUPPORT)i=this.subarray(r,e),i.__proto__=u.prototype;else{var f=e-r;i=new u(f,void 0);for(var o=0;o<f;++o)i[o]=this[o+r]}return i};function p(n,r,e){if(n%1!==0||n<0)throw new RangeError("offset is not uint");if(n+r>e)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUIntLE=function(r,e,t){r=r|0,e=e|0,t||p(r,e,this.length);for(var i=this[r],f=1,o=0;++o<e&&(f*=256);)i+=this[r+o]*f;return i};u.prototype.readUIntBE=function(r,e,t){r=r|0,e=e|0,t||p(r,e,this.length);for(var i=this[r+--e],f=1;e>0&&(f*=256);)i+=this[r+--e]*f;return i};u.prototype.readUInt8=function(r,e){return e||p(r,1,this.length),this[r]};u.prototype.readUInt16LE=function(r,e){return e||p(r,2,this.length),this[r]|this[r+1]<<8};u.prototype.readUInt16BE=function(r,e){return e||p(r,2,this.length),this[r]<<8|this[r+1]};u.prototype.readUInt32LE=function(r,e){return e||p(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+this[r+3]*16777216};u.prototype.readUInt32BE=function(r,e){return e||p(r,4,this.length),this[r]*16777216+(this[r+1]<<16|this[r+2]<<8|this[r+3])};u.prototype.readIntLE=function(r,e,t){r=r|0,e=e|0,t||p(r,e,this.length);for(var i=this[r],f=1,o=0;++o<e&&(f*=256);)i+=this[r+o]*f;return f*=128,i>=f&&(i-=Math.pow(2,8*e)),i};u.prototype.readIntBE=function(r,e,t){r=r|0,e=e|0,t||p(r,e,this.length);for(var i=e,f=1,o=this[r+--i];i>0&&(f*=256);)o+=this[r+--i]*f;return f*=128,o>=f&&(o-=Math.pow(2,8*e)),o};u.prototype.readInt8=function(r,e){return e||p(r,1,this.length),this[r]&128?(255-this[r]+1)*-1:this[r]};u.prototype.readInt16LE=function(r,e){e||p(r,2,this.length);var t=this[r]|this[r+1]<<8;return t&32768?t|4294901760:t};u.prototype.readInt16BE=function(r,e){e||p(r,2,this.length);var t=this[r+1]|this[r]<<8;return t&32768?t|4294901760:t};u.prototype.readInt32LE=function(r,e){return e||p(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24};u.prototype.readInt32BE=function(r,e){return e||p(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]};u.prototype.readFloatLE=function(r,e){return e||p(r,4,this.length),G(this,r,!0,23,4)};u.prototype.readFloatBE=function(r,e){return e||p(r,4,this.length),G(this,r,!1,23,4)};u.prototype.readDoubleLE=function(r,e){return e||p(r,8,this.length),G(this,r,!0,52,8)};u.prototype.readDoubleBE=function(r,e){return e||p(r,8,this.length),G(this,r,!1,52,8)};function x(n,r,e,t,i,f){if(!A(n))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<f)throw new RangeError('"value" argument is out of bounds');if(e+t>n.length)throw new RangeError("Index out of range")}u.prototype.writeUIntLE=function(r,e,t,i){if(r=+r,e=e|0,t=t|0,!i){var f=Math.pow(2,8*t)-1;x(this,r,e,t,f,0)}var o=1,a=0;for(this[e]=r&255;++a<t&&(o*=256);)this[e+a]=r/o&255;return e+t};u.prototype.writeUIntBE=function(r,e,t,i){if(r=+r,e=e|0,t=t|0,!i){var f=Math.pow(2,8*t)-1;x(this,r,e,t,f,0)}var o=t-1,a=1;for(this[e+o]=r&255;--o>=0&&(a*=256);)this[e+o]=r/a&255;return e+t};u.prototype.writeUInt8=function(r,e,t){return r=+r,e=e|0,t||x(this,r,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(r=Math.floor(r)),this[e]=r&255,e+1};function b(n,r,e,t){r<0&&(r=65535+r+1);for(var i=0,f=Math.min(n.length-e,2);i<f;++i)n[e+i]=(r&255<<8*(t?i:1-i))>>>(t?i:1-i)*8}u.prototype.writeUInt16LE=function(r,e,t){return r=+r,e=e|0,t||x(this,r,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=r&255,this[e+1]=r>>>8):b(this,r,e,!0),e+2};u.prototype.writeUInt16BE=function(r,e,t){return r=+r,e=e|0,t||x(this,r,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=r>>>8,this[e+1]=r&255):b(this,r,e,!1),e+2};function F(n,r,e,t){r<0&&(r=4294967295+r+1);for(var i=0,f=Math.min(n.length-e,4);i<f;++i)n[e+i]=r>>>(t?i:3-i)*8&255}u.prototype.writeUInt32LE=function(r,e,t){return r=+r,e=e|0,t||x(this,r,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=r>>>24,this[e+2]=r>>>16,this[e+1]=r>>>8,this[e]=r&255):F(this,r,e,!0),e+4};u.prototype.writeUInt32BE=function(r,e,t){return r=+r,e=e|0,t||x(this,r,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=r>>>24,this[e+1]=r>>>16,this[e+2]=r>>>8,this[e+3]=r&255):F(this,r,e,!1),e+4};u.prototype.writeIntLE=function(r,e,t,i){if(r=+r,e=e|0,!i){var f=Math.pow(2,8*t-1);x(this,r,e,t,f-1,-f)}var o=0,a=1,c=0;for(this[e]=r&255;++o<t&&(a*=256);)r<0&&c===0&&this[e+o-1]!==0&&(c=1),this[e+o]=(r/a>>0)-c&255;return e+t};u.prototype.writeIntBE=function(r,e,t,i){if(r=+r,e=e|0,!i){var f=Math.pow(2,8*t-1);x(this,r,e,t,f-1,-f)}var o=t-1,a=1,c=0;for(this[e+o]=r&255;--o>=0&&(a*=256);)r<0&&c===0&&this[e+o+1]!==0&&(c=1),this[e+o]=(r/a>>0)-c&255;return e+t};u.prototype.writeInt8=function(r,e,t){return r=+r,e=e|0,t||x(this,r,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(r=Math.floor(r)),r<0&&(r=255+r+1),this[e]=r&255,e+1};u.prototype.writeInt16LE=function(r,e,t){return r=+r,e=e|0,t||x(this,r,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=r&255,this[e+1]=r>>>8):b(this,r,e,!0),e+2};u.prototype.writeInt16BE=function(r,e,t){return r=+r,e=e|0,t||x(this,r,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=r>>>8,this[e+1]=r&255):b(this,r,e,!1),e+2};u.prototype.writeInt32LE=function(r,e,t){return r=+r,e=e|0,t||x(this,r,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=r&255,this[e+1]=r>>>8,this[e+2]=r>>>16,this[e+3]=r>>>24):F(this,r,e,!0),e+4};u.prototype.writeInt32BE=function(r,e,t){return r=+r,e=e|0,t||x(this,r,e,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),u.TYPED_ARRAY_SUPPORT?(this[e]=r>>>24,this[e+1]=r>>>16,this[e+2]=r>>>8,this[e+3]=r&255):F(this,r,e,!1),e+4};function hr(n,r,e,t,i,f){if(e+t>n.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function sr(n,r,e,t,i){return i||hr(n,r,e,4,34028234663852886e22,-34028234663852886e22),xr(n,r,e,t,23,4),e+4}u.prototype.writeFloatLE=function(r,e,t){return sr(this,r,e,!0,t)};u.prototype.writeFloatBE=function(r,e,t){return sr(this,r,e,!1,t)};function lr(n,r,e,t,i){return i||hr(n,r,e,8,17976931348623157e292,-17976931348623157e292),xr(n,r,e,t,52,8),e+8}u.prototype.writeDoubleLE=function(r,e,t){return lr(this,r,e,!0,t)};u.prototype.writeDoubleBE=function(r,e,t){return lr(this,r,e,!1,t)};u.prototype.copy=function(r,e,t,i){if(t||(t=0),!i&&i!==0&&(i=this.length),e>=r.length&&(e=r.length),e||(e=0),i>0&&i<t&&(i=t),i===t||r.length===0||this.length===0)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(t<0||t>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),r.length-e<i-t&&(i=r.length-e+t);var f=i-t,o;if(this===r&&t<e&&e<i)for(o=f-1;o>=0;--o)r[o+e]=this[o+t];else if(f<1e3||!u.TYPED_ARRAY_SUPPORT)for(o=0;o<f;++o)r[o+e]=this[o+t];else Uint8Array.prototype.set.call(r,this.subarray(t,t+f),e);return f};u.prototype.fill=function(r,e,t,i){if(typeof r=="string"){if(typeof e=="string"?(i=e,e=0,t=this.length):typeof t=="string"&&(i=t,t=this.length),r.length===1){var f=r.charCodeAt(0);f<256&&(r=f)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!u.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof r=="number"&&(r=r&255);if(e<0||this.length<e||this.length<t)throw new RangeError("Out of range index");if(t<=e)return this;e=e>>>0,t=t===void 0?this.length:t>>>0,r||(r=0);var o;if(typeof r=="number")for(o=e;o<t;++o)this[o]=r;else{var a=A(r)?r:N(new u(r,i).toString()),c=a.length;for(o=0;o<t-e;++o)this[o+e]=a[o%c]}return this};var pe=/[^+\/0-9A-Za-z-_]/g;function we(n){if(n=xe(n).replace(pe,""),n.length<2)return"";for(;n.length%4!==0;)n=n+"=";return n}function xe(n){return n.trim?n.trim():n.replace(/^\s+|\s+$/g,"")}function Ee(n){return n<16?"0"+n.toString(16):n.toString(16)}function N(n,r){r=r||1/0;for(var e,t=n.length,i=null,f=[],o=0;o<t;++o){if(e=n.charCodeAt(o),e>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&f.push(239,191,189);continue}else if(o+1===t){(r-=3)>-1&&f.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&f.push(239,191,189),i=e;continue}e=(i-55296<<10|e-56320)+65536}else i&&(r-=3)>-1&&f.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;f.push(e)}else if(e<2048){if((r-=2)<0)break;f.push(e>>6|192,e&63|128)}else if(e<65536){if((r-=3)<0)break;f.push(e>>12|224,e>>6&63|128,e&63|128)}else if(e<1114112){if((r-=4)<0)break;f.push(e>>18|240,e>>12&63|128,e>>6&63|128,e&63|128)}else throw new Error("Invalid code point")}return f}function me(n){for(var r=[],e=0;e<n.length;++e)r.push(n.charCodeAt(e)&255);return r}function ge(n,r){for(var e,t,i,f=[],o=0;o<n.length&&!((r-=2)<0);++o)e=n.charCodeAt(o),t=e>>8,i=e%256,f.push(i),f.push(t);return f}function pr(n){return Xr(we(n))}function O(n,r,e,t){for(var i=0;i<t&&!(i+e>=r.length||i>=n.length);++i)r[i+e]=n[i];return i}function ye(n){return n!==n}function Ae(n){return n!=null&&(!!n._isBuffer||wr(n)||Te(n))}function wr(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function Te(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&wr(n.slice(0,0))}function G(n,r,e,t,i){var f,o,a=i*8-t-1,c=(1<<a)-1,l=c>>1,s=-7,h=e?i-1:0,w=e?-1:1,E=n[r+h];for(h+=w,f=E&(1<<-s)-1,E>>=-s,s+=a;s>0;f=f*256+n[r+h],h+=w,s-=8);for(o=f&(1<<-s)-1,f>>=-s,s+=t;s>0;o=o*256+n[r+h],h+=w,s-=8);if(f===0)f=1-l;else{if(f===c)return o?NaN:(E?-1:1)*(1/0);o=o+Math.pow(2,t),f=f-l}return(E?-1:1)*o*Math.pow(2,f-t)}function xr(n,r,e,t,i,f){var o,a,c,l=f*8-i-1,s=(1<<l)-1,h=s>>1,w=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=t?0:f-1,S=t?1:-1,yr=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(a=isNaN(r)?1:0,o=s):(o=Math.floor(Math.log(r)/Math.LN2),r*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+h>=1?r+=w/c:r+=w*Math.pow(2,1-h),r*c>=2&&(o++,c/=2),o+h>=s?(a=0,o=s):o+h>=1?(a=(r*c-1)*Math.pow(2,i),o=o+h):(a=r*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;n[e+E]=a&255,E+=S,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;n[e+E]=o&255,E+=S,o/=256,l-=8);n[e+E-S]|=yr*128}function gr(n){return n!=null&&typeof n.addEventListener=="function"&&typeof n.removeEventListener=="function"&&typeof n.dispatchEvent=="function"}function g(n,r,e){Object.defineProperty(n,r,{value:e,writable:!1,configurable:!0})}function Er(n){return typeof n=="function"||n!==null&&typeof n=="object"&&typeof n.handleEvent=="function"}function mr(n){return typeof n=="boolean"?{capture:n}:n??{}}var C=Symbol.for("CustomEventTarget.parent"),R=Symbol.for("CustomEventTarget.listeners"),v=Symbol.for("CustomEventTarget.delegates"),J=Symbol.for("CustomEventTarget.dispatchSelf"),Q=class{constructor(r=null){this[C]=r,this[R]=[],this[v]=new Set}addEventListener(r,e,t){if(!Er(e))return;let i=this[R];t=mr(t);let f;typeof e=="function"?f=e:f=a=>e.handleEvent(a);let o={type:r,listener:e,callback:f,options:t};if(t.once&&(o.callback=function(){let a=i.indexOf(o);return a!==-1&&i.splice(a,1),f.apply(this,arguments)}),!i.some(a=>o.type===a.type&&o.listener===a.listener&&!o.options.capture==!a.options.capture)){i.push(o);for(let a of this[v])a.addEventListener(r,o.callback,o.options)}}removeEventListener(r,e,t){let i=this[R];if(i==null||!Er(e))return;let f=mr(t),o=i.findIndex(c=>c.type===r&&c.listener===e&&!c.options.capture==!f.capture);if(o===-1)return;let a=i[o];i.splice(o,1);for(let c of this[v])c.removeEventListener(a.type,a.callback,a.options)}dispatchEvent(r){let e=[];for(let a=this[C];a;a=a[C])e.push(a);let t=!1,i=!1,f=r.stopPropagation;g(r,"stopPropagation",()=>(t=!0,f.call(r)));let o=r.stopImmediatePropagation;g(r,"stopImmediatePropagation",()=>(i=!0,o.call(r))),g(r,"target",this);try{g(r,"eventPhase",1);for(let a=e.length-1;a>=0;a--){let c=e[a],l=c[R];g(r,"currentTarget",c);for(let s=0;s<l.length;s++){let h=l[s];if(h.type===r.type&&h.options.capture){try{h.callback.call(c,r)}catch(w){console.error(w)}if(i)return!0}}if(t)return!0}{if(g(r,"eventPhase",2),g(r,"currentTarget",this),this[J](r),i)return!0;let a=this[R];for(let c=0;c<a.length;c++){let l=a[c];if(l.type===r.type){try{l.callback.call(this,r)}catch(s){console.error(s)}if(i)return!0}}if(t)return!0}if(r.bubbles){g(r,"eventPhase",3);for(let a=0;a<e.length;a++){let c=e[a];g(r,"currentTarget",c);let l=c[R];for(let s=0;s<l.length;s++){let h=l[s];if(h.type===r.type&&!h.options.capture){try{h.callback.call(c,r)}catch(w){console.error(w)}if(i)return!0}}if(t)return!0}}}finally{return g(r,"eventPhase",0),g(r,"currentTarget",null),!r.defaultPrevented}}[J](r){}};Q.dispatchEventOnSelf=J;function Be(n,r,e=t=>n===t){let t=r.filter(gr);for(let i=n;i&&e(i);i=i[C])for(let f=0;f<t.length;f++){let o=t[f];if(!i[v].has(o)){i[v].add(o);for(let a of i[R])o.addEventListener(a.type,a.callback,a.options)}}}function Pe(n,r,e=t=>n===t){let t=r.filter(gr);for(let i=n;i&&e(i);i=i[C])for(let f=0;f<t.length;f++){let o=t[f];if(i[v].has(o)){i[v].delete(o);for(let a of i[R])o.removeEventListener(a.type,a.callback,a.options)}}}function Se(n){let r=n[R],e=n[v];for(let t=0;t<r.length;t++){let i=r[t];for(let f of e)f.removeEventListener(i.type,i.callback,i.options)}r.length=0,e.clear()}export{Q as CustomEventTarget,Be as addEventTargetDelegates,Se as clearEventListeners,gr as isEventTarget,Pe as removeEventTargetDelegates};
/*! Bundled license information:

@esbuild-plugins/node-globals-polyfill/Buffer.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
   * @license  MIT
   *)
*/
