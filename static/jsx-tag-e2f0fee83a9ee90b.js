function vr(){throw new Error("setTimeout has not been defined")}function Ar(){throw new Error("clearTimeout has not been defined")}var X=vr,Z=Ar;typeof globalThis.setTimeout=="function"&&(X=setTimeout);typeof globalThis.clearTimeout=="function"&&(Z=clearTimeout);function kr(e){if(X===setTimeout)return setTimeout(e,0);if((X===vr||!X)&&setTimeout)return X=setTimeout,setTimeout(e,0);try{return X(e,0)}catch{try{return X.call(null,e,0)}catch{return X.call(this,e,0)}}}function cn(e){if(Z===clearTimeout)return clearTimeout(e);if((Z===Ar||!Z)&&clearTimeout)return Z=clearTimeout,clearTimeout(e);try{return Z(e)}catch{try{return Z.call(null,e)}catch{return Z.call(this,e)}}}var G=[],pe=!1,te,Ce=-1;function hn(){!pe||!te||(pe=!1,te.length?G=te.concat(G):Ce=-1,G.length&&br())}function br(){if(!pe){var e=kr(hn);pe=!0;for(var r=G.length;r;){for(te=G,G=[];++Ce<r;)te&&te[Ce].run();Ce=-1,r=G.length}te=null,pe=!1,cn(e)}}function pn(e){var r=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)r[n-1]=arguments[n];G.push(new Pr(e,r)),G.length===1&&!pe&&kr(br)}function Pr(e,r){this.fun=e,this.array=r}Pr.prototype.run=function(){this.fun.apply(null,this.array)};var dn="browser",gn="browser",yn=!0,wn={},mn=[],En="",vn={},An={},kn={};function ie(){}var bn=ie,Pn=ie,In=ie,Rn=ie,Sn=ie,Tn=ie,xn=ie;function _n(e){throw new Error("process.binding is not supported")}function Un(){return"/"}function Cn(e){throw new Error("process.chdir is not supported")}function Bn(){return 0}var he=globalThis.performance||{},Dn=he.now||he.mozNow||he.msNow||he.oNow||he.webkitNow||function(){return new Date().getTime()};function Nn(e){var r=Dn.call(he)*.001,n=Math.floor(r),t=Math.floor(r%1*1e9);return e&&(n=n-e[0],t=t-e[1],t<0&&(n--,t+=1e9)),[n,t]}var Mn=new Date;function Ln(){var e=new Date,r=e-Mn;return r/1e3}var oe={nextTick:pn,title:dn,browser:yn,env:wn,argv:mn,version:En,versions:vn,on:bn,addListener:Pn,once:In,off:Rn,removeListener:Sn,removeAllListeners:Tn,emit:xn,binding:_n,cwd:Un,chdir:Cn,umask:Bn,hrtime:Nn,platform:gn,release:An,config:kn,uptime:Ln},Er={};Object.keys(Er).forEach(e=>{let r=e.split("."),n=oe;for(let t=0;t<r.length;t++){let i=r[t];t===r.length-1?n[i]=Er[e]:n=n[i]||(n[i]={})}});var j=[],L=[],$n=typeof Uint8Array<"u"?Uint8Array:Array,Ke=!1;function Tr(){Ke=!0;for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,n=e.length;r<n;++r)j[r]=e[r],L[e.charCodeAt(r)]=r;L[45]=62,L[95]=63}function Yn(e){Ke||Tr();var r,n,t,i,o,f,l=e.length;if(l%4>0)throw new Error("Invalid string. Length must be a multiple of 4");o=e[l-2]==="="?2:e[l-1]==="="?1:0,f=new $n(l*3/4-o),t=o>0?l-4:l;var s=0;for(r=0,n=0;r<t;r+=4,n+=3)i=L[e.charCodeAt(r)]<<18|L[e.charCodeAt(r+1)]<<12|L[e.charCodeAt(r+2)]<<6|L[e.charCodeAt(r+3)],f[s++]=i>>16&255,f[s++]=i>>8&255,f[s++]=i&255;return o===2?(i=L[e.charCodeAt(r)]<<2|L[e.charCodeAt(r+1)]>>4,f[s++]=i&255):o===1&&(i=L[e.charCodeAt(r)]<<10|L[e.charCodeAt(r+1)]<<4|L[e.charCodeAt(r+2)]>>2,f[s++]=i>>8&255,f[s++]=i&255),f}function On(e){return j[e>>18&63]+j[e>>12&63]+j[e>>6&63]+j[e&63]}function jn(e,r,n){for(var t,i=[],o=r;o<n;o+=3)t=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(On(t));return i.join("")}function Ir(e){Ke||Tr();for(var r,n=e.length,t=n%3,i="",o=[],f=16383,l=0,s=n-t;l<s;l+=f)o.push(jn(e,l,l+f>s?s:l+f));return t===1?(r=e[n-1],i+=j[r>>2],i+=j[r<<4&63],i+="=="):t===2&&(r=(e[n-2]<<8)+e[n-1],i+=j[r>>10],i+=j[r>>4&63],i+=j[r<<2&63],i+="="),o.push(i),o.join("")}h.TYPED_ARRAY_SUPPORT=globalThis.TYPED_ARRAY_SUPPORT!==void 0?globalThis.TYPED_ARRAY_SUPPORT:!0;function Be(){return h.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function H(e,r){if(Be()<r)throw new RangeError("Invalid typed array length");return h.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(r),e.__proto__=h.prototype):(e===null&&(e=new h(r)),e.length=r),e}function h(e,r,n){if(!h.TYPED_ARRAY_SUPPORT&&!(this instanceof h))return new h(e,r,n);if(typeof e=="number"){if(typeof r=="string")throw new Error("If encoding is specified then the first argument must be a string");return Je(this,e)}return xr(this,e,r,n)}h.poolSize=8192;h._augment=function(e){return e.__proto__=h.prototype,e};function xr(e,r,n,t){if(typeof r=="number")throw new TypeError('"value" argument must not be a number');return typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer?Wn(e,r,n,t):typeof r=="string"?qn(e,r,n):Gn(e,r)}h.from=function(e,r,n){return xr(null,e,r,n)};h.kMaxLength=Be();h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=Uint8Array.prototype,h.__proto__=Uint8Array,typeof Symbol<"u"&&Symbol.species&&h[Symbol.species]);function _r(e){if(typeof e!="number")throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function Fn(e,r,n,t){return _r(r),r<=0?H(e,r):n!==void 0?typeof t=="string"?H(e,r).fill(n,t):H(e,r).fill(n):H(e,r)}h.alloc=function(e,r,n){return Fn(null,e,r,n)};function Je(e,r){if(_r(r),e=H(e,r<0?0:Qe(r)|0),!h.TYPED_ARRAY_SUPPORT)for(var n=0;n<r;++n)e[n]=0;return e}h.allocUnsafe=function(e){return Je(null,e)};h.allocUnsafeSlow=function(e){return Je(null,e)};function qn(e,r,n){if((typeof n!="string"||n==="")&&(n="utf8"),!h.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var t=Ur(r,n)|0;e=H(e,t);var i=e.write(r,n);return i!==t&&(e=e.slice(0,i)),e}function ze(e,r){var n=r.length<0?0:Qe(r.length)|0;e=H(e,n);for(var t=0;t<n;t+=1)e[t]=r[t]&255;return e}function Wn(e,r,n,t){if(r.byteLength,n<0||r.byteLength<n)throw new RangeError("'offset' is out of bounds");if(r.byteLength<n+(t||0))throw new RangeError("'length' is out of bounds");return n===void 0&&t===void 0?r=new Uint8Array(r):t===void 0?r=new Uint8Array(r,n):r=new Uint8Array(r,n,t),h.TYPED_ARRAY_SUPPORT?(e=r,e.__proto__=h.prototype):e=ze(e,r),e}function Gn(e,r){if(F(r)){var n=Qe(r.length)|0;return e=H(e,n),e.length===0||r.copy(e,0,0,n),e}if(r){if(typeof ArrayBuffer<"u"&&r.buffer instanceof ArrayBuffer||"length"in r)return typeof r.length!="number"||ut(r.length)?H(e,0):ze(e,r);if(r.type==="Buffer"&&Array.isArray(r.data))return ze(e,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function Qe(e){if(e>=Be())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+Be().toString(16)+" bytes");return e|0}h.isBuffer=ct;function F(e){return!!(e!=null&&e._isBuffer)}h.compare=function(r,n){if(!F(r)||!F(n))throw new TypeError("Arguments must be Buffers");if(r===n)return 0;for(var t=r.length,i=n.length,o=0,f=Math.min(t,i);o<f;++o)if(r[o]!==n[o]){t=r[o],i=n[o];break}return t<i?-1:i<t?1:0};h.isEncoding=function(r){switch(String(r).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};h.concat=function(r,n){if(!Array.isArray(r))throw new TypeError('"list" argument must be an Array of Buffers');if(r.length===0)return h.alloc(0);var t;if(n===void 0)for(n=0,t=0;t<r.length;++t)n+=r[t].length;var i=h.allocUnsafe(n),o=0;for(t=0;t<r.length;++t){var f=r[t];if(!F(f))throw new TypeError('"list" argument must be an Array of Buffers');f.copy(i,o),o+=f.length}return i};function Ur(e,r){if(F(e))return e.length;if(typeof ArrayBuffer<"u"&&typeof ArrayBuffer.isView=="function"&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;typeof e!="string"&&(e=""+e);var n=e.length;if(n===0)return 0;for(var t=!1;;)switch(r){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return De(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return n*2;case"hex":return n>>>1;case"base64":return $r(e).length;default:if(t)return De(e).length;r=(""+r).toLowerCase(),t=!0}}h.byteLength=Ur;function Hn(e,r,n){var t=!1;if((r===void 0||r<0)&&(r=0),r>this.length||((n===void 0||n>this.length)&&(n=this.length),n<=0)||(n>>>=0,r>>>=0,n<=r))return"";for(e||(e="utf8");;)switch(e){case"hex":return nt(this,r,n);case"utf8":case"utf-8":return Dr(this,r,n);case"ascii":return et(this,r,n);case"latin1":case"binary":return rt(this,r,n);case"base64":return Xn(this,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return tt(this,r,n);default:if(t)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),t=!0}}h.prototype._isBuffer=!0;function fe(e,r,n){var t=e[r];e[r]=e[n],e[n]=t}h.prototype.swap16=function(){var r=this.length;if(r%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var n=0;n<r;n+=2)fe(this,n,n+1);return this};h.prototype.swap32=function(){var r=this.length;if(r%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var n=0;n<r;n+=4)fe(this,n,n+3),fe(this,n+1,n+2);return this};h.prototype.swap64=function(){var r=this.length;if(r%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var n=0;n<r;n+=8)fe(this,n,n+7),fe(this,n+1,n+6),fe(this,n+2,n+5),fe(this,n+3,n+4);return this};h.prototype.toString=function(){var r=this.length|0;return r===0?"":arguments.length===0?Dr(this,0,r):Hn.apply(this,arguments)};h.prototype.equals=function(r){if(!F(r))throw new TypeError("Argument must be a Buffer");return this===r?!0:h.compare(this,r)===0};h.prototype.compare=function(r,n,t,i,o){if(!F(r))throw new TypeError("Argument must be a Buffer");if(n===void 0&&(n=0),t===void 0&&(t=r?r.length:0),i===void 0&&(i=0),o===void 0&&(o=this.length),n<0||t>r.length||i<0||o>this.length)throw new RangeError("out of range index");if(i>=o&&n>=t)return 0;if(i>=o)return-1;if(n>=t)return 1;if(n>>>=0,t>>>=0,i>>>=0,o>>>=0,this===r)return 0;for(var f=o-i,l=t-n,s=Math.min(f,l),u=this.slice(i,o),a=r.slice(n,t),c=0;c<s;++c)if(u[c]!==a[c]){f=u[c],l=a[c];break}return f<l?-1:l<f?1:0};function Cr(e,r,n,t,i){if(e.length===0)return-1;if(typeof n=="string"?(t=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0)if(i)n=0;else return-1;if(typeof r=="string"&&(r=h.from(r,t)),F(r))return r.length===0?-1:Rr(e,r,n,t,i);if(typeof r=="number")return r=r&255,h.TYPED_ARRAY_SUPPORT&&typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(e,r,n):Uint8Array.prototype.lastIndexOf.call(e,r,n):Rr(e,[r],n,t,i);throw new TypeError("val must be string, number or Buffer")}function Rr(e,r,n,t,i){var o=1,f=e.length,l=r.length;if(t!==void 0&&(t=String(t).toLowerCase(),t==="ucs2"||t==="ucs-2"||t==="utf16le"||t==="utf-16le")){if(e.length<2||r.length<2)return-1;o=2,f/=2,l/=2,n/=2}function s(y,w){return o===1?y[w]:y.readUInt16BE(w*o)}var u;if(i){var a=-1;for(u=n;u<f;u++)if(s(e,u)===s(r,a===-1?0:u-a)){if(a===-1&&(a=u),u-a+1===l)return a*o}else a!==-1&&(u-=u-a),a=-1}else for(n+l>f&&(n=f-l),u=n;u>=0;u--){for(var c=!0,d=0;d<l;d++)if(s(e,u+d)!==s(r,d)){c=!1;break}if(c)return u}return-1}h.prototype.includes=function(r,n,t){return this.indexOf(r,n,t)!==-1};h.prototype.indexOf=function(r,n,t){return Cr(this,r,n,t,!0)};h.prototype.lastIndexOf=function(r,n,t){return Cr(this,r,n,t,!1)};function zn(e,r,n,t){n=Number(n)||0;var i=e.length-n;t?(t=Number(t),t>i&&(t=i)):t=i;var o=r.length;if(o%2!==0)throw new TypeError("Invalid hex string");t>o/2&&(t=o/2);for(var f=0;f<t;++f){var l=parseInt(r.substr(f*2,2),16);if(isNaN(l))return f;e[n+f]=l}return f}function Kn(e,r,n,t){return Le(De(r,e.length-n),e,n,t)}function Br(e,r,n,t){return Le(st(r),e,n,t)}function Jn(e,r,n,t){return Br(e,r,n,t)}function Qn(e,r,n,t){return Le($r(r),e,n,t)}function Vn(e,r,n,t){return Le(at(r,e.length-n),e,n,t)}h.prototype.write=function(r,n,t,i){if(n===void 0)i="utf8",t=this.length,n=0;else if(t===void 0&&typeof n=="string")i=n,t=this.length,n=0;else if(isFinite(n))n=n|0,isFinite(t)?(t=t|0,i===void 0&&(i="utf8")):(i=t,t=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var o=this.length-n;if((t===void 0||t>o)&&(t=o),r.length>0&&(t<0||n<0)||n>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var f=!1;;)switch(i){case"hex":return zn(this,r,n,t);case"utf8":case"utf-8":return Kn(this,r,n,t);case"ascii":return Br(this,r,n,t);case"latin1":case"binary":return Jn(this,r,n,t);case"base64":return Qn(this,r,n,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Vn(this,r,n,t);default:if(f)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),f=!0}};h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Xn(e,r,n){return r===0&&n===e.length?Ir(e):Ir(e.slice(r,n))}function Dr(e,r,n){n=Math.min(e.length,n);for(var t=[],i=r;i<n;){var o=e[i],f=null,l=o>239?4:o>223?3:o>191?2:1;if(i+l<=n){var s,u,a,c;switch(l){case 1:o<128&&(f=o);break;case 2:s=e[i+1],(s&192)===128&&(c=(o&31)<<6|s&63,c>127&&(f=c));break;case 3:s=e[i+1],u=e[i+2],(s&192)===128&&(u&192)===128&&(c=(o&15)<<12|(s&63)<<6|u&63,c>2047&&(c<55296||c>57343)&&(f=c));break;case 4:s=e[i+1],u=e[i+2],a=e[i+3],(s&192)===128&&(u&192)===128&&(a&192)===128&&(c=(o&15)<<18|(s&63)<<12|(u&63)<<6|a&63,c>65535&&c<1114112&&(f=c))}}f===null?(f=65533,l=1):f>65535&&(f-=65536,t.push(f>>>10&1023|55296),f=56320|f&1023),t.push(f),i+=l}return Zn(t)}var Sr=4096;function Zn(e){var r=e.length;if(r<=Sr)return String.fromCharCode.apply(String,e);for(var n="",t=0;t<r;)n+=String.fromCharCode.apply(String,e.slice(t,t+=Sr));return n}function et(e,r,n){var t="";n=Math.min(e.length,n);for(var i=r;i<n;++i)t+=String.fromCharCode(e[i]&127);return t}function rt(e,r,n){var t="";n=Math.min(e.length,n);for(var i=r;i<n;++i)t+=String.fromCharCode(e[i]);return t}function nt(e,r,n){var t=e.length;(!r||r<0)&&(r=0),(!n||n<0||n>t)&&(n=t);for(var i="",o=r;o<n;++o)i+=lt(e[o]);return i}function tt(e,r,n){for(var t=e.slice(r,n),i="",o=0;o<t.length;o+=2)i+=String.fromCharCode(t[o]+t[o+1]*256);return i}h.prototype.slice=function(r,n){var t=this.length;r=~~r,n=n===void 0?t:~~n,r<0?(r+=t,r<0&&(r=0)):r>t&&(r=t),n<0?(n+=t,n<0&&(n=0)):n>t&&(n=t),n<r&&(n=r);var i;if(h.TYPED_ARRAY_SUPPORT)i=this.subarray(r,n),i.__proto__=h.prototype;else{var o=n-r;i=new h(o,void 0);for(var f=0;f<o;++f)i[f]=this[f+r]}return i};function S(e,r,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+r>n)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUIntLE=function(r,n,t){r=r|0,n=n|0,t||S(r,n,this.length);for(var i=this[r],o=1,f=0;++f<n&&(o*=256);)i+=this[r+f]*o;return i};h.prototype.readUIntBE=function(r,n,t){r=r|0,n=n|0,t||S(r,n,this.length);for(var i=this[r+--n],o=1;n>0&&(o*=256);)i+=this[r+--n]*o;return i};h.prototype.readUInt8=function(r,n){return n||S(r,1,this.length),this[r]};h.prototype.readUInt16LE=function(r,n){return n||S(r,2,this.length),this[r]|this[r+1]<<8};h.prototype.readUInt16BE=function(r,n){return n||S(r,2,this.length),this[r]<<8|this[r+1]};h.prototype.readUInt32LE=function(r,n){return n||S(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+this[r+3]*16777216};h.prototype.readUInt32BE=function(r,n){return n||S(r,4,this.length),this[r]*16777216+(this[r+1]<<16|this[r+2]<<8|this[r+3])};h.prototype.readIntLE=function(r,n,t){r=r|0,n=n|0,t||S(r,n,this.length);for(var i=this[r],o=1,f=0;++f<n&&(o*=256);)i+=this[r+f]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*n)),i};h.prototype.readIntBE=function(r,n,t){r=r|0,n=n|0,t||S(r,n,this.length);for(var i=n,o=1,f=this[r+--i];i>0&&(o*=256);)f+=this[r+--i]*o;return o*=128,f>=o&&(f-=Math.pow(2,8*n)),f};h.prototype.readInt8=function(r,n){return n||S(r,1,this.length),this[r]&128?(255-this[r]+1)*-1:this[r]};h.prototype.readInt16LE=function(r,n){n||S(r,2,this.length);var t=this[r]|this[r+1]<<8;return t&32768?t|4294901760:t};h.prototype.readInt16BE=function(r,n){n||S(r,2,this.length);var t=this[r+1]|this[r]<<8;return t&32768?t|4294901760:t};h.prototype.readInt32LE=function(r,n){return n||S(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24};h.prototype.readInt32BE=function(r,n){return n||S(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]};h.prototype.readFloatLE=function(r,n){return n||S(r,4,this.length),$e(this,r,!0,23,4)};h.prototype.readFloatBE=function(r,n){return n||S(r,4,this.length),$e(this,r,!1,23,4)};h.prototype.readDoubleLE=function(r,n){return n||S(r,8,this.length),$e(this,r,!0,52,8)};h.prototype.readDoubleBE=function(r,n){return n||S(r,8,this.length),$e(this,r,!1,52,8)};function N(e,r,n,t,i,o){if(!F(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(n+t>e.length)throw new RangeError("Index out of range")}h.prototype.writeUIntLE=function(r,n,t,i){if(r=+r,n=n|0,t=t|0,!i){var o=Math.pow(2,8*t)-1;N(this,r,n,t,o,0)}var f=1,l=0;for(this[n]=r&255;++l<t&&(f*=256);)this[n+l]=r/f&255;return n+t};h.prototype.writeUIntBE=function(r,n,t,i){if(r=+r,n=n|0,t=t|0,!i){var o=Math.pow(2,8*t)-1;N(this,r,n,t,o,0)}var f=t-1,l=1;for(this[n+f]=r&255;--f>=0&&(l*=256);)this[n+f]=r/l&255;return n+t};h.prototype.writeUInt8=function(r,n,t){return r=+r,n=n|0,t||N(this,r,n,1,255,0),h.TYPED_ARRAY_SUPPORT||(r=Math.floor(r)),this[n]=r&255,n+1};function Ne(e,r,n,t){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(e.length-n,2);i<o;++i)e[n+i]=(r&255<<8*(t?i:1-i))>>>(t?i:1-i)*8}h.prototype.writeUInt16LE=function(r,n,t){return r=+r,n=n|0,t||N(this,r,n,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[n]=r&255,this[n+1]=r>>>8):Ne(this,r,n,!0),n+2};h.prototype.writeUInt16BE=function(r,n,t){return r=+r,n=n|0,t||N(this,r,n,2,65535,0),h.TYPED_ARRAY_SUPPORT?(this[n]=r>>>8,this[n+1]=r&255):Ne(this,r,n,!1),n+2};function Me(e,r,n,t){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(e.length-n,4);i<o;++i)e[n+i]=r>>>(t?i:3-i)*8&255}h.prototype.writeUInt32LE=function(r,n,t){return r=+r,n=n|0,t||N(this,r,n,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[n+3]=r>>>24,this[n+2]=r>>>16,this[n+1]=r>>>8,this[n]=r&255):Me(this,r,n,!0),n+4};h.prototype.writeUInt32BE=function(r,n,t){return r=+r,n=n|0,t||N(this,r,n,4,4294967295,0),h.TYPED_ARRAY_SUPPORT?(this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=r&255):Me(this,r,n,!1),n+4};h.prototype.writeIntLE=function(r,n,t,i){if(r=+r,n=n|0,!i){var o=Math.pow(2,8*t-1);N(this,r,n,t,o-1,-o)}var f=0,l=1,s=0;for(this[n]=r&255;++f<t&&(l*=256);)r<0&&s===0&&this[n+f-1]!==0&&(s=1),this[n+f]=(r/l>>0)-s&255;return n+t};h.prototype.writeIntBE=function(r,n,t,i){if(r=+r,n=n|0,!i){var o=Math.pow(2,8*t-1);N(this,r,n,t,o-1,-o)}var f=t-1,l=1,s=0;for(this[n+f]=r&255;--f>=0&&(l*=256);)r<0&&s===0&&this[n+f+1]!==0&&(s=1),this[n+f]=(r/l>>0)-s&255;return n+t};h.prototype.writeInt8=function(r,n,t){return r=+r,n=n|0,t||N(this,r,n,1,127,-128),h.TYPED_ARRAY_SUPPORT||(r=Math.floor(r)),r<0&&(r=255+r+1),this[n]=r&255,n+1};h.prototype.writeInt16LE=function(r,n,t){return r=+r,n=n|0,t||N(this,r,n,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[n]=r&255,this[n+1]=r>>>8):Ne(this,r,n,!0),n+2};h.prototype.writeInt16BE=function(r,n,t){return r=+r,n=n|0,t||N(this,r,n,2,32767,-32768),h.TYPED_ARRAY_SUPPORT?(this[n]=r>>>8,this[n+1]=r&255):Ne(this,r,n,!1),n+2};h.prototype.writeInt32LE=function(r,n,t){return r=+r,n=n|0,t||N(this,r,n,4,2147483647,-2147483648),h.TYPED_ARRAY_SUPPORT?(this[n]=r&255,this[n+1]=r>>>8,this[n+2]=r>>>16,this[n+3]=r>>>24):Me(this,r,n,!0),n+4};h.prototype.writeInt32BE=function(r,n,t){return r=+r,n=n|0,t||N(this,r,n,4,2147483647,-2147483648),r<0&&(r=4294967295+r+1),h.TYPED_ARRAY_SUPPORT?(this[n]=r>>>24,this[n+1]=r>>>16,this[n+2]=r>>>8,this[n+3]=r&255):Me(this,r,n,!1),n+4};function Nr(e,r,n,t,i,o){if(n+t>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Mr(e,r,n,t,i){return i||Nr(e,r,n,4,34028234663852886e22,-34028234663852886e22),Or(e,r,n,t,23,4),n+4}h.prototype.writeFloatLE=function(r,n,t){return Mr(this,r,n,!0,t)};h.prototype.writeFloatBE=function(r,n,t){return Mr(this,r,n,!1,t)};function Lr(e,r,n,t,i){return i||Nr(e,r,n,8,17976931348623157e292,-17976931348623157e292),Or(e,r,n,t,52,8),n+8}h.prototype.writeDoubleLE=function(r,n,t){return Lr(this,r,n,!0,t)};h.prototype.writeDoubleBE=function(r,n,t){return Lr(this,r,n,!1,t)};h.prototype.copy=function(r,n,t,i){if(t||(t=0),!i&&i!==0&&(i=this.length),n>=r.length&&(n=r.length),n||(n=0),i>0&&i<t&&(i=t),i===t||r.length===0||this.length===0)return 0;if(n<0)throw new RangeError("targetStart out of bounds");if(t<0||t>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),r.length-n<i-t&&(i=r.length-n+t);var o=i-t,f;if(this===r&&t<n&&n<i)for(f=o-1;f>=0;--f)r[f+n]=this[f+t];else if(o<1e3||!h.TYPED_ARRAY_SUPPORT)for(f=0;f<o;++f)r[f+n]=this[f+t];else Uint8Array.prototype.set.call(r,this.subarray(t,t+o),n);return o};h.prototype.fill=function(r,n,t,i){if(typeof r=="string"){if(typeof n=="string"?(i=n,n=0,t=this.length):typeof t=="string"&&(i=t,t=this.length),r.length===1){var o=r.charCodeAt(0);o<256&&(r=o)}if(i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!h.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else typeof r=="number"&&(r=r&255);if(n<0||this.length<n||this.length<t)throw new RangeError("Out of range index");if(t<=n)return this;n=n>>>0,t=t===void 0?this.length:t>>>0,r||(r=0);var f;if(typeof r=="number")for(f=n;f<t;++f)this[f]=r;else{var l=F(r)?r:De(new h(r,i).toString()),s=l.length;for(f=0;f<t-n;++f)this[f+n]=l[f%s]}return this};var it=/[^+\/0-9A-Za-z-_]/g;function ot(e){if(e=ft(e).replace(it,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function ft(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function lt(e){return e<16?"0"+e.toString(16):e.toString(16)}function De(e,r){r=r||1/0;for(var n,t=e.length,i=null,o=[],f=0;f<t;++f){if(n=e.charCodeAt(f),n>55295&&n<57344){if(!i){if(n>56319){(r-=3)>-1&&o.push(239,191,189);continue}else if(f+1===t){(r-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(r-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((r-=1)<0)break;o.push(n)}else if(n<2048){if((r-=2)<0)break;o.push(n>>6|192,n&63|128)}else if(n<65536){if((r-=3)<0)break;o.push(n>>12|224,n>>6&63|128,n&63|128)}else if(n<1114112){if((r-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,n&63|128)}else throw new Error("Invalid code point")}return o}function st(e){for(var r=[],n=0;n<e.length;++n)r.push(e.charCodeAt(n)&255);return r}function at(e,r){for(var n,t,i,o=[],f=0;f<e.length&&!((r-=2)<0);++f)n=e.charCodeAt(f),t=n>>8,i=n%256,o.push(i),o.push(t);return o}function $r(e){return Yn(ot(e))}function Le(e,r,n,t){for(var i=0;i<t&&!(i+n>=r.length||i>=e.length);++i)r[i+n]=e[i];return i}function ut(e){return e!==e}function ct(e){return e!=null&&(!!e._isBuffer||Yr(e)||ht(e))}function Yr(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function ht(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&Yr(e.slice(0,0))}function $e(e,r,n,t,i){var o,f,l=i*8-t-1,s=(1<<l)-1,u=s>>1,a=-7,c=n?i-1:0,d=n?-1:1,y=e[r+c];for(c+=d,o=y&(1<<-a)-1,y>>=-a,a+=l;a>0;o=o*256+e[r+c],c+=d,a-=8);for(f=o&(1<<-a)-1,o>>=-a,a+=t;a>0;f=f*256+e[r+c],c+=d,a-=8);if(o===0)o=1-u;else{if(o===s)return f?NaN:(y?-1:1)*(1/0);f=f+Math.pow(2,t),o=o-u}return(y?-1:1)*f*Math.pow(2,o-t)}function Or(e,r,n,t,i,o){var f,l,s,u=o*8-i-1,a=(1<<u)-1,c=a>>1,d=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=t?0:o-1,w=t?1:-1,A=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(l=isNaN(r)?1:0,f=a):(f=Math.floor(Math.log(r)/Math.LN2),r*(s=Math.pow(2,-f))<1&&(f--,s*=2),f+c>=1?r+=d/s:r+=d*Math.pow(2,1-c),r*s>=2&&(f++,s/=2),f+c>=a?(l=0,f=a):f+c>=1?(l=(r*s-1)*Math.pow(2,i),f=f+c):(l=r*Math.pow(2,c-1)*Math.pow(2,i),f=0));i>=8;e[n+y]=l&255,y+=w,l/=256,i-=8);for(f=f<<i|l,u+=i;u>0;e[n+y]=f&255,y+=w,f/=256,u-=8);e[n+y-w]|=A*128}function qr(e){return e!=null&&typeof e.addEventListener=="function"&&typeof e.removeEventListener=="function"&&typeof e.dispatchEvent=="function"}function $(e,r,n){Object.defineProperty(e,r,{value:n,writable:!1,configurable:!0})}function jr(e){return typeof e=="function"||e!==null&&typeof e=="object"&&typeof e.handleEvent=="function"}function Fr(e){return typeof e=="boolean"?{capture:e}:e??{}}var ve=Symbol.for("CustomEventTarget.parent"),z=Symbol.for("CustomEventTarget.listeners"),ee=Symbol.for("CustomEventTarget.delegates"),Ve=Symbol.for("CustomEventTarget.dispatchSelf"),de=class{constructor(r=null){this[ve]=r,this[z]=[],this[ee]=new Set}addEventListener(r,n,t){if(!jr(n))return;let i=this[z];t=Fr(t);let o;typeof n=="function"?o=n:o=l=>n.handleEvent(l);let f={type:r,listener:n,callback:o,options:t};if(t.once&&(f.callback=function(){let l=i.indexOf(f);return l!==-1&&i.splice(l,1),o.apply(this,arguments)}),!i.some(l=>f.type===l.type&&f.listener===l.listener&&!f.options.capture==!l.options.capture)){i.push(f);for(let l of this[ee])l.addEventListener(r,f.callback,f.options)}}removeEventListener(r,n,t){let i=this[z];if(i==null||!jr(n))return;let o=Fr(t),f=i.findIndex(s=>s.type===r&&s.listener===n&&!s.options.capture==!o.capture);if(f===-1)return;let l=i[f];i.splice(f,1);for(let s of this[ee])s.removeEventListener(l.type,l.callback,l.options)}dispatchEvent(r){let n=[];for(let l=this[ve];l;l=l[ve])n.push(l);let t=!1,i=!1,o=r.stopPropagation;$(r,"stopPropagation",()=>(t=!0,o.call(r)));let f=r.stopImmediatePropagation;$(r,"stopImmediatePropagation",()=>(i=!0,f.call(r))),$(r,"target",this);try{$(r,"eventPhase",1);for(let l=n.length-1;l>=0;l--){let s=n[l],u=s[z];$(r,"currentTarget",s);for(let a=0;a<u.length;a++){let c=u[a];if(c.type===r.type&&c.options.capture){try{c.callback.call(s,r)}catch(d){console.error(d)}if(i)return!0}}if(t)return!0}{if($(r,"eventPhase",2),$(r,"currentTarget",this),this[Ve](r),i)return!0;let l=this[z];for(let s=0;s<l.length;s++){let u=l[s];if(u.type===r.type){try{u.callback.call(this,r)}catch(a){console.error(a)}if(i)return!0}}if(t)return!0}if(r.bubbles){$(r,"eventPhase",3);for(let l=0;l<n.length;l++){let s=n[l];$(r,"currentTarget",s);let u=s[z];for(let a=0;a<u.length;a++){let c=u[a];if(c.type===r.type&&!c.options.capture){try{c.callback.call(s,r)}catch(d){console.error(d)}if(i)return!0}}if(t)return!0}}}finally{return $(r,"eventPhase",0),$(r,"currentTarget",null),!r.defaultPrevented}}[Ve](r){}};de.dispatchEventOnSelf=Ve;function Xe(e,r,n=t=>e===t){let t=r.filter(qr);for(let i=e;i&&n(i);i=i[ve])for(let o=0;o<t.length;o++){let f=t[o];if(!i[ee].has(f)){i[ee].add(f);for(let l of i[z])f.addEventListener(l.type,l.callback,l.options)}}}function Wr(e,r,n=t=>e===t){let t=r.filter(qr);for(let i=e;i&&n(i);i=i[ve])for(let o=0;o<t.length;o++){let f=t[o];if(i[ee].has(f)){i[ee].delete(f);for(let l of i[z])f.removeEventListener(l.type,l.callback,l.options)}}}function Ze(e){let r=e[z],n=e[ee];for(let t=0;t<r.length;t++){let i=r[t];for(let o of n)o.removeEventListener(i.type,i.callback,i.options)}r.length=0,n.clear()}function rr(e){return e===void 0?[]:Array.isArray(e)?e:[e]}function Ye(e){return e.length===0?void 0:e.length===1?e[0]:e}function Gr(e){return e==null?[]:Array.isArray(e)?e:typeof e=="string"||typeof e[Symbol.iterator]!="function"?[e]:[...e]}function Hr(e){return e!=null&&typeof e.next=="function"}function R(e){return e!=null&&typeof e.then=="function"}function pt(e){let r=new Set,n={deferreds:r,settled:!1};return Promise.resolve(e).then(t=>{for(let{resolve:i}of r)i(t);r.clear(),n.settled=!0},t=>{for(let{reject:i}of r)i(t);r.clear(),n.settled=!0}),n}var er=new WeakMap;function Ae(e){let r;return new Promise((t,i)=>{r={resolve:t,reject:i};for(let o of e){if(!R(o)){Promise.resolve(o).then(t,i);continue}let f=er.get(o);f===void 0?(f=pt(o),f.deferreds.add(r),er.set(o,f)):f.settled?Promise.resolve(o).then(t,i):f.deferreds.add(r)}}).finally(()=>{for(let t of e)if(R(t)){let i=er.get(t);i&&i.deferreds.delete(r)}})}var ge=()=>{};function x(e){return typeof e=="function"?e.name||"Anonymous":typeof e=="string"?e:e.description||"Anonymous"}var J="",q=Symbol.for("crank.Portal"),lr=Symbol.for("crank.Copy"),re=Symbol.for("crank.Text"),je=Symbol.for("crank.Raw"),Zr=Symbol.for("crank.Element"),Ie=class{constructor(r,n){this.tag=r,this.props=n}};Ie.prototype.$$typeof=Zr;function en(e){return e!=null&&e.$$typeof===Zr}var zr=["crank-","c-","$"],Kr=["key","ref","static","copy"];function _e(e,r,...n){r==null&&(r={}),"static"in r&&(console.error("The `static` prop is deprecated. Use `copy` instead."),r.copy=r.static,delete r.static);for(let t=0;t<zr.length;t++){let i=zr[t];for(let o=0;o<Kr.length;o++){let f=Kr[o],l=i+f;if(l in r){let s=f==="static"?"copy":f;console.error(`The \`${l}\` prop is deprecated. Use \`${s}\` instead.`),r[s]=r[l],delete r[l]}}}return n.length>1?r.children=n:n.length===1&&(r.children=n[0]),new Ie(e,r)}function dt(e){if(!en(e))throw new TypeError(`Cannot clone non-element: ${String(e)}`);return new Ie(e.tag,{...e.props})}function sr(e){if(!(typeof e=="boolean"||e==null)){{if(typeof e=="string"||en(e))return e;if(typeof e[Symbol.iterator]=="function")return _e(J,null,e)}return e.toString()}}var O=1,B=2,ye=4,Re=8,I=16,be=32,Y=64,Jr=128,U=256,T=512,ar=1024,se=2048,ae=4096,Se=8192,K=16384,M=32768,we=65536,ke=1<<17;function g(e,r){return!!(e.f&r)}function p(e,r,n=!0){n?e.f|=r:e.f&=~r}var Q=class{constructor(r){this.f=0,this.el=r,this.ctx=void 0,this.children=void 0,this.fallback=void 0,this.value=void 0,this.oldProps=void 0,this.pendingDiff=void 0,this.onNextDiff=void 0,this.graveyard=void 0,this.lingerers=void 0}};function rn(e){let r=new Q(e.el);return r.f=e.f,r.ctx=e.ctx,r.children=e.children,r.fallback=e.fallback,r.value=e.value,r.scope=e.scope,r.oldProps=e.oldProps,r.pendingDiff=e.pendingDiff,r.onNextDiff=e.onNextDiff,r.graveyard=e.graveyard,r.lingerers=e.lingerers,r}function P(e,r=!1,n){return g(e,Y)&&r?e.fallback?P(e.fallback,r,n):void 0:e.fallback&&!g(e,O)?e.fallback?P(e.fallback,r,n):e.fallback:e.el.tag===q?void 0:e.el.tag===J||typeof e.el.tag=="function"?(n!=null&&e.ctx&&(e.ctx.index=n),Ye(me(e,n))):e.value}function me(e,r){let n=[],t=e.lingerers,i=e.children,o=Array.isArray(i),f=i===void 0?0:o?i.length:1,l=r;for(let s=0;s<f;s++){if(t!=null&&t[s]!=null){let a=t[s];for(let c of a){let d=P(c,!0,l);if(Array.isArray(d)){for(let y=0;y<d.length;y++)n.push(d[y]);l!=null&&(l+=d.length)}else d&&(n.push(d),l!=null&&l++)}}let u=o?i[s]:i;if(u){let a=P(u,!0,l);if(Array.isArray(a)){for(let c=0;c<a.length;c++)n.push(a[c]);l!=null&&(l+=a.length)}else a&&(n.push(a),l!=null&&l++)}}if(t!=null&&t.length>f)for(let s=f;s<t.length;s++){let u=t[s];if(u!=null)for(let a of u){let c=P(a,!0,l);if(Array.isArray(c)){for(let d=0;d<c.length;d++)n.push(c[d]);l!=null&&(l+=c.length)}else c&&(n.push(c),l!=null&&l++)}}return n}function ur(e){let r,n;return{key:r,ref:r,copy:r,hydrate:r,children:r,...n}=e,n}function gt(e,r,n,t,i,o,f){let l=sr(f),s=o.children,u,a;if(typeof l=="object"){let c=!1,d=typeof s=="object"?s.el.props.key:void 0,y=l.props.key;if(d!==y&&(typeof s=="object"&&(u=u||[]).push(s),s=void 0),l.tag===lr)c=!0;else if(typeof s=="object"&&s.el===l&&g(s,B))c=!0;else{if(s&&s.el.tag===l.tag)s.el=l,l.props.copy&&typeof l.props.copy!="string"&&(c=!0);else if(s){let w=!1;for(let A=s,E=s.fallback;E;A=E,E=E.fallback)if(E.el.tag===l.tag){let m=rn(E);p(m,ar),A.fallback=m;let k=s;s=E,s.el=l,s.fallback=k,p(s,O,!1),w=!0;break}if(!w){let A=s;s=new Q(l),s.fallback=A}}else s=new Q(l);c&&g(s,B)||l.tag===je||l.tag===re||(l.tag===J?a=Ge(e,r,n,t,i,s,s.el.props.children):typeof l.tag=="function"?a=pr(e,r,n,t,i,s):a=nn(e,r,t,i,s))}typeof s=="object"&&(c?(p(s,ye),a=cr(s)):p(s,ye,!1))}else typeof l=="string"?typeof s=="object"&&s.el.tag===re?s.el.props.value=l:(typeof s=="object"&&(u=u||[]).push(s),s=new Q(_e(re,{value:l}))):(typeof s=="object"&&(u=u||[]).push(s),s=void 0);if(o.children=s,R(a)){let c=a.finally(()=>{if(p(o,O),u)if(o.graveyard)for(let w=0;w<u.length;w++)o.graveyard.push(u[w]);else o.graveyard=u}),d,y=o.pendingDiff=Ae([c,new Promise(w=>d=w)]);return o.onNextDiff&&o.onNextDiff(y),o.onNextDiff=d,y}else{if(p(o,O),u)if(o.graveyard)for(let c=0;c<u.length;c++)o.graveyard.push(u[c]);else o.graveyard=u;o.onNextDiff&&(o.onNextDiff(a),o.onNextDiff=void 0),o.pendingDiff=void 0}}function Ge(e,r,n,t,i,o,f){if(!Array.isArray(f)&&(typeof f!="object"||f===null||typeof f[Symbol.iterator]!="function")&&!Array.isArray(o.children))return gt(e,r,n,t,i,o,f);let l=rr(o.children),s=[],u=Gr(f),a=[],c,d,y=!1,w=0,A=l.length,E;for(let m=0,k=u.length;m<k;m++){let v=w>=A?void 0:l[w],b=sr(u[m]);{let W=typeof v=="object"?v.el.props.key:void 0,D=typeof b=="object"?b.props.key:void 0;if(D!==void 0&&d&&d.has(D)&&(console.error(`Duplicate key found in <${x(o.el.tag)}>`,D),b=dt(b),D=b.props.key=void 0),W===D)c!==void 0&&D!==void 0&&c.delete(D),w++;else if(c=c||yt(l,w),D===void 0){for(;v!==void 0&&W!==void 0;)w++,v=l[w],W=typeof v=="object"?v.el.props.key:void 0;w++}else v=c.get(D),v!==void 0&&c.delete(D),(d=d||new Set).add(D)}let ce;if(typeof b=="object"){let W=!1;if(b.tag===lr)W=!0;else if(typeof v=="object"&&v.el===b&&g(v,B))W=!0;else{if(v&&v.el.tag===b.tag)v.el=b,b.props.copy&&typeof b.props.copy!="string"&&(W=!0);else if(v){let D=!1;for(let Ue=v,ne=v.fallback;ne;Ue=ne,ne=ne.fallback)if(ne.el.tag===b.tag){let mr=rn(ne);p(mr,ar),Ue.fallback=mr;let un=v;v=ne,v.el=b,v.fallback=un,p(v,O,!1),D=!0;break}if(!D){let Ue=v;v=new Q(b),v.fallback=Ue}}else v=new Q(b);W&&g(v,B)||b.tag===je||b.tag===re||(b.tag===J?ce=Ge(e,r,n,t,i,v,v.el.props.children):typeof b.tag=="function"?ce=pr(e,r,n,t,i,v):ce=nn(e,r,t,i,v))}typeof v=="object"&&(W?(p(v,ye),ce=cr(v)):p(v,ye,!1)),R(ce)&&(y=!0)}else typeof b=="string"?typeof v=="object"&&v.el.tag===re?v.el.props.value=b:(typeof v=="object"&&(E=E||[]).push(v),v=new Q(_e(re,{value:b}))):(typeof v=="object"&&(E=E||[]).push(v),v=void 0);a[m]=ce,s[m]=v}for(;w<A;w++){let m=l[w];typeof m=="object"&&(typeof m.el.props.key>"u"||!d||!d.has(m.el.props.key))&&(E=E||[]).push(m)}if(c!==void 0&&c.size>0){E=E||[];for(let m of c.values())E.push(m)}if(o.children=Ye(s),y){let m=Promise.all(a).then(()=>{}).finally(()=>{if(p(o,O),E)if(o.graveyard)for(let b=0;b<E.length;b++)o.graveyard.push(E[b]);else o.graveyard=E}),k,v=o.pendingDiff=Ae([m,new Promise(b=>k=b)]);return o.onNextDiff&&o.onNextDiff(v),o.onNextDiff=k,v}else{if(p(o,O),E)if(o.graveyard)for(let m=0;m<E.length;m++)o.graveyard.push(E[m]);else o.graveyard=E;o.onNextDiff&&(o.onNextDiff(a),o.onNextDiff=void 0),o.pendingDiff=void 0}}function cr(e){if(e.ctx&&e.ctx.inflight)return e.ctx.inflight[1];if(e.pendingDiff)return e.pendingDiff}function yt(e,r){let n=new Map;for(let t=r;t<e.length;t++){let i=e[t];typeof i=="object"&&typeof i.el.props.key<"u"&&n.set(i.el.props.key,i)}return n}function nn(e,r,n,t,i){let o=i.el,f=o.tag;return o.tag===q&&(r=i.value=o.props.root),g(i,B)?t=i.scope:t=i.scope=e.scope({tag:f,tagName:x(f),props:o.props,scope:t,root:r}),Ge(e,r,i,n,t,i,i.el.props.children)}function wt(e,r,n,t,i,o,f,l,s){if(g(n,ye)&&g(n,B))return P(n);let u=n.el,a=u.tag;(typeof a=="function"||a===J||a===q||a===je||a===re)&&(typeof u.props.copy=="string"&&console.error(`String copy prop ignored for <${x(a)}>. Use booleans instead.`),typeof u.props.hydrate=="string"&&console.error(`String hydrate prop ignored for <${x(a)}>. Use booleans instead.`));let c,d;return s&&u.props.hydrate!=null&&!u.props.hydrate&&typeof u.props.hydrate!="string"&&(d=s,s=void 0),typeof a=="function"?(n.ctx.index=f,c=ue(n.ctx,l,s)):(a===J?c=hr(e,r,t,i,o,n,f,l,s):a===re?c=mt(e,n,u,i,s,o):a===je?c=Et(e,r,n,i,s,o):c=vt(e,n,t,o,l,s),n.fallback&&(V(e,r,t,o,n.fallback,!1),n.fallback=void 0)),d&&d.splice(0,c==null?0:Array.isArray(c)?c.length:1),g(n,B)||(p(n,B),typeof a!="function"&&a!==J&&a!==q&&typeof u.props.ref=="function"&&u.props.ref(e.read(c))),c}function hr(e,r,n,t,i,o,f,l,s){let u=[],a=o.children,c=Array.isArray(a),d=a===void 0?0:c?a.length:1;for(let y=0;y<d;y++){let w=c?a[y]:a,A,E=!1;for(;w&&(!g(w,O)&&w.fallback||g(w,Y));){if(g(w,Y)&&w.ctx.schedule&&((A=A||[]).push(w.ctx.schedule.promise),E=!0),!g(w,O)&&g(w,B))for(let m of me(w))e.remove({node:m,parentNode:r.value,isNested:!1,root:i});if(w=w.fallback,A&&E&&w){if(g(w,O))A=void 0;else{let m=cr(w);A.push(m)}g(w,Jr)?E=!0:(p(w,Jr,!0),E=!1)}}if(A&&A.length>1&&l.push(Ae(A)),w){let m=wt(e,r,w,n,t,i,f,l,s);if(Array.isArray(m)){for(let k=0;k<m.length;k++)u.push(m[k]);f+=m.length}else m&&(u.push(m),f++)}}if(o.graveyard){for(let y=0;y<o.graveyard.length;y++){let w=o.graveyard[y];V(e,r,n,i,w,!1)}o.graveyard=void 0}return o.lingerers&&(u=me(o)),u}function mt(e,r,n,t,i,o){let f=e.text({value:n.props.value,scope:t,oldNode:r.value,hydrationNodes:i,root:o});return r.value=f,f}function Et(e,r,n,t,i,o){if(!n.oldProps||n.oldProps.value!==n.el.props.value){let f=rr(n.value);for(let l=0;l<f.length;l++){let s=f[l];e.remove({node:s,parentNode:r.value,isNested:!1,root:o})}n.value=e.raw({value:n.el.props.value,scope:t,hydrationNodes:i,root:o})}return n.oldProps=ur(n.el.props),n.value}function vt(e,r,n,t,i,o){if(g(r,ye)&&g(r,B))return P(r);let f=r.el.tag,l=ur(r.el.props),s=r.oldProps,u=r.value,a,c=!1;if(s){for(let E in l)l[E]===lr&&(l[E]=s[E],(a=a||new Set).add(E));if(typeof r.el.props.copy=="string"){let E=new Fe("copy",r.el.props.copy);if(E.include)for(let m of E.props)m in s&&(l[m]=s[m],(a=a||new Set).add(m));else for(let m in s)E.props.has(m)||(l[m]=s[m],(a=a||new Set).add(m));c=E.includes("children")}}let d=r.scope,y,w,A;if(!g(r,B))if(f===q){if(r.el.props.hydrate&&typeof r.el.props.hydrate!="string"&&(y=e.adopt({tag:f,tagName:x(f),node:u,props:l,scope:d,root:t}),y))for(let E=0;E<y.length;E++)e.remove({node:y[E],parentNode:u,isNested:!1,root:t})}else{if(!u&&o){let E=o.shift();if(typeof r.el.props.hydrate=="string")if(A=new Fe("hydration",r.el.props.hydrate),A.include){w=new Set(Object.keys(l));for(let m of A.props)w.delete(m)}else w=A.props;if(y=e.adopt({tag:f,tagName:x(f),node:E,props:l,scope:d,root:t}),y){u=E;for(let m=0;m<y.length;m++)e.remove({node:y[m],parentNode:u,isNested:!1,root:t})}}u||(u=e.create({tag:f,tagName:x(f),props:l,scope:d,root:t})),r.value=u}if(f!==q&&e.patch({tag:f,tagName:x(f),node:u,props:l,oldProps:s,scope:d,root:t,copyProps:a,isHydrating:!!y,quietProps:w}),!c){let E=hr(e,r,n,d,f===q?u:t,r,0,i,A&&!A.includes("children")?void 0:y);e.arrange({tag:f,tagName:x(f),node:u,props:l,children:E,oldProps:s,scope:d,root:t})}if(r.oldProps=l,f===q){on(e,r.value);return}return u}var Fe=class{constructor(r,n){this.include=!0,this.props=new Set;let t=!0,i=!0,o=n.split(/[,\s]+/);for(let f=0;f<o.length;f++){let l=o[f].trim();if(l)l.startsWith("!")?(t=!1,this.props.add(l.slice(1))):(i=!1,this.props.add(l));else continue}!i&&!t?(console.error(`Invalid ${r} prop "${n}".
Use prop or !prop but not both.`),this.include=!0,this.props.clear()):this.include=t}includes(r){return this.include?this.props.has(r):!this.props.has(r)}};function At(e,r){for(let n=r;n!==void 0;n=n.parent)if(n===e)return!0;return!1}var tn={};function on(e,r,n){r!=null&&e.finalize(r),(typeof r!="object"||r===null)&&(r=tn);let t=Pe.get(r);if(t){let i=new Map;for(let[o,f]of t)(g(o.ret,Y)||n&&!At(n,o))&&(t.delete(o),i.set(o,f));i.size?Pe.set(r,i):Pe.delete(r);for(let[o,f]of t){let l=e.read(P(o.ret));for(let s of f)s(l)}}}function V(e,r,n,t,i,o){if(i.fallback&&(V(e,r,n,t,i.fallback,o),i.fallback=void 0),!g(i,ar)){if(i.lingerers){for(let f=0;f<i.lingerers.length;f++){let l=i.lingerers[f];if(l)for(let s of l)V(e,r,n,t,s,o)}i.lingerers=void 0}typeof i.el.tag=="function"?bt(i.ctx,o):i.el.tag===J?Oe(e,r,n,t,i,o):i.el.tag===q?(Oe(e,i,n,i.value,i,!1),i.value!=null&&e.finalize(i.value)):(Oe(e,i,n,t,i,!0),g(i,B)&&(n&&Wr(n.ctx,[i.value],f=>f[_].host===r),e.remove({node:i.value,parentNode:r.value,isNested:o,root:t})))}}function Oe(e,r,n,t,i,o){if(i.graveyard){for(let l=0;l<i.graveyard.length;l++){let s=i.graveyard[l];V(e,r,n,t,s,o)}i.graveyard=void 0}let f=i.children;if(Array.isArray(f))for(let l=0;l<f.length;l++){let s=f[l];typeof s=="object"&&V(e,r,n,t,s,o)}else f!==void 0&&V(e,r,n,t,f,o)}var nr=new WeakMap,qe=new WeakMap,We=new WeakMap,Pe=new WeakMap,ir=class{constructor(r,n,t,i,o,f){this.adapter=r,this.root=n,this.host=t,this.parent=i,this.ctx=new or(this),this.scope=o,this.ret=f,this.iterator=void 0,this.inflight=void 0,this.enqueued=void 0,this.onPropsProvided=void 0,this.onPropsRequested=void 0,this.pull=void 0,this.index=0,this.schedule=void 0}},_=Symbol.for("crank.ContextState"),or=class extends de{constructor(r){super(r.parent?r.parent.ctx:null),this[_]=r}get props(){return this[_].ret.el.props}get value(){return console.warn("Context.value is deprecated."),this[_].adapter.read(P(this[_].ret))}get isExecuting(){return g(this[_].ret,I)}get isUnmounted(){return g(this[_].ret,U)}*[Symbol.iterator](){let r=this[_];p(r.ret,Se);try{for(;!g(r.ret,U)&&!g(r.ret,T);){if(g(r.ret,M))throw new Error(`<${x(r.ret.el.tag)}> context iterated twice without a yield`);p(r.ret,M),yield r.ret.el.props}}finally{p(r.ret,Se,!1)}}async*[Symbol.asyncIterator](){let r=this[_];p(r.ret,K);try{for(;!g(r.ret,U)&&!g(r.ret,T);){if(g(r.ret,M))throw new Error(`<${x(r.ret.el.tag)}> context iterated twice without a yield`);if(p(r.ret,M),g(r.ret,we))p(r.ret,we,!1),yield r.ret.el.props;else{let n=await new Promise(t=>r.onPropsProvided=t);if(g(r.ret,U)||g(r.ret,T))break;yield n}r.onPropsRequested&&(r.onPropsRequested(),r.onPropsRequested=void 0)}}finally{p(r.ret,K,!1),r.onPropsRequested&&(r.onPropsRequested(),r.onPropsRequested=void 0)}}refresh(r){let n=this[_];if(g(n.ret,U))return console.error(`Component <${x(n.ret.el.tag)}> is unmounted. Check the isUnmounted property if necessary.`),n.adapter.read(P(n.ret));if(g(n.ret,I))return console.error(`Component <${x(n.ret.el.tag)}> is already executing Check the isExecuting property if necessary.`),n.adapter.read(P(n.ret));if(r){let o=r();if(R(o))return Promise.resolve(o).then(()=>g(n.ret,U)?n.adapter.read(P(n.ret)):this.refresh())}g(n.ret,Y)&&p(n.ret,ke);let t,i=[];try{if(p(n.ret,be),t=fn(n),R(t))return t.then(()=>n.adapter.read(ue(n,i))).then(f=>i.length?Promise.all(i).then(()=>n.adapter.read(P(n.ret))):f).catch(f=>{let l=xe(n,f,i);return l?l.then(()=>i.length?Promise.all(i).then(()=>n.adapter.read(P(n.ret))):n.adapter.read(P(n.ret))):i.length?Promise.all(i).then(()=>n.adapter.read(P(n.ret))):n.adapter.read(P(n.ret))}).finally(()=>p(n.ret,be,!1));let o=n.adapter.read(ue(n,i));return i.length?Promise.all(i).then(()=>n.adapter.read(P(n.ret))):o}catch(o){let f=xe(n,o,i);return f?f.then(()=>{if(i.length)return Promise.all(i).then(()=>n.adapter.read(P(n.ret)))}).then(()=>n.adapter.read(P(n.ret))):i.length?Promise.all(i).then(()=>n.adapter.read(P(n.ret))):n.adapter.read(P(n.ret))}finally{R(t)||p(n.ret,be,!1)}}schedule(r){if(!r)return new Promise(i=>this.schedule(i));let n=this[_],t=qe.get(n);t||(t=new Set,qe.set(n,t)),t.add(r)}after(r){if(!r)return new Promise(f=>this.after(f));let n=this[_],t=n.root||tn,i=Pe.get(t);i||(i=new Map,Pe.set(t,i));let o=i.get(n);o||(o=new Set,i.set(n,o)),o.add(r)}flush(r){console.error("Context.flush() method has been renamed to after()"),this.after(r)}cleanup(r){if(!r)return new Promise(i=>this.cleanup(i));let n=this[_];if(g(n.ret,U)){let i=n.adapter.read(P(n.ret));r(i);return}let t=We.get(n);t||(t=new Set,We.set(n,t)),t.add(r)}consume(r){for(let n=this[_].parent;n!==void 0;n=n.parent){let t=nr.get(n);if(t&&t.has(r))return t.get(r)}}provide(r,n){let t=this[_],i=nr.get(t);i||(i=new Map,nr.set(t,i)),i.set(r,n)}[de.dispatchEventOnSelf](r){let n=this[_],t=n.ret.el.props["on"+r.type];if(typeof t=="function")t(r);else for(let i in n.ret.el.props)i.toLowerCase()==="on"+r.type.toLowerCase()&&(t=n.ret.el.props[i],typeof t=="function"&&t(r))}};function pr(e,r,n,t,i,o){let f;if(o.ctx){if(f=o.ctx,g(f.ret,I)){console.error(`Component <${x(f.ret.el.tag)}> is already executing`);return}else if(f.schedule)return f.schedule.promise.then(()=>pr(e,r,n,t,i,o))}else f=o.ctx=new ir(e,r,n,t,i,o);return p(f.ret,Re),fn(f)}function le(e,r,n){if(g(e.ret,U)||g(e.ret,T))return;r===void 0&&console.error(`Component <${x(e.ret.el.tag)}> has ${n?"yielded":"returned"} undefined. If this was intentional, ${n?"yield":"return"} null instead.`);let t;try{p(e.ret,I),t=Ge(e.adapter,e.root,e.host,e,e.scope,e.ret,sr(r)),t&&(t=t.catch(i=>fr(e,i)))}catch(i){t=fr(e,i)}finally{p(e.ret,I,!1)}return t}function fn(e){if(e.inflight){if(!e.enqueued){let r;e.enqueued=[new Promise(n=>r=n).finally(()=>Qr(e)),e.inflight[0].finally(()=>{let[n,t]=Vr(e);return r(n),t})]}}else{let[r,n]=Vr(e);return r&&(e.inflight=[r.finally(()=>Qr(e)),n]),n}return e.enqueued[1]}function Qr(e){e.inflight=e.enqueued,e.enqueued=void 0}function Vr(e){if(g(e.ret,U))return[void 0,void 0];let r=e.ret,n=!e.iterator;if(n){p(e.ret,I),Ze(e.ctx);let i;try{i=r.el.tag.call(e.ctx,r.el.props,e.ctx)}catch(o){throw p(e.ret,T),o}finally{p(e.ret,I,!1)}if(Hr(i))e.iterator=i;else if(R(i)){let o=i instanceof Promise?i:Promise.resolve(i);return[o.catch(ge),o.then(f=>le(e,f,!1),f=>{throw p(e.ret,T),f})]}else return[void 0,le(e,i,!1)]}let t;if(n){try{p(e.ret,I),t=e.iterator.next()}catch(i){throw p(e.ret,T),i}finally{p(e.ret,I,!1)}R(t)?p(e.ret,ae):p(e.ret,se)}if(g(e.ret,se)){if(!n)try{p(e.ret,I);let f=e.adapter.read(P(e.ret));t=e.iterator.next(f)}catch(f){throw p(e.ret,T),f}finally{p(e.ret,I,!1)}if(R(t))throw new Error("Mixed generator component");g(e.ret,Se)&&!g(e.ret,M)&&!g(e.ret,U)&&!g(e.ret,ke)&&console.error(`Component <${x(e.ret.el.tag)}> yielded/returned more than once in for...of loop`),p(e.ret,M,!1),p(e.ret,ke,!1),t.done&&(p(e.ret,se,!1),e.iterator=void 0);let i=le(e,t.value,!t.done);return[R(i)?i.catch(ge):void 0,i]}else{if(g(e.ret,K))return Xr(e,t),[Te(e),e.pull&&e.pull.diff];{if(Te(e),!n)try{p(e.ret,I);let o=e.adapter.read(P(e.ret));t=e.iterator.next(o)}catch(o){throw p(e.ret,T),o}finally{p(e.ret,I,!1)}if(!R(t))throw new Error("Mixed generator component");let i=t.then(o=>(g(e.ret,K)?Xr(e,o):g(e.ret,Se)&&!g(e.ret,M)&&!g(e.ret,U)&&!g(e.ret,ke)&&console.error(`Component <${x(e.ret.el.tag)}> yielded/returned more than once in for...of loop`),p(e.ret,M,!1),p(e.ret,ke,!1),o.done&&(p(e.ret,ae,!1),e.iterator=void 0),le(e,o.value,!o.done)),o=>{throw p(e.ret,T),o});return[i.catch(ge),i]}}}function Te(e){if(e.onPropsProvided)e.onPropsProvided(e.ret.el.props),e.onPropsProvided=void 0,p(e.ret,we,!1);else if(p(e.ret,we),g(e.ret,K))return new Promise(r=>e.onPropsRequested=r);return e.pull&&e.pull.iterationP&&e.pull.iterationP.then(ge,ge)}async function Xr(e,r){if(!r||e.pull)return;e.pull={iterationP:void 0,diff:void 0,onChildError:void 0};let n=!1;try{let t;for(;!n;){R(r)&&(e.pull.iterationP=r);let i;e.pull.diff=new Promise(s=>i=s).then(()=>{g(e.ret,Re)||g(e.ret,be)||ue(e,[])},s=>{if(!(g(e.ret,Re)||g(e.ret,be))||!g(e.ret,M))return xe(e,s,[]);throw s});let o;try{o=await r}catch(s){n=!0,p(e.ret,T),p(e.ret,M,!1),i(Promise.reject(s));break}let f;{let s=!0,u=new Promise((a,c)=>{e.ctx.schedule(a),e.pull.onChildError=d=>{if(c(d),s)return t=d,Te(e),e.pull.diff}});u.catch(ge),f=Object.create(u),f.then=function(a,c){return s=!1,u.then(a,c)},f.catch=function(a){return s=!1,u.catch(a)}}if(t!=null)try{if(p(e.ret,I),typeof e.iterator.throw!="function")throw t;o=await e.iterator.throw(t)}catch(s){n=!0,p(e.ret,T),p(e.ret,M,!1),i(Promise.reject(s));break}finally{t=void 0,p(e.ret,I,!1)}g(e.ret,K)||p(e.ret,we,!1),n=!!o.done;let l;try{R(r)?!g(e.ret,M)&&g(e.ret,we)&&g(e.ret,K)?l=void 0:l=le(e,o.value,!o.done):l=void 0}catch(s){i(Promise.reject(s))}finally{i(l),p(e.ret,M,!1)}if(g(e.ret,U)){for(;(!o||!o.done)&&e.iterator&&g(e.ret,K);)try{p(e.ret,I),o=await e.iterator.next(f)}catch(s){throw p(e.ret,T),s}finally{p(e.ret,I,!1)}if((!o||!o.done)&&e.iterator&&typeof e.iterator.return=="function")try{p(e.ret,I),await e.iterator.return()}catch(s){throw p(e.ret,T),s}finally{p(e.ret,I,!1)}break}else if(g(e.ret,K)){if(!o.done)try{p(e.ret,I),r=e.iterator.next(f)}finally{p(e.ret,I,!1)}}else break}}finally{n&&(p(e.ret,ae,!1),e.iterator=void 0),e.pull=void 0}}function ue(e,r,n){if(e.schedule)return e.schedule.promise.then(()=>{ue(e,[]),tr(e)}),P(e.ret);let t=hr(e.adapter,e.host,e,e.scope,e.root,e.ret,e.index,r,n);if(g(e.ret,U))return;Xe(e.ctx,t);let i=g(e.ret,Y),o,f=qe.get(e);if(f){qe.delete(e),p(e.ret,Y);let l=e.adapter.read(Ye(t));for(let s of f){let u=s(l);R(u)&&(o=o||[]).push(u)}if(o&&!g(e.ret,B)){let s=Promise.all(o).then(()=>{p(e.ret,Y,i),tr(e),e.ret.fallback&&V(e.adapter,e.host,e.parent,e.root,e.ret.fallback,!1),e.ret.fallback=void 0}),u,a=Ae([s,new Promise(c=>u=c)]).finally(()=>{e.schedule=void 0});e.schedule={promise:a,onAbort:u},r.push(a)}else p(e.ret,Y,i)}else p(e.ret,Y,i);return g(e.ret,Y)||(g(e.ret,Re)||tr(e),e.ret.fallback&&V(e.adapter,e.host,e.parent,e.root,e.ret.fallback,!1),e.ret.fallback=void 0,p(e.ret,Re,!1)),p(e.ret,B),P(e.ret,!0)}function kt(e,r){let n=[r];for(;n.length>0;){let t=n.pop();if(t===e)return!0;let i=t!==r&&(typeof t.el.tag=="string"&&t.el.tag!==J||t.el.tag===q);if(t.children&&!i)if(Array.isArray(t.children))for(let o of t.children)o&&n.push(o);else n.push(t.children);t.fallback&&!g(t,O)&&n.push(t.fallback)}return!1}function tr(e){let r=me(e.ret,e.index);Xe(e.ctx,r,f=>f[_].host===e.host);let n=e.host,t=e.ret;if(!kt(t,n)||!g(n,B))return;let i=ur(n.el.props),o=me(n,0);e.adapter.arrange({tag:n.el.tag,tagName:x(n.el.tag),node:n.value,props:i,oldProps:i,children:o,scope:n.scope,root:e.root}),on(e.adapter,e.root,e)}async function bt(e,r){if(g(e.ret,U))return;let n,t=We.get(e);if(t){let o=e.adapter.read(P(e.ret));We.delete(e);for(let f of t){let l=f(o);R(l)&&(n=n||[]).push(l)}}let i=!1;if(!r&&n&&me(e.ret).length>0){i=!0;let o=e.index,f=e.host.lingerers||(e.host.lingerers=[]),l=f[o];l==null&&(l=new Set,f[o]=l),l.add(e.ret),await Promise.all(n),l.delete(e.ret),l.size===0&&(f[o]=void 0),f.some(Boolean)||(e.host.lingerers=void 0)}if(!g(e.ret,U)&&(p(e.ret,U),e.schedule&&(e.schedule.onAbort(),e.schedule=void 0),Ze(e.ctx),Oe(e.adapter,e.host,e,e.root,e.ret,r),i&&e.root!=null&&e.adapter.finalize(e.root),e.iterator)){if(e.pull){Te(e);return}e.inflight&&await e.inflight[1];let o;if(g(e.ret,Se))try{p(e.ret,I);let f=e.adapter.read(P(e.ret)),l=e.iterator.next(f);if(R(l)){if(!g(e.ret,ae))throw new Error("Mixed generator component");o=await l}else{if(!g(e.ret,se))throw new Error("Mixed generator component");o=l}}catch(f){throw p(e.ret,T),f}finally{p(e.ret,I,!1)}if((!o||!o.done)&&e.iterator&&typeof e.iterator.return=="function")try{p(e.ret,I);let f=e.iterator.return();if(R(f)){if(!g(e.ret,ae))throw new Error("Mixed generator component");o=await f}else{if(!g(e.ret,se))throw new Error("Mixed generator component");o=f}}catch(f){throw p(e.ret,T),f}finally{p(e.ret,I,!1)}}}function fr(e,r){if(!e.iterator)throw r;if(e.pull)return e.pull.onChildError(r),e.pull.diff;if(!e.iterator.throw)throw r;Te(e);let n;try{p(e.ret,I),n=e.iterator.throw(r)}catch(t){throw p(e.ret,T),t}finally{p(e.ret,I,!1)}return R(n)?n.then(t=>(t.done&&(p(e.ret,se,!1),p(e.ret,ae,!1),e.iterator=void 0),le(e,t.value,!t.done)),t=>{throw p(e.ret,T),t}):(n.done&&(p(e.ret,se,!1),p(e.ret,ae,!1),e.iterator=void 0),le(e,n.value,!n.done))}function xe(e,r,n){let t=e.parent;if(!t)throw r;let i;try{i=fr(t,r)}catch(o){return xe(t,o,n)}if(R(i))return i.then(()=>{ue(t,n)},o=>xe(t,o,n));ue(t,n)}var ln=new Map;function Pt(e,...r){let n=JSON.stringify(e.raw),t=ln.get(n);if(t==null){t=It(e.raw);let f=!1;for(let l=0;l<t.targets.length;l++){let s=t.targets[l];if(s&&s.type==="error"){f=!0;break}}f||ln.set(n,t)}let{element:i,targets:o}=t;for(let f=0;f<r.length;f++){let l=r[f],s=o[f];if(s){if(s.type==="error"){let u=s.message.replace("${}",wr(l));throw new SyntaxError(s.spanIndex!=null&&s.charIndex!=null?C(u,e.raw,s.spanIndex,s.charIndex):u)}s.value=l}}return an(i,t.spans)}var Wt=Pt,Ee=/((?:\r|\n|\r\n)\s*)|(<!--[\S\s]*?(?:-->|$))|(<\s*(\/{0,2})\s*([-_$\w]*))/g,dr=/\s*(?:(\/?\s*>)|(\.\.\.\s*)|(?:([-_$\w]+)\s*(=)?\s*(?:("(\\"|[\S\s])*?(?:"|$)|'(?:\\'|[\S\s])*?(?:'|$)))?))/g,sn=/>/g,He=/[^\\]?'/g,gr=/[^\\]?"/g,yr=/-->/g;function It(e){let r=Ee,n=[],t={type:"element",open:{type:"tag",slash:"",value:""},close:null,props:[],children:[]},i=[],o=!0;for(let f=0;f<e.length;f++){let l=e[f],s=f<e.length-1,u=null;for(let a=0,c=a;a<l.length;a=c){r.lastIndex=a;let d=r.exec(l);switch(c=d?d.index+d[0].length:l.length,r){case Ee:{if(d){let[,y,w,A,E,m]=d;if(a<d.index){let k=l.slice(a,d.index);o&&(k=k.replace(/^\s*/,"")),y&&(l[Math.max(0,d.index-1)]==="\\"?k=k.slice(0,-1):k=k.replace(/\s*$/,"")),k&&t.children.push({type:"value",value:k})}if(o=!!y,w)c===l.length&&(r=yr);else if(A)if(E)if(t.close={type:"tag",slash:E,value:m,spanIndex:f,charIndex:d.index},n.length)c===l.length&&(u=t.close),t=n.pop(),r=sn;else{if(c!==l.length)throw new SyntaxError(C(`Unmatched closing tag "${m}"`,e,f,d.index));u={type:"error",message:"Unmatched closing tag ${}",value:null,spanIndex:f,charIndex:d.index}}else{let k={type:"element",open:{type:"tag",slash:"",value:m,spanIndex:f,charIndex:d.index},close:null,props:[],children:[]};t.children.push(k),n.push(t),t=k,r=dr,c===l.length&&(u=t.open)}}else if(a<l.length){let y=l.slice(a);s||(y=y.replace(/\s*$/,"")),y&&t.children.push({type:"value",value:y})}break}case dr:{if(d){let[,y,w,A,E,m]=d;if(a<d.index)throw new SyntaxError(C(`Unexpected text \`${l.slice(a,d.index).trim()}\``,e,f,a));if(y)y[0]==="/"&&(t=n.pop()),r=Ee;else if(w){let k={type:"value",value:null};if(t.props.push(k),u=k,!(s&&c===l.length))throw new SyntaxError(C('Expression expected after "..."',e,f,d.index))}else if(A){let k;if(m==null)if(!E)k={type:"value",value:!0};else{if(c<l.length)throw new SyntaxError(C(`Unexpected text \`${l.slice(c,c+20)}\``,e,f,c));if(k={type:"value",value:null},u=k,!(s&&c===l.length))throw new SyntaxError(C(`Expression expected for prop "${A}"`,e,f,d.index))}else{let b=m[0];k={type:"propString",parts:[]},k.parts.push(m),c===l.length&&(r=b==="'"?He:gr)}let v={type:"prop",name:A,value:k};t.props.push(v)}}else if(!s)throw a===l.length?new SyntaxError(C("Expected props but reached end of document",e,f,a)):new SyntaxError(C(`Unexpected text \`${l.slice(a,a+20).trim()}\``,e,f,a));break}case sn:{if(d){if(a<d.index)throw new SyntaxError(C(`Unexpected text \`${l.slice(a,d.index).trim()}\``,e,f,a));r=Ee}else if(!s)throw new SyntaxError(C(`Unexpected text \`${l.slice(a,a+20).trim()}\``,e,f,a));break}case He:case gr:{let y=l.slice(a,c);if(t.props[t.props.length-1].value.parts.push(y),d)r=dr;else if(!s)throw new SyntaxError(C(`Missing \`${r===He?"'":'"'}\``,e,f,a));break}case yr:{if(d)r=Ee;else if(!s)throw new SyntaxError(C("Expected `-->` but reached end of template",e,f,a));break}}}if(s){if(u){if(i.push(u),u.type==="error")break;continue}switch(r){case Ee:{let a={type:"value",value:null};t.children.push(a),i.push(a);break}case He:case gr:{let a=t.props[t.props.length-1],c={type:"value",value:null};a.value.parts.push(c),i.push(c);break}case yr:i.push(null);break;default:throw new SyntaxError(C("Unexpected expression",e,f,e[f].length))}}else if(u)throw new SyntaxError(C("Expression expected",e,f,e[f].length));o=!1}if(n.length){let f=i.indexOf(t.open);if(f===-1)throw new SyntaxError(C(`Unmatched opening tag "${t.open.value}"`,e,t.open.spanIndex??0,t.open.charIndex??0));i[f]={type:"error",message:"Unmatched opening tag ${}",value:null,spanIndex:t.open.spanIndex,charIndex:t.open.charIndex}}return t.children.length===1&&t.children[0].type==="element"&&(t=t.children[0]),{element:t,targets:i,spans:e}}function an(e,r){if(e.close!==null&&e.close.slash!=="//"&&e.open.value!==e.close.value){let i=`Unmatched closing tag ${wr(e.close.value)}, expected ${wr(e.open.value)}`;throw new SyntaxError(r&&e.close.spanIndex!=null&&e.close.charIndex!=null?C(i,r,e.close.spanIndex,e.close.charIndex):i)}let n=[];for(let i=0;i<e.children.length;i++){let o=e.children[i];n.push(o.type==="element"?an(o,r):o.value)}let t=e.props.length?{}:null;for(let i=0;i<e.props.length;i++){let o=e.props[i];if(o.type==="prop"){let f;if(o.value.type==="value")f=o.value.value;else{let l="";for(let s=0;s<o.value.parts.length;s++){let u=o.value.parts[s];typeof u=="string"?l+=u:typeof u.value!="boolean"&&u.value!=null&&(l+=typeof u.value=="string"?u.value:String(u.value))}f=l.slice(1,-1).replace(/\\x[0-9a-f]{2}|\\u[0-9a-f]{4}|\\u\{[0-9a-f]+\}|\\./gi,s=>{switch(s[1]){case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";case"v":return"\v";case"x":return String.fromCharCode(parseInt(s.slice(2),16));case"u":return s[2]==="{"?String.fromCodePoint(parseInt(s.slice(3,-1),16)):String.fromCharCode(parseInt(s.slice(2),16));case"0":return"\0";default:return s.slice(1)}})}t[o.name]=f}else t={...t,...o.value}}return _e(e.open.value,t,...n)}function wr(e){return typeof e=="function"?e.name+"()":typeof e=="string"?`"${e}"`:JSON.stringify(e)}function C(e,r,n,t){let i=r[0];for(let y=1;y<r.length;y++)i+="${}"+r[y];let o=0;for(let y=0;y<n;y++)o+=r[y].length+3;o+=t;let f=i.split(/\n/),l=0,s=o;for(let y=0;y<f.length;y++){if(s<=f[y].length){l=y;break}s-=f[y].length+1}let u=`${e}

`,a=Math.max(0,l-1),c=Math.min(f.length-1,l+1),d=String(c+1).length;for(let y=a;y<=c;y++){let w=String(y+1).padStart(d);y===l?(u+=`> ${w} | ${f[y]}
`,u+=`  ${" ".repeat(d)} | ${" ".repeat(s)}^
`):u+=`  ${w} | ${f[y]}
`}return u.trimEnd()}export{Wt as html,Pt as jsx,It as parse};
/*! Bundled license information:

@esbuild-plugins/node-globals-polyfill/Buffer.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
   * @license  MIT
   *)
*/
