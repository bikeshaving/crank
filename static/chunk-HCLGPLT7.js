import{b,h as k,j as R,l as M,m as L,n as _}from"./chunk-ADYV3LXF.js";import{h as w,i as $}from"./chunk-Z4NPT5MU.js";w();$();w();$();var N=new Map;function A(e,...s){let c=JSON.stringify(e.raw),t=N.get(c);if(t==null){t=B(e.raw);let r=!1;for(let l=0;l<t.targets.length;l++){let o=t.targets[l];if(o&&o.type==="error"){r=!0;break}}r||N.set(c,t)}let{element:n,targets:u}=t;for(let r=0;r<s.length;r++){let l=s[r],o=u[r];if(o){if(o.type==="error"){let f=o.message.replace("${}",j(l));throw new SyntaxError(o.spanIndex!=null&&o.charIndex!=null?d(f,e.raw,o.spanIndex,o.charIndex):f)}o.value=l}}return q(n,t.spans)}var W=A,S=/((?:\r|\n|\r\n)\s*)|(<!--[\S\s]*?(?:-->|$))|(<\s*(\/{0,2})\s*([-_$\w]*))/g,C=/\s*(?:(\/?\s*>)|(\.\.\.\s*)|(?:([-_$\w]+)\s*(=)?\s*(?:("(\\"|[\S\s])*?(?:"|$)|'(?:\\'|[\S\s])*?(?:'|$)))?))/g,H=/>/g,I=/[^\\]?'/g,T=/[^\\]?"/g,U=/-->/g;function B(e){let s=S,c=[],t={type:"element",open:{type:"tag",slash:"",value:""},close:null,props:[],children:[]},n=[],u=!0;for(let r=0;r<e.length;r++){let l=e[r],o=r<e.length-1,f=null;for(let i=0,h=i;i<l.length;i=h){s.lastIndex=i;let p=s.exec(l);switch(h=p?p.index+p[0].length:l.length,s){case S:{if(p){let[,a,m,v,E,y]=p;if(i<p.index){let g=l.slice(i,p.index);u&&(g=g.replace(/^\s*/,"")),a&&(l[Math.max(0,p.index-1)]==="\\"?g=g.slice(0,-1):g=g.replace(/\s*$/,"")),g&&t.children.push({type:"value",value:g})}if(u=!!a,m)h===l.length&&(s=U);else if(v)if(E)if(t.close={type:"tag",slash:E,value:y,spanIndex:r,charIndex:p.index},c.length)h===l.length&&(f=t.close),t=c.pop(),s=H;else{if(h!==l.length)throw new SyntaxError(d(`Unmatched closing tag "${y}"`,e,r,p.index));f={type:"error",message:"Unmatched closing tag ${}",value:null,spanIndex:r,charIndex:p.index}}else{let g={type:"element",open:{type:"tag",slash:"",value:y,spanIndex:r,charIndex:p.index},close:null,props:[],children:[]};t.children.push(g),c.push(t),t=g,s=C,h===l.length&&(f=t.open)}}else if(i<l.length){let a=l.slice(i);o||(a=a.replace(/\s*$/,"")),a&&t.children.push({type:"value",value:a})}break}case C:{if(p){let[,a,m,v,E,y]=p;if(i<p.index)throw new SyntaxError(d(`Unexpected text \`${l.slice(i,p.index).trim()}\``,e,r,i));if(a)a[0]==="/"&&(t=c.pop()),s=S;else if(m){let g={type:"value",value:null};if(t.props.push(g),f=g,!(o&&h===l.length))throw new SyntaxError(d('Expression expected after "..."',e,r,p.index))}else if(v){let g;if(y==null)if(!E)g={type:"value",value:!0};else{if(h<l.length)throw new SyntaxError(d(`Unexpected text \`${l.slice(h,h+20)}\``,e,r,h));if(g={type:"value",value:null},f=g,!(o&&h===l.length))throw new SyntaxError(d(`Expression expected for prop "${v}"`,e,r,p.index))}else{let V=y[0];g={type:"propString",parts:[]},g.parts.push(y),h===l.length&&(s=V==="'"?I:T)}let F={type:"prop",name:v,value:g};t.props.push(F)}}else if(!o)throw i===l.length?new SyntaxError(d("Expected props but reached end of document",e,r,i)):new SyntaxError(d(`Unexpected text \`${l.slice(i,i+20).trim()}\``,e,r,i));break}case H:{if(p){if(i<p.index)throw new SyntaxError(d(`Unexpected text \`${l.slice(i,p.index).trim()}\``,e,r,i));s=S}else if(!o)throw new SyntaxError(d(`Unexpected text \`${l.slice(i,i+20).trim()}\``,e,r,i));break}case I:case T:{let a=l.slice(i,h);if(t.props[t.props.length-1].value.parts.push(a),p)s=C;else if(!o)throw new SyntaxError(d(`Missing \`${s===I?"'":'"'}\``,e,r,i));break}case U:{if(p)s=S;else if(!o)throw new SyntaxError(d("Expected `-->` but reached end of template",e,r,i));break}}}if(o){if(f){if(n.push(f),f.type==="error")break;continue}switch(s){case S:{let i={type:"value",value:null};t.children.push(i),n.push(i);break}case I:case T:{let i=t.props[t.props.length-1],h={type:"value",value:null};i.value.parts.push(h),n.push(h);break}case U:n.push(null);break;default:throw new SyntaxError(d("Unexpected expression",e,r,e[r].length))}}else if(f)throw new SyntaxError(d("Expression expected",e,r,e[r].length));u=!1}if(c.length){let r=n.indexOf(t.open);if(r===-1)throw new SyntaxError(d(`Unmatched opening tag "${t.open.value}"`,e,t.open.spanIndex??0,t.open.charIndex??0));n[r]={type:"error",message:"Unmatched opening tag ${}",value:null,spanIndex:t.open.spanIndex,charIndex:t.open.charIndex}}return t.children.length===1&&t.children[0].type==="element"&&(t=t.children[0]),{element:t,targets:n,spans:e}}function q(e,s){if(e.close!==null&&e.close.slash!=="//"&&e.open.value!==e.close.value){let n=`Unmatched closing tag ${j(e.close.value)}, expected ${j(e.open.value)}`;throw new SyntaxError(s&&e.close.spanIndex!=null&&e.close.charIndex!=null?d(n,s,e.close.spanIndex,e.close.charIndex):n)}let c=[];for(let n=0;n<e.children.length;n++){let u=e.children[n];c.push(u.type==="element"?q(u,s):u.value)}let t=e.props.length?{}:null;for(let n=0;n<e.props.length;n++){let u=e.props[n];if(u.type==="prop"){let r;if(u.value.type==="value")r=u.value.value;else{let l="";for(let o=0;o<u.value.parts.length;o++){let f=u.value.parts[o];typeof f=="string"?l+=f:typeof f.value!="boolean"&&f.value!=null&&(l+=typeof f.value=="string"?f.value:String(f.value))}r=l.slice(1,-1).replace(/\\x[0-9a-f]{2}|\\u[0-9a-f]{4}|\\u\{[0-9a-f]+\}|\\./gi,o=>{switch(o[1]){case"b":return"\b";case"f":return"\f";case"n":return`
`;case"r":return"\r";case"t":return"	";case"v":return"\v";case"x":return String.fromCharCode(parseInt(o.slice(2),16));case"u":return o[2]==="{"?String.fromCodePoint(parseInt(o.slice(3,-1),16)):String.fromCharCode(parseInt(o.slice(2),16));case"0":return"\0";default:return o.slice(1)}})}t[u.name]=r}else t={...t,...u.value}}return k(e.open.value,t,...c)}function j(e){return typeof e=="function"?e.name+"()":typeof e=="string"?`"${e}"`:JSON.stringify(e)}function d(e,s,c,t){let n=s[0];for(let a=1;a<s.length;a++)n+="${}"+s[a];let u=0;for(let a=0;a<c;a++)u+=s[a].length+3;u+=t;let r=n.split(/\n/),l=0,o=u;for(let a=0;a<r.length;a++){if(o<=r[a].length){l=a;break}o-=r[a].length+1}let f=`${e}

`,i=Math.max(0,l-1),h=Math.min(r.length-1,l+1),p=String(h+1).length;for(let a=i;a<=h;a++){let m=String(a+1).padStart(p);a===l?(f+=`> ${m} | ${r[a]}
`,f+=`  ${" ".repeat(p)} | ${" ".repeat(o)}^
`):f+=`  ${m} | ${r[a]}
`}return f.trimEnd()}w();$();var J=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]);function x(e){return e.replace(/[&<>"']/g,s=>{switch(s){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&#039;";default:return""}})}function K(e){let s=[];for(let[c,t]of Object.entries(e))if(t!=null){let n=M(c),u=L(n,t);s.push(`${n}:${u};`)}return s.join("")}function Q(e,s){let c=[];for(let[t,n]of Object.entries(e))if(!(t==="innerHTML"||t==="dangerouslySetInnerHTML"||t.startsWith("prop:")))if(t==="htmlFor"){if("for"in e||n==null||n===!1)continue;c.push(`for="${x(String(n===!0?"":n))}"`)}else if(t==="style")typeof n=="string"?c.push(`style="${x(n)}"`):typeof n=="object"&&n!==null&&c.push(`style="${x(K(n))}"`);else if(t==="className"){if("class"in e||typeof n!="string")continue;c.push(`class="${x(n)}"`)}else if(t==="class"){if(typeof n=="string")c.push(`class="${x(n)}"`);else if(typeof n=="object"&&n!==null){let u=Object.keys(n).filter(r=>n[r]).join(" ");u&&c.push(`class="${x(u)}"`)}}else t.startsWith("attr:")?t=t.slice(5):s&&t in _&&(t=_[t]),typeof n=="string"?c.push(`${x(t)}="${x(n)}"`):typeof n=="number"?c.push(`${x(t)}="${n}"`):n===!0&&c.push(`${x(t)}`);return c.join(" ")}function D(e){let s="";for(let c=0;c<e.length;c++){let t=e[c];s+=typeof t=="string"?t:t.value}return s}var z={scope({scope:e,tag:s}){if(s!==b){switch(s){case"svg":return"svg";case"math":return"math";case"foreignObject":return}return e}},create(){return{value:""}},text({value:e}){return{value:x(e)}},read(e){return Array.isArray(e)?D(e):typeof e>"u"?"":typeof e=="string"?e:e.value||""},arrange({tag:e,tagName:s,node:c,props:t,children:n,scope:u}){var f;if(e===b)return;if(typeof e!="string")throw new Error(`Unknown tag: ${s}`);let r=Q(t,u==="svg"||e==="foreignObject"),l=`<${e}${r.length?" ":""}${r}>`,o;if(J.has(e))o=l;else{let i=`</${e}>`,h="innerHTML"in t?t.innerHTML:"dangerouslySetInnerHTML"in t?((f=t.dangerouslySetInnerHTML)==null?void 0:f.__html)??"":D(n);o=`${l}${h}${i}`}c.value=o}},O=class extends R{constructor(){super(z)}},X=new O;export{A as a,W as b,O as c,X as d};
