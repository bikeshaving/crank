<html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><title>Crank.js | Async Components</title><link rel="shortcut icon" href="/favicon.ico"><style>.css-yop4go{position:relative;width:60px;height:32px;border-radius:16px;border:1px solid var(--text-color);background:transparent;cursor:pointer;padding:0 4px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;font-size:16px;}.css-yop4go:focus{outline:none;border-color:var(--highlight-color);}.css-zj66tk{position:absolute;width:26px;height:26px;border-radius:50%;border:1px solid var(--text-color);background:var(--bg-color);-webkit-transition:left 0.2s;transition:left 0.2s;display:none;}.css-1l1hcps{position:fixed;top:0;left:0;right:0;height:50px;z-index:999;gap:1em;}.css-1n0j5y9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:1em;}.css-1xmwt0h{border-bottom:1px solid var(--text-color);overflow-x:auto;background-color:inherit;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;gap:1em;}.css-1xmwt0h a{-webkit-text-decoration:none;text-decoration:none;font-weight:bold;}@media screen and (min-width: 800px){.css-1xmwt0h{padding:0 2em;}}.css-1nd56js{background-color:var(--bg-color);border-top:1px solid var(--text-color);padding:2em;text-align:center;font-size:14px;}.css-nf2n4z{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;-webkit-justify-content:center;justify-content:center;gap:2em;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;margin-bottom:1em;}.css-1st8n6b{margin:0;color:var(--text-color);opacity:0.7;}.css-1vm8pxc{max-width:min(100%, 1000px);}.css-1s1lac9{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;font-size:16px;}@media (min-width: 1300px){.css-1s1lac9{-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;}}.css-1lyfw13{position:relative;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;width:100%;border:1px solid var(--text-color);border-radius:4px;overflow:hidden;}.css-1xzghkg{position:absolute;top:0.5em;right:0.5em;z-index:10;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:8px;}.css-1y5ulpa{height:24px;padding:0 8px;border-radius:4px;border:1px solid var(--text-color);background:transparent;font-size:10px;font-family:monospace;cursor:pointer;opacity:0.7;-webkit-transition:opacity 0.2s;transition:opacity 0.2s;}.css-1y5ulpa:hover{opacity:1;}.css-i7rnhw{overflow-x:auto;}.css-1y4o4pq{position:relative;min-height:100%;width:100%;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;background-color:var(--bg-color);}.css-84ojsb{display:contents;}.css-1ashatc{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;word-break:break-all;overflow-wrap:anywhere;line-break:anywhere;white-space:pre-wrap;white-space:break-spaces;font-size:16px;}.css-1flouoi{border-bottom:1px dotted #333;}.color-scheme-light .css-1flouoi{border-bottom:1px dotted #ddd;}.css-1cvb758{max-width:calc(100% - 1px);}.css-fxcfu0{-webkit-animation:pulse-bg 1.5s ease-in-out infinite;animation:pulse-bg 1.5s ease-in-out infinite;}@-webkit-keyframes pulse-bg{0%,100%{background-color:rgba(218, 165, 32, 0.2);}50%{background-color:var(--bg-color);}}@keyframes pulse-bg{0%,100%{background-color:rgba(218, 165, 32, 0.2);}50%{background-color:var(--bg-color);}}.css-rp15d{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;position:relative;}.css-1j6wuma{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;padding:1em;width:100%;position:relative;}.css-hjkbgb{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;border:none;width:100%;background-color:var(--bg-color);}.css-vrpffa{display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:0.5rem;font-size:0.9rem;color:var(--text-color);opacity:0.6;-webkit-text-decoration:none;text-decoration:none;-webkit-transition:opacity 0.2s ease;transition:opacity 0.2s ease;}.css-vrpffa:hover{opacity:1;color:var(--highlight-color);}.css-1uorqld{position:relative;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;width:100%;border:1px solid var(--text-color);border-radius:4px 4px 0 0;overflow:hidden;}@media (min-width: 1300px){.css-1uorqld{max-width:61.8%;border-radius:4px 0 0 4px;}}.css-37p1l2{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;position:-webkit-sticky;position:sticky;top:100px;border:1px solid var(--text-color);border-radius:0 0 4px 4px;margin-top:-1px;min-height:50px;width:100%;background-color:var(--bg-color);}@media screen and (min-width: 1300px){.css-37p1l2{margin-top:0;margin-left:-1px;border-radius:0 4px 4px 0;width:30%;}}.css-1lyshc7{margin-top:3rem;padding-top:1.5rem;border-top:1px solid var(--text-color);opacity:0.5;}.css-w1ljn4{margin:10px 0;}.css-1l0nd7p{-webkit-text-decoration:none;text-decoration:none;}.css-1wkb9s8{background-color:var(--bg-color);margin-top:50px;padding:2rem 0.4rem;color:var(--text-color);border-right:1px solid currentcolor;border-bottom:1px solid currentcolor;}@media screen and (min-width: 800px){.css-1wkb9s8{position:fixed;top:50px;bottom:0;overflow-x:hidden;overflow-y:auto;width:15rem;margin:0;padding:2rem 1rem;text-align:right;}}@media screen and (min-width: 1100px){.css-1wkb9s8{padding:3rem 2rem;width:20rem;}}.css-1wkb9s8 >:first-child{margin-top:0;}.css-ep9szm{color:var(--highlight-color);margin-top:0;}.css-1d9zsa{position:relative;margin-bottom:1rem;}.css-okn4a3{width:100%;padding:0.5rem 0.75rem;font-size:0.9rem;border:1px solid var(--text-color);border-radius:4px;background:var(--bg-color);color:var(--text-color);box-sizing:border-box;}.css-okn4a3::-webkit-input-placeholder{opacity:0.5;}.css-okn4a3::-moz-placeholder{opacity:0.5;}.css-okn4a3:-ms-input-placeholder{opacity:0.5;}.css-okn4a3::placeholder{opacity:0.5;}.css-okn4a3:focus{outline:none;border-color:var(--highlight-color);}.css-s848sl{margin:0 auto;padding:2rem 0.4rem;}@media screen and (min-width: 800px){.css-s848sl{margin-left:240px;padding:2rem 1rem;margin-top:50px;}}@media screen and (min-width: 1100px){.css-s848sl{margin-left:20rem;padding:3rem 2rem;}}.css-s848sl p,.css-s848sl ul,.css-s848sl ol{max-width:800px;}</style><link rel="stylesheet" type="text/css" href="/static/client-bb3474147984aa38.css"><meta name="description" content="Harness the power of async/await in your components. Learn how to build data-fetching components, handle loading states, and manage asynchronous UI updates."><meta property="og:title" content="Crank.js | Async Components"><meta property="og:url" content="https://crank.js.org/guides/async-components"><meta property="og:description" content="Harness the power of async/await in your components. Learn how to build data-fetching components, handle loading states, and manage asynchronous UI updates."><meta property="og:type" content="website"><meta property="og:site_name" content="Crank.js"><meta property="og:image" content="/static/logo-fa20bf6e23587cd0.svg"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Crank.js | Async Components"><meta name="twitter:description" content="Harness the power of async/await in your components. Learn how to build data-fetching components, handle loading states, and manage asynchronous UI updates."><meta name="twitter:image" content="/static/logo-fa20bf6e23587cd0.svg"></head><body><script>(() => { const s = sessionStorage.getItem("color-scheme");
		const scheme = s === "dark" || s === "light" ? s :
			(window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light");
		const isDark = scheme === "dark";
		document.documentElement.dataset.theme = scheme;
		document.documentElement.style.setProperty("--bg-color", isDark ? "#0a0e1f" : "#e7f4f5");
		document.documentElement.style.setProperty("--text-color", isDark ? "#f5f9ff" : "#0a0e1f");
		if (!isDark) document.documentElement.classList.add("color-scheme-light"); })()</script><div id="navbar-root"><nav class="
				blur-background
				css-1l1hcps
				css-1xmwt0h
			"><div class="css-1n0j5y9"><div><a class="css-1n0j5y9" style="gap: 0.3em" href="/"><svg style="flex: none;" fill="none" viewBox="-200 -200 400 400" width="1.9em" height="1.9em" xmlns="http://www.w3.org/2000/svg"><g stroke="none" fill="var(--highlight-color)"><path transform="rotate(0)" d="M 149.39 -16.97 M 149.62 -16.98 M 150.29 -17 M 151.42 -16.97 M 153 -16.85 M 155.02 -16.57 M 157.46 -16.1 M 160.32 -15.39 M 163.56 -14.39 M 167.17 -13.06 M 171.11 -11.35 M 175.36 -9.23 M 179.88 -6.66 M 179.88 6.66 M 175.36 9.23 M 171.11 11.35 M 167.17 13.06 M 163.56 14.39 M 160.32 15.39 M 157.46 16.1 M 155.02 16.57 M 153 16.85 M 151.42 16.97 M 150.29 17 M 149.62 16.98 M 149.39 16.97 A 8 8 0 0 0 144.51 41.5 L 144.73 41.57 L 145.36 41.81 L 146.39 42.27 L 147.8 42.99 L 149.56 44.01 L 151.64 45.38 L 154 47.13 L 156.62 49.29 L 159.44 51.9 L 162.43 54.99 L 165.54 58.58 L 168.73 62.69 L 163.64 74.98 L 158.48 75.64 L 153.74 75.97 L 149.44 76.04 L 145.6 75.89 L 142.22 75.57 L 139.31 75.14 L 136.88 74.63 L 134.91 74.11 L 133.4 73.63 L 132.35 73.22 L 131.73 72.95 L 131.53 72.84 A 8 8 0 0 0 117.63 93.64 L 117.8 93.79 L 118.3 94.25 L 119.07 95.07 L 120.1 96.28 L 121.33 97.9 L 122.73 99.96 L 124.24 102.48 L 125.83 105.48 L 127.44 108.97 L 129.02 112.96 L 130.52 117.47 L 131.9 122.49 L 122.49 131.9 L 117.47 130.52 L 112.96 129.02 L 108.97 127.44 L 105.48 125.83 L 102.48 124.24 L 99.96 122.73 L 97.9 121.33 L 96.28 120.1 L 95.07 119.07 L 94.25 118.3 L 93.79 117.8 L 93.64 117.63 A 8 8 0 0 0 72.84 131.53 L 72.95 131.73 L 73.22 132.35 L 73.63 133.4 L 74.11 134.91 L 74.63 136.88 L 75.14 139.31 L 75.57 142.22 L 75.89 145.6 L 76.04 149.44 L 75.97 153.74 L 75.64 158.48 L 74.98 163.64 L 62.69 168.73 L 58.58 165.54 L 54.99 162.43 L 51.9 159.44 L 49.29 156.62 L 47.13 154 L 45.38 151.64 L 44.01 149.56 L 42.99 147.8 L 42.27 146.39 L 41.81 145.36 L 41.57 144.73 L 41.5 144.51 A 8 8 0 0 0 16.97 149.39 L 16.98 149.62 L 17 150.29 L 16.97 151.42 L 16.85 153 L 16.57 155.02 L 16.1 157.46 L 15.39 160.32 L 14.39 163.56 L 13.06 167.17 L 11.35 171.11 L 9.23 175.36 L 6.66 179.88 L -6.66 179.88 L -9.23 175.36 L -11.35 171.11 L -13.06 167.17 L -14.39 163.56 L -15.39 160.32 L -16.1 157.46 L -16.57 155.02 L -16.85 153 L -16.97 151.42 L -17 150.29 L -16.98 149.62 L -16.97 149.39 A 8 8 0 0 0 -41.5 144.51 L -41.57 144.73 L -41.81 145.36 L -42.27 146.39 L -42.99 147.8 L -44.01 149.56 L -45.38 151.64 L -47.13 154 L -49.29 156.62 L -51.9 159.44 L -54.99 162.43 L -58.58 165.54 L -62.69 168.73 L -74.98 163.64 L -75.64 158.48 L -75.97 153.74 L -76.04 149.44 L -75.89 145.6 L -75.57 142.22 L -75.14 139.31 L -74.63 136.88 L -74.11 134.91 L -73.63 133.4 L -73.22 132.35 L -72.95 131.73 L -72.84 131.53 A 8 8 0 0 0 -93.64 117.63 L -93.79 117.8 L -94.25 118.3 L -95.07 119.07 L -96.28 120.1 L -97.9 121.33 L -99.96 122.73 L -102.48 124.24 L -105.48 125.83 L -108.97 127.44 L -112.96 129.02 L -117.47 130.52 L -122.49 131.9 L -131.9 122.49 L -130.52 117.47 L -129.02 112.96 L -127.44 108.97 L -125.83 105.48 L -124.24 102.48 L -122.73 99.96 L -121.33 97.9 L -120.1 96.28 L -119.07 95.07 L -118.3 94.25 L -117.8 93.79 L -117.63 93.64 A 8 8 0 0 0 -131.53 72.84 L -131.73 72.95 L -132.35 73.22 L -133.4 73.63 L -134.91 74.11 L -136.88 74.63 L -139.31 75.14 L -142.22 75.57 L -145.6 75.89 L -149.44 76.04 L -153.74 75.97 L -158.48 75.64 L -163.64 74.98 L -168.73 62.69 L -165.54 58.58 L -162.43 54.99 L -159.44 51.9 L -156.62 49.29 L -154 47.13 L -151.64 45.38 L -149.56 44.01 L -147.8 42.99 L -146.39 42.27 L -145.36 41.81 L -144.73 41.57 L -144.51 41.5 A 8 8 0 0 0 -149.39 16.97 L -149.62 16.98 L -150.29 17 L -151.42 16.97 L -153 16.85 L -155.02 16.57 L -157.46 16.1 L -160.32 15.39 L -163.56 14.39 L -167.17 13.06 L -171.11 11.35 L -175.36 9.23 L -179.88 6.66 L -179.88 -6.66 L -175.36 -9.23 L -171.11 -11.35 L -167.17 -13.06 L -163.56 -14.39 L -160.32 -15.39 L -157.46 -16.1 L -155.02 -16.57 L -153 -16.85 L -151.42 -16.97 L -150.29 -17 L -149.62 -16.98 L -149.39 -16.97 A 8 8 0 0 0 -144.51 -41.5 L -144.73 -41.57 L -145.36 -41.81 L -146.39 -42.27 L -147.8 -42.99 L -149.56 -44.01 L -151.64 -45.38 L -154 -47.13 L -156.62 -49.29 L -159.44 -51.9 L -162.43 -54.99 L -165.54 -58.58 L -168.73 -62.69 L -163.64 -74.98 L -158.48 -75.64 L -153.74 -75.97 L -149.44 -76.04 L -145.6 -75.89 L -142.22 -75.57 L -139.31 -75.14 L -136.88 -74.63 L -134.91 -74.11 L -133.4 -73.63 L -132.35 -73.22 L -131.73 -72.95 L -131.53 -72.84 A 8 8 0 0 0 -117.63 -93.64 L -117.8 -93.79 L -118.3 -94.25 L -119.07 -95.07 L -120.1 -96.28 L -121.33 -97.9 L -122.73 -99.96 L -124.24 -102.48 L -125.83 -105.48 L -127.44 -108.97 L -129.02 -112.96 L -130.52 -117.47 L -131.9 -122.49 L -122.49 -131.9 L -117.47 -130.52 L -112.96 -129.02 L -108.97 -127.44 L -105.48 -125.83 L -102.48 -124.24 L -99.96 -122.73 L -97.9 -121.33 L -96.28 -120.1 L -95.07 -119.07 L -94.25 -118.3 L -93.79 -117.8 L -93.64 -117.63 A 8 8 0 0 0 -72.84 -131.53 L -72.95 -131.73 L -73.22 -132.35 L -73.63 -133.4 L -74.11 -134.91 L -74.63 -136.88 L -75.14 -139.31 L -75.57 -142.22 L -75.89 -145.6 L -76.04 -149.44 L -75.97 -153.74 L -75.64 -158.48 L -74.98 -163.64 L -62.69 -168.73 L -58.58 -165.54 L -54.99 -162.43 L -51.9 -159.44 L -49.29 -156.62 L -47.13 -154 L -45.38 -151.64 L -44.01 -149.56 L -42.99 -147.8 L -42.27 -146.39 L -41.81 -145.36 L -41.57 -144.73 L -41.5 -144.51 A 8 8 0 0 0 -16.97 -149.39 L -16.98 -149.62 L -17 -150.29 L -16.97 -151.42 L -16.85 -153 L -16.57 -155.02 L -16.1 -157.46 L -15.39 -160.32 L -14.39 -163.56 L -13.06 -167.17 L -11.35 -171.11 L -9.23 -175.36 L -6.66 -179.88 L 6.66 -179.88 L 9.23 -175.36 L 11.35 -171.11 L 13.06 -167.17 L 14.39 -163.56 L 15.39 -160.32 L 16.1 -157.46 L 16.57 -155.02 L 16.85 -153 L 16.97 -151.42 L 17 -150.29 L 16.98 -149.62 L 16.97 -149.39 A 8 8 0 0 0 41.5 -144.51 L 41.57 -144.73 L 41.81 -145.36 L 42.27 -146.39 L 42.99 -147.8 L 44.01 -149.56 L 45.38 -151.64 L 47.13 -154 L 49.29 -156.62 L 51.9 -159.44 L 54.99 -162.43 L 58.58 -165.54 L 62.69 -168.73 L 74.98 -163.64 L 75.64 -158.48 L 75.97 -153.74 L 76.04 -149.44 L 75.89 -145.6 L 75.57 -142.22 L 75.14 -139.31 L 74.63 -136.88 L 74.11 -134.91 L 73.63 -133.4 L 73.22 -132.35 L 72.95 -131.73 L 72.84 -131.53 A 8 8 0 0 0 93.64 -117.63 L 93.79 -117.8 L 94.25 -118.3 L 95.07 -119.07 L 96.28 -120.1 L 97.9 -121.33 L 99.96 -122.73 L 102.48 -124.24 L 105.48 -125.83 L 108.97 -127.44 L 112.96 -129.02 L 117.47 -130.52 L 122.49 -131.9 L 131.9 -122.49 L 130.52 -117.47 L 129.02 -112.96 L 127.44 -108.97 L 125.83 -105.48 L 124.24 -102.48 L 122.73 -99.96 L 121.33 -97.9 L 120.1 -96.28 L 119.07 -95.07 L 118.3 -94.25 L 117.8 -93.79 L 117.63 -93.64 A 8 8 0 0 0 131.53 -72.84 L 131.73 -72.95 L 132.35 -73.22 L 133.4 -73.63 L 134.91 -74.11 L 136.88 -74.63 L 139.31 -75.14 L 142.22 -75.57 L 145.6 -75.89 L 149.44 -76.04 L 153.74 -75.97 L 158.48 -75.64 L 163.64 -74.98 L 168.73 -62.69 L 165.54 -58.58 L 162.43 -54.99 L 159.44 -51.9 L 156.62 -49.29 L 154 -47.13 L 151.64 -45.38 L 149.56 -44.01 L 147.8 -42.99 L 146.39 -42.27 L 145.36 -41.81 L 144.73 -41.57 L 144.51 -41.5 A 8 8 0 0 0 149.39 -16.97 L 149.62 -16.98 L 150.29 -17 L 151.42 -16.97 L 153 -16.85 L 155.02 -16.57 L 157.46 -16.1 L 160.32 -15.39 L 163.56 -14.39 L 167.17 -13.06 L 171.11 -11.35 L 175.36 -9.23 L 179.88 -6.66 L 179.88 6.66 L 175.36 9.23 L 171.11 11.35 L 167.17 13.06 L 163.56 14.39 L 160.32 15.39 L 157.46 16.1 L 155.02 16.57 L 153 16.85 L 151.42 16.97 L 150.29 17 L 149.62 16.98 L 149.39 16.97
			  M -110 0
				a 110 110 0 1 0 220 0
				a 110 110 0 1 0 -220 0
			" stroke="none" stroke-width="4"></path><circle cx="0" cy="0" r="60" stroke="none"></circle><path d="
						M 0 -25
						L 120 -20
						L 120 20
						L 0 25
						Z
					"></path></g></svg>Crank.js</a></div><div><a href="/guides/getting-started" aria-current="page">Guides</a></div><div><a href="/api">API</a></div><div><a href="/blog/">Blog</a></div><div><a href="/spec">Spec</a></div><div><a href="/playground/">Playground</a></div></div><div class="css-1n0j5y9"><div><a href="https://github.com/bikeshaving/crank">GitHub</a></div><div><a href="http://npm.im/@b9g/crank">NPM</a></div><button role="switch" aria-label="toggle color scheme" aria-checked="true" class="css-yop4go"><span>üåô</span><span>üí°</span><span class="css-zj66tk"></span></button></div></nav></div><div id="sidebar" class="css-1wkb9s8"><h2 class="css-ep9szm">Guides</h2><div id="search-root"><div class="css-1d9zsa"><input type="search" placeholder="Search..." value="" class="css-okn4a3"></div></div><div class="css-w1ljn4"><a href="/guides/getting-started" class="css-1l0nd7p">Getting Started</a></div><div class="css-w1ljn4"><a href="/guides/elements" class="css-1l0nd7p">Elements and Renderers</a></div><div class="css-w1ljn4"><a href="/guides/components" class="css-1l0nd7p">Components</a></div><div class="css-w1ljn4"><a href="/guides/handling-events" class="css-1l0nd7p">Handling Events</a></div><div class="css-w1ljn4"><a href="/guides/async-components" aria-current="page" class="css-1l0nd7p">Async Components</a></div><div class="css-w1ljn4"><a href="/guides/special-props-and-components" class="css-1l0nd7p">Special Props and Components</a></div><div class="css-w1ljn4"><a href="/guides/lifecycles" class="css-1l0nd7p">Lifecycles</a></div><div class="css-w1ljn4"><a href="/guides/hydration" class="css-1l0nd7p">Hydration</a></div><div class="css-w1ljn4"><a href="/guides/reusable-logic" class="css-1l0nd7p">Reusable Logic</a></div><div class="css-w1ljn4"><a href="/guides/working-with-typescript" class="css-1l0nd7p">Working with TypeScript</a></div><div class="css-w1ljn4"><a href="/guides/jsx-template-tag" class="css-1l0nd7p">JSX Template Tag</a></div><div class="css-w1ljn4"><a href="/guides/crank-style-guide" class="css-1l0nd7p">Crank Style Guide</a></div><div class="css-w1ljn4"><a href="/guides/reference-for-react-developers" class="css-1l0nd7p">Reference for React Developers</a></div><div class="css-w1ljn4"><a href="/guides/custom-renderers" class="css-1l0nd7p">Custom Renderers</a></div></div><main data-pagefind-body class="css-s848sl"><h1>Async Components</h1><p>So far, every component we‚Äôve seen has been synchronous ‚Äî they execute immediately and return or yield their result right away. But modern web applications often need to fetch data, wait for user input, or perform other asynchronous operations.</p><p>Crank makes async components as simple as adding the <code class="inline">async</code> keyword to your function. You can <code class="inline">await</code> promises in any component, just like you would in regular JavaScript functions. Both async function components and async generator components are supported.</p><div style="margin: 30px auto;" class="code-block-container code-block-live"><div class="css-1cvb758"><div class="css-1s1lac9"><div class="css-1uorqld"><div class="css-1xzghkg"><button class="css-1y5ulpa">Copy</button></div><div class="css-i7rnhw"><div class="css-1y4o4pq"><content-area class="css-84ojsb"><pre autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" class="
							language-jsx live
							css-1ashatc
						"><div class="
				prism-line
				css-1flouoi
			" data-index="0"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>renderer<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@b9g/crank/dom&quot;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="1"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">Definition</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>word<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="2"><code>  <span class="token comment">// API courtesy https://dictionaryapi.dev</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="3"><code>  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">https://api.dictionaryapi.dev/api/v2/entries/en/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>word<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="4"><code>  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="5"><code>  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="6"><code>    <span class="token keyword">return</span> <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>No definition found <span class="token keyword">for</span> <span class="token punctuation">{</span>word<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="7"><code>  <span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="8"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="9"><code>  <span class="token keyword">const</span> <span class="token punctuation">{</span>phonetic<span class="token punctuation">,</span> meanings<span class="token punctuation">}</span> <span class="token operator">=</span> data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="10"><code>  <span class="token keyword">const</span> <span class="token punctuation">{</span>partOfSpeech<span class="token punctuation">,</span> definitions<span class="token punctuation">}</span> <span class="token operator">=</span> meanings<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="11"><code>  <span class="token keyword">const</span> <span class="token punctuation">{</span>definition<span class="token punctuation">}</span> <span class="token operator">=</span> definitions<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="12"><code>  <span class="token keyword">return</span> <span class="token operator">&lt;</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="13"><code>    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token punctuation">{</span>word<span class="token punctuation">}</span> <span class="token operator">&lt;</span>code<span class="token operator">&gt;</span><span class="token punctuation">{</span>phonetic<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>code<span class="token operator">&gt;</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="14"><code>    <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span><span class="token operator">&lt;</span>b<span class="token operator">&gt;</span><span class="token punctuation">{</span>partOfSpeech<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>b<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token string">&quot; &quot;</span><span class="token punctuation">}</span><span class="token punctuation">{</span>definition<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="15"><code>    <span class="token punctuation">{</span><span class="token comment">/*&lt;pre&gt;{JSON.stringify(data, null, 4)}&lt;/pre&gt;*/</span><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="16"><code>  <span class="token operator">&lt;</span><span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="17"><code><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="18"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="19"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="20"><code><span class="token keyword">await</span> renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Definition word<span class="token operator">=</span><span class="token string">&quot;framework&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div></pre></content-area></div></div></div><div class="css-37p1l2"><div class="css-rp15d"><div class="css-1j6wuma css-fxcfu0"><iframe class="
							playground-iframe
							css-hjkbgb
						" style="min-height: 100px;"></iframe></div></div></div></div></div><script data-name="inline-code-block-props-135" class="props">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['inline-code-block-props-135'] = {"code":"import {renderer} from \"@b9g\u002Fcrank\u002Fdom\";\nasync function Definition({word}) {\n  \u002F\u002F API courtesy https:\u002F\u002Fdictionaryapi.dev\n  const res = await fetch(`https:\u002F\u002Fapi.dictionaryapi.dev\u002Fapi\u002Fv2\u002Fentries\u002Fen\u002F${word}`);\n  const data = await res.json();\n  if (!Array.isArray(data)) {\n    return \u003Cp\u003ENo definition found for {word}\u003C\u002Fp\u003E;\n  }\n\n  const {phonetic, meanings} = data[0];\n  const {partOfSpeech, definitions} = meanings[0];\n  const {definition} = definitions[0];\n  return \u003C\u003E\n    \u003Cp\u003E{word} \u003Ccode\u003E{phonetic}\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n    \u003Cp\u003E\u003Cb\u003E{partOfSpeech}.\u003C\u002Fb\u003E{\" \"}{definition}\u003C\u002Fp\u003E\n    {\u002F*\u003Cpre\u003E{JSON.stringify(data, null, 4)}\u003C\u002Fpre\u003E*\u002F}\n  \u003C\u002F\u003E;\n}\n\n\nawait renderer.render(\u003CDefinition word=\"framework\" \u002F\u003E, document.body);","lang":"jsx live"};
		</script></div><p>Async components can be re-rendered while still pending. Crank enforces two rules to keep things predictable: queuing and racing.</p><h3 id="queuing">Queuing <a class="heading-anchor" href="#queuing">#</a></h3><p>There can only be one pending run of an async component at a time for a given element in the tree. If the same async component is rerendered concurrently while a run is pending, another call is enqueued with the updated props.</p><p>In the following demo, four renders are fired in quick succession. Notice that <strong>Run 3 is skipped</strong> ‚Äî by the time Run 2 completes, Run 3‚Äôs props are already obsolete, so only Run 4 executes. This keeps async components up-to-date without excess calls.</p><div style="margin: 30px auto;" class="code-block-container code-block-live"><div class="css-1cvb758"><div class="css-1s1lac9"><div class="css-1uorqld"><div class="css-1xzghkg"><button class="css-1y5ulpa">Copy</button></div><div class="css-i7rnhw"><div class="css-1y4o4pq"><content-area class="css-84ojsb"><pre autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" class="
							language-jsx live
							css-1ashatc
						"><div class="
				prism-line
				css-1flouoi
			" data-index="0"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>renderer<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@b9g/crank/dom&quot;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="1"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="2"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">Delay</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>message<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="3"><code>  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="4"><code>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span><span class="token punctuation">{</span>message<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="5"><code><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="6"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="7"><code><span class="token keyword">const</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="8"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="9"><code><span class="token comment">// Run 1 starts immediately</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="10"><code><span class="token keyword">await</span> renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Delay message<span class="token operator">=</span><span class="token string">&quot;Run 1&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> root<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="11"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="12"><code><span class="token comment">// Run 2 starts; Runs 3 and 4 are enqueued behind it</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="13"><code>renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Delay message<span class="token operator">=</span><span class="token string">&quot;Run 2&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> root<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="14"><code>renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Delay message<span class="token operator">=</span><span class="token string">&quot;Run 3&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> root<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="15"><code><span class="token keyword">await</span> renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Delay message<span class="token operator">=</span><span class="token string">&quot;Run 4&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> root<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="16"><code><span class="token comment">// Run 3 was skipped ‚Äî only Run 4 ran after Run 2.</span></code><br></div></pre></content-area></div></div></div><div class="css-37p1l2"><div class="css-rp15d"><div class="css-1j6wuma css-fxcfu0"><iframe class="
							playground-iframe
							css-hjkbgb
						" style="min-height: 100px;"></iframe></div></div></div></div></div><script data-name="inline-code-block-props-136" class="props">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['inline-code-block-props-136'] = {"code":"import {renderer} from \"@b9g\u002Fcrank\u002Fdom\";\n\nasync function Delay({message}) {\n  await new Promise((r) =\u003E setTimeout(r, 1000));\n  return \u003Cdiv\u003E{message}\u003C\u002Fdiv\u003E;\n}\n\nconst root = document.body.appendChild(document.createElement(\"div\"));\n\n\u002F\u002F Run 1 starts immediately\nawait renderer.render(\u003CDelay message=\"Run 1\" \u002F\u003E, root);\n\n\u002F\u002F Run 2 starts; Runs 3 and 4 are enqueued behind it\nrenderer.render(\u003CDelay message=\"Run 2\" \u002F\u003E, root);\nrenderer.render(\u003CDelay message=\"Run 3\" \u002F\u003E, root);\nawait renderer.render(\u003CDelay message=\"Run 4\" \u002F\u003E, root);\n\u002F\u002F Run 3 was skipped ‚Äî only Run 4 ran after Run 2.","lang":"jsx live"};
		</script></div><h3 id="racing">Racing <a class="heading-anchor" href="#racing">#</a></h3><p>If two different async components are rendered in the same position, the components are raced. If the earlier component fulfills first, it shows until the later component fulfills. If the later component fulfills first, the earlier component is never rendered.</p><p>Try flipping the order of the two render calls below and watch the behavior change.</p><div style="margin: 30px auto;" class="code-block-container code-block-live"><div class="css-1cvb758"><div class="css-1s1lac9"><div class="css-1uorqld"><div class="css-1xzghkg"><button class="css-1y5ulpa">Copy</button></div><div class="css-i7rnhw"><div class="css-1y4o4pq"><content-area class="css-84ojsb"><pre autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" class="
							language-jsx live
							css-1ashatc
						"><div class="
				prism-line
				css-1flouoi
			" data-index="0"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>renderer<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@b9g/crank/dom&quot;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="1"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="2"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">Fast</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="3"><code>  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="4"><code>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>Fast<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="5"><code><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="6"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="7"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">Slow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="8"><code>  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="9"><code>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>span<span class="token operator">&gt;</span>Slow<span class="token operator">&lt;</span><span class="token operator">/</span>span<span class="token operator">&gt;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="10"><code><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="11"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="12"><code><span class="token comment">// TODO: flip the order of these calls and watch the behavior.</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="13"><code>renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Fast <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="14"><code>renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Slow <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div></pre></content-area></div></div></div><div class="css-37p1l2"><div class="css-rp15d"><div class="css-1j6wuma css-fxcfu0"><iframe class="
							playground-iframe
							css-hjkbgb
						" style="min-height: 100px;"></iframe></div></div></div></div></div><script data-name="inline-code-block-props-137" class="props">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['inline-code-block-props-137'] = {"code":"import {renderer} from \"@b9g\u002Fcrank\u002Fdom\";\n\nasync function Fast() {\n  await new Promise((resolve) =\u003E setTimeout(resolve, 1000));\n  return \u003Cspan\u003EFast\u003C\u002Fspan\u003E;\n}\n\nasync function Slow() {\n  await new Promise((resolve) =\u003E setTimeout(resolve, 2000));\n  return \u003Cspan\u003ESlow\u003C\u002Fspan\u003E;\n}\n\n\u002F\u002F TODO: flip the order of these calls and watch the behavior.\nrenderer.render(\u003CFast \u002F\u003E, document.body);\nrenderer.render(\u003CSlow \u002F\u003E, document.body);","lang":"jsx live"};
		</script></div><p>As we‚Äôll see later, this ‚Äúratcheting‚Äù effect becomes useful for rendering loading indicators or placeholders for more responsive UIs.</p><h2 id="async-generator-components">Async Generator Components <a class="heading-anchor" href="#async-generator-components">#</a></h2><p>Just as you can write stateful components with sync generator functions, you
can also write stateful async components with async generator functions. Async
generator components work just like sync generator components when using
<code class="inline">for...of</code> loops, to allow easy refactoring between sync and async.</p><div style="margin: 30px auto;" class="code-block-container code-block-live"><div class="css-1cvb758"><div class="css-1s1lac9"><div class="css-1uorqld"><div class="css-1xzghkg"><button class="css-1y5ulpa">Copy</button></div><div class="css-i7rnhw"><div class="css-1y4o4pq"><content-area class="css-84ojsb"><pre autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" class="
							language-jsx live
							css-1ashatc
						"><div class="
				prism-line
				css-1flouoi
			" data-index="0"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>renderer<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@b9g/crank/dom&quot;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="1"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">AsyncCounter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="2"><code>  <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="3"><code>  <span class="token keyword">const</span> <span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> count<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="4"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="5"><code>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="6"><code>    <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">r</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>r<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="7"><code>    <span class="token keyword">yield</span> <span class="token punctuation">(</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="8"><code>      <span class="token operator">&lt;</span>button onclick<span class="token operator">=</span><span class="token punctuation">{</span>onclick<span class="token punctuation">}</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="9"><code>        Button pressed <span class="token punctuation">{</span>count<span class="token punctuation">}</span> time<span class="token punctuation">{</span>count <span class="token operator">!==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> <span class="token string">&quot;s&quot;</span><span class="token punctuation">}</span><span class="token punctuation">.</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="10"><code>      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="11"><code>    <span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="12"><code>  <span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="13"><code><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="14"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="15"><code>renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>AsyncCounter <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div></pre></content-area></div></div></div><div class="css-37p1l2"><div class="css-rp15d"><div class="css-1j6wuma css-fxcfu0"><iframe class="
							playground-iframe
							css-hjkbgb
						" style="min-height: 100px;"></iframe></div></div></div></div></div><script data-name="inline-code-block-props-138" class="props">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['inline-code-block-props-138'] = {"code":"import {renderer} from \"@b9g\u002Fcrank\u002Fdom\";\nasync function *AsyncCounter() {\n  let count = 0;\n  const onclick = () =\u003E this.refresh(() =\u003E count++);\n\n  for ({} of this) {\n    await new Promise((r) =\u003E setTimeout(r, 1000));\n    yield (\n      \u003Cbutton onclick={onclick}\u003E\n        Button pressed {count} time{count !== 1 && \"s\"}.\n      \u003C\u002Fbutton\u003E\n    );\n  }\n}\n\nrenderer.render(\u003CAsyncCounter \u002F\u003E, document.body);","lang":"jsx live"};
		</script></div><p>Async generator components have the same queuing and racing behavior as async
function components, but they can additionally keep state in scope like
generator components.</p><h2 id="racing-components">Racing Components <a class="heading-anchor" href="#racing-components">#</a></h2><p>The async components we‚Äôve seen so far have been all or nothing, in the sense that nothing is rendered until the components have fulfilled. Nevertheless, it is often useful to show loading indicators or placeholders while these promises are pending, which appear only if a pending render is taking too long. In Crank, we do this by racing async components. Async components can be raced within an async generator component using the context as an async iterator (<code class="inline">for await...of</code>). By using an async iterator rather than the iterator, you can render multiple times for each update. This is possible because the update suspends and resumes based on the loop and not at each yield.</p><div style="margin: 30px auto;" class="code-block-container code-block-live"><div class="css-1cvb758"><div class="css-1s1lac9"><div class="css-1uorqld"><div class="css-1xzghkg"><button class="css-1y5ulpa">Copy</button></div><div class="css-i7rnhw"><div class="css-1y4o4pq"><content-area class="css-84ojsb"><pre autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" class="
							language-jsx live
							css-1ashatc
						"><div class="
				prism-line
				css-1flouoi
			" data-index="0"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>Fragment<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@b9g/crank&quot;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="1"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>renderer<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@b9g/crank/dom&quot;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="2"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="3"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">LoadingIndicator</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="4"><code>  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="5"><code>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Fetching a good boy<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="6"><code><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="7"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="8"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">RandomDog</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>throttle <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="9"><code>  <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">&quot;https://dog.ceo/api/breeds/image/random&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="10"><code>  <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">await</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="11"><code>  <span class="token keyword">if</span> <span class="token punctuation">(</span>throttle<span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="12"><code>    <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="13"><code>  <span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="14"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="15"><code>  <span class="token keyword">return</span> <span class="token punctuation">(</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="16"><code>    <span class="token operator">&lt;</span>a href<span class="token operator">=</span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>message<span class="token punctuation">}</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="17"><code>      <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span>data<span class="token punctuation">.</span>message<span class="token punctuation">}</span> alt<span class="token operator">=</span><span class="token string">&quot;A Random Dog&quot;</span> width<span class="token operator">=</span><span class="token string">&quot;300&quot;</span> <span class="token operator">/</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="18"><code>    <span class="token operator">&lt;</span><span class="token operator">/</span>a<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="19"><code>  <span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="20"><code><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="21"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="22"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">RandomDogLoader</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>throttle<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="23"><code>  <span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>throttle<span class="token punctuation">}</span> <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="24"><code>    <span class="token keyword">yield</span> <span class="token operator">&lt;</span>LoadingIndicator <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="25"><code>    <span class="token keyword">yield</span> <span class="token operator">&lt;</span>RandomDog throttle<span class="token operator">=</span><span class="token punctuation">{</span>throttle<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="26"><code>  <span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="27"><code><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="28"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="29"><code><span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">RandomDogApp</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="30"><code>  <span class="token keyword">let</span> throttle <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="31"><code>  <span class="token keyword">const</span> <span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> throttle <span class="token operator">=</span> <span class="token operator">!</span>throttle<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="32"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="33"><code>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="34"><code>    <span class="token keyword">yield</span> <span class="token punctuation">(</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="35"><code>      <span class="token operator">&lt;</span>Fragment<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="36"><code>        <span class="token operator">&lt;</span>RandomDogLoader throttle<span class="token operator">=</span><span class="token punctuation">{</span>throttle<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="37"><code>        <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="38"><code>          <span class="token operator">&lt;</span>button onclick<span class="token operator">=</span><span class="token punctuation">{</span>onclick<span class="token punctuation">}</span><span class="token operator">&gt;</span>Show me another dog<span class="token punctuation">.</span><span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="39"><code>        <span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="40"><code>      <span class="token operator">&lt;</span><span class="token operator">/</span>Fragment<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="41"><code>    <span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="42"><code>  <span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="43"><code><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="44"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="45"><code>renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>RandomDogApp <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div></pre></content-area></div></div></div><div class="css-37p1l2"><div class="css-rp15d"><div class="css-1j6wuma css-fxcfu0"><iframe class="
							playground-iframe
							css-hjkbgb
						" style="min-height: 100px;"></iframe></div></div></div></div></div><script data-name="inline-code-block-props-139" class="props">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['inline-code-block-props-139'] = {"code":"import {Fragment} from \"@b9g\u002Fcrank\";\nimport {renderer} from \"@b9g\u002Fcrank\u002Fdom\";\n\nasync function LoadingIndicator() {\n  await new Promise(resolve =\u003E setTimeout(resolve, 1000));\n  return \u003Cdiv\u003EFetching a good boy...\u003C\u002Fdiv\u003E;\n}\n\nasync function RandomDog({throttle = false}) {\n  const res = await fetch(\"https:\u002F\u002Fdog.ceo\u002Fapi\u002Fbreeds\u002Fimage\u002Frandom\");\n  const data = await res.json();\n  if (throttle) {\n    await new Promise(resolve =\u003E setTimeout(resolve, 2000));\n  }\n\n  return (\n    \u003Ca href={data.message}\u003E\n      \u003Cimg src={data.message} alt=\"A Random Dog\" width=\"300\" \u002F\u003E\n    \u003C\u002Fa\u003E\n  );\n}\n\nasync function *RandomDogLoader({throttle}) {\n  for await ({throttle} of this) {\n    yield \u003CLoadingIndicator \u002F\u003E;\n    yield \u003CRandomDog throttle={throttle} \u002F\u003E;\n  }\n}\n\nfunction *RandomDogApp() {\n  let throttle = false;\n  const onclick = () =\u003E this.refresh(() =\u003E throttle = !throttle);\n\n  for ({} of this) {\n    yield (\n      \u003CFragment\u003E\n        \u003CRandomDogLoader throttle={throttle} \u002F\u003E\n        \u003Cp\u003E\n          \u003Cbutton onclick={onclick}\u003EShow me another dog.\u003C\u002Fbutton\u003E\n        \u003C\u002Fp\u003E\n      \u003C\u002FFragment\u003E\n    );\n  }\n}\n\nrenderer.render(\u003CRandomDogApp \u002F\u003E, document.body);","lang":"jsx live"};
		</script></div><p>In this example, the <code class="inline">&lt;RandomDogLoader&gt;</code> component is an async generator component which races the <code class="inline">&lt;LoadingIndicator&gt;</code> component with the <code class="inline">&lt;RandomDog&gt;</code> component. Because the async generator component resumes continuously, both components are rendered, and according to the second rule of async components, the loading indicator only shows if the <code class="inline">&lt;RandomDog&gt;</code> component takes longer than the <code class="inline">&lt;LoadingIndicator&gt;</code> component, which fulfills at a fixed interval of one second.</p><p>The preceding example hints at how we could abstract this pattern to implement the <code class="inline">Suspense</code> component from React.</p><div style="margin: 30px auto;" class="code-block-container "><div class="css-1vm8pxc"><div class="css-1s1lac9"><div class="css-1lyfw13"><div class="css-1xzghkg"><button class="css-1y5ulpa">Copy</button></div><div class="css-i7rnhw"><div class="css-1y4o4pq"><content-area class="css-84ojsb"><pre autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" class="
							language-jsx
							css-1ashatc
						"><div class="
				prism-line
				css-1flouoi
			" data-index="0"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">Fallback</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>timeout <span class="token operator">=</span> <span class="token number">1000</span><span class="token punctuation">,</span> children<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="1"><code>  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> timeout<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="2"><code>  <span class="token keyword">return</span> children<span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="3"><code><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="4"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="5"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">Suspense</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>timeout<span class="token punctuation">,</span> fallback<span class="token punctuation">,</span> children<span class="token punctuation">}</span><span class="token punctuation">,</span> ctx</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="6"><code>  <span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>timeout<span class="token punctuation">,</span> fallback<span class="token punctuation">,</span> children<span class="token punctuation">}</span> <span class="token keyword">of</span> ctx<span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="7"><code>    <span class="token keyword">yield</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Fallback</span></span> <span class="token attr-name">timeout</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>timeout<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>fallback<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Fallback</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="8"><code>    <span class="token keyword">yield</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="9"><code>  <span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="10"><code><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="11"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="12"><code><span class="token keyword">await</span> renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="13"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Suspense</span></span> <span class="token attr-name">fallback</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Spinner</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="14"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ProfilePage</span></span> <span class="token punctuation">/&gt;</span></span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="15"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Suspense</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">,</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="16"><code>  document<span class="token punctuation">.</span>body<span class="token punctuation">,</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="17"><code><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div></pre></content-area></div></div></div></div></div><script data-name="inline-code-block-props-140" class="props">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['inline-code-block-props-140'] = {"code":"async function Fallback({timeout = 1000, children}) {\n  await new Promise((resolve) =\u003E setTimeout(resolve, timeout));\n  return children;\n}\n\nasync function *Suspense({timeout, fallback, children}, ctx) {\n  for await ({timeout, fallback, children} of ctx) {\n    yield \u003CFallback timeout={timeout}\u003E{fallback}\u003C\u002FFallback\u003E;\n    yield \u003CFragment\u003E{children}\u003C\u002FFragment\u003E;\n  }\n}\n\nawait renderer.render(\n  \u003CSuspense fallback={\u003CSpinner \u002F\u003E}\u003E\n    \u003CProfilePage \u002F\u003E\n  \u003C\u002FSuspense\u003E,\n  document.body,\n);","lang":"jsx"};
		</script></div><p>No special tags are needed for async loading states, and the functionality to write this logic is implemented using the same element diffing algorithm that governs synchronous components and DOM elements. Additionally, this approach is more flexible in the sense that you can extend it. For instance, you can add another yield to the <code class="inline">for await...of</code> loop to show a second fallback state which waits ten seconds, to inform the user that something went wrong or that servers are slow to respond.</p><h2 id="the-async-module">The Async Module <a class="heading-anchor" href="#the-async-module">#</a></h2><p>Starting in Crank 0.7, async components received a major overhaul with a two-pass rendering architecture that enables powerful patterns like racing components and cooperative rendering. To support these patterns, Crank provides an <code class="inline">async</code> module with utilities for working with async components.</p><div style="margin: 30px auto;" class="code-block-container "><div class="css-1vm8pxc"><div class="css-1s1lac9"><div class="css-1lyfw13"><div class="css-1xzghkg"><button class="css-1y5ulpa">Copy</button></div><div class="css-i7rnhw"><div class="css-1y4o4pq"><content-area class="css-84ojsb"><pre autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" class="
							language-jsx
							css-1ashatc
						"><div class="
				prism-line
				css-1flouoi
			" data-index="0"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>Suspense<span class="token punctuation">,</span> SuspenseList<span class="token punctuation">,</span> lazy<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@b9g/crank/async&quot;</span><span class="token punctuation">;</span></code><br></div></pre></content-area></div></div></div></div></div><script data-name="inline-code-block-props-141" class="props">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['inline-code-block-props-141'] = {"code":"import {Suspense, SuspenseList, lazy} from \"@b9g\u002Fcrank\u002Fasync\";","lang":"jsx"};
		</script></div><h3 id="suspense-loading-states">Suspense: Loading States <a class="heading-anchor" href="#suspense-loading-states">#</a></h3><p>The <code class="inline">Suspense</code> component provides declarative loading states for async components:</p><div style="margin: 30px auto;" class="code-block-container code-block-live"><div class="css-1cvb758"><div class="css-1s1lac9"><div class="css-1uorqld"><div class="css-1xzghkg"><button class="css-1y5ulpa">Copy</button></div><div class="css-i7rnhw"><div class="css-1y4o4pq"><content-area class="css-84ojsb"><pre autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" class="
							language-jsx live
							css-1ashatc
						"><div class="
				prism-line
				css-1flouoi
			" data-index="0"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>Suspense<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@b9g/crank/async&quot;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="1"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>renderer<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@b9g/crank/dom&quot;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="2"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="3"><code><span class="token comment">// Simulate async data fetching</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="4"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">UserProfile</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>userId<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="5"><code>  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="6"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="7"><code>  <span class="token keyword">return</span> <span class="token punctuation">(</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="8"><code>    <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token string">&quot;15px&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">background</span><span class="token operator">:</span> <span class="token string">&quot;#e7f3ff&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;#333&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;border-radius&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4px&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="9"><code>      <span class="token operator">&lt;</span>h4<span class="token operator">&gt;</span>User #<span class="token punctuation">{</span>userId<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h4<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="10"><code>      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Email<span class="token operator">:</span> user<span class="token punctuation">{</span>userId<span class="token punctuation">}</span>@example<span class="token punctuation">.</span>com<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="11"><code>      <span class="token operator">&lt;</span>p<span class="token operator">&gt;</span>Status<span class="token operator">:</span> Active<span class="token operator">&lt;</span><span class="token operator">/</span>p<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="12"><code>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="13"><code>  <span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="14"><code><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="15"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="16"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">UserPosts</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>userId<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="17"><code>  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="18"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="19"><code>  <span class="token keyword">return</span> <span class="token punctuation">(</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="20"><code>    <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token string">&quot;15px&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">background</span><span class="token operator">:</span> <span class="token string">&quot;#f0f8f0&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;#333&quot;</span><span class="token punctuation">,</span> <span class="token string-property property">&quot;border-radius&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4px&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="21"><code>      <span class="token operator">&lt;</span>h4<span class="token operator">&gt;</span>Recent Posts<span class="token operator">&lt;</span><span class="token operator">/</span>h4<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="22"><code>      <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="23"><code>        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>Post <span class="token number">1</span> by User #<span class="token punctuation">{</span>userId<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="24"><code>        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>Post <span class="token number">2</span> by User #<span class="token punctuation">{</span>userId<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="25"><code>        <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span>Post <span class="token number">3</span> by User #<span class="token punctuation">{</span>userId<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="26"><code>      <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="27"><code>    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="28"><code>  <span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="29"><code><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="30"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="31"><code><span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">SuspenseDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="32"><code>  <span class="token keyword">let</span> userId <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="33"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="34"><code>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="35"><code>    <span class="token keyword">yield</span> <span class="token punctuation">(</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="36"><code>      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="37"><code>        <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>Suspense Demo<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="38"><code>        <span class="token operator">&lt;</span>button onclick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> userId<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="39"><code>          Load User #<span class="token punctuation">{</span>userId <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="40"><code>        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="41"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="42"><code>        <span class="token operator">&lt;</span>Suspense fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Loading user profile<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="43"><code>          <span class="token operator">&lt;</span>UserProfile userId<span class="token operator">=</span><span class="token punctuation">{</span>userId<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="44"><code>        <span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="45"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="46"><code>        <span class="token operator">&lt;</span>Suspense fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Loading user posts<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="47"><code>          <span class="token operator">&lt;</span>UserPosts userId<span class="token operator">=</span><span class="token punctuation">{</span>userId<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="48"><code>        <span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="49"><code>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="50"><code>    <span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="51"><code>  <span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="52"><code><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="53"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="54"><code>renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>SuspenseDemo <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div></pre></content-area></div></div></div><div class="css-37p1l2"><div class="css-rp15d"><div class="css-1j6wuma css-fxcfu0"><iframe class="
							playground-iframe
							css-hjkbgb
						" style="min-height: 100px;"></iframe></div></div></div></div></div><script data-name="inline-code-block-props-142" class="props">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['inline-code-block-props-142'] = {"code":"import {Suspense} from \"@b9g\u002Fcrank\u002Fasync\";\nimport {renderer} from \"@b9g\u002Fcrank\u002Fdom\";\n\n\u002F\u002F Simulate async data fetching\nasync function UserProfile({userId}) {\n  await new Promise(resolve =\u003E setTimeout(resolve, 1500));\n\n  return (\n    \u003Cdiv style={{padding: \"15px\", background: \"#e7f3ff\", color: \"#333\", \"border-radius\": \"4px\"}}\u003E\n      \u003Ch4\u003EUser #{userId}\u003C\u002Fh4\u003E\n      \u003Cp\u003EEmail: user{userId}@example.com\u003C\u002Fp\u003E\n      \u003Cp\u003EStatus: Active\u003C\u002Fp\u003E\n    \u003C\u002Fdiv\u003E\n  );\n}\n\nasync function UserPosts({userId}) {\n  await new Promise(resolve =\u003E setTimeout(resolve, 2000));\n\n  return (\n    \u003Cdiv style={{padding: \"15px\", background: \"#f0f8f0\", color: \"#333\", \"border-radius\": \"4px\"}}\u003E\n      \u003Ch4\u003ERecent Posts\u003C\u002Fh4\u003E\n      \u003Cul\u003E\n        \u003Cli\u003EPost 1 by User #{userId}\u003C\u002Fli\u003E\n        \u003Cli\u003EPost 2 by User #{userId}\u003C\u002Fli\u003E\n        \u003Cli\u003EPost 3 by User #{userId}\u003C\u002Fli\u003E\n      \u003C\u002Ful\u003E\n    \u003C\u002Fdiv\u003E\n  );\n}\n\nfunction *SuspenseDemo() {\n  let userId = 1;\n\n  for ({} of this) {\n    yield (\n      \u003Cdiv\u003E\n        \u003Ch3\u003ESuspense Demo\u003C\u002Fh3\u003E\n        \u003Cbutton onclick={() =\u003E this.refresh(() =\u003E userId++)}\u003E\n          Load User #{userId + 1}\n        \u003C\u002Fbutton\u003E\n\n        \u003CSuspense fallback={\u003Cdiv\u003ELoading user profile...\u003C\u002Fdiv\u003E}\u003E\n          \u003CUserProfile userId={userId} \u002F\u003E\n        \u003C\u002FSuspense\u003E\n\n        \u003CSuspense fallback={\u003Cdiv\u003ELoading user posts...\u003C\u002Fdiv\u003E}\u003E\n          \u003CUserPosts userId={userId} \u002F\u003E\n        \u003C\u002FSuspense\u003E\n      \u003C\u002Fdiv\u003E\n    );\n  }\n}\n\nrenderer.render(\u003CSuspenseDemo \u002F\u003E, document.body);","lang":"jsx live"};
		</script></div><p><strong>Suspense Features:</strong></p><ul><li><strong>Timeout support</strong>: <code class="inline">&lt;Suspense timeout={100}&gt;</code> delays fallback display</li><li><strong>Nested suspense</strong>: Multiple levels of loading states</li><li><strong>Error boundaries</strong>: Catches async component errors</li></ul><h3 id="lazy-code-splitting">lazy(): Code Splitting <a class="heading-anchor" href="#lazy-code-splitting">#</a></h3><p>The <code class="inline">lazy()</code> function creates components that load on first render, making it easy to split code by route or feature:</p><div style="margin: 30px auto;" class="code-block-container "><div class="css-1vm8pxc"><div class="css-1s1lac9"><div class="css-1lyfw13"><div class="css-1xzghkg"><button class="css-1y5ulpa">Copy</button></div><div class="css-i7rnhw"><div class="css-1y4o4pq"><content-area class="css-84ojsb"><pre autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" class="
							language-jsx
							css-1ashatc
						"><div class="
				prism-line
				css-1flouoi
			" data-index="0"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>lazy<span class="token punctuation">,</span> Suspense<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@b9g/crank/async&quot;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="1"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="2"><code><span class="token keyword">const</span> HomePage <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./pages/Home&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="3"><code><span class="token keyword">const</span> AboutPage <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./pages/About&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="4"><code><span class="token keyword">const</span> ContactPage <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&quot;./pages/Contact&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="5"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="6"><code><span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="7"><code>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>route<span class="token punctuation">}</span> <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="8"><code>    <span class="token keyword">yield</span> <span class="token punctuation">(</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="9"><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Suspense</span></span> <span class="token attr-name">fallback</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>Loading<span class="token operator">...</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="10"><code>        <span class="token punctuation">{</span>route <span class="token operator">===</span> <span class="token string">&quot;home&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">HomePage</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="11"><code>        <span class="token punctuation">{</span>route <span class="token operator">===</span> <span class="token string">&quot;about&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">AboutPage</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="12"><code>        <span class="token punctuation">{</span>route <span class="token operator">===</span> <span class="token string">&quot;contact&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ContactPage</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="13"><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Suspense</span></span><span class="token punctuation">&gt;</span></span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="14"><code>    <span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="15"><code>  <span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="16"><code><span class="token punctuation">}</span></code><br></div></pre></content-area></div></div></div></div></div><script data-name="inline-code-block-props-143" class="props">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['inline-code-block-props-143'] = {"code":"import {lazy, Suspense} from \"@b9g\u002Fcrank\u002Fasync\";\n\nconst HomePage = lazy(() =\u003E import(\".\u002Fpages\u002FHome\"));\nconst AboutPage = lazy(() =\u003E import(\".\u002Fpages\u002FAbout\"));\nconst ContactPage = lazy(() =\u003E import(\".\u002Fpages\u002FContact\"));\n\nfunction *Router() {\n  for ({route} of this) {\n    yield (\n      \u003CSuspense fallback={\u003Cdiv\u003ELoading...\u003C\u002Fdiv\u003E}\u003E\n        {route === \"home\" && \u003CHomePage \u002F\u003E}\n        {route === \"about\" && \u003CAboutPage \u002F\u003E}\n        {route === \"contact\" && \u003CContactPage \u002F\u003E}\n      \u003C\u002FSuspense\u003E\n    );\n  }\n}","lang":"jsx"};
		</script></div><p>The initializer is called once, and <code class="inline">lazy()</code> handles both direct component exports and modules with a <code class="inline">default</code> export.</p><h3 id="suspenselist-coordinated-loading">SuspenseList: Coordinated Loading <a class="heading-anchor" href="#suspenselist-coordinated-loading">#</a></h3><p><code class="inline">SuspenseList</code> coordinates multiple suspense boundaries for better UX:</p><div style="margin: 30px auto;" class="code-block-container code-block-live"><div class="css-1cvb758"><div class="css-1s1lac9"><div class="css-1uorqld"><div class="css-1xzghkg"><button class="css-1y5ulpa">Copy</button></div><div class="css-i7rnhw"><div class="css-1y4o4pq"><content-area class="css-84ojsb"><pre autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" class="
							language-jsx live
							css-1ashatc
						"><div class="
				prism-line
				css-1flouoi
			" data-index="0"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>Suspense<span class="token punctuation">,</span> SuspenseList<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@b9g/crank/async&quot;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="1"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>renderer<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@b9g/crank/dom&quot;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="2"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="3"><code><span class="token comment">// Components with different loading times</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="4"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">FastComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="5"><code>  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="6"><code>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token string">&quot;10px&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">background</span><span class="token operator">:</span> <span class="token string">&quot;#d4edda&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;#333&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token function">Fast</span> <span class="token punctuation">(</span>500ms<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="7"><code><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="8"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="9"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">MediumComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="10"><code>  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">1500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="11"><code>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token string">&quot;10px&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">background</span><span class="token operator">:</span> <span class="token string">&quot;#fff3cd&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;#333&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token function">Medium</span> <span class="token punctuation">(</span>1500ms<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="12"><code><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="13"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="14"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">SlowComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="15"><code>  <span class="token keyword">await</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> <span class="token number">2500</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="16"><code>  <span class="token keyword">return</span> <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">padding</span><span class="token operator">:</span> <span class="token string">&quot;10px&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">background</span><span class="token operator">:</span> <span class="token string">&quot;#f8d7da&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">&quot;#333&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token function">Slow</span> <span class="token punctuation">(</span>2500ms<span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="17"><code><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="18"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="19"><code><span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">SuspenseListDemo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="20"><code>  <span class="token keyword">let</span> revealOrder <span class="token operator">=</span> <span class="token string">&quot;forwards&quot;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="21"><code>  <span class="token keyword">let</span> tail <span class="token operator">=</span> <span class="token string">&quot;collapsed&quot;</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="22"><code>  <span class="token keyword">let</span> key <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="23"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="24"><code>  <span class="token keyword">const</span> orders <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;forwards&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;backwards&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;together&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="25"><code>  <span class="token keyword">const</span> tails <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&quot;collapsed&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;hidden&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="26"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="27"><code>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="28"><code>    <span class="token keyword">yield</span> <span class="token punctuation">(</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="29"><code>      <span class="token operator">&lt;</span>div<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="30"><code>        <span class="token operator">&lt;</span>h3<span class="token operator">&gt;</span>SuspenseList Demo<span class="token operator">&lt;</span><span class="token operator">/</span>h3<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="31"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="32"><code>        <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token string-property property">&quot;margin-bottom&quot;</span><span class="token operator">:</span> <span class="token string">&quot;20px&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="33"><code>          <span class="token operator">&lt;</span>label<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="34"><code>            Reveal Order<span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot; &quot;</span><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="35"><code>            <span class="token operator">&lt;</span>select</code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="36"><code>              value<span class="token operator">=</span><span class="token punctuation">{</span>revealOrder<span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="37"><code>              onchange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="38"><code>                revealOrder <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="39"><code>                key<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">// Increment key to force new SuspenseList</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="40"><code>              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="41"><code>            <span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="42"><code>              <span class="token punctuation">{</span>orders<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">order</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token punctuation">{</span>order<span class="token punctuation">}</span> key<span class="token operator">=</span><span class="token punctuation">{</span>order<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>order<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="43"><code>            <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="44"><code>          <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="45"><code>          <span class="token punctuation">{</span><span class="token string">&quot; &quot;</span><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="46"><code>          <span class="token operator">&lt;</span>label<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="47"><code>            <span class="token literal-property property">Tail</span><span class="token operator">:</span><span class="token punctuation">{</span><span class="token string">&quot; &quot;</span><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="48"><code>            <span class="token operator">&lt;</span>select</code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="49"><code>              value<span class="token operator">=</span><span class="token punctuation">{</span>tail<span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="50"><code>              onchange<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="51"><code>                tail <span class="token operator">=</span> e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>value<span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="52"><code>                key<span class="token operator">++</span><span class="token punctuation">;</span> <span class="token comment">// Increment key to force new SuspenseList</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="53"><code>              <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="54"><code>            <span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="55"><code>              <span class="token punctuation">{</span>tails<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token operator">&lt;</span>option value<span class="token operator">=</span><span class="token punctuation">{</span>t<span class="token punctuation">}</span> key<span class="token operator">=</span><span class="token punctuation">{</span>t<span class="token punctuation">}</span><span class="token operator">&gt;</span><span class="token punctuation">{</span>t<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>option<span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="56"><code>            <span class="token operator">&lt;</span><span class="token operator">/</span>select<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="57"><code>          <span class="token operator">&lt;</span><span class="token operator">/</span>label<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="58"><code>        <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="59"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="60"><code>        <span class="token operator">&lt;</span>SuspenseList key<span class="token operator">=</span><span class="token punctuation">{</span>key<span class="token punctuation">}</span> revealOrder<span class="token operator">=</span><span class="token punctuation">{</span>revealOrder<span class="token punctuation">}</span> tail<span class="token operator">=</span><span class="token punctuation">{</span>tail<span class="token punctuation">}</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="61"><code>          <span class="token operator">&lt;</span>Suspense fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Loading fast<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="62"><code>            <span class="token operator">&lt;</span>FastComponent <span class="token operator">/</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="63"><code>          <span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="64"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="65"><code>          <span class="token operator">&lt;</span>div style<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token literal-property property">margin</span><span class="token operator">:</span> <span class="token string">&quot;10px 0&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="66"><code>            <span class="token operator">&lt;</span>Suspense fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Loading slow<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="67"><code>              <span class="token operator">&lt;</span>SlowComponent <span class="token operator">/</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="68"><code>            <span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="69"><code>          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="70"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="71"><code>          <span class="token operator">&lt;</span>Suspense fallback<span class="token operator">=</span><span class="token punctuation">{</span><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>Loading medium<span class="token operator">...</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span><span class="token punctuation">}</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="72"><code>            <span class="token operator">&lt;</span>MediumComponent <span class="token operator">/</span><span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="73"><code>          <span class="token operator">&lt;</span><span class="token operator">/</span>Suspense<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="74"><code>        <span class="token operator">&lt;</span><span class="token operator">/</span>SuspenseList<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="75"><code>      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="76"><code>    <span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="77"><code>  <span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="78"><code><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="79"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="80"><code>renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>SuspenseListDemo <span class="token operator">/</span><span class="token operator">&gt;</span><span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div></pre></content-area></div></div></div><div class="css-37p1l2"><div class="css-rp15d"><div class="css-1j6wuma css-fxcfu0"><iframe class="
							playground-iframe
							css-hjkbgb
						" style="min-height: 100px;"></iframe></div></div></div></div></div><script data-name="inline-code-block-props-144" class="props">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['inline-code-block-props-144'] = {"code":"import {Suspense, SuspenseList} from \"@b9g\u002Fcrank\u002Fasync\";\nimport {renderer} from \"@b9g\u002Fcrank\u002Fdom\";\n\n\u002F\u002F Components with different loading times\nasync function FastComponent() {\n  await new Promise(resolve =\u003E setTimeout(resolve, 500));\n  return \u003Cdiv style={{padding: \"10px\", background: \"#d4edda\", color: \"#333\"}}\u003EFast (500ms)\u003C\u002Fdiv\u003E;\n}\n\nasync function MediumComponent() {\n  await new Promise(resolve =\u003E setTimeout(resolve, 1500));\n  return \u003Cdiv style={{padding: \"10px\", background: \"#fff3cd\", color: \"#333\"}}\u003EMedium (1500ms)\u003C\u002Fdiv\u003E;\n}\n\nasync function SlowComponent() {\n  await new Promise(resolve =\u003E setTimeout(resolve, 2500));\n  return \u003Cdiv style={{padding: \"10px\", background: \"#f8d7da\", color: \"#333\"}}\u003ESlow (2500ms)\u003C\u002Fdiv\u003E;\n}\n\nfunction *SuspenseListDemo() {\n  let revealOrder = \"forwards\";\n  let tail = \"collapsed\";\n  let key = 0;\n\n  const orders = [\"forwards\", \"backwards\", \"together\"];\n  const tails = [\"collapsed\", \"hidden\"];\n\n  for ({} of this) {\n    yield (\n      \u003Cdiv\u003E\n        \u003Ch3\u003ESuspenseList Demo\u003C\u002Fh3\u003E\n\n        \u003Cdiv style={{\"margin-bottom\": \"20px\"}}\u003E\n          \u003Clabel\u003E\n            Reveal Order:{\" \"}\n            \u003Cselect\n              value={revealOrder}\n              onchange={(e) =\u003E this.refresh(() =\u003E {\n                revealOrder = e.target.value;\n                key++; \u002F\u002F Increment key to force new SuspenseList\n              })}\n            \u003E\n              {orders.map(order =\u003E \u003Coption value={order} key={order}\u003E{order}\u003C\u002Foption\u003E)}\n            \u003C\u002Fselect\u003E\n          \u003C\u002Flabel\u003E\n          {\" \"}\n          \u003Clabel\u003E\n            Tail:{\" \"}\n            \u003Cselect\n              value={tail}\n              onchange={(e) =\u003E this.refresh(() =\u003E {\n                tail = e.target.value;\n                key++; \u002F\u002F Increment key to force new SuspenseList\n              })}\n            \u003E\n              {tails.map(t =\u003E \u003Coption value={t} key={t}\u003E{t}\u003C\u002Foption\u003E)}\n            \u003C\u002Fselect\u003E\n          \u003C\u002Flabel\u003E\n        \u003C\u002Fdiv\u003E\n\n        \u003CSuspenseList key={key} revealOrder={revealOrder} tail={tail}\u003E\n          \u003CSuspense fallback={\u003Cdiv\u003ELoading fast...\u003C\u002Fdiv\u003E}\u003E\n            \u003CFastComponent \u002F\u003E\n          \u003C\u002FSuspense\u003E\n\n          \u003Cdiv style={{margin: \"10px 0\"}}\u003E\n            \u003CSuspense fallback={\u003Cdiv\u003ELoading slow...\u003C\u002Fdiv\u003E}\u003E\n              \u003CSlowComponent \u002F\u003E\n            \u003C\u002FSuspense\u003E\n          \u003C\u002Fdiv\u003E\n\n          \u003CSuspense fallback={\u003Cdiv\u003ELoading medium...\u003C\u002Fdiv\u003E}\u003E\n            \u003CMediumComponent \u002F\u003E\n          \u003C\u002FSuspense\u003E\n        \u003C\u002FSuspenseList\u003E\n      \u003C\u002Fdiv\u003E\n    );\n  }\n}\n\nrenderer.render(\u003CSuspenseListDemo \u002F\u003E, document.body);","lang":"jsx live"};
		</script></div><p><strong>SuspenseList Features:</strong></p><p><strong>Reveal Orders:</strong></p><ul><li><code class="inline">&quot;forwards&quot;</code>: Reveal in document order (first to last)</li><li><code class="inline">&quot;backwards&quot;</code>: Reveal in reverse order (last to first)</li><li><code class="inline">&quot;together&quot;</code>: Wait for all children, then reveal simultaneously</li></ul><p><strong>Tail Behavior:</strong></p><ul><li><code class="inline">&quot;collapsed&quot;</code>: Show only the next pending fallback</li><li><code class="inline">&quot;hidden&quot;</code>: Hide all remaining fallbacks once first item loads</li></ul><h3 id="real-world-patterns">Real-world Patterns <a class="heading-anchor" href="#real-world-patterns">#</a></h3><p><strong>Dashboard with coordinated loading:</strong></p><div style="margin: 30px auto;" class="code-block-container "><div class="css-1vm8pxc"><div class="css-1s1lac9"><div class="css-1lyfw13"><div class="css-1xzghkg"><button class="css-1y5ulpa">Copy</button></div><div class="css-i7rnhw"><div class="css-1y4o4pq"><content-area class="css-84ojsb"><pre autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" class="
							language-jsx
							css-1ashatc
						"><div class="
				prism-line
				css-1flouoi
			" data-index="0"><code><span class="token keyword">function</span> <span class="token function">Dashboard</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="1"><code>  <span class="token keyword">return</span> <span class="token punctuation">(</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="2"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">SuspenseList</span></span> <span class="token attr-name">revealOrder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>forwards<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tail</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>collapsed<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="3"><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Suspense</span></span> <span class="token attr-name">fallback</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">SkeletonHeader</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="4"><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Header</span></span> <span class="token punctuation">/&gt;</span></span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="5"><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Suspense</span></span><span class="token punctuation">&gt;</span></span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="6"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="7"><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dashboard-grid<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="8"><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Suspense</span></span> <span class="token attr-name">fallback</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">SkeletonChart</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="9"><code>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">AnalyticsChart</span></span> <span class="token punctuation">/&gt;</span></span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="10"><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Suspense</span></span><span class="token punctuation">&gt;</span></span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="11"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="12"><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Suspense</span></span> <span class="token attr-name">fallback</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">SkeletonTable</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="13"><code>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">DataTable</span></span> <span class="token punctuation">/&gt;</span></span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="14"><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Suspense</span></span><span class="token punctuation">&gt;</span></span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="15"><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="16"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="17"><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Suspense</span></span> <span class="token attr-name">fallback</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">SkeletonFooter</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="18"><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Footer</span></span> <span class="token punctuation">/&gt;</span></span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="19"><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Suspense</span></span><span class="token punctuation">&gt;</span></span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="20"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">SuspenseList</span></span><span class="token punctuation">&gt;</span></span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="21"><code>  <span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="22"><code><span class="token punctuation">}</span></code><br></div></pre></content-area></div></div></div></div></div><script data-name="inline-code-block-props-145" class="props">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['inline-code-block-props-145'] = {"code":"function Dashboard() {\n  return (\n    \u003CSuspenseList revealOrder=\"forwards\" tail=\"collapsed\"\u003E\n      \u003CSuspense fallback={\u003CSkeletonHeader \u002F\u003E}\u003E\n        \u003CHeader \u002F\u003E\n      \u003C\u002FSuspense\u003E\n\n      \u003Cdiv className=\"dashboard-grid\"\u003E\n        \u003CSuspense fallback={\u003CSkeletonChart \u002F\u003E}\u003E\n          \u003CAnalyticsChart \u002F\u003E\n        \u003C\u002FSuspense\u003E\n\n        \u003CSuspense fallback={\u003CSkeletonTable \u002F\u003E}\u003E\n          \u003CDataTable \u002F\u003E\n        \u003C\u002FSuspense\u003E\n      \u003C\u002Fdiv\u003E\n\n      \u003CSuspense fallback={\u003CSkeletonFooter \u002F\u003E}\u003E\n        \u003CFooter \u002F\u003E\n      \u003C\u002FSuspense\u003E\n    \u003C\u002FSuspenseList\u003E\n  );\n}","lang":"jsx"};
		</script></div><p><strong>Progressive image gallery:</strong></p><div style="margin: 30px auto;" class="code-block-container "><div class="css-1vm8pxc"><div class="css-1s1lac9"><div class="css-1lyfw13"><div class="css-1xzghkg"><button class="css-1y5ulpa">Copy</button></div><div class="css-i7rnhw"><div class="css-1y4o4pq"><content-area class="css-84ojsb"><pre autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" class="
							language-jsx
							css-1ashatc
						"><div class="
				prism-line
				css-1flouoi
			" data-index="0"><code><span class="token keyword">function</span> <span class="token function">ImageGallery</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>images<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="1"><code>  <span class="token keyword">return</span> <span class="token punctuation">(</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="2"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">SuspenseList</span></span> <span class="token attr-name">revealOrder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>forwards<span class="token punctuation">&quot;</span></span> <span class="token attr-name">tail</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>hidden<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="3"><code>      <span class="token punctuation">{</span>images<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">image</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="4"><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Suspense</span></span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>image<span class="token punctuation">.</span>id<span class="token punctuation">}</span></span> <span class="token attr-name">fallback</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ImageSkeleton</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="5"><code>          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">LazyImage</span></span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>image<span class="token punctuation">.</span>url<span class="token punctuation">}</span></span> <span class="token attr-name">alt</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>image<span class="token punctuation">.</span>alt<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="6"><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Suspense</span></span><span class="token punctuation">&gt;</span></span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="7"><code>      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="8"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">SuspenseList</span></span><span class="token punctuation">&gt;</span></span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="9"><code>  <span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="10"><code><span class="token punctuation">}</span></code><br></div></pre></content-area></div></div></div></div></div><script data-name="inline-code-block-props-146" class="props">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['inline-code-block-props-146'] = {"code":"function ImageGallery({images}) {\n  return (\n    \u003CSuspenseList revealOrder=\"forwards\" tail=\"hidden\"\u003E\n      {images.map(image =\u003E (\n        \u003CSuspense key={image.id} fallback={\u003CImageSkeleton \u002F\u003E}\u003E\n          \u003CLazyImage src={image.url} alt={image.alt} \u002F\u003E\n        \u003C\u002FSuspense\u003E\n      ))}\n    \u003C\u002FSuspenseList\u003E\n  );\n}","lang":"jsx"};
		</script></div><h3 id="key-benefits">Key Benefits <a class="heading-anchor" href="#key-benefits">#</a></h3><ul><li><strong>Better UX</strong>: Coordinated loading prevents jarring layout shifts</li><li><strong>Performance</strong>: Code splitting reduces initial bundle size</li><li><strong>Flexibility</strong>: Mix and match patterns for your specific needs</li><li><strong>Crank-native</strong>: Built on Crank‚Äôs async generator foundation</li></ul><h2 id="three-async-generator-modes">Three Async Generator Modes <a class="heading-anchor" href="#three-async-generator-modes">#</a></h2><p>Async generator components operate in three distinct modes based on how they
iterate over props:</p><h3 id="sync-like-mode-wait-for-children">Sync-like Mode: Wait for Children <a class="heading-anchor" href="#sync-like-mode-wait-for-children">#</a></h3><p><strong><code class="inline">for...of</code> loop</strong>: Suspend at each yield and wait for children to complete.
Async generators using <code class="inline">for...of</code> behave exactly like sync generator
components. They suspend at each <code class="inline">yield</code> and wait for children to complete
before resuming.</p><div style="margin: 30px auto;" class="code-block-container "><div class="css-1vm8pxc"><div class="css-1s1lac9"><div class="css-1lyfw13"><div class="css-1xzghkg"><button class="css-1y5ulpa">Copy</button></div><div class="css-i7rnhw"><div class="css-1y4o4pq"><content-area class="css-84ojsb"><pre autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" class="
							language-jsx
							css-1ashatc
						"><div class="
				prism-line
				css-1flouoi
			" data-index="0"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">SyncLike</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>children<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="1"><code>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>children<span class="token punctuation">}</span> <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="2"><code>    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">yield</span> children<span class="token punctuation">;</span> <span class="token comment">// suspends here, waits for children</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="3"><code>    <span class="token comment">// result is the actual rendered value (DOM node, etc.)</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="4"><code>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Children rendered:&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="5"><code>    <span class="token comment">// this line executes only on the next render</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="6"><code>  <span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="7"><code><span class="token punctuation">}</span></code><br></div></pre></content-area></div></div></div></div></div><script data-name="inline-code-block-props-147" class="props">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['inline-code-block-props-147'] = {"code":"async function *SyncLike({children}) {\n  for ({children} of this) {\n    const result = yield children; \u002F\u002F suspends here, waits for children\n    \u002F\u002F result is the actual rendered value (DOM node, etc.)\n    console.log(\"Children rendered:\", result);\n    \u002F\u002F this line executes only on the next render\n  }\n}","lang":"jsx"};
		</script></div><h3 id="continuous-mode-race-with-children">Continuous Mode: Race with Children <a class="heading-anchor" href="#continuous-mode-race-with-children">#</a></h3><p><strong><code class="inline">for await...of</code> loop</strong>: Continue rendering while children are async.
Async generators using <code class="inline">for await...of</code> continuously resume after yielding,
enabling racing and cooperative rendering patterns.</p><div style="margin: 30px auto;" class="code-block-container "><div class="css-1vm8pxc"><div class="css-1s1lac9"><div class="css-1lyfw13"><div class="css-1xzghkg"><button class="css-1y5ulpa">Copy</button></div><div class="css-i7rnhw"><div class="css-1y4o4pq"><content-area class="css-84ojsb"><pre autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" class="
							language-jsx
							css-1ashatc
						"><div class="
				prism-line
				css-1flouoi
			" data-index="0"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">Continuous</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>children<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="1"><code>  <span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token punctuation">{</span>children<span class="token punctuation">}</span> <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="2"><code>    <span class="token keyword">const</span> promise <span class="token operator">=</span> <span class="token keyword">yield</span> children<span class="token punctuation">;</span> <span class="token comment">// doesn&#039;t suspend, continues immediately</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="3"><code>    <span class="token comment">// promise is always a Promise that resolves when children are rendered</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="4"><code>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Yielded, but continuing...&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="5"><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="6"><code>    <span class="token comment">// You can await the promise if needed</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="7"><code>    <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">await</span> promise<span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="8"><code>    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Children eventually rendered:&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="9"><code>    <span class="token comment">// suspends at the bottom of the loop</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="10"><code>  <span class="token punctuation">}</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="11"><code><span class="token punctuation">}</span></code><br></div></pre></content-area></div></div></div></div></div><script data-name="inline-code-block-props-148" class="props">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['inline-code-block-props-148'] = {"code":"async function *Continuous({children}) {\n  for await ({children} of this) {\n    const promise = yield children; \u002F\u002F doesn't suspend, continues immediately\n    \u002F\u002F promise is always a Promise that resolves when children are rendered\n    console.log(\"Yielded, but continuing...\");\n\n    \u002F\u002F You can await the promise if needed\n    const result = await promise;\n    console.log(\"Children eventually rendered:\", result);\n    \u002F\u002F suspends at the bottom of the loop\n  }\n}","lang":"jsx"};
		</script></div><h3 id="no-loop-mode-no-iterator">No-loop Mode (no iterator) <a class="heading-anchor" href="#no-loop-mode-no-iterator">#</a></h3><p>Starting in 0.7, async generators without a props iterator behave exactly like
sync generators: they execute once and suspend at <code class="inline">yield</code>.</p><div style="margin: 30px auto;" class="code-block-container "><div class="css-1vm8pxc"><div class="css-1s1lac9"><div class="css-1lyfw13"><div class="css-1xzghkg"><button class="css-1y5ulpa">Copy</button></div><div class="css-i7rnhw"><div class="css-1y4o4pq"><content-area class="css-84ojsb"><pre autocomplete="off" autocorrect="off" autocapitalize="none" spellcheck="false" class="
							language-jsx
							css-1ashatc
						"><div class="
				prism-line
				css-1flouoi
			" data-index="0"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">NoLoop</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>children<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="1"><code>  <span class="token comment">// Executes once, then suspends at yield just like sync generators</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="2"><code>  <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token keyword">yield</span> children<span class="token punctuation">;</span> <span class="token comment">// waits for children to complete</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="3"><code>  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Rendered once:&quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="4"><code>  <span class="token comment">// Any code here executes on subsequent renders</span></code><br></div><div class="
				prism-line
				css-1flouoi
			" data-index="5"><code><span class="token punctuation">}</span></code><br></div></pre></content-area></div></div></div></div></div><script data-name="inline-code-block-props-149" class="props">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['inline-code-block-props-149'] = {"code":"async function *NoLoop({children}) {\n  \u002F\u002F Executes once, then suspends at yield just like sync generators\n  const result = yield children; \u002F\u002F waits for children to complete\n  console.log(\"Rendered once:\", result);\n  \u002F\u002F Any code here executes on subsequent renders\n}","lang":"jsx"};
		</script></div><p>This is useful when converting a sync generator component to async, since the component can retain the same structure without adding a <code class="inline">for await...of</code> loop.</p><h3 id="key-differences-in-yield-behavior">Key Differences in Yield Behavior <a class="heading-anchor" href="#key-differences-in-yield-behavior">#</a></h3><p>The most important distinction is what the <code class="inline">yield</code> expression evaluates to:</p><ul><li><strong><code class="inline">for...of</code> and no-loop</strong>: <code class="inline">yield</code> returns the actual rendered result (DOM
nodes, component return values)</li><li><strong><code class="inline">for await...of</code></strong>: <code class="inline">yield</code> always returns a Promise that resolves to the
rendered result</li></ul><p>This design allows <code class="inline">for...of</code> components to easily refactor from sync
generators, while <code class="inline">for await...of</code> enables advanced async patterns like racing
and cooperative rendering.</p><div class="css-1lyshc7"><a href="https://github.com/bikeshaving/crank/edit/main/docs/guides/05-async-components.md" target="_blank" rel="noopener noreferrer" class="css-vrpffa"><svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" aria-hidden="true"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"></path></svg>Edit on GitHub</a></div></main><footer class="css-1nd56js"><nav class="css-nf2n4z"><a href="/guides/getting-started">Docs</a><a href="/blog">Blog</a><a href="/playground">Playground</a><a href="/press-kit">Press Kit</a><a href="https://github.com/bikeshaving/crank">GitHub</a><a href="https://www.npmjs.com/package/@b9g/crank">NPM</a></nav><p class="css-1st8n6b">MIT Licensed ¬∑ Made with Crank.js</p></footer><script data-name="embedded-json-150" id="static-urls">
			if (window.__embeddedJSON__ == null) {
				window.__embeddedJSON__ = {};
			}
			window.__embeddedJSON__['embedded-json-150'] = {"client.css":"\u002Fstatic\u002Fclient-bb3474147984aa38.css","@b9g\u002Fcrank":"\u002Fstatic\u002Findex-835f48d5d698f635.js","@b9g\u002Fcrank\u002Fasync":"\u002Fstatic\u002Fasync-7a0898ccf81c5403.js","@b9g\u002Fcrank\u002Fdom":"\u002Fstatic\u002Fdom-74a4cebc0c921555.js","@b9g\u002Fcrank\u002Fevent-target":"\u002Fstatic\u002Fevent-target-2c01c58f7606eeb9.js","@b9g\u002Fcrank\u002Fhtml":"\u002Fstatic\u002Fhtml-73f831a625c89975.js","@b9g\u002Fcrank\u002Fjsx-dev-runtime":"\u002Fstatic\u002Fjsx-dev-runtime-b26fe4b1616557b3.js","@b9g\u002Fcrank\u002Fjsx-runtime":"\u002Fstatic\u002Fjsx-runtime-b26fe4b1616557b3.js","@b9g\u002Fcrank\u002Fjsx-tag":"\u002Fstatic\u002Fjsx-tag-e2f0fee83a9ee90b.js","@b9g\u002Fcrank\u002Fstandalone":"\u002Fstatic\u002Fstandalone-b89867b9499f4f17.js"};
		</script><script type="module" src="/static/navbar-efb7937721dd23d2.js"></script><script type="module" src="/static/code-blocks-bda9963f4ec14503.js"></script><script type="module" src="/static/search-225966f48e2c7ecd.js"></script><script type="module" src="/static/gear-07110d36816de564.js"></script></body></html>