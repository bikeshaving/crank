<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><title>Crank.js | Special Props and Tags</title><link href="/static/index-UEEVTAOK.css" rel="stylesheet" type="text/css"><link rel="shortcut icon" href="/static/favicon.ico"><script async src="https://www.googletagmanager.com/gtag/js?id=UA-20910936-4"></script><script>
								window.dataLayer = window.dataLayer || [];
								function gtag(){dataLayer.push(arguments);}
								gtag('js', new Date());

								gtag('config', 'UA-20910936-4');
							</script></head><body><nav id="navbar" class="navbar"><div class="navbar-group"><div class="navbar-item"><a class="navbar-title-link false" href="/"><img class="navbar-logo" src="/static/logo.svg" alt=""><span>Crank.js</span></a></div><div class="navbar-item"><a class="current" href="/guides/getting-started">Docs</a></div><div class="navbar-item"><a href="/blog/">Blog</a></div></div><div class="navbar-group"><div class="navbar-item"><a href="https://github.com/bikeshaving/crank">GitHub</a></div><div class="navbar-item"><a href="http://npm.im/@bikeshaving/crank">NPM</a></div></div></nav><div class="non-footer"><div id="sidebar" class="sidebar"><h3>Guides</h3><div class="sidebar-item"><a href="/guides/getting-started" class="">Getting Started</a></div><div class="sidebar-item"><a href="/guides/elements" class="">JSX, Elements and Renderers</a></div><div class="sidebar-item"><a href="/guides/components" class="">Components</a></div><div class="sidebar-item"><a href="/guides/handling-events" class="">Handling Events</a></div><div class="sidebar-item"><a href="/guides/async-components" class="">Async Components</a></div><div class="sidebar-item"><a href="/guides/special-props-and-tags" class="current">Special Props and Tags</a></div><div class="sidebar-item"><a href="/guides/lifecycles" class="">Lifecycles</a></div><div class="sidebar-item"><a href="/guides/reusable-logic" class="">Reusable Logic</a></div><div class="sidebar-item"><a href="/guides/working-with-typescript" class="">Working with TypeScript</a></div><div class="sidebar-item"><a href="/guides/reference-for-react-developers" class="">Reference for React Developers</a></div><div class="sidebar-item"><a href="/guides/api-reference" class="">API Reference</a></div></div><main class="main"><div class="content"><h1>Special Props and Tags</h1><p>Crank provides certain APIs in the form of special props or element tags. The following is an overview of these props and tags.</p><h2>Special Props</h2><p>The following props apply to all elements, regardless of tag or renderer.</p><h3>crank-key</h3><p>By default, Crank uses an elementâ€™s tag and position to determine if it represents an update or a change to the tree. Because elements often represent stateful DOM nodes or components, it can be useful to <em>key</em> the children of an element to hint to the renderer that an element has been added, moved or removed from a parent. In Crank, we do this with the special prop <code class="inline">crank-key</code>:</p><div class="codeblock" data-code="import {createElement} from &quot;https://unpkg.com/@b9g/crank/crank&quot;;
import {renderer} from &quot;https://unpkg.com/@b9g/crank/dom&quot;;

let nextId = 0;
function *ID() {
  const id = nextId++;
  for ({} of this) {
    yield &lt;div&gt;Id: {id}&lt;/div&gt;;
  }
}

function *List() {
  let reversed = false;
  const onclick = () =&gt; {
    reversed = !reversed;
    this.refresh();
  };
  for ({} of this) {
    yield (
      &lt;div&gt;
        {
          reversed ? (
            &lt;&gt;
              &lt;ID crank-key=&quot;d&quot; /&gt;
              &lt;ID crank-key=&quot;c&quot; /&gt;
              &lt;ID crank-key=&quot;b&quot; /&gt;
              &lt;ID crank-key=&quot;a&quot; /&gt;
            &lt;/&gt;
          ) : (
            &lt;&gt;
              &lt;ID crank-key=&quot;a&quot; /&gt;
              &lt;ID crank-key=&quot;b&quot; /&gt;
              &lt;ID crank-key=&quot;c&quot; /&gt;
              &lt;ID crank-key=&quot;d&quot; /&gt;
            &lt;/&gt;
          )
        }
        &lt;button onclick={onclick}&gt;Reverse! Reverse!&lt;/button&gt;
      &lt;/div&gt;
    );
  }
}

renderer.render(&lt;List /&gt;, document.body);" data-lang="jsx live"><div class="playground"><content-area><pre class="editable editable-live" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"><div><code><span class="token keyword">import</span> <span class="token punctuation">{</span>createElement<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;https://unpkg.com/@b9g/crank/crank&quot;</span><span class="token punctuation">;</span></code><br></div><div><code><span class="token keyword">import</span> <span class="token punctuation">{</span>renderer<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;https://unpkg.com/@b9g/crank/dom&quot;</span><span class="token punctuation">;</span></code><br></div><div><code></code><br></div><div><code><span class="token keyword">let</span> nextId <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></code><br></div><div><code><span class="token keyword">function</span> <span class="token operator">*</span><span class="token constant">ID</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div><code>  <span class="token keyword">const</span> id <span class="token operator">=</span> nextId<span class="token operator">++</span><span class="token punctuation">;</span></code><br></div><div><code>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div><code>    <span class="token keyword">yield</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>Id<span class="token operator">:</span> <span class="token punctuation">{</span>id<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span></code><br></div><div><code>  <span class="token punctuation">}</span></code><br></div><div><code><span class="token punctuation">}</span></code><br></div><div><code></code><br></div><div><code><span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">List</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div><code>  <span class="token keyword">let</span> reversed <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span></code><br></div><div><code>  <span class="token keyword">const</span> <span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></code><br></div><div><code>    reversed <span class="token operator">=</span> <span class="token operator">!</span>reversed<span class="token punctuation">;</span></code><br></div><div><code>    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div><code>  <span class="token punctuation">}</span><span class="token punctuation">;</span></code><br></div><div><code>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div><code>    <span class="token keyword">yield</span> <span class="token punctuation">(</span></code><br></div><div><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span></code><br></div><div><code>        <span class="token punctuation">{</span></code><br></div><div><code>          reversed <span class="token operator">?</span> <span class="token punctuation">(</span></code><br></div><div><code>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span></code><br></div><div><code>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ID</span></span> <span class="token attr-name">crank-key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>d<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></code><br></div><div><code>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ID</span></span> <span class="token attr-name">crank-key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>c<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></code><br></div><div><code>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ID</span></span> <span class="token attr-name">crank-key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>b<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></code><br></div><div><code>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ID</span></span> <span class="token attr-name">crank-key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>a<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></code><br></div><div><code>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span></code><br></div><div><code>          <span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">(</span></code><br></div><div><code>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">&gt;</span></span></code><br></div><div><code>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ID</span></span> <span class="token attr-name">crank-key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>a<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></code><br></div><div><code>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ID</span></span> <span class="token attr-name">crank-key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>b<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></code><br></div><div><code>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ID</span></span> <span class="token attr-name">crank-key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>c<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></code><br></div><div><code>              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ID</span></span> <span class="token attr-name">crank-key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>d<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span></code><br></div><div><code>            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">&gt;</span></span></code><br></div><div><code>          <span class="token punctuation">)</span></code><br></div><div><code>        <span class="token punctuation">}</span></code><br></div><div><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onclick<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span>Reverse<span class="token operator">!</span> Reverse<span class="token operator">!</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span></code><br></div><div><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code><br></div><div><code>    <span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div><code>  <span class="token punctuation">}</span></code><br></div><div><code><span class="token punctuation">}</span></code><br></div><div><code></code><br></div><div><code>renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">List</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div></pre></content-area></div></div><p>Keys are scoped to an elementâ€™s children, and can be any JavaScript value. When rendering iterables, itâ€™s useful to key elements of the iterable, because itâ€™s common for the values of rendered iterables to added, moved or removed.</p><div class="codeblock" data-code="import {createElement} from &quot;https://unpkg.com/@b9g/crank/crank&quot;;
import {renderer} from &quot;https://unpkg.com/@b9g/crank/dom&quot;;

function *Shuffler() {
  let nextId = 0;
  const els = Array.from({length: 4}, (_, i) =&gt; &lt;span crank-key={i}&gt;{i}&lt;/span&gt;);
  while (true) {
    yield &lt;div&gt;{els}&lt;/div&gt;;
    els.reverse();
  }
}

renderer.render(&lt;Shuffler /&gt;, document.body);
console.log(document.body.innerHTML);
// &quot;&lt;div&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;/div&gt;&quot;;

const span = document.body.firstChild.firstChild;

renderer.render(&lt;Shuffler /&gt;, document.body);
console.log(document.body.innerHTML);
// &quot;&lt;div&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&quot;;

console.log(document.firstChild.lastChild === span); // true
renderer.render(&lt;Shuffler /&gt;, document.body);
console.log(document.body.innerHTML);
// &quot;&lt;div&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;/div&gt;&quot;;

console.log(document.firstChild.firstChild === span); // true" data-lang="jsx live"><div class="playground"><content-area><pre class="editable editable-live" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"><div><code><span class="token keyword">import</span> <span class="token punctuation">{</span>createElement<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;https://unpkg.com/@b9g/crank/crank&quot;</span><span class="token punctuation">;</span></code><br></div><div><code><span class="token keyword">import</span> <span class="token punctuation">{</span>renderer<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;https://unpkg.com/@b9g/crank/dom&quot;</span><span class="token punctuation">;</span></code><br></div><div><code></code><br></div><div><code><span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">Shuffler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div><code>  <span class="token keyword">let</span> nextId <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></code><br></div><div><code>  <span class="token keyword">const</span> els <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token punctuation">{</span>length<span class="token operator">:</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> i</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">crank-key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>i<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div><code>  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div><code>    <span class="token keyword">yield</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">{</span>els<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">;</span></code><br></div><div><code>    els<span class="token punctuation">.</span><span class="token function">reverse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div><code>  <span class="token punctuation">}</span></code><br></div><div><code><span class="token punctuation">}</span></code><br></div><div><code></code><br></div><div><code>renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Shuffler</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div><code><span class="token comment">// &quot;&lt;div&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;/div&gt;&quot;;</span></code><br></div><div><code></code><br></div><div><code><span class="token keyword">const</span> span <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>firstChild<span class="token punctuation">;</span></code><br></div><div><code></code><br></div><div><code>renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Shuffler</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div><code><span class="token comment">// &quot;&lt;div&gt;&lt;span&gt;3&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;0&lt;/span&gt;&lt;/div&gt;&quot;;</span></code><br></div><div><code></code><br></div><div><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>lastChild <span class="token operator">===</span> span<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code><br></div><div><code>renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Shuffler</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div><code><span class="token comment">// &quot;&lt;div&gt;&lt;span&gt;0&lt;/span&gt;&lt;span&gt;1&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&lt;span&gt;3&lt;/span&gt;&lt;/div&gt;&quot;;</span></code><br></div><div><code></code><br></div><div><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>firstChild<span class="token punctuation">.</span>firstChild <span class="token operator">===</span> span<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span></code><br></div></pre></content-area></div></div><p>All elements in the element tree can be keyed. If the element is a component element, the <code class="inline">crank-key</code> prop is erased from the props object passed to the component.</p><h3>crank-ref</h3><p>Sometimes, you may want to access the rendered value of a specific element in the element tree. To do this, you can pass a callback as the <code class="inline">crank-ref</code> prop. This callback is called with the rendered value of the element when the element has committed.</p><div class="codeblock" data-code="import {createElement} from &quot;https://unpkg.com/@b9g/crank/crank&quot;;
import {renderer} from &quot;https://unpkg.com/@b9g/crank/dom&quot;;

function *MyPlayer() {
  let audio;
  for ({} of this) {
    yield (
      &lt;div&gt;
        &lt;button onclick={() =&gt; audio.play()}&gt;Play sound&lt;/button&gt;
        &lt;audio
          src=&quot;/static/t-rex-roar.mp3&quot;
          controls={false}
          c-ref={(el) =&gt; (audio = el)}
        /&gt;
      &lt;/div&gt;
    );
  }
}

renderer.render(&lt;MyPlayer /&gt;, document.body);" data-lang="jsx live"><div class="playground"><content-area><pre class="editable editable-live" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"><div><code><span class="token keyword">import</span> <span class="token punctuation">{</span>createElement<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;https://unpkg.com/@b9g/crank/crank&quot;</span><span class="token punctuation">;</span></code><br></div><div><code><span class="token keyword">import</span> <span class="token punctuation">{</span>renderer<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;https://unpkg.com/@b9g/crank/dom&quot;</span><span class="token punctuation">;</span></code><br></div><div><code></code><br></div><div><code><span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">MyPlayer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div><code>  <span class="token keyword">let</span> audio<span class="token punctuation">;</span></code><br></div><div><code>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div><code>    <span class="token keyword">yield</span> <span class="token punctuation">(</span></code><br></div><div><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span></code><br></div><div><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onclick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> audio<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span>Play sound<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span></code><br></div><div><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>audio</span></span></code><br></div><div><code><span class="token tag">          <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>/static/t-rex-roar.mp3<span class="token punctuation">&quot;</span></span></span></code><br></div><div><code><span class="token tag">          <span class="token attr-name">controls</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token boolean">false</span><span class="token punctuation">}</span></span></span></code><br></div><div><code><span class="token tag">          <span class="token attr-name">c-ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span>audio <span class="token operator">=</span> el<span class="token punctuation">)</span><span class="token punctuation">}</span></span></span></code><br></div><div><code><span class="token tag">        <span class="token punctuation">/&gt;</span></span></code><br></div><div><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code><br></div><div><code>    <span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div><code>  <span class="token punctuation">}</span></code><br></div><div><code><span class="token punctuation">}</span></code><br></div><div><code></code><br></div><div><code>renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyPlayer</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div></pre></content-area></div></div><p>Refs can be attached to any element in the element tree, and the value passed to the callback will vary according the type of the element and the specific renderer.</p><h3>children</h3><p>The <code class="inline">children</code> prop passed to components is special because it is not usually set with JSXâ€™s <code class="inline">key=&quot;value&quot;</code> prop syntax, but by the contents between the opening and closing tags. Crank places no limitations on the types of values that can be passed into components as children, but patterns like <a href="https://reactjs.org/docs/render-props.html">render props</a> from the React community, where a callback is passed as the child of a component, should be avoided.</p><p>The actual type of the <code class="inline">children</code> prop will vary according to the number of children passed in. If a component element has no children (<code class="inline">&lt;Component/&gt;</code>), the <code class="inline">children</code> prop will be undefined, if it has one child (<code class="inline">&lt;Component&gt;&lt;Child/&gt;&lt;/Component&gt;</code>), the <code class="inline">children</code> prop will be set to that child, and if it has multiple children (<code class="inline">&lt;Component&gt;&lt;Child/&gt;&lt;Child/&gt;&lt;/Component&gt;</code>), the <code class="inline">children</code> prop will be set to an array of those children. We do this to reduce runtime memory costs. All props have to be retained between renders, and most elements contain only zero or one child, so avoiding the allocation of an extra array for every element in the tree can noticeably reduce memory requirements.</p><p>Therefore, the <code class="inline">children</code> prop should be treated as a black box, only to be rendered somewhere within a componentâ€™s returned or yielded children. Attempting to iterate over or manipulate the passed in children of a component is an anti-pattern, and you should use <a href="./handling-events#dispatching-events">event dispatch</a> or <a href="./reusable-logic#provisions">provisions</a> to coordinate ancestor and descendant components.</p><h2>Special DOM Props</h2><p>The following props are specific to host elements for the HTML and DOM renderers.</p><h3>style</h3><p>The style prop can be used to add inline styles to an element. It can either be a CSS string, in which case it works exactly as it does in HTML, or it can also be an object, in which case CSS properties can be set individually.</p><div class="codeblock" data-code="&lt;div style=&quot;color: red&quot;&gt;&lt;span style={{&quot;font-size&quot;: &quot;16px&quot;}}&gt;Hello&lt;/span&gt;&lt;/div&gt;" data-lang="jsx"><div class="playground"><content-area><pre class="editable" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"><div><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">color</span><span class="token punctuation">:</span> red</span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">style</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span><span class="token string">&quot;font-size&quot;</span><span class="token operator">:</span> <span class="token string">&quot;16px&quot;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span>Hello<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code><br></div></pre></content-area></div></div><p><strong>Note:</strong> Unlike other JSX frameworks, Crank does not camel-case style names or add pixel units to numbers.</p><h3>innerHTML</h3><p>The <code class="inline">innerHTML</code> prop can be used to set the elementâ€™s children with an HTML string.</p><p>Be careful when using the <code class="inline">innerHTML</code> prop, as passing unsanitized text inputs can lead to security vulnerabilities.</p><p>As an alternative, you can also use <a href="#raw">the special <code class="inline">Raw</code> element tag</a>, which allows to inject raw HTML or even actual DOM nodes into the element tree, without requiring a parent host element.</p><h3>Prop Naming Conventions</h3><p>Crank strives to make copying and pasting HTML into your components as easy as possible, and to this extent it allows you to use <code class="inline">class</code> and <code class="inline">for</code> as props in your elements instead of <code class="inline">className</code> and <code class="inline">htmlFor</code>.</p><div class="codeblock" data-code="&lt;label class=&quot;my-label&quot; for=&quot;my-id&quot;&gt;Label&lt;/label&gt;" data-lang="jsx"><div class="playground"><content-area><pre class="editable" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"><div><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-label<span class="token punctuation">&quot;</span></span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>my-id<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Label<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">&gt;</span></span></code><br></div></pre></content-area></div></div><p>You can still use the <code class="inline">className</code> and <code class="inline">htmlFor</code> props as well, but using the former names is preferred. This philosophy also extends to SVG elements, and you can use props like <code class="inline">clip-path</code> and <code class="inline">stroke-width</code> without having to camel case them.</p><h2>Special Tags</h2><p>Crank provides four element tags which have special meaning to the renderer, and affect element diffing and rendering output in various ways.</p><h3>Fragment</h3><p>Crank provides a <code class="inline">Fragment</code> tag, which allows you to render multiple children into a parent without wrapping them in another DOM node. Under the hood, iterables which appear in the element tree are also implicitly wrapped in a <code class="inline">Fragment</code> element by the renderer.</p><div class="codeblock" data-code="import {createElement, Fragment} from &quot;@bikeshaving/crank&quot;;
import {renderer} from &quot;@bikeshaving/crank/dom&quot;;
function Siblings() {
  return (
    &lt;Fragment&gt;
      &lt;div&gt;Sibling 1&lt;/div&gt;
      &lt;div&gt;Sibling 2&lt;/div&gt;
    &lt;/Fragment&gt;
  );
}

renderer.render(&lt;Siblings /&gt;, document.body);
console.log(document.body.innerHTML);
// &quot;&lt;div&gt;Sibling 1&lt;/div&gt;&lt;div&gt;Sibling 2&lt;/div&gt;&quot;" data-lang="jsx"><div class="playground"><content-area><pre class="editable" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"><div><code><span class="token keyword">import</span> <span class="token punctuation">{</span>createElement<span class="token punctuation">,</span> Fragment<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@bikeshaving/crank&quot;</span><span class="token punctuation">;</span></code><br></div><div><code><span class="token keyword">import</span> <span class="token punctuation">{</span>renderer<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@bikeshaving/crank/dom&quot;</span><span class="token punctuation">;</span></code><br></div><div><code><span class="token keyword">function</span> <span class="token function">Siblings</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div><code>  <span class="token keyword">return</span> <span class="token punctuation">(</span></code><br></div><div><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span></code><br></div><div><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>Sibling <span class="token number">1</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code><br></div><div><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>Sibling <span class="token number">2</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code><br></div><div><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Fragment</span></span><span class="token punctuation">&gt;</span></span></code><br></div><div><code>  <span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div><code><span class="token punctuation">}</span></code><br></div><div><code></code><br></div><div><code>renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Siblings</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span> document<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div><code><span class="token comment">// &quot;&lt;div&gt;Sibling 1&lt;/div&gt;&lt;div&gt;Sibling 2&lt;/div&gt;&quot;</span></code><br></div></pre></content-area></div></div><h3>Copy</h3><p>Itâ€˜s often fine to rerender Crank components, because elements are diffed, persistent between renders, and unnecessary mutations usually avoided. However, you might want to prevent a child from updating when the parent rerenders, perhaps because a certain prop hasnâ€™t changed, because you want to batch updates from the parent, or as a performance optimization. To do this, you can use the <code class="inline">Copy</code> tag to indicate to Crank that you donâ€™t want to update a previously rendered element in that same position.</p><div class="codeblock" data-code="function equals(props, newProps) {
  for (const name in {...props, ...newProps}) {
    if (props[name] !== newProps[name]) {
      return false;
    }
  }

  return true;
}

function memo(Component) {
  return function *Wrapped({props}) {
    yield &lt;Component {...props} /&gt;;
    for (const newProps of this) {
      if (equals(props, newProps)) {
        yield &lt;Copy /&gt;;
      } else {
        yield &lt;Component {...newProps} /&gt;;
      }

      props = newProps;
    }
  };
}" data-lang="jsx"><div class="playground"><content-area><pre class="editable" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"><div><code><span class="token keyword">function</span> <span class="token function">equals</span><span class="token punctuation">(</span><span class="token parameter">props<span class="token punctuation">,</span> newProps</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div><code>  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> name <span class="token keyword">in</span> <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">,</span> <span class="token operator">...</span>newProps<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div><code>    <span class="token keyword">if</span> <span class="token punctuation">(</span>props<span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">!==</span> newProps<span class="token punctuation">[</span>name<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div><code>      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span></code><br></div><div><code>    <span class="token punctuation">}</span></code><br></div><div><code>  <span class="token punctuation">}</span></code><br></div><div><code></code><br></div><div><code>  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span></code><br></div><div><code><span class="token punctuation">}</span></code><br></div><div><code></code><br></div><div><code><span class="token keyword">function</span> <span class="token function">memo</span><span class="token punctuation">(</span><span class="token parameter">Component</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div><code>  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token operator">*</span><span class="token function">Wrapped</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>props<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div><code>    <span class="token keyword">yield</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Component</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span></code><br></div><div><code>    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> newProps <span class="token keyword">of</span> <span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div><code>      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">equals</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> newProps<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div><code>        <span class="token keyword">yield</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Copy</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span></code><br></div><div><code>      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></code><br></div><div><code>        <span class="token keyword">yield</span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Component</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token operator">...</span>newProps<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">;</span></code><br></div><div><code>      <span class="token punctuation">}</span></code><br></div><div><code></code><br></div><div><code>      props <span class="token operator">=</span> newProps<span class="token punctuation">;</span></code><br></div><div><code>    <span class="token punctuation">}</span></code><br></div><div><code>  <span class="token punctuation">}</span><span class="token punctuation">;</span></code><br></div><div><code><span class="token punctuation">}</span></code><br></div></pre></content-area></div></div><p>In this example, <code class="inline">memo</code> is a higher-order component, a function which takes a component and returns a component. This wrapper component compares old and new props and yields a <code class="inline">Copy</code> element if every prop is shallowly equal. A <code class="inline">Copy</code> element can appear anywhere in an element tree to prevent rerenderings, and the only props <code class="inline">Copy</code> elements take are the <code class="inline">crank-key</code> and <code class="inline">crank-ref</code> props, which work as expected.</p><h3>Portal</h3><p>Sometimes you may want to render into a DOM node which isnâ€™t the current parent element, or even a part of the currently rendered DOM tree. You can do this with the <code class="inline">Portal</code> tag, passing in a DOM node as its <code class="inline">root</code> prop. The Portalâ€™s children will be rendered into the specified root element, just as if Renderer.render was called with the root value as its second argument.</p><div class="codeblock" data-code="/** @jsx createElement */
import {createElement, Portal} from &quot;@bikeshaving/crank&quot;;
import {renderer} from &quot;@bikeshaving/crank/dom&quot;;
const root1 = document.createElement(&quot;div&quot;);
const root2 = document.createElement(&quot;div&quot;);
function MyComponent() {
  return (
    &lt;div&gt;
      &lt;div&gt;This div is rendered into root1&lt;/div&gt;
      &lt;Portal root={root2}&gt;
        &lt;div&gt;This div is rendered into root2&lt;/div&gt;
      &lt;/Portal&gt;
    &lt;/div&gt;
  );
}

renderer.render(&lt;MyComponent /&gt;, root1);
console.log(root1.innerHTML);
// &quot;&lt;div&gt;&lt;div&gt;This div is rendered into root1&lt;/div&gt;&lt;/div&gt;&quot;
console.log(root2.innerHTML);
// &quot;&lt;div&gt;This div is rendered into root2&lt;/div&gt;&quot;" data-lang="jsx"><div class="playground"><content-area><pre class="editable" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"><div><code><span class="token comment">/** @jsx createElement */</span></code><br></div><div><code><span class="token keyword">import</span> <span class="token punctuation">{</span>createElement<span class="token punctuation">,</span> Portal<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@bikeshaving/crank&quot;</span><span class="token punctuation">;</span></code><br></div><div><code><span class="token keyword">import</span> <span class="token punctuation">{</span>renderer<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@bikeshaving/crank/dom&quot;</span><span class="token punctuation">;</span></code><br></div><div><code><span class="token keyword">const</span> root1 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div><code><span class="token keyword">const</span> root2 <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div><code><span class="token keyword">function</span> <span class="token function">MyComponent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div><code>  <span class="token keyword">return</span> <span class="token punctuation">(</span></code><br></div><div><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span></code><br></div><div><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>This div is rendered into root1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code><br></div><div><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Portal</span></span> <span class="token attr-name">root</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>root2<span class="token punctuation">}</span></span><span class="token punctuation">&gt;</span></span></code><br></div><div><code>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>This div is rendered into root2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code><br></div><div><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Portal</span></span><span class="token punctuation">&gt;</span></span></code><br></div><div><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code><br></div><div><code>  <span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div><code><span class="token punctuation">}</span></code><br></div><div><code></code><br></div><div><code>renderer<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MyComponent</span></span> <span class="token punctuation">/&gt;</span></span><span class="token punctuation">,</span> root1<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>root1<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div><code><span class="token comment">// &quot;&lt;div&gt;&lt;div&gt;This div is rendered into root1&lt;/div&gt;&lt;/div&gt;&quot;</span></code><br></div><div><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>root2<span class="token punctuation">.</span>innerHTML<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div><code><span class="token comment">// &quot;&lt;div&gt;This div is rendered into root2&lt;/div&gt;&quot;</span></code><br></div></pre></content-area></div></div><p>This tag is useful for creating modals or tooltips, which usually need to be rendered into separate DOM elements at the bottom of the page for visibility reasons. Events dispatched from a <code class="inline">Portal</code> elementâ€˜s child components via the <code class="inline">dispatchEvent</code> method will still bubble into parent components.</p><h3>Raw</h3><p>Sometimes, you may want to insert raw HTML or actual DOM nodes directly into the element tree. Crank allows you to do this with the <code class="inline">Raw</code> element. The <code class="inline">Raw</code> element takes a <code class="inline">value</code> prop which is interpreted by the renderer. For the DOM renderer, if <code class="inline">value</code> is an HTML string, the renderer will parse and insert the resulting DOM nodes. If the value is already a DOM node, Crank will insert them in place.</p><div class="codeblock" data-code="/** @jsx createElement */
import {createElement, Raw} from &quot;@bikeshaving/crank&quot;;
import marked from &quot;marked&quot;;
function MarkdownViewer({markdown=&quot;&quot;}) {
  const html = marked(markdown);
  return (
    &lt;div&gt;
      &lt;Raw value={html} /&gt;
    &lt;/div&gt;
  );
}" data-lang="jsx"><div class="playground"><content-area><pre class="editable" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"><div><code><span class="token comment">/** @jsx createElement */</span></code><br></div><div><code><span class="token keyword">import</span> <span class="token punctuation">{</span>createElement<span class="token punctuation">,</span> Raw<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;@bikeshaving/crank&quot;</span><span class="token punctuation">;</span></code><br></div><div><code><span class="token keyword">import</span> marked <span class="token keyword">from</span> <span class="token string">&quot;marked&quot;</span><span class="token punctuation">;</span></code><br></div><div><code><span class="token keyword">function</span> <span class="token function">MarkdownViewer</span><span class="token punctuation">(</span><span class="token punctuation">{</span>markdown<span class="token operator">=</span><span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></code><br></div><div><code>  <span class="token keyword">const</span> html <span class="token operator">=</span> <span class="token function">marked</span><span class="token punctuation">(</span>markdown<span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div><code>  <span class="token keyword">return</span> <span class="token punctuation">(</span></code><br></div><div><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span></code><br></div><div><code>      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Raw</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>html<span class="token punctuation">}</span></span> <span class="token punctuation">/&gt;</span></span></code><br></div><div><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span></code><br></div><div><code>  <span class="token punctuation">)</span><span class="token punctuation">;</span></code><br></div><div><code><span class="token punctuation">}</span></code><br></div></pre></content-area></div></div><p>Be careful when using <code class="inline">Raw</code> elements, as passing unsanitized text inputs can lead to security vulnerabilities.</p></div></main></div><script src="/static/index-FZKVRLRI.js"></script></body></html>